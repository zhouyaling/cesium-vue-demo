/*! Released Version v3.0.6,BUILD 3160. Fengmap Javascript SDK, see: https://www.fengmap.com for details */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.fengmap=n():t.fengmap=n()}(this,function(){return i=[function(t,n,i){var e;function ns(t,n,i){return(ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,i){t=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=ss(t)););return t}(t,n);if(t){n=Object.getOwnPropertyDescriptor(t,n);return n.get?n.get.call(i):n.value}})(t,n,i||t)}function is(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}function r(t,n){return(r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function es(i){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=ss(i);return rs(this,e?(t=ss(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function rs(t,n){if(n&&("object"===s(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return us(t)}function us(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ss(t){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hs(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function gs(t,n,i){return n&&u(t.prototype,n),i&&u(t,i),t}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e=function(t){"use strict";"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");for(var n=Object(this),i=Math.max(Math.min(n.length,9007199254740991),0)||0,e=((e=1 in arguments&&parseInt(Number(arguments[1]),10)||0)<0?Math.max(i+e,0):Math.min(e,i)),r=((r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i)<0?Math.max(i+arguments[2],0):Math.min(r,i));e<r;)n[e]=t,++e;return n},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E};var a,A,C,I,i,e,r=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"equalsWithTolerance",value:function(t,n,i){return Math.abs(t-n)<=i}}]),t}();function l(t){this.message=t}function f(t,n){this.low=0|n,this.high=0|t}function c(){}function u(){}function s(){}function n(){}function h(){}function v(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}r.constructor_=function(){},f.toBinaryString=function(t){for(var n="",i=2147483648;0<i;i>>>=1)n+=(t.high&i)===i?"1":"0";for(i=2147483648;0<i;i>>>=1)n+=(t.low&i)===i?"1":"0";return n},c.isNaN=function(t){return Number.isNaN(t)},c.isInfinite=function(t){return!Number.isFinite(t)},c.MAX_VALUE=Number.MAX_VALUE,"function"==typeof Float64Array&&"function"==typeof Int32Array?(i=new Float64Array(1),e=new Int32Array(i.buffer),c.doubleToLongBits=function(t){i[0]=t;var n=0|e[0],t=0|e[1];return 2146435072==(2146435072&t)&&0!=(1048575&t)&&0!==n&&(n=0,t=2146959360),new f(t,n)},c.longBitsToDouble=function(t){return e[0]=t.low,e[1]=t.high,i[0]}):(a=Math.log2,A=Math.floor,C=Math.pow,I=function(){for(var t=53;0<t;t--){var n=C(2,t)-1;if(A(a(n))+1===t)return n}return 0}(),c.doubleToLongBits=function(t){var n,i,e,r,u,s,h,g,o;if(t<0||1/t===Number.NEGATIVE_INFINITY?(s=1<<31,t=-t):s=0,0===t)return new f(g=s,o=0);if(t===1/0)return new f(g=2146435072|s,o=0);if(t!=t)return new f(g=2146959360,o=0);if(o=r=0,1<(n=A(t)))if(n<=I)g=(r=A(a(n)))<=20?(o=0,n<<20-r&1048575):(o=n%(i=C(2,e=r-20))<<32-e,n/i&1048575);else for(e=n,o=0;0!==(e=A(i=e/2));)r++,o>>>=1,o|=(1&g)<<31,g>>>=1,i!==e&&(g|=524288);if(h=r+1023,u=0===n,n=t-n,r<52&&0!==n)for(e=0;;){if(1<=(i=2*n)?(n=i-1,u?(h--,u=!1):(e<<=1,e|=1,r++)):(n=i,u?0==--h&&(r++,u=!1):(e<<=1,r++)),20===r)g|=e,e=0;else if(52===r){o|=e;break}if(1===i){r<20?g|=e<<20-r:r<52&&(o|=e<<52-r);break}}return g|=h<<20,new f(g|=s,o)},c.longBitsToDouble=function(t){for(var n=t.high,i=t.low,e=n&1<<31?-1:1,t=((2146435072&n)>>20)-1023,r=0,u=1<<19,s=1;s<=20;s++)n&u&&(r+=C(2,-s)),u>>>=1;for(u=1<<31,s=21;s<=52;s++)i&u&&(r+=C(2,-s)),u>>>=1;if(-1023===t){if(0===r)return 0*e;t=-1022}else{if(1024===t)return 0===r?e/0:NaN;r+=1}return e*r*C(2,t)}),(v.prototype=Object.create(Error.prototype)).constructor=Error;var g=function(){is(i,v);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();g.constructor_=function(){0===arguments.length?v.constructor_.call(this):1===arguments.length&&v.constructor_.call(this,arguments[0])};var y=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)e.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new g("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length)e.isTrue(arguments[0],null);else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(!t)throw null===n?new g:new g(n)}}},{key:"equals",value:function(){if(2===arguments.length)e.equals(arguments[0],arguments[1],null);else if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];if(!n.equals(t))throw new g("Expected "+t+" but encountered "+n+(null!==i?": "+i:""))}}}]),e}();y.constructor_=function(){};var k=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"setOrdinate",value:function(t,n){switch(t){case i.X:this.x=n;break;case i.Y:this.y=n;break;case i.Z:this.z=n;break;default:throw new l("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var n=arguments[0],t=arguments[1];return!!r.equalsWithTolerance(this.x,n.x,t)&&!!r.equalsWithTolerance(this.y,n.y,t)}}},{key:"getOrdinate",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.z}throw new l("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||c.isNaN(this.z)&&c.isNaN(t.z))}},{key:"equals",value:function(t){return t instanceof i&&this.equals2D(t)}},{key:"equalInZ",value:function(t,n){return r.equalsWithTolerance(this.z,t.z,n)}},{key:"compareTo",value:function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return y.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+")"}},{key:"distance3D",value:function(t){var n=this.x-t.x,i=this.y-t.y,t=this.z-t.z;return Math.sqrt(n*n+i*i+t*t)}},{key:"distance",value:function(t){var n=this.x-t.x,t=this.y-t.y;return Math.sqrt(n*n+t*t)}},{key:"hashCode",value:function(){return 37*(629+i.hashCode(this.x))+i.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.z}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[u,s,h]}}],[{key:"hashCode",value:function(){if(1===arguments.length&&"number"==typeof arguments[0]){var t=c.doubleToLongBits(arguments[0]);return Math.trunc(t^t>>>32)}}}]),i}(),o=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"compare",value:function(t,n){var i=t,t=n,n=e.compare(i.x,t.x);if(0!==n)return n;n=e.compare(i.y,t.y);return 0!==n?n:this.u<=2?0:e.compare(i.z,t.z)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[n]}}],[{key:"compare",value:function(t,n){return t<n?-1:n<t?1:c.isNaN(t)?c.isNaN(n)?0:-1:c.isNaN(n)?1:0}}]),e}();function d(t,n){return t.interfaces_&&-1<t.interfaces_.indexOf(n)}function w(){}function m(){}function p(t){this.message=t||""}function M(){}function b(t){this.message=t||""}function E(t){this.message=t||""}function S(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}o.constructor_=function(){if(this.u=2,0===arguments.length)o.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new l("only 2 or 3 dimensions may be specified");this.u=t}},k.DimensionalComparator=o,k.constructor_=function(){var t,n,i;this.x=null,this.y=null,this.z=null,0===arguments.length?k.constructor_.call(this,0,0):1===arguments.length?k.constructor_.call(this,(i=arguments[0]).x,i.y,i.z):2===arguments.length?k.constructor_.call(this,arguments[0],arguments[1],k.NULL_ORDINATE):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.x=t,this.y=n,this.z=i)},k.serialVersionUID=0x5cbf2c235c7e5800,k.NULL_ORDINATE=c.NaN,k.X=0,k.Y=1,k.Z=2,w.prototype.hasNext=function(){},w.prototype.next=function(){},w.prototype.remove=function(){},m.prototype.add=function(){},m.prototype.addAll=function(){},m.prototype.isEmpty=function(){},m.prototype.iterator=function(){},m.prototype.size=function(){},m.prototype.toArray=function(){},m.prototype.remove=function(){},(p.prototype=new Error).name="IndexOutOfBoundsException",((M.prototype=Object.create(m.prototype)).constructor=M).prototype.get=function(){},M.prototype.set=function(){},M.prototype.isEmpty=function(){},(b.prototype=new Error).name="NoSuchElementException",(E.prototype=new Error).name="OperationNotSupported",((S.prototype=Object.create(M.prototype)).constructor=S).prototype.ensureCapacity=function(){},S.prototype.interfaces_=[M,m],S.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,0,arguments[1]),!0},S.prototype.clear=function(){this.array_=[]},S.prototype.addAll=function(t){for(var n=t.iterator();n.hasNext();)this.add(n.next());return!0},S.prototype.set=function(t,n){var i=this.array_[t];return this.array_[t]=n,i},S.prototype.iterator=function(){return new x(this)},S.prototype.get=function(t){if(t<0||t>=this.size())throw new p;return this.array_[t]},S.prototype.isEmpty=function(){return 0===this.array_.length},S.prototype.size=function(){return this.array_.length},S.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t},S.prototype.remove=function(t){for(var n=!1,i=0,e=this.array_.length;i<e;i++)if(this.array_[i]===t){this.array_.splice(i,1),n=!0;break}return n},S.prototype.removeAll=function(t){for(var n=t.iterator();n.hasNext();)this.remove(n.next());return!0};var x=function(t){this.arrayList_=t,this.position_=0};x.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new b;return this.arrayList_.get(this.position_++)},x.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},x.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},x.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};var R=function(){is(a,S);var n=es(a);function a(){var t;return hs(this,a),t=n.call(this),a.constructor_.apply(us(t),arguments),t}return gs(a,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&d(arguments[0],m)){for(var t=arguments[0],n=arguments[1],i=!1,e=t.iterator();e.hasNext();)this.add(e.next(),n),i=!0;return i}return ns(ss(a.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=ns(ss(a.prototype),"clone",this).call(this),n=0;n<this.size();n++)t.add(n,this.get(n).clone());return t}},{key:"toCoordinateArray",value:function(){return this.toArray(a.coordArrayType)}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];ns(ss(a.prototype),"add",this).call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof k&&"boolean"==typeof arguments[1]){var n=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(n))return null;ns(ss(a.prototype),"add",this).call(this,n)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],e=arguments[1];if(arguments[2])for(var r=0;r<i.length;r++)this.add(i[r],e);else for(r=i.length-1;0<=r;r--)this.add(i[r],e);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof k){var t=arguments[0],u=arguments[1];if(!arguments[2]){n=this.size();if(0<n){if(0<t&&this.get(t-1).equals2D(u))return null;if(t<n&&this.get(t).equals2D(u))return null}}ns(ss(a.prototype),"add",this).call(this,t,u)}}else if(4===arguments.length){for(var s=arguments[0],h=arguments[1],u=arguments[2],g=arguments[3],o=g<u?-1:1,r=u;r!==g;r+=o)this.add(s[r],h);return!0}}},{key:"closeRing",value:function(){0<this.size()&&this.add(new k(this.get(0)),!1)}},{key:"getClass",value:function(){return a}},{key:"interfaces_",get:function(){return[]}}]),a}();R.constructor_=function(){var t,n;0===arguments.length||(1===arguments.length?(this.ensureCapacity((n=arguments[0]).length),this.add(n,!0)):2===arguments.length&&(t=arguments[0],n=arguments[1],this.ensureCapacity(t.length),this.add(t,n)))},R.coordArrayType=new Array(0).fill(null);var T=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;return this.isNull()?t.isNull():this.h===t.getMaxX()&&this.g===t.getMaxY()&&this.C===t.getMinX()&&this.I===t.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new r;var n=(this.C>t.C?this:t).C,i=(this.I>t.I?this:t).I;return new r(n,(this.h<t.h?this:t).h,i,(this.g<t.g?this:t).g)}},{key:"isNull",value:function(){return this.h<this.C}},{key:"getMaxX",value:function(){return this.h}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof r){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this.C&&n.getMaxX()<=this.h&&n.getMinY()>=this.I&&n.getMaxY()<=this.g}}else if(2===arguments.length){t=arguments[0],n=arguments[1];return!this.isNull()&&t>=this.C&&t<=this.h&&n>=this.I&&n<=this.g}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.C>this.h||t.h<this.C||t.I>this.g||t.g<this.I)}if(arguments[0]instanceof k){t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof k&&arguments[1]instanceof k){var n=arguments[0],i=arguments[1];return!(this.isNull()||(n.x<i.x?n:i).x>this.h||(n.x>i.x?n:i).x<this.C||(n.y<i.y?n:i).y>this.g||(n.y>i.y?n:i).y<this.I)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.h||n<this.C||i>this.g||i<this.I)}}}},{key:"getMinY",value:function(){return this.I}},{key:"getMinX",value:function(){return this.C}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof r){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this.C=n.getMinX(),this.h=n.getMaxX(),this.I=n.getMinY(),this.g=n.getMaxY()):(n.C<this.C&&(this.C=n.C),n.h>this.h&&(this.h=n.h),n.I<this.I&&(this.I=n.I),n.g>this.g&&(this.g=n.g))}}else 2===arguments.length&&(t=arguments[0],n=arguments[1],this.isNull()?(this.C=t,this.h=t,this.I=n,this.g=n):(t<this.C&&(this.C=t),t>this.h&&(this.h=t),n<this.I&&(this.I=n),n>this.g&&(this.g=n)))}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t<n?t:n}},{key:"getWidth",value:function(){return this.isNull()?0:this.h-this.C}},{key:"compareTo",value:function(t){return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this.C<t.C?-1:this.C>t.C?1:this.I<t.I?-1:this.I>t.I?1:this.h<t.h?-1:this.h>t.h?1:this.g<t.g?-1:this.g>t.g?1:0}},{key:"translate",value:function(t,n){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+n,this.getMaxY()+n)}},{key:"toString",value:function(){return"Env["+this.C+" : "+this.h+", "+this.I+" : "+this.g+"]"}},{key:"setToNull",value:function(){this.C=0,this.h=-1,this.I=0,this.g=-1}},{key:"getHeight",value:function(){return this.isNull()?0:this.g-this.I}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return n<t?t:n}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var n=arguments[0],t=arguments[1];if(this.isNull())return null;this.C-=n,this.h+=n,this.I-=t,this.g+=t,(this.C>this.h||this.I>this.g)&&this.setToNull()}}},{key:"contains",value:function(){return 1===arguments.length?arguments[0]instanceof r||arguments[0]instanceof k?this.covers(arguments[0]):void 0:2===arguments.length?this.covers(arguments[0],arguments[1]):void 0}},{key:"centre",value:function(){return this.isNull()?null:new k((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){var t,n,i,e;0===arguments.length?this.setToNull():1===arguments.length?arguments[0]instanceof k?this.init((t=arguments[0]).x,t.x,t.y,t.y):arguments[0]instanceof r&&(this.C=(n=arguments[0]).C,this.h=n.h,this.I=n.I,this.g=n.g):2===arguments.length?this.init((i=arguments[0]).x,(e=arguments[1]).x,i.y,e.y):4===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],t<n?(this.C=t,this.h=n):(this.C=n,this.h=t),i<e?(this.I=i,this.g=e):(this.I=e,this.g=i))}},{key:"getMaxY",value:function(){return this.g}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var n=0;this.h<t.C?n=t.C-this.h:this.C>t.h&&(n=this.C-t.h);var i=0;return this.g<t.I?i=t.I-this.g:this.I>t.g&&(i=this.I-t.g),0===n?i:0===i?n:Math.sqrt(n*n+i*i)}},{key:"hashCode",value:function(){return 37*(37*(37*(629+k.hashCode(this.C))+k.hashCode(this.h))+k.hashCode(this.I))+k.hashCode(this.g)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[u,h]}}],[{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];return i.x>=(t.x<n.x?t:n).x&&i.x<=(t.x>n.x?t:n).x&&i.y>=(t.y<n.y?t:n).y&&i.y<=(t.y>n.y?t:n).y}if(4===arguments.length){var e=arguments[0],r=arguments[1],u=arguments[2],s=arguments[3],h=Math.min(u.x,s.x),i=Math.max(u.x,s.x),t=Math.min(e.x,r.x),n=Math.max(e.x,r.x);return!(i<t||n<h||(h=Math.min(u.y,s.y),i=Math.max(u.y,s.y),t=Math.min(e.y,r.y),n=Math.max(e.y,r.y),i<t||n<h))}}}]),r}();function N(){}T.constructor_=function(){var t,n;this.C=null,this.h=null,this.I=null,this.g=null,0===arguments.length?this.init():1===arguments.length?arguments[0]instanceof k?this.init((n=arguments[0]).x,n.x,n.y,n.y):arguments[0]instanceof T&&this.init(arguments[0]):2===arguments.length?this.init((t=arguments[0]).x,(n=arguments[1]).x,t.y,n.y):4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},T.serialVersionUID=0x51845cd552189800;var P=function(){is(i,N);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();function O(t){this.str=t}function L(t){this.value=t}function D(){}P.constructor_=function(){N.constructor_.call(this,"Projective point not representable on the Cartesian plane.")},O.prototype.append=function(t){this.str+=t},O.prototype.setCharAt=function(t,n){this.str=this.str.substr(0,t)+n+this.str.substr(t+1)},O.prototype.toString=function(t){return this.str},L.prototype.intValue=function(){return this.value},L.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},L.isNaN=function(t){return Number.isNaN(t)},D.isWhitespace=function(t){return t<=32&&0<=t||127==t},D.toUpperCase=function(t){return t.toUpperCase()};var _=function(){function I(){hs(this,I),I.constructor_.apply(this,arguments)}return gs(I,[{key:"le",value:function(t){return this.f<t.f||this.f===t.f&&this.v<=t.v}},{key:"extractSignificantDigits",value:function(t,n){var i=this.abs(),e=I.magnitude(i.f),r=I.TEN.pow(e);(i=i.divide(r)).gt(I.TEN)?(i=i.divide(I.TEN),e+=1):i.lt(I.ONE)&&(i=i.multiply(I.TEN),--e);for(var u=e+1,s=new O,h=I.MAX_PRINT_DIGITS-1,g=0;g<=h;g++){t&&g===u&&s.append(".");var o=Math.trunc(i.f);if(o<0)break;var a=!1,A=0,A=9<o?(a=!0,"9"):"0"+o;s.append(A),i=i.subtract(I.valueOf(o)).multiply(I.TEN),a&&i.selfAdd(I.TEN);o=!0,a=I.magnitude(i.f);if(!(o=a<0&&Math.abs(a)>=h-g?!1:o))break}return n[0]=e,s.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this.f+this.v}},{key:"subtract",value:function(){if(arguments[0]instanceof I){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0])return this.add(-arguments[0])}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof I){var t=arguments[0];return this.f===t.f&&this.v===t.v}}},{key:"isZero",value:function(){return 0===this.f&&0===this.v}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof I){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.f,-t.v)}if("number"==typeof arguments[0]){t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];return this.selfDivide(t.f,t.v)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var n,i,e=arguments[0],r=null,u=null,s=this.f/e,h=(r=(i=I.SPLIT*s)-(i-s))*(u=(h=I.SPLIT*e)-(h-e))-(n=s*e)+r*(t=e-u)+(r=s-r)*u+r*t;return h=s+(i=(this.f-n-h+this.v-s*arguments[1])/e),this.f=h,this.v=s-h+i,this}}},{key:"dump",value:function(){return"DD<"+this.f+", "+this.v+">"}},{key:"divide",value:function(){if(arguments[0]instanceof I){var t,n,i=arguments[0],e=null,r=null,u=null,s=(t=this.f/i.f)-(e=(u=I.SPLIT*t)-(u-t)),h=e*(r=(h=I.SPLIT*i.f)-(h-i.f))-(n=t*i.f)+e*(e=i.f-r)+s*r+s*e;return new I(h=t+(u=(this.f-n-h+this.v-t*i.v)/i.f),t-h+u)}if("number"==typeof arguments[0]){u=arguments[0];return c.isNaN(u)?I.createNaN():I.copy(this).selfDivide(u,0)}}},{key:"ge",value:function(t){return this.f>t.f||this.f===t.f&&this.v>=t.v}},{key:"pow",value:function(t){if(0===t)return I.valueOf(1);var n=new I(this),i=I.valueOf(1),e=Math.abs(t);if(1<e)for(;0<e;)e%2==1&&i.selfMultiply(n),0<(e/=2)&&(n=n.sqr());else i=n;return t<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return I.NaN;var t=Math.ceil(this.f),n=0;return new I(t,n=t===this.f?Math.ceil(this.v):n)}},{key:"compareTo",value:function(t){return this.f<t.f?-1:this.f>t.f?1:this.v<t.v?-1:this.v>t.v?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){return arguments[0]instanceof I||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return I.valueOf(0);if(this.isNegative())return I.NaN;var t=1/Math.sqrt(this.f),n=this.f*t,n=I.valueOf(n),t=this.subtract(n.sqr()).f*(.5*t);return n.add(t)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];return this.selfAdd(t.f,t.v)}if("number"==typeof arguments[0]){var n=arguments[0],i=null,e=null,r=null,u=null,s=null,h=null,u=(r=this.f+n)-(s=r-this.f),e=(h=(u=n-s+(this.f-u))+this.v)+(r-(i=r+h));return this.f=i+e,this.v=e+(i-this.f),this}}else if(2===arguments.length){var g=arguments[0],o=arguments[1],i=null,r=(e=null,null),h=s=u=null;r=this.f+g,n=this.v+o,u=r-(s=r-this.f);t=n-(h=n-this.v),e=(i=r+(s=(u=g-s+(this.f-u))+n))+(s=o-h+(this.v-t)+(e=s+(r-i))),i=s+(i-e);return this.f=e,this.v=i,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];return this.selfMultiply(t.f,t.v)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var n,i=arguments[0],e=null,r=null,u=(n=I.SPLIT*this.f)-this.f,s=this.f-(u=n-u),i=(n=this.f*i)+(r=u*(e=(r=I.SPLIT*i)-(e=r-i))-n+u*(t=i-e)+s*e+s*t+(this.f*arguments[1]+this.v*i)),u=r+(n-i);return this.f=i,this.v=u,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return I.NaN;var t=Math.floor(this.f),n=0;return new I(t,n=t===this.f?Math.floor(this.v):n)}},{key:"negate",value:function(){return this.isNaN()?this:new I(-this.f,-this.v)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof I){var t=arguments[0];return t.isNaN()?I.createNaN():I.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){t=arguments[0];return c.isNaN(t)?I.createNaN():I.copy(this).selfMultiply(t,0)}}},{key:"isNaN",value:function(){return c.isNaN(this.f)}},{key:"intValue",value:function(){return Math.trunc(this.f)}},{key:"toString",value:function(){var t=I.magnitude(this.f);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),t=n[0]+1,n=i;return"."===i.charAt(0)?n="0"+i:t<0?n="0."+I.stringOfChar("0",-t)+i:-1===i.indexOf(".")&&(t=t-i.length,n=i+I.stringOfChar("0",t)+".0"),this.isNegative()?"-"+n:n}},{key:"reciprocal",value:function(){var t,n,i,e=null,r=(t=1/this.f)-(e=(i=I.SPLIT*t)-(i-t)),u=(s=I.SPLIT*this.f)-this.f,s=t+(i=(1-(n=t*this.f)-(e*(u=s-u)-n+e*(e=this.f-u)+r*u+r*e)-t*this.v)/this.f);return new I(s,t-s+i)}},{key:"toSciNotation",value:function(){if(this.isZero())return I.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),t=I.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);n="";1<i.length&&(n=i.substring(1));n=i.charAt(0)+"."+n;return this.isNegative()?"-"+n+t:n+t}},{key:"abs",value:function(){return this.isNaN()?I.NaN:this.isNegative()?this.negate():new I(this)}},{key:"isPositive",value:function(){return 0<this.f||0===this.f&&0<this.v}},{key:"lt",value:function(t){return this.f<t.f||this.f===t.f&&this.v<t.v}},{key:"add",value:function(){if(arguments[0]instanceof I){var t=arguments[0];return I.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){t=arguments[0];return I.copy(this).selfAdd(t)}}},{key:"init",value:function(){var t,n;1===arguments.length?"number"==typeof arguments[0]?(this.f=arguments[0],this.v=0):arguments[0]instanceof I&&(this.f=(n=arguments[0]).f,this.v=n.v):2===arguments.length&&(t=arguments[0],n=arguments[1],this.f=t,this.v=n)}},{key:"gt",value:function(t){return this.f>t.f||this.f===t.f&&this.v>t.v}},{key:"isNegative",value:function(){return this.f<0||0===this.f&&this.v<0}},{key:"trunc",value:function(){return this.isNaN()?I.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return 0<this.f?1:this.f<0?-1:0<this.v?1:this.v<0?-1:0}},{key:"getClass",value:function(){return I}},{key:"interfaces_",get:function(){return[h,u,s]}}],[{key:"sqr",value:function(t){return I.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){return"string"==typeof arguments[0]?I.parse(arguments[0]):"number"==typeof arguments[0]?new I(arguments[0]):void 0}},{key:"sqrt",value:function(t){return I.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,i=t.length;D.isWhitespace(t.charAt(n));)n++;var e=!1;n<i&&("-"!==(C=t.charAt(n))&&"+"!==C||(n++,"-"===C&&(e=!0)));for(var r=new I,u=0,s=0,h=0;!(i<=n);){var g=t.charAt(n);if(n++,D.isDigit(g)){var o=g-"0";r.selfMultiply(I.TEN),r.selfAdd(o),u++}else{if("."!==g){if("e"!==g&&"E"!==g)throw new NumberFormatException("Unexpected character '"+g+"' at position "+n+" in string "+t);g=t.substring(n);try{h=L.parseInt(g)}catch(n){throw n instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+g+" in string "+t):n}break}s=u}}var a,A=r,C=u-s-h;return 0==C?A=r:0<C?(a=I.TEN.pow(C),A=r.divide(a)):C<0&&(a=I.TEN.pow(-C),A=r.multiply(a)),e?A.negate():A}},{key:"createNaN",value:function(){return new I(c.NaN,c.NaN)}},{key:"copy",value:function(t){return new I(t)}},{key:"magnitude",value:function(t){var n=Math.abs(t),t=Math.log(n)/Math.log(10),t=Math.trunc(Math.floor(t));return 10*Math.pow(10,t)<=n&&(t+=1),t}},{key:"stringOfChar",value:function(t,n){for(var i=new O,e=0;e<n;e++)i.append(t);return i.toString()}}]),I}();_.constructor_=function(){this.f=0,(this.v=0)===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof _?this.init(arguments[0]):"string"==typeof arguments[0]&&_.constructor_.call(this,_.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},_.PI=new _(3.141592653589793,12246467991473532e-32),_.TWO_PI=new _(6.283185307179586,24492935982947064e-32),_.PI_2=new _(1.5707963267948966,6123233995736766e-32),_.E=new _(2.718281828459045,14456468917292502e-32),_.NaN=new _(c.NaN,c.NaN),_.EPS=123259516440783e-46,_.SPLIT=134217729,_.MAX_PRINT_DIGITS=32,_.TEN=_.valueOf(10),_.ONE=_.valueOf(1),_.SCI_NOT_EXPONENT_CHAR="E",_.SCI_NOT_ZERO="0.0E0";var F=function(){function u(){hs(this,u),u.constructor_.apply(this,arguments)}return gs(u,[{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,i){var e=u.orientationIndexFilter(t,n,i);if(e<=1)return e;var r=_.valueOf(n.x).selfAdd(-t.x),e=_.valueOf(n.y).selfAdd(-t.y),t=_.valueOf(i.x).selfAdd(-n.x),n=_.valueOf(i.y).selfAdd(-n.y);return r.selfMultiply(n).selfSubtract(e.selfMultiply(t)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[0]instanceof _){var t=arguments[0],n=arguments[1],i=arguments[2];return t.multiply(arguments[3]).selfSubtract(n.multiply(i)).signum()}if("number"==typeof arguments[0]){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],e=_.valueOf(e),t=_.valueOf(t),n=_.valueOf(n),i=_.valueOf(i);return e.multiply(i).selfSubtract(t.multiply(n)).signum()}}},{key:"intersection",value:function(t,n,i,e){var r=_.valueOf(e.y).selfSubtract(i.y).selfMultiply(_.valueOf(n.x).selfSubtract(t.x)),u=_.valueOf(e.x).selfSubtract(i.x).selfMultiply(_.valueOf(n.y).selfSubtract(t.y)),s=r.subtract(u),r=_.valueOf(e.x).selfSubtract(i.x).selfMultiply(_.valueOf(t.y).selfSubtract(i.y)),u=_.valueOf(e.y).selfSubtract(i.y).selfMultiply(_.valueOf(t.x).selfSubtract(i.x)),r=r.subtract(u).selfDivide(s).doubleValue(),u=_.valueOf(t.x).selfAdd(_.valueOf(n.x).selfSubtract(t.x).selfMultiply(r)).doubleValue(),r=_.valueOf(n.x).selfSubtract(t.x).selfMultiply(_.valueOf(t.y).selfSubtract(i.y)),t=_.valueOf(n.y).selfSubtract(t.y).selfMultiply(_.valueOf(t.x).selfSubtract(i.x)),s=r.subtract(t).selfDivide(s).doubleValue(),s=_.valueOf(i.y).selfAdd(_.valueOf(e.y).selfSubtract(i.y).selfMultiply(s)).doubleValue();return new k(u,s)}},{key:"orientationIndexFilter",value:function(t,n,i){var e=null,r=(t.x-i.x)*(n.y-i.y),n=(t.y-i.y)*(n.x-i.x),i=r-n;if(0<r){if(n<=0)return u.signum(i);e=r+n}else{if(!(r<0))return u.signum(i);if(0<=n)return u.signum(i);e=-r-n}e*=u.DP_SAFE_EPSILON;return e<=i||e<=-i?u.signum(i):2}},{key:"signum",value:function(t){return 0<t?1:t<0?-1:0}}]),u}();F.constructor_=function(){},F.DP_SAFE_EPSILON=1e-15;var G=function(){function A(){hs(this,A),A.constructor_.apply(this,arguments)}return gs(A,[{key:"getClass",value:function(){return A}},{key:"interfaces_",get:function(){return[]}}],[{key:"index",value:function(t,n,i){return F.orientationIndex(t,n,i)}},{key:"isCCW",value:function(t){var n=t.length-1;if(n<3)throw new l("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],e=0,r=1;r<=n;r++){var u=t[r];u.y>i.y&&(i=u,e=r)}for(var s=e;t[s=--s<0?n:s].equals2D(i)&&s!==e;);for(var h=e;t[h=(h+1)%n].equals2D(i)&&h!==e;);var g=t[s],o=t[h];if(g.equals2D(i)||o.equals2D(i)||g.equals2D(o))return!1;var a=A.index(g,i,o);return 0===a?g.x>o.x:0<a}}]),A}();function j(){}G.constructor_=function(){},G.CLOCKWISE=-1,G.RIGHT=G.CLOCKWISE,G.COUNTERCLOCKWISE=1,G.LEFT=G.COUNTERCLOCKWISE,G.COLLINEAR=0,G.STRAIGHT=G.COLLINEAR,j.arraycopy=function(t,n,i,e,r){for(var u=0,s=n;s<n+r;s++)i[e+u]=t[s],u++},j.getProperty=function(t){return{"line.separator":"\n"}[t]};var B=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getY",value:function(){var t=this.y/this.w;if(c.isNaN(t)||c.isInfinite(t))throw new P;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(c.isNaN(t)||c.isInfinite(t))throw new P;return t}},{key:"getCoordinate",value:function(){var t=new k;return t.x=this.getX(),t.y=this.getY(),t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersection",value:function(t,n,i,e){var r=t.y-n.y,u=n.x-t.x,s=t.x*n.y-n.x*t.y,n=i.y-e.y,t=e.x-i.x,e=i.x*e.y-e.x*i.y,i=r*t-n*u,t=(u*e-t*s)/i,i=(n*s-r*e)/i;if(c.isNaN(t)||c.isInfinite(t)||c.isNaN(i)||c.isInfinite(i))throw new P;return new k(t,i)}}]),t}();B.constructor_=function(){var t,n,i,e,r,u,s,h,g;this.x=null,this.y=null,this.w=null,0===arguments.length?(this.x=0,this.y=0,this.w=1):1===arguments.length?(this.x=(n=arguments[0]).x,this.y=n.y,this.w=1):2===arguments.length?"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(t=arguments[0],n=arguments[1],this.x=t,this.y=n,this.w=1):arguments[0]instanceof B&&arguments[1]instanceof B?(this.x=(s=arguments[0]).y*(h=arguments[1]).w-h.y*s.w,this.y=h.x*s.w-s.x*h.w,this.w=s.x*h.y-h.x*s.y):arguments[0]instanceof k&&arguments[1]instanceof k&&(this.x=(r=arguments[0]).y-(e=arguments[1]).y,this.y=e.x-r.x,this.w=r.x*e.y-e.x*r.y):3===arguments.length?(u=arguments[0],g=arguments[1],i=arguments[2],this.x=u,this.y=g,this.w=i):4===arguments.length&&(e=(h=arguments[0]).y-(s=arguments[1]).y,r=s.x-h.x,u=h.x*s.y-s.x*h.y,s=(g=arguments[2]).y-(i=arguments[3]).y,h=i.x-g.x,g=g.x*i.y-i.x*g.y,this.x=r*g-h*u,this.y=s*u-e*g,this.w=e*h-s*r)};var Z=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"log10",value:function(t){t=Math.log(t);return c.isInfinite(t)||c.isNaN(t)?t:t/n.LOG_10}},{key:"min",value:function(t,n,i,e){return t=e<(t=i<(t=n<t?n:t)?i:t)?e:t}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1],i=arguments[2];return t<n?n:i<t?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){n=arguments[0],i=arguments[1],t=arguments[2];return n<i?i:t<n?t:n}}},{key:"wrap",value:function(t,n){return t<0?n- -t%n:t%n}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];return e=(e=n>(e=t)?n:e)<i?i:e}if(4===arguments.length){var e,r=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];return e=(e=(e=t>(e=r)?t:e)<n?n:e)<i?i:e}}},{key:"average",value:function(t,n){return(t+n)/2}}]),n}();Z.constructor_=function(){},Z.LOG_10=Math.log(10);var V=function(){function g(){hs(this,g),g.constructor_.apply(this,arguments)}return gs(g,[{key:"getClass",value:function(){return g}},{key:"interfaces_",get:function(){return[]}}],[{key:"segmentToSegment",value:function(t,n,i,e){if(t.equals(n))return g.pointToSegment(t,i,e);if(i.equals(e))return g.pointToSegment(e,t,n);var r,u,s,h=!1;return!T.intersects(t,n,i,e)||0==(s=(n.x-t.x)*(e.y-i.y)-(n.y-t.y)*(e.x-i.x))?h=!0:(r=(t.y-i.y)*(e.x-i.x)-(t.x-i.x)*(e.y-i.y),u=((t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y))/s,((s=r/s)<0||1<s||u<0||1<u)&&(h=!0)),h?Z.min(g.pointToSegment(t,i,e),g.pointToSegment(n,i,e),g.pointToSegment(i,t,n),g.pointToSegment(e,t,n)):0}},{key:"pointToSegment",value:function(t,n,i){if(n.x===i.x&&n.y===i.y)return t.distance(n);var e=(i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y),r=((t.x-n.x)*(i.x-n.x)+(t.y-n.y)*(i.y-n.y))/e;if(r<=0)return t.distance(n);if(1<=r)return t.distance(i);n=((n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y))/e;return Math.abs(n)*Math.sqrt(e)}},{key:"pointToLinePerpendicular",value:function(t,n,i){var e=(i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y),n=((n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y))/e;return Math.abs(n)*Math.sqrt(e)}},{key:"pointToSegmentString",value:function(t,n){if(0===n.length)throw new l("Line array must contain at least one vertex");for(var i=t.distance(n[0]),e=0;e<n.length-1;e++){var r=g.pointToSegment(t,n[e],n[e+1]);r<i&&(i=r)}return i}}]),g}();V.constructor_=function(){};var Y=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"setOrdinate",value:function(t,n,i){}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,n){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"getDimension",value:function(){}},{key:"getX",value:function(t){}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[s]}}]),t}();Y.constructor_=function(){},Y.X=0,Y.Y=1,Y.Z=2,Y.M=3;var U=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"create",value:function(){1===arguments.length&&(arguments[0]instanceof Array||d(arguments[0],Y))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();U.constructor_=function(){};var W=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();W.constructor_=function(){};var X=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===n.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this.k}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equals",value:function(){if(arguments[0]instanceof n){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){t=arguments[0];return t instanceof n?this.equalsExact(t):!1}}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(n.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this.S=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){if(1===arguments.length){var t=arguments[0],n=t;return this.getTypeCode()!==n.getTypeCode()?this.getTypeCode()-n.getTypeCode():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],t=arguments[1],n=i;return this.getTypeCode()!==n.getTypeCode()?this.getTypeCode()-n.getTypeCode():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(i,t)}}},{key:"getUserData",value:function(){return this.R}},{key:"getSRID",value:function(){return this.T}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===n.TYPECODE_GEOMETRYCOLLECTION)throw new l("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,n,i){return 0===i?t.equals(n):t.distance(n)<=i}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"getPrecisionModel",value:function(){return this.k.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this.S&&(this.S=this.computeEnvelopeInternal()),new T(this.S)}},{key:"setSRID",value:function(t){this.T=t}},{key:"setUserData",value:function(t){this.R=t}},{key:"compare",value:function(t,n){for(var i=t.iterator(),e=n.iterator();i.hasNext()&&e.hasNext();){var r=i.next(),u=e.next(),u=r.compareTo(u);if(0!==u)return u}return i.hasNext()?1:e.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===n.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===n.TYPECODE_MULTIPOINT||this.getTypeCode()===n.TYPECODE_MULTILINESTRING||this.getTypeCode()===n.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[s,u,h]}},{key:"getClass",value:function(){return n}}],[{key:"hasNonEmptyElements",value:function(t){for(var n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var n=0;n<t.length;n++)if(null===t[n])return!0;return!1}}]),n}();X.constructor_=function(t){t&&(this.S=null,this.R=null,this.k=t,this.T=t.getSRID())},X.serialVersionUID=0x799ea46522854c00,X.TYPECODE_POINT=0,X.TYPECODE_MULTIPOINT=1,X.TYPECODE_LINESTRING=2,X.TYPECODE_LINEARRING=3,X.TYPECODE_MULTILINESTRING=4,X.TYPECODE_POLYGON=5,X.TYPECODE_MULTIPOLYGON=6,X.TYPECODE_GEOMETRYCOLLECTION=7,X.TYPENAME_POINT="Point",X.TYPENAME_MULTIPOINT="MultiPoint",X.TYPENAME_LINESTRING="LineString",X.TYPENAME_LINEARRING="LinearRing",X.TYPENAME_MULTILINESTRING="MultiLineString",X.TYPENAME_POLYGON="Polygon",X.TYPENAME_MULTIPOLYGON="MultiPolygon",X.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",X.geometryChangedFilter={get interfaces_(){return[W]},filter:function(t){t.geometryChangedAction()}};var z=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();z.constructor_=function(){};var Q=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isInBoundary",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),K=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isInBoundary",value:function(t){return t%2==1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Q]}}]),t}();K.constructor_=function(){};var H=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isInBoundary",value:function(t){return 0<t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Q]}}]),t}();H.constructor_=function(){};var J=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isInBoundary",value:function(t){return 1<t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Q]}}]),t}();J.constructor_=function(){};var q=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isInBoundary",value:function(t){return 1===t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Q]}}]),t}();q.constructor_=function(){},Q.Mod2BoundaryNodeRule=K,Q.EndPointBoundaryNodeRule=H,Q.MultiValentEndPointBoundaryNodeRule=J,Q.MonoValentEndPointBoundaryNodeRule=q,Q.constructor_=function(){},Q.MOD2_BOUNDARY_RULE=new K,Q.ENDPOINT_BOUNDARY_RULE=new H,Q.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new J,Q.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new q,Q.OGC_SFS_BOUNDARY_RULE=Q.MOD2_BOUNDARY_RULE;var $=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,n){for(var i=0;i<t.length;i++){var e=t[i];if(r.indexOf(e,n)<0)return e}return null}},{key:"scroll",value:function(t,n){var i=r.indexOf(n,t);if(i<0)return null;n=new Array(t.length).fill(null);j.arraycopy(t,i,n,0,t.length-i),j.arraycopy(t,0,n,t.length-i,i),j.arraycopy(n,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(t===n)return!0;if(null===t||null===n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(n[i]))return!1;return!0}if(3===arguments.length){var e=arguments[0],r=arguments[1],u=arguments[2];if(e===r)return!0;if(null===e||null===r)return!1;if(e.length!==r.length)return!1;for(i=0;i<e.length;i++)if(0!==u.compare(e[i],r[i]))return!1;return!0}}},{key:"intersection",value:function(t,n){for(var i=new R,e=0;e<t.length;e++)n.intersects(t[e])&&i.add(t[e],!0);return i.toCoordinateArray()}},{key:"hasRepeatedPoints",value:function(t){for(var n=1;n<t.length;n++)if(t[n-1].equals(t[n]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return r.hasRepeatedPoints(t)?new R(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var n=t.length-1,i=Math.trunc(n/2),e=0;e<=i;e++){var r=t[e];t[e]=t[n-e],t[n-e]=r}}},{key:"removeNull",value:function(t){for(var n=0,i=0;i<t.length;i++)null!==t[i]&&n++;var e=new Array(n).fill(null);if(0===n)return e;for(var r=0,i=0;i<t.length;i++)null!==t[i]&&(e[r++]=t[i]);return e}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],n=new Array(t.length).fill(null),i=0;i<t.length;i++)n[i]=new k(t[i]);return n}if(5===arguments.length)for(var e=arguments[0],r=arguments[1],u=arguments[2],s=arguments[3],h=arguments[4],i=0;i<h;i++)u[s+i]=new k(e[r+i])}},{key:"isEqualReversed",value:function(t,n){for(var i=0;i<t.length;i++){var e=t[i],r=n[t.length-i-1];if(0!==e.compareTo(r))return!1}return!0}},{key:"envelope",value:function(t){for(var n=new T,i=0;i<t.length;i++)n.expandToInclude(t[i]);return n}},{key:"toCoordinateArray",value:function(t){return t.toArray(r.coordArrayType)}},{key:"atLeastNCoordinatesOrNothing",value:function(t,n){return n.length>=t?n:[]}},{key:"indexOf",value:function(t,n){for(var i=0;i<n.length;i++)if(t.equals(n[i]))return i;return-1}},{key:"increasingDirection",value:function(t){for(var n=0;n<Math.trunc(t.length/2);n++){var i=t.length-1-n,i=t[n].compareTo(t[i]);if(0!==i)return i}return 1}},{key:"compare",value:function(t,n){for(var i=0;i<t.length&&i<n.length;){var e=t[i].compareTo(n[i]);if(0!==e)return e;i++}return i<n.length?-1:i<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var n=null,i=0;i<t.length;i++)(null===n||0<n.compareTo(t[i]))&&(n=t[i]);return n}},{key:"extract",value:function(t,n,i){n=Z.clamp(n,0,t.length);var e=(i=Z.clamp(i,-1,t.length))-n+1;i<0&&(e=0),n>=t.length&&(e=0),i<n&&(e=0);var r=new Array(e).fill(null);if(0===e)return r;for(var u=0,s=n;s<=i;s++)r[u++]=t[s];return r}}]),r}(),tt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"compare",value:function(t,n){return $.compare(t,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[n]}}]),t}();tt.constructor_=function(){};var nt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"compare",value:function(t,n){var i=t,t=n;if(i.length<t.length)return-1;if(i.length>t.length)return 1;if(0===i.length)return 0;n=$.compare(i,t);return $.isEqualReversed(i,t)?0:n}},{key:"OLDcompare",value:function(t,n){var i=t,e=n;if(i.length<e.length)return-1;if(i.length>e.length)return 1;if(0===i.length)return 0;for(var r=$.increasingDirection(i),u=$.increasingDirection(e),s=0<r?0:i.length-1,h=0<u?0:i.length-1,g=0;g<i.length;g++){var o=i[s].compareTo(e[h]);if(0!==o)return o;s+=r,h+=u}return 0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[n]}}]),t}();function it(){}function et(){}function rt(){}function ut(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}nt.constructor_=function(){},$.ForwardComparator=tt,$.BidirectionalComparator=nt,$.constructor_=function(){},$.coordArrayType=new Array(0).fill(null),it.prototype.get=function(){},it.prototype.put=function(){},it.prototype.size=function(){},it.prototype.values=function(){},it.prototype.entrySet=function(){},et.prototype=new it,(rt.prototype=new m).contains=function(){},(ut.prototype=new rt).contains=function(t){for(var n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t)return!0;return!1},ut.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},ut.prototype.addAll=function(t){for(var n=t.iterator();n.hasNext();)this.add(n.next());return!0},ut.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},ut.prototype.size=function(){return this.array_.length},ut.prototype.isEmpty=function(){return 0===this.array_.length},ut.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t},ut.prototype.iterator=function(){return new st(this)};var st=function(t){this.hashSet_=t,this.position_=0};st.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new b;return this.hashSet_.array_[this.position_++]},st.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},st.prototype.remove=function(){throw new E};function ht(t){return null==t?0:t.color}function gt(t){return null==t?null:t.parent}function ot(t,n){null!==t&&(t.color=n)}function at(t){return null==t?null:t.left}function At(t){return null==t?null:t.right}function Ct(){this.root_=null,this.size_=0}(Ct.prototype=new et).get=function(t){for(var n=this.root_;null!==n;){var i=t.compareTo(n.key);if(i<0)n=n.left;else{if(!(0<i))return n.value;n=n.right}}return null},Ct.prototype.put=function(t,n){if(null===this.root_)return this.root_={key:t,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,e,r=this.root_;do{if(i=r,(e=t.compareTo(r.key))<0)r=r.left;else{if(!(0<e)){var u=r.value;return r.value=n,u}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:n,parent:i,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return e<0?i.left=s:i.right=s,this.fixAfterInsertion(s),this.size_++,null},Ct.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){var n;gt(t)==at(gt(gt(t)))?1==ht(n=At(gt(gt(t))))?(ot(gt(t),0),ot(n,0),ot(gt(gt(t)),1),t=gt(gt(t))):(t==At(gt(t))&&(t=gt(t),this.rotateLeft(t)),ot(gt(t),0),ot(gt(gt(t)),1),this.rotateRight(gt(gt(t)))):1==ht(n=at(gt(gt(t))))?(ot(gt(t),0),ot(n,0),ot(gt(gt(t)),1),t=gt(gt(t))):(t==at(gt(t))&&(t=gt(t),this.rotateRight(t)),ot(gt(t),0),ot(gt(gt(t)),1),this.rotateLeft(gt(gt(t))))}this.root_.color=0},Ct.prototype.values=function(){var t=new S,n=this.getFirstEntry();if(null!==n)for(t.add(n.value);null!==(n=Ct.successor(n));)t.add(n.value);return t},Ct.prototype.entrySet=function(){var t=new ut,n=this.getFirstEntry();if(null!==n)for(t.add(n);null!==(n=Ct.successor(n));)t.add(n);return t},Ct.prototype.rotateLeft=function(t){var n;null!=t&&(n=t.right,t.right=n.left,null!=n.left&&(n.left.parent=t),n.parent=t.parent,null==t.parent?this.root_=n:t.parent.left==t?t.parent.left=n:t.parent.right=n,(n.left=t).parent=n)},Ct.prototype.rotateRight=function(t){var n;null!=t&&(n=t.left,t.left=n.right,null!=n.right&&(n.right.parent=t),n.parent=t.parent,null==t.parent?this.root_=n:t.parent.right==t?t.parent.right=n:t.parent.left=n,(n.right=t).parent=n)},Ct.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Ct.successor=function(t){if(null===t)return null;if(null!==t.right){for(var n=t.right;null!==n.left;)n=n.left;return n}for(var n=t.parent,i=t;null!==n&&i===n.right;)n=(i=n).parent;return n},Ct.prototype.size=function(){return this.size_},Ct.prototype.containsKey=function(t){for(var n=this.root_;null!==n;){var i=t.compareTo(n.key);if(i<0)n=n.left;else{if(!(0<i))return!0;n=n.right}}return!1};var It=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();function lt(){}function ft(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}It.constructor_=function(){},lt.prototype=new rt,(ft.prototype=new lt).contains=function(t){for(var n=0,i=this.array_.length;n<i;n++)if(0===this.array_[n].compareTo(t))return!0;return!1},ft.prototype.add=function(t){if(this.contains(t))return!1;for(var n=0,i=this.array_.length;n<i;n++)if(1===this.array_[n].compareTo(t))return this.array_.splice(n,0,t),!0;return this.array_.push(t),!0},ft.prototype.addAll=function(t){for(var n=t.iterator();n.hasNext();)this.add(n.next());return!0},ft.prototype.remove=function(t){throw new E},ft.prototype.size=function(){return this.array_.length},ft.prototype.isEmpty=function(){return 0===this.array_.length},ft.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t},ft.prototype.iterator=function(){return new vt(this)};var ct,vt=function(t){this.treeSet_=t,this.position_=0};function yt(){}vt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new b;return this.treeSet_.array_[this.position_++]},vt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},vt.prototype.remove=function(){throw new E},yt.sort=function(){var t,n,i,e,r=arguments[0];if(1!==arguments.length)if(2===arguments.length)i=arguments[1],e=function(t,n){return i.compare(t,n)},r.sort(e);else if(3!==arguments.length){if(4===arguments.length)for(n=r.slice(arguments[1],arguments[2]),i=arguments[3],e=function(t,n){return i.compare(t,n)},n.sort(e),u=r.slice(0,arguments[1]).concat(n,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<u.length;t++)r.push(u[t])}else{(n=r.slice(arguments[1],arguments[2])).sort();var u=r.slice(0,arguments[1]).concat(n,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<u.length;t++)r.push(u[t])}else r.sort(e=function(t,n){return t.compareTo(n)})},yt.asList=function(t){for(var n=new S,i=0,e=t.length;i<e;i++)n.add(t[i]);return n};var kt=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDimensionSymbol",value:function(t){switch(t){case n.FALSE:return n.SYM_FALSE;case n.TRUE:return n.SYM_TRUE;case n.DONTCARE:return n.SYM_DONTCARE;case n.P:return n.SYM_P;case n.L:return n.SYM_L;case n.A:return n.SYM_A}throw new l("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(D.toUpperCase(t)){case n.SYM_FALSE:return n.FALSE;case n.SYM_TRUE:return n.TRUE;case n.SYM_DONTCARE:return n.DONTCARE;case n.SYM_P:return n.P;case n.SYM_L:return n.L;case n.SYM_A:return n.A}throw new l("Unknown dimension symbol: "+t)}}]),n}();kt.constructor_=function(){},kt.P=0,kt.L=1,kt.A=2,kt.FALSE=-1,kt.TRUE=-2,kt.DONTCARE=-3,kt.SYM_FALSE="F",kt.SYM_TRUE="T",kt.SYM_DONTCARE="*",kt.SYM_P="0",kt.SYM_L="1",kt.SYM_A="2";var dt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();dt.constructor_=function(){};var wt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t,n){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();wt.constructor_=function(){};var mt=function(){is(r,X);var n=es(r);function r(){var t;return hs(this,r),t=n.call(this),r.constructor_.apply(us(t),arguments),t}return gs(r,[{key:"computeEnvelopeInternal",value:function(){for(var t=new T,n=0;n<this.N.length;n++)t.expandToInclude(this.N[n].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this.N[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),n=-1,i=0;i<this.N.length;i++)for(var e=this.N[i].getCoordinates(),r=0;r<e.length;r++)t[++n]=e[r];return t}},{key:"getArea",value:function(){for(var t=0,n=0;n<this.N.length;n++)t+=this.N[n].getArea();return t}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof X){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this.N.length!==i.N.length)return!1;for(var e=0;e<this.N.length;e++)if(!this.N[e].equalsExact(i.N[e],n))return!1;return!0}return ns(ss(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this.N.length;t++)this.N[t].normalize();yt.sort(this.N)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.N[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=kt.FALSE,n=0;n<this.N.length;n++)t=Math.max(t,this.N[n].getBoundaryDimension());return t}},{key:"getTypeCode",value:function(){return X.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=kt.FALSE,n=0;n<this.N.length;n++)t=Math.max(t,this.N[n].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,n=0;n<this.N.length;n++)t+=this.N[n].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,n=0;n<this.N.length;n++)t+=this.N[n].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this.N.length}},{key:"reverse",value:function(){for(var t=this.N.length,n=new Array(t).fill(null),i=0;i<this.N.length;i++)n[i]=this.N[i].reverse();return this.getFactory().createGeometryCollection(n)}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],n=new ft(yt.asList(this.N)),t=new ft(yt.asList(t.N));return this.compare(n,t)}if(2===arguments.length){for(var t=arguments[0],i=arguments[1],e=t,r=this.getNumGeometries(),u=e.getNumGeometries(),s=0;s<r&&s<u;){var h=this.getGeometryN(s),g=e.getGeometryN(s),g=h.compareToSameClass(g,i);if(0!==g)return g;s++}return s<r?1:s<u?-1:0}}},{key:"apply",value:function(){if(d(arguments[0],z))for(var t=arguments[0],n=0;n<this.N.length;n++)this.N[n].apply(t);else if(d(arguments[0],wt)){var i=arguments[0];if(0===this.N.length)return null;for(n=0;n<this.N.length&&(this.N[n].apply(i),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else if(d(arguments[0],dt)){var e=arguments[0];for(e.filter(this),n=0;n<this.N.length;n++)this.N[n].apply(e)}else if(d(arguments[0],W)){var r=arguments[0];for(r.filter(this),n=0;n<this.N.length;n++)this.N[n].apply(r)}}},{key:"getBoundary",value:function(){return this.checkNotGeometryCollection(this),y.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return X.TYPENAME_GEOMETRYCOLLECTION}},{key:"copy",value:function(){for(var t=new Array(this.N.length).fill(null),n=0;n<t.length;n++)t[n]=this.N[n].copy();return new r(t,this.k)}},{key:"isEmpty",value:function(){for(var t=0;t<this.N.length;t++)if(!this.N[t].isEmpty())return!1;return!0}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();mt.constructor_=function(){if(this.N=null,0!==arguments.length&&2===arguments.length){var t=arguments[0];if(X.constructor_.call(this,arguments[1]),X.hasNullElements(t=null===t?[]:t))throw new l("geometries must not contain null elements");this.N=t}},mt.serialVersionUID=-0x4f07bcb1f857d800;var pt=function(){is(i,mt);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof X){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&ns(ss(i.prototype),"equalsExact",this).call(this,t,n)}return ns(ss(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?kt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this.N.length;t++)if(!this.N[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return X.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"reverse",value:function(){for(var t=this.N.length,n=new Array(t).fill(null),i=0;i<this.N.length;i++)n[t-1-i]=this.N[i].reverse();return this.getFactory().createMultiLineString(n)}},{key:"getBoundary",value:function(){return new Mt(this).getBoundary()}},{key:"getGeometryType",value:function(){return X.TYPENAME_MULTILINESTRING}},{key:"copy",value:function(){for(var t=new Array(this.N.length).fill(null),n=0;n<t.length;n++)t[n]=this.N[n].copy();return new i(t,this.k)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[It]}}]),i}();pt.constructor_=function(){mt.constructor_.call(this,arguments[0],arguments[1])},pt.serialVersionUID=0x7155d2ab4afa8000;var Mt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"boundaryMultiLineString",value:function(t){if(this.O.isEmpty())return this.getEmptyMultiPoint();t=this.computeBoundaryCoordinates(t);return 1===t.length?this.D.createPoint(t[0]):this.D.createMultiPointFromCoords(t)}},{key:"getBoundary",value:function(){return this.O instanceof Lt?this.boundaryLineString(this.O):this.O instanceof pt?this.boundaryMultiLineString(this.O):this.O.getBoundary()}},{key:"boundaryLineString",value:function(t){return this.O.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._.isInBoundary(2)?t.getStartPoint():this.D.createMultiPoint():this.D.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}},{key:"getEmptyMultiPoint",value:function(){return this.D.createMultiPoint()}},{key:"computeBoundaryCoordinates",value:function(t){var n=new S;this.F=new Ct;for(var i=0;i<t.getNumGeometries();i++){var e=t.getGeometryN(i);0!==e.getNumPoints()&&(this.addEndpoint(e.getCoordinateN(0)),this.addEndpoint(e.getCoordinateN(e.getNumPoints()-1)))}for(var r=this.F.entrySet().iterator();r.hasNext();){var u=r.next(),s=u.getValue().count;this._.isInBoundary(s)&&n.add(u.getKey())}return $.toCoordinateArray(n)}},{key:"addEndpoint",value:function(t){var n=this.F.get(t);null===n&&(n=new bt,this.F.put(t,n)),n.count++}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBoundary",value:function(){return 1===arguments.length?new t(arguments[0]).getBoundary():2===arguments.length?new t(arguments[0],arguments[1]).getBoundary():void 0}}]),t}();Mt.constructor_=function(){var t,n;this.O=null,this.D=null,this._=null,this.F=null,1===arguments.length?Mt.constructor_.call(this,arguments[0],Q.MOD2_BOUNDARY_RULE):2===arguments.length&&(t=arguments[0],n=arguments[1],this.O=t,this.D=t.getFactory(),this._=n)};var bt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();bt.constructor_=function(){this.count=null};var Et=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"ofLine",value:function(t){var n=t.size();if(n<=1)return 0;var i=0,e=new k;t.getCoordinate(0,e);for(var r=e.x,u=e.y,s=1;s<n;s++){t.getCoordinate(s,e);var h=e.x,g=e.y,o=h-r,a=g-u;i+=Math.sqrt(o*o+a*a),r=h,u=g}return i}}]),t}();function St(){}function xt(){}function Rt(){}function Tt(){}Et.constructor_=function(){};var Nt=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"chars",value:function(t,n){for(var i=new Array(n).fill(null),e=0;e<n;e++)i[e]=t;return new String(i)}},{key:"getStackTrace",value:function(){if(1===arguments.length){var t=new xt,n=new St;return arguments[0].printStackTrace(n),t.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],e="",r=new Tt(s.getStackTrace(n)),u=0;u<i;u++)try{e+=r.readLine()+s.NEWLINE}catch(t){if(!(t instanceof Rt))throw t;y.shouldNeverReachHere()}return e}}},{key:"split",value:function(t,n){for(var i=n.length,e=new S,r=""+t,u=r.indexOf(n);0<=u;){var s=r.substring(0,u);e.add(s),u=(r=r.substring(u+i)).indexOf(n)}0<r.length&&e.add(r);for(var h=new Array(e.size()).fill(null),g=0;g<h.length;g++)h[g]=e.get(g);return h}},{key:"toString",value:function(){if(1===arguments.length&&"number"==typeof arguments[0])return s.SIMPLE_ORDINATE_FORMAT.format(arguments[0])}},{key:"spaces",value:function(t){return s.chars(" ",t)}}]),s}();function Pt(t){this.str=t}Nt.constructor_=function(){},Nt.NEWLINE=j.getProperty("line.separator"),Nt.SIMPLE_ORDINATE_FORMAT=new function(){},Pt.prototype.append=function(t){this.str+=t},Pt.prototype.setCharAt=function(t,n){this.str=this.str.substr(0,t)+n+this.str.substr(t+1)},Pt.prototype.toString=function(t){return this.str};var Ot=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoord",value:function(t,n,i,e){for(var r=Math.min(t.getDimension(),i.getDimension()),u=0;u<r;u++)i.setOrdinate(e,u,t.getOrdinate(n,u))}},{key:"isRing",value:function(t){var n=t.size();return 0===n||!(n<=3)&&t.getOrdinate(0,Y.X)===t.getOrdinate(n-1,Y.X)&&t.getOrdinate(0,Y.Y)===t.getOrdinate(n-1,Y.Y)}},{key:"isEqual",value:function(t,n){var i=t.size();if(i!==n.size())return!1;for(var e=Math.min(t.getDimension(),n.getDimension()),r=0;r<i;r++)for(var u=0;u<e;u++){var s=t.getOrdinate(r,u),h=n.getOrdinate(r,u);if(!(t.getOrdinate(r,u)===n.getOrdinate(r,u)||c.isNaN(s)&&c.isNaN(h)))return!1}return!0}},{key:"extend",value:function(t,n,i){var e=t.create(i,n.getDimension()),r=n.size();if(s.copy(n,0,e,0,r),0<r)for(var u=r;u<i;u++)s.copy(n,r-1,e,u,1);return e}},{key:"reverse",value:function(t){for(var n=t.size()-1,i=Math.trunc(n/2),e=0;e<=i;e++)s.swap(t,e,n-e)}},{key:"swap",value:function(t,n,i){if(n===i)return null;for(var e=0;e<t.getDimension();e++){var r=t.getOrdinate(n,e);t.setOrdinate(n,e,t.getOrdinate(i,e)),t.setOrdinate(i,e,r)}}},{key:"copy",value:function(t,n,i,e,r){for(var u=0;u<r;u++)s.copyCoord(t,n+u,i,e+u)}},{key:"toString",value:function(){if(1===arguments.length&&d(arguments[0],Y)){var t=arguments[0],n=t.size();if(0===n)return"()";var i=t.getDimension(),e=new Pt;e.append("(");for(var r=0;r<n;r++){0<r&&e.append(" ");for(var u=0;u<i;u++)0<u&&e.append(","),e.append(Nt.toString(t.getOrdinate(r,u)))}return e.append(")"),e.toString()}}},{key:"ensureValidRing",value:function(t,n){var i=n.size();return 0===i?n:i<=3?s.createClosedRing(t,n,4):n.getOrdinate(0,Y.X)===n.getOrdinate(i-1,Y.X)&&n.getOrdinate(0,Y.Y)===n.getOrdinate(i-1,Y.Y)?n:s.createClosedRing(t,n,i+1)}},{key:"createClosedRing",value:function(t,n,i){var e=t.create(i,n.getDimension()),t=n.size();s.copy(n,0,e,0,t);for(var r=t;r<i;r++)s.copy(n,0,e,r,1);return e}}]),s}();Ot.constructor_=function(){};var Lt=function(){is(r,X);var n=es(r);function r(){var t;return hs(this,r),t=n.call(this),r.constructor_.apply(us(t),arguments),t}return gs(r,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new T:this.G.expandEnvelope(new T)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this.G.toCoordinateArray()}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof X){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this.G.size()!==i.G.size())return!1;for(var e=0;e<this.G.size();e++)if(!this.equal(this.G.getCoordinate(e),i.G.getCoordinate(e),n))return!1;return!0}return ns(ss(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this.G.size()/2);t++){var n=this.G.size()-1-t;if(!this.G.getCoordinate(t).equals(this.G.getCoordinate(n)))return 0<this.G.getCoordinate(t).compareTo(this.G.getCoordinate(n))&&(n=this.G.copy(),Ot.reverse(n),this.G=n),null}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.G.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?kt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return X.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Et.ofLine(this.G)}},{key:"getNumPoints",value:function(){return this.G.size()}},{key:"reverse",value:function(){var t=this.G.copy();return Ot.reverse(t),this.getFactory().createLineString(t)}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var t=arguments[0],n=0,i=0;n<this.G.size()&&i<t.G.size();){var e=this.G.getCoordinate(n).compareTo(t.G.getCoordinate(i));if(0!==e)return e;n++,i++}return n<this.G.size()?1:i<t.G.size()?-1:0}if(2===arguments.length)return t=arguments[0],arguments[1].compare(this.G,t.G)}},{key:"apply",value:function(){if(d(arguments[0],z))for(var t=arguments[0],n=0;n<this.G.size();n++)t.filter(this.G.getCoordinate(n));else if(d(arguments[0],wt)){var i=arguments[0];if(0===this.G.size())return null;for(n=0;n<this.G.size()&&(i.filter(this.G,n),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else(d(arguments[0],dt)||d(arguments[0],W))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return new Mt(this).getBoundary()}},{key:"isEquivalentClass",value:function(t){return t instanceof r}},{key:"getCoordinateN",value:function(t){return this.G.getCoordinate(t)}},{key:"getGeometryType",value:function(){return X.TYPENAME_LINESTRING}},{key:"copy",value:function(){return new r(this.G.copy(),this.k)}},{key:"getCoordinateSequence",value:function(){return this.G}},{key:"isEmpty",value:function(){return 0===this.G.size()}},{key:"init",value:function(t){if(1===(t=null===t?this.getFactory().getCoordinateSequenceFactory().create([]):t).size())throw new l("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.G=t}},{key:"isCoordinate",value:function(t){for(var n=0;n<this.G.size();n++)if(this.G.getCoordinate(n).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this.G.getCoordinate(t))}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[It]}}]),r}();Lt.constructor_=function(){var t;this.G=null,0===arguments.length||2===arguments.length&&(t=arguments[0],X.constructor_.call(this,arguments[1]),this.init(t))},Lt.serialVersionUID=0x2b2b51ba435c8e00;var Dt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Dt.constructor_=function(){};var _t=function(){is(i,X);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new T;var t=new T;return t.expandToInclude(this.j.getX(0),this.j.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof X){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),n))}return ns(ss(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this.j.size()?this.j.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return kt.FALSE}},{key:"getTypeCode",value:function(){return X.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"reverse",value:function(){return this.copy()}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return t=arguments[0],arguments[1].compare(this.j,t.j)}},{key:"apply",value:function(){if(d(arguments[0],z)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(d(arguments[0],wt)){t=arguments[0];if(this.isEmpty())return null;t.filter(this.j,0),t.isGeometryChanged()&&this.geometryChanged()}else(d(arguments[0],dt)||d(arguments[0],W))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return X.TYPENAME_POINT}},{key:"copy",value:function(){return new i(this.j.copy(),this.k)}},{key:"getCoordinateSequence",value:function(){return this.j}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this.j.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),y.isTrue(t.size()<=1),this.j=t}},{key:"isSimple",value:function(){return!0}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[Dt]}}]),i}();_t.constructor_=function(){this.j=null;var t=arguments[0];X.constructor_.call(this,arguments[1]),this.init(t)},_t.serialVersionUID=0x44077bad161cbc00;var Ft=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"ofRing",value:function(){return arguments[0]instanceof Array||d(arguments[0],Y)?Math.abs(t.ofRingSigned(arguments[0])):void 0}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var n=0,i=t[0].x,e=1;e<t.length-1;e++){var r=t[e].x-i,u=t[e+1].y;n+=r*(t[e-1].y-u)}return n/2}if(d(arguments[0],Y)){var s=arguments[0],h=s.size();if(h<3)return 0;var g=new k,o=new k,a=new k;for(s.getCoordinate(0,o),s.getCoordinate(1,a),i=o.x,a.x-=i,n=0,e=1;e<h-1;e++)g.y=o.y,o.x=a.x,o.y=a.y,s.getCoordinate(e+1,a),a.x-=i,n+=o.x*(g.y-a.y);return n/2}}}]),t}();Ft.constructor_=function(){};var Gt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Gt.constructor_=function(){};var jt=function(){is(u,X);var n=es(u);function u(){var t;return hs(this,u),t=n.call(this),u.constructor_.apply(us(t),arguments),t}return gs(u,[{key:"computeEnvelopeInternal",value:function(){return this.B.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),n=-1,i=this.B.getCoordinates(),e=0;e<i.length;e++)t[++n]=i[e];for(var r=0;r<this.V.length;r++)for(var u=this.V[r].getCoordinates(),s=0;s<u.length;s++)t[++n]=u[s];return t}},{key:"getArea",value:function(){var t=0;t+=Ft.ofRing(this.B.getCoordinateSequence());for(var n=0;n<this.V.length;n++)t-=Ft.ofRing(this.V[n].getCoordinateSequence());return t}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.B)return!1;if(5!==this.B.getNumPoints())return!1;for(var t=this.B.getCoordinateSequence(),n=this.getEnvelopeInternal(),i=0;i<5;i++){if((e=t.getX(i))!==n.getMinX()&&e!==n.getMaxX())return!1;if((r=t.getY(i))!==n.getMinY()&&r!==n.getMaxY())return!1}for(var e,r,u=t.getX(0),s=t.getY(0),i=1;i<=4;i++){if((e=t.getX(i))!==u==((r=t.getY(i))!==s))return!1;u=e,s=r}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof X){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t,e=this.B,t=i.B;if(!e.equalsExact(t,n))return!1;if(this.V.length!==i.V.length)return!1;for(var r=0;r<this.V.length;r++)if(!this.V[r].equalsExact(i.V[r],n))return!1;return!0}return ns(ss(u.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this.normalize(this.B,!0);for(var t=0;t<this.V.length;t++)this.normalize(this.V[t],!1);yt.sort(this.V)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(n.isEmpty())return null;var e=new Array(n.getCoordinates().length-1).fill(null);j.arraycopy(n.getCoordinates(),0,e,0,e.length);var r=$.minCoordinate(n.getCoordinates());$.scroll(e,r),j.arraycopy(e,0,n.getCoordinates(),0,e.length),n.getCoordinates()[e.length]=e[0],G.isCCW(n.getCoordinates())===i&&$.reverse(n.getCoordinates())}}},{key:"getCoordinate",value:function(){return this.B.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this.V.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return X.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this.B.getLength();for(var n=0;n<this.V.length;n++)t+=this.V[n].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this.B.getNumPoints(),n=0;n<this.V.length;n++)t+=this.V[n].getNumPoints();return t}},{key:"reverse",value:function(){var t=this.copy();t.B=this.B.copy().reverse(),t.V=new Array(this.V.length).fill(null);for(var n=0;n<this.V.length;n++)t.V[n]=this.V[n].copy().reverse();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=this.B,n=arguments[0].B;return t.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],e=arguments[1],r=i,n=(t=this.B,n=r.B,t.compareToSameClass(n,e));if(0!==n)return n;for(var u=this.getNumInteriorRing(),s=r.getNumInteriorRing(),h=0;h<u&&h<s;){var g=this.getInteriorRingN(h),o=r.getInteriorRingN(h),o=g.compareToSameClass(o,e);if(0!==o)return o;h++}return h<u?1:h<s?-1:0}}},{key:"apply",value:function(){if(d(arguments[0],z)){var t=arguments[0];this.B.apply(t);for(var n=0;n<this.V.length;n++)this.V[n].apply(t)}else if(d(arguments[0],wt)){var i=arguments[0];if(this.B.apply(i),!i.isDone())for(n=0;n<this.V.length&&(this.V[n].apply(i),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else if(d(arguments[0],dt))arguments[0].filter(this);else if(d(arguments[0],W)){var e=arguments[0];for(e.filter(this),this.B.apply(e),n=0;n<this.V.length;n++)this.V[n].apply(e)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.V.length+1).fill(null);t[0]=this.B;for(var n=0;n<this.V.length;n++)t[n+1]=this.V[n];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return X.TYPENAME_POLYGON}},{key:"copy",value:function(){for(var t=this.B.copy(),n=new Array(this.V.length).fill(null),i=0;i<this.V.length;i++)n[i]=this.V[i].copy();return new u(t,n,this.k)}},{key:"getExteriorRing",value:function(){return this.B}},{key:"isEmpty",value:function(){return this.B.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this.V[t]}},{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[Gt]}}]),u}();jt.constructor_=function(){this.B=null,this.V=null;var t=arguments[0],n=arguments[1];if(X.constructor_.call(this,arguments[2]),null===t&&(t=this.getFactory().createLinearRing()),X.hasNullElements(n=null===n?[]:n))throw new l("holes must not contain null elements");if(t.isEmpty()&&X.hasNonEmptyElements(n))throw new l("shell is empty but holes are not");this.B=t,this.V=n},jt.serialVersionUID=-0x307ffefd8dc97200;var Bt=function(){is(i,mt);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof X){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&ns(ss(i.prototype),"equalsExact",this).call(this,t,n)}return ns(ss(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){return 1===arguments.length&&Number.isInteger(arguments[0])?this.N[arguments[0]].getCoordinate():ns(ss(i.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return kt.FALSE}},{key:"getTypeCode",value:function(){return X.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return X.TYPENAME_MULTIPOINT}},{key:"copy",value:function(){for(var t=new Array(this.N.length).fill(null),n=0;n<t.length;n++)t[n]=this.N[n].copy();return new i(t,this.k)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[Dt]}}]),i}();Bt.constructor_=function(){mt.constructor_.call(this,arguments[0],arguments[1])},Bt.serialVersionUID=-0x6fb1ed4162e0fc00;var Zt=function(){is(i,Lt);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getBoundaryDimension",value:function(){return kt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||ns(ss(i.prototype),"isClosed",this).call(this)}},{key:"getTypeCode",value:function(){return X.TYPECODE_LINEARRING}},{key:"reverse",value:function(){var t=this.G.copy();return Ot.reverse(t),this.getFactory().createLinearRing(t)}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!ns(ss(i.prototype),"isClosed",this).call(this))throw new l("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<i.MINIMUM_VALID_SIZE)throw new l("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return X.TYPENAME_LINEARRING}},{key:"copy",value:function(){return new i(this.G.copy(),this.k)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Zt.constructor_=function(){var t,n;arguments[0]instanceof Array&&arguments[1]instanceof hn?(t=arguments[0],Zt.constructor_.call(this,(n=arguments[1]).getCoordinateSequenceFactory().create(t),n)):d(arguments[0],Y)&&arguments[1]instanceof hn&&(Lt.constructor_.call(this,arguments[0],arguments[1]),this.validateConstruction())},Zt.MINIMUM_VALID_SIZE=4,Zt.serialVersionUID=-0x3b229e262367a600;var Vt=function(){is(i,mt);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof X){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&ns(ss(i.prototype),"equalsExact",this).call(this,t,n)}return ns(ss(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return X.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"reverse",value:function(){for(var t=this.N.length,n=new Array(t).fill(null),i=0;i<this.N.length;i++)n[i]=this.N[i].reverse();return this.getFactory().createMultiPolygon(n)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new S,n=0;n<this.N.length;n++)for(var i=this.N[n].getBoundary(),e=0;e<i.getNumGeometries();e++)t.add(i.getGeometryN(e));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))}},{key:"getGeometryType",value:function(){return X.TYPENAME_MULTIPOLYGON}},{key:"copy",value:function(){for(var t=new Array(this.N.length).fill(null),n=0;n<t.length;n++)t[n]=this.N[n].copy();return new i(t,this.k)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[Gt]}}]),i}();Vt.constructor_=function(){mt.constructor_.call(this,arguments[0],arguments[1])},Vt.serialVersionUID=-0x7a5aa1369171980;var Yt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"setCopyUserData",value:function(t){this.U=t}},{key:"edit",value:function(t,n){if(null===t)return null;n=this.editInternal(t,n);return this.U&&n.setUserData(t.getUserData()),n}},{key:"editInternal",value:function(t,n){return null===this.k&&(this.k=t.getFactory()),t instanceof mt?this.editGeometryCollection(t,n):t instanceof jt?this.editPolygon(t,n):t instanceof _t||t instanceof Lt?n.edit(t,this.k):(y.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)}},{key:"editGeometryCollection",value:function(t,n){for(var i=n.edit(t,this.k),e=new S,r=0;r<i.getNumGeometries();r++){var u=this.edit(i.getGeometryN(r),n);null===u||u.isEmpty()||e.add(u)}return i.getClass()===Bt?this.k.createMultiPoint(e.toArray([])):i.getClass()===pt?this.k.createMultiLineString(e.toArray([])):i.getClass()===Vt?this.k.createMultiPolygon(e.toArray([])):this.k.createGeometryCollection(e.toArray([]))}},{key:"editPolygon",value:function(t,n){var i=n.edit(t,this.k);if((i=null===i?this.k.createPolygon():i).isEmpty())return i;t=this.edit(i.getExteriorRing(),n);if(null===t||t.isEmpty())return this.k.createPolygon();for(var e=new S,r=0;r<i.getNumInteriorRing();r++){var u=this.edit(i.getInteriorRingN(r),n);null===u||u.isEmpty()||e.add(u)}return this.k.createPolygon(t,e.toArray([]))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();function Ut(){}Yt.GeometryEditorOperation=Ut;var Wt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"edit",value:function(t,n){return t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ut]}}]),t}();Wt.constructor_=function(){};var Xt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"edit",value:function(t,n){var i=this.edit(t.getCoordinates(),t);return t instanceof Zt?null===i?n.createLinearRing():n.createLinearRing(i):t instanceof Lt?null===i?n.createLineString():n.createLineString(i):t instanceof _t?null===i||0===i.length?n.createPoint():n.createPoint(i[0]):t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ut]}}]),t}();Xt.constructor_=function(){};var zt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"edit",value:function(t,n){return t instanceof Zt?n.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Lt?n.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof _t?n.createPoint(this.edit(t.getCoordinateSequence(),t)):t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ut]}}]),t}();zt.constructor_=function(){},Yt.NoOpGeometryOperation=Wt,Yt.CoordinateOperation=Xt,Yt.CoordinateSequenceOperation=zt,Yt.constructor_=function(){this.k=null,this.U=!1,0===arguments.length||1===arguments.length&&(this.k=arguments[0])};var Qt=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"setOrdinate",value:function(t,n,i){switch(n){case Y.X:this.j[t].x=i;break;case Y.Y:this.j[t].y=i;break;case Y.Z:this.j[t].z=i;break;default:throw new l("invalid ordinateIndex")}}},{key:"size",value:function(){return this.j.length}},{key:"getOrdinate",value:function(t,n){switch(n){case Y.X:return this.j[t].x;case Y.Y:return this.j[t].y;case Y.Z:return this.j[t].z}return c.NaN}},{key:"getCoordinate",value:function(){var t,n;if(1===arguments.length)return this.j[arguments[0]];2===arguments.length&&(t=arguments[0],(n=arguments[1]).x=this.j[t].x,n.y=this.j[t].y,n.z=this.j[t].z)}},{key:"getCoordinateCopy",value:function(t){return new k(this.j[t])}},{key:"getDimension",value:function(){return this.W}},{key:"getX",value:function(t){return this.j[t].x}},{key:"expandEnvelope",value:function(t){for(var n=0;n<this.j.length;n++)t.expandToInclude(this.j[n]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),n=0;n<this.j.length;n++)t[n]=this.j[n].copy();return new i(t,this.W)}},{key:"toString",value:function(){if(0<this.j.length){var t=new Pt(17*this.j.length);t.append("("),t.append(this.j[0]);for(var n=1;n<this.j.length;n++)t.append(", "),t.append(this.j[n]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this.j[t].y}},{key:"toCoordinateArray",value:function(){return this.j}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[Y,h]}}]),i}();Qt.constructor_=function(){if(this.W=3,this.j=null,1===arguments.length){if(arguments[0]instanceof Array)Qt.constructor_.call(this,arguments[0],3);else if(Number.isInteger(arguments[0])){var t=arguments[0];this.j=new Array(t).fill(null);for(var n=0;n<t;n++)this.j[n]=new k}else if(d(arguments[0],Y)){var i=arguments[0];if(null===i)return this.j=new Array(0).fill(null),null;for(this.W=i.getDimension(),this.j=new Array(i.size()).fill(null),n=0;n<this.j.length;n++)this.j[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var e=arguments[0],r=arguments[1];this.j=e,this.W=r,null===e&&(this.j=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],e=arguments[1];for(this.j=new Array(u).fill(null),this.W=e,n=0;n<u;n++)this.j[n]=new k}},Qt.serialVersionUID=-0xcb44a778db18e00;var Kt=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"readResolve",value:function(){return t.instance()}},{key:"create",value:function(){if(1===arguments.length)return arguments[0]instanceof Array||d(arguments[0],Y)?new Qt(arguments[0]):void 0;if(2===arguments.length){var t=arguments[0],n=arguments[1];return(n=3<n?3:n)<2?new Qt(t):new Qt(t,n)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[U,h]}}],[{key:"instance",value:function(){return t.instanceObject}}]),t}();Kt.constructor_=function(){},Kt.serialVersionUID=-0x38e49fa6cf6f2e00,Kt.instanceObject=new Kt;var Ht,Jt=Object.defineProperty,qt=(Bi={delete:function(t){return this.has(t)&&(this.Q.splice(ct,1),this.K.splice(ct,1),this.H.forEach(function(t){ct<t[0]&&t[0]--})),-1<ct},has:function(t){return function(t,n){if(this.objectOnly&&n!==Object(n))throw new TypeError("Invalid value used as weak collection key");if(n!=n||0===n)for(ct=t.length;ct--&&((i=t[ct])!==n&&(i==i||n==n)););else ct=t.indexOf(n);var i;return-1<ct}.call(this,this.Q,t)},get:function(t){return this.has(t)?this.K[ct]:void 0},set:function(t,n){return this.has(t)?this.K[ct]=n:this.K[this.Q.push(t)-1]=n,this},keys:function(){return tn(this.H,this.Q)},values:function(){return tn(this.H,this.K)},entries:function(){return tn(this.H,this.Q,this.K)},forEach:function(t,n){for(var i=this.entries();;){var e=i.next();if(e.done)break;t.call(n,e.value[1],e.value[0],this)}},clear:function(){(this.Q||0).length=this.K.length=0}},Ht||Jt(Bi,"size",{get:nn}),(Bi.constructor=$t).prototype=Bi,$t);function $t(t){if(!this||this.constructor!==$t)return new $t(t);this.Q=[],this.K=[],this.H=[],this.objectOnly=Ht,t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t)}function tn(i,e,r){var u=[0],s=!1;return i.push(u),{next:function(){var t,n=u[0];return!s&&n<e.length?(t=r?[e[n],r[n]]:e[n],u[0]++):(s=!0,i.splice(i.indexOf(u),1)),{done:s,value:t}}}}function nn(){return this.K.length}var en="undefined"!=typeof Map&&Map.prototype.values?Map:qt;function rn(){this.map_=new en}(rn.prototype=new it).get=function(t){return this.map_.get(t)||null},rn.prototype.put=function(t,n){return this.map_.set(t,n),n},rn.prototype.values=function(){for(var t=new S,n=this.map_.values(),i=n.next();!i.done;)t.add(i.value),i=n.next();return t},rn.prototype.entrySet=function(){var n=new ut;return this.map_.entries().forEach(function(t){return n.add(t)}),n},rn.prototype.size=function(){return this.map_.size()};var un=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"equals",value:function(t){return t instanceof n&&(this.J===t.J&&this.q===t.q)}},{key:"compareTo",value:function(t){var n=t,t=this.getMaximumSignificantDigits(),n=n.getMaximumSignificantDigits();return new L(t).compareTo(new L(n))}},{key:"getScale",value:function(){return this.q}},{key:"isFloating",value:function(){return this.J===n.FLOATING||this.J===n.FLOATING_SINGLE}},{key:"getType",value:function(){return this.J}},{key:"toString",value:function(){var t="UNKNOWN";return this.J===n.FLOATING?t="Floating":this.J===n.FLOATING_SINGLE?t="Floating-Single":this.J===n.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return!c.isNaN(t)&&this.J!==n.FLOATING_SINGLE&&this.J===n.FIXED?Math.round(t*this.q)/this.q:t}if(arguments[0]instanceof k){t=arguments[0];if(this.J===n.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this.J===n.FLOATING?t=16:this.J===n.FLOATING_SINGLE?t=6:this.J===n.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this.q=Math.abs(t)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[h,u]}}],[{key:"mostPrecise",value:function(t,n){return 0<=t.compareTo(n)?t:n}}]),n}(),sn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"readResolve",value:function(){return t.nameToTypeMap.get(this.$)}},{key:"toString",value:function(){return this.$}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[h]}}]),t}();sn.constructor_=function(){this.$=null;var t=arguments[0];this.$=t,sn.nameToTypeMap.put(t,this)},sn.serialVersionUID=-552860263173159e4,sn.nameToTypeMap=new rn,un.Type=sn,un.constructor_=function(){var t;this.J=null,this.q=null,0===arguments.length?this.J=un.FLOATING:1===arguments.length&&(arguments[0]instanceof sn?(this.J=arguments[0])===un.FIXED&&this.setScale(1):"number"==typeof arguments[0]?(t=arguments[0],this.J=un.FIXED,this.setScale(t)):arguments[0]instanceof un&&(this.J=(t=arguments[0]).J,this.q=t.q))},un.serialVersionUID=0x6bee6404e9a25c00,un.FIXED=new sn("FIXED"),un.FLOATING=new sn("FLOATING"),un.FLOATING_SINGLE=new sn("FLOATING SINGLE"),un.maximumPreciseValue=9007199254740992;var hn=function(){function g(){hs(this,g),g.constructor_.apply(this,arguments)}return gs(g,[{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new k(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new k(t.getMinX(),t.getMinY()),new k(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new k(t.getMinX(),t.getMinY()),new k(t.getMinX(),t.getMaxY()),new k(t.getMaxX(),t.getMaxY()),new k(t.getMaxX(),t.getMinY()),new k(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(d(arguments[0],Y))return new Lt(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new pt(null,this):1===arguments.length?new pt(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var n=null,i=!1,e=!1,r=t.iterator();r.hasNext();){var u=r.next(),s=u.getClass();s!==(n=null===n?s:n)&&(i=!0),u instanceof mt&&(e=!0)}if(null===n)return this.createGeometryCollection();if(i||e)return this.createGeometryCollection(g.toGeometryArray(t));var h=t.iterator().next();if(1<t.size()){if(h instanceof jt)return this.createMultiPolygon(g.toPolygonArray(t));if(h instanceof Lt)return this.createMultiLineString(g.toLineStringArray(t));if(h instanceof _t)return this.createMultiPoint(g.toPointArray(t));y.shouldNeverReachHere("Unhandled class: "+h.getClass().getName())}return h}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(d(arguments[0],Y))return new _t(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this.tt}},{key:"createPolygon",value:function(){return 0===arguments.length?this.createPolygon(null,null):1===arguments.length?d(arguments[0],Y)||arguments[0]instanceof Array?this.createPolygon(this.createLinearRing(arguments[0])):arguments[0]instanceof Zt?this.createPolygon(arguments[0],null):void 0:2===arguments.length?new jt(arguments[0],arguments[1],this):void 0}},{key:"getSRID",value:function(){return this.T}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new mt(null,this):1===arguments.length?new mt(arguments[0],this):void 0}},{key:"createGeometry",value:function(t){return new Yt(this).edit(t,new(function(){function t(){hs(this,t)}return gs(t,[{key:"edit",value:function(){if(2===arguments.length&&arguments[1]instanceof X&&d(arguments[0],Y))return this.tt.create(arguments[0])}}]),t}()))}},{key:"getPrecisionModel",value:function(){return this.nt}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(d(arguments[0],Y))return new Zt(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Bt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Bt(arguments[0],this);if(d(arguments[0],Y)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(t.size()).fill(null),i=0;i<t.size();i++){var e=this.getCoordinateSequenceFactory().create(1,t.getDimension());Ot.copy(t,i,e,0,1),n[i]=this.createPoint(e)}return this.createMultiPoint(n)}}}},{key:"getClass",value:function(){return g}},{key:"interfaces_",get:function(){return[h]}}],[{key:"toMultiPolygonArray",value:function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Kt.instance()}},{key:"toMultiLineStringArray",value:function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"toLineStringArray",value:function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"toMultiPointArray",value:function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"toLinearRingArray",value:function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"toPointArray",value:function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"toPolygonArray",value:function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)}},{key:"createPointFromInternalCoord",value:function(t,n){return n.getPrecisionModel().makePrecise(t),n.getFactory().createPoint(t)}}]),g}();hn.constructor_=function(){var t,n,i;this.nt=null,this.tt=null,this.T=null,0===arguments.length?hn.constructor_.call(this,new un,0):1===arguments.length?d(arguments[0],U)?(i=arguments[0],hn.constructor_.call(this,new un,0,i)):arguments[0]instanceof un&&hn.constructor_.call(this,arguments[0],0,hn.getDefaultCoordinateSequenceFactory()):2===arguments.length?hn.constructor_.call(this,arguments[0],arguments[1],hn.getDefaultCoordinateSequenceFactory()):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.nt=t,this.tt=i,this.T=n)},hn.serialVersionUID=-0x5ea75f2051eeb400;var gn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},on=function(){function n(t){hs(this,n),this.geometryFactory=t||new hn,this.precisionModel=this.geometryFactory.getPrecisionModel()}return gs(n,[{key:"read",value:function(t){var n,i;t=t.replace(/[\n\r]/g," ");var e=gn.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((e=gn.emptyTypeStr.exec(t))[2]=void 0),e&&(i=e[1].toLowerCase(),e=e[2],An[i]&&(n=An[i].call(this,e))),void 0===n)throw new Error("Could not parse WKT "+t);return n}},{key:"write",value:function(t){return this.extractGeometry(t)}},{key:"extractGeometry",value:function(t){var n=t.getGeometryType().toLowerCase();if(!an[n])return null;var i=n.toUpperCase();return t.isEmpty()?i+" EMPTY":i+"("+an[n].call(this,t)+")"}}]),n}(),an={coordinate:function(t){return t.x+" "+t.y},point:function(t){return an.coordinate.call(this,t.j.j[0])},multipoint:function(t){for(var n=[],i=0,e=t.N.length;i<e;++i)n.push("("+an.point.call(this,t.N[i])+")");return n.join(",")},linestring:function(t){for(var n=[],i=0,e=t.G.j.length;i<e;++i)n.push(an.coordinate.call(this,t.G.j[i]));return n.join(",")},linearring:function(t){for(var n=[],i=0,e=t.G.j.length;i<e;++i)n.push(an.coordinate.call(this,t.G.j[i]));return n.join(",")},multilinestring:function(t){for(var n=[],i=0,e=t.N.length;i<e;++i)n.push("("+an.linestring.call(this,t.N[i])+")");return n.join(",")},polygon:function(t){var n=[];n.push("("+an.linestring.call(this,t.B)+")");for(var i=0,e=t.V.length;i<e;++i)n.push("("+an.linestring.call(this,t.V[i])+")");return n.join(",")},multipolygon:function(t){for(var n=[],i=0,e=t.N.length;i<e;++i)n.push("("+an.polygon.call(this,t.N[i])+")");return n.join(",")},geometrycollection:function(t){for(var n=[],i=0,e=t.N.length;i<e;++i)n.push(this.extractGeometry(t.N[i]));return n.join(",")}},An={coord:function(t){t=t.trim().split(gn.spaces),t=new k(Number.parseFloat(t[0]),Number.parseFloat(t[1]));return this.precisionModel.makePrecise(t),t},point:function(t){return void 0===t?this.geometryFactory.createPoint():this.geometryFactory.createPoint(An.coord.call(this,t))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n,i=t.trim().split(","),e=[],r=0,u=i.length;r<u;++r)n=i[r].replace(gn.trimParens,"$1"),e.push(An.point.call(this,n));return this.geometryFactory.createMultiPoint(e)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var n=t.trim().split(","),i=[],e=0,r=n.length;e<r;++e)i.push(An.coord.call(this,n[e]));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var n=t.trim().split(","),i=[],e=0,r=n.length;e<r;++e)i.push(An.coord.call(this,n[e]));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n,i=t.trim().split(gn.parenComma),e=[],r=0,u=i.length;r<u;++r)n=i[r].replace(gn.trimParens,"$1"),e.push(An.linestring.call(this,n));return this.geometryFactory.createMultiLineString(e)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var n,i,e=t.trim().split(gn.parenComma),r=[],u=0,s=e.length;u<s;++u)n=e[u].replace(gn.trimParens,"$1"),n=An.linestring.call(this,n),n=this.geometryFactory.createLinearRing(n.G),0===u?i=n:r.push(n);return this.geometryFactory.createPolygon(i,r)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n,i=t.trim().split(gn.doubleParenComma),e=[],r=0,u=i.length;r<u;++r)n=i[r].replace(gn.trimParens,"$1"),e.push(An.polygon.call(this,n));return this.geometryFactory.createMultiPolygon(e)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var n=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],e=0,r=n.length;e<r;++e)i.push(this.read(n[e]));return this.geometryFactory.createGeometryCollection(i)}},Cn=function(){function n(t){hs(this,n),this.parser=new on(t)}return gs(n,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,n){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+n.x+" "+n.y+" )"}}]),n}(),In=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"getIndexAlongSegment",value:function(t,n){return this.computeIntLineIndex(),this.it[t][n]}},{key:"getTopologySummary",value:function(){var t=new Pt;return this.isEndPoint()&&t.append(" endpoint"),this.et&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,n,i,e){this.rt[0][0]=t,this.rt[0][1]=n,this.rt[1][0]=i,this.rt[1][1]=e,this.ut=this.computeIntersect(t,n,i,e)}},{key:"getIntersectionNum",value:function(){return this.ut}},{key:"computeIntLineIndex",value:function(){var t;0===arguments.length?null===this.it&&(this.it=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1)):1===arguments.length&&(this.getEdgeDistance(t=arguments[0],0)>this.getEdgeDistance(t,1)?(this.it[t][0]=0,this.it[t][1]=1):(this.it[t][0]=1,this.it[t][1]=0))}},{key:"isProper",value:function(){return this.hasIntersection()&&this.et}},{key:"setPrecisionModel",value:function(t){this.nt=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],n=0;n<this.ut;n++)if(!this.st[n].equals2D(this.rt[t][0])&&!this.st[n].equals2D(this.rt[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this.st[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this.et}},{key:"hasIntersection",value:function(){return this.ut!==i.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){return i.computeEdgeDistance(this.st[n],this.rt[t][0],this.rt[t][1])}},{key:"isCollinear",value:function(){return this.ut===i.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Cn.toLineString(this.rt[0][0],this.rt[0][1])+" - "+Cn.toLineString(this.rt[1][0],this.rt[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,n){return this.rt[t][n]}},{key:"isIntersection",value:function(t){for(var n=0;n<this.ut;n++)if(this.st[n].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,n){return this.computeIntLineIndex(),this.st[this.it[t][n]]}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeEdgeDistance",value:function(t,n,i){var e,r=Math.abs(i.x-n.x),u=Math.abs(i.y-n.y),s=-1;return t.equals(n)?s=0:t.equals(i)?s=u<r?r:u:(e=Math.abs(t.x-n.x),i=Math.abs(t.y-n.y),0!==(s=u<r?e:i)||t.equals(n)||(s=Math.max(e,i))),y.isTrue(!(0===s&&!t.equals(n)),"Bad distance calculation"),s}},{key:"nonRobustComputeEdgeDistance",value:function(t,n,i){var e=t.x-n.x,r=t.y-n.y,r=Math.sqrt(e*e+r*r);return y.isTrue(!(0===r&&!t.equals(n)),"Invalid distance calculation"),r}}]),i}();In.constructor_=function(){this.ut=null,this.rt=Array(2).fill().map(function(){return Array(2)}),this.st=new Array(2).fill(null),this.it=null,this.et=null,this.ht=null,this.ot=null,this.nt=null,this.st[0]=new k,this.st[1]=new k,this.ht=this.st[0],this.ot=this.st[1],this.ut=0},In.DONT_INTERSECT=0,In.DO_INTERSECT=1,In.COLLINEAR=2,In.NO_INTERSECTION=0,In.POINT_INTERSECTION=1,In.COLLINEAR_INTERSECTION=2;var ln=function(){is(s,In);var n=es(s);function s(){var t;return hs(this,s),t=n.call(this),s.constructor_.apply(us(t),arguments),t}return gs(s,[{key:"isInSegmentEnvelopes",value:function(t){var n=new T(this.rt[0][0],this.rt[0][1]),i=new T(this.rt[1][0],this.rt[1][1]);return n.contains(t)&&i.contains(t)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return ns(ss(s.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],n=arguments[1],i=arguments[2];if(this.et=!1,T.intersects(n,i,t)&&0===G.index(n,i,t)&&0===G.index(i,n,t))return this.et=!0,(t.equals(n)||t.equals(i))&&(this.et=!1),this.ut=In.POINT_INTERSECTION,null;this.ut=In.NO_INTERSECTION}},{key:"normalizeToMinimum",value:function(t,n,i,e,r){r.x=this.smallestInAbsValue(t.x,n.x,i.x,e.x),r.y=this.smallestInAbsValue(t.y,n.y,i.y,e.y),t.x-=r.x,t.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y,e.x-=r.x,e.y-=r.y}},{key:"safeHCoordinateIntersection",value:function(n,i,e,r){var u=null;try{u=B.intersection(n,i,e,r)}catch(t){if(!(t instanceof P))throw t;u=s.nearestEndpoint(n,i,e,r)}return u}},{key:"intersection",value:function(t,n,i,e){var r=this.intersectionWithNormalization(t,n,i,e);return this.isInSegmentEnvelopes(r)||(r=new k(s.nearestEndpoint(t,n,i,e))),null!==this.nt&&this.nt.makePrecise(r),r}},{key:"smallestInAbsValue",value:function(t,n,i,e){var r=t,t=Math.abs(r);return Math.abs(n)<t&&(r=n,t=Math.abs(n)),Math.abs(i)<t&&(r=i,t=Math.abs(i)),r=Math.abs(e)<t?e:r}},{key:"checkDD",value:function(t,n,i,e,r){i=F.intersection(t,n,i,e),e=this.isInSegmentEnvelopes(i);j.out.println("DD in env = "+e+"  --------------------- "+i),1e-4<r.distance(i)&&j.out.println("Distance = "+r.distance(i))}},{key:"intersectionWithNormalization",value:function(t,n,i,e){var r=new k(t),t=new k(n),n=new k(i),i=new k(e),e=new k;this.normalizeToEnvCentre(r,t,n,i,e);i=this.safeHCoordinateIntersection(r,t,n,i);return i.x+=e.x,i.y+=e.y,i}},{key:"computeCollinearIntersection",value:function(t,n,i,e){var r=T.intersects(t,n,i),u=T.intersects(t,n,e),s=T.intersects(i,e,t),h=T.intersects(i,e,n);return r&&u?(this.st[0]=i,this.st[1]=e,In.COLLINEAR_INTERSECTION):s&&h?(this.st[0]=t,this.st[1]=n,In.COLLINEAR_INTERSECTION):r&&s?(this.st[0]=i,this.st[1]=t,!i.equals(t)||u||h?In.COLLINEAR_INTERSECTION:In.POINT_INTERSECTION):r&&h?(this.st[0]=i,this.st[1]=n,!i.equals(n)||u||s?In.COLLINEAR_INTERSECTION:In.POINT_INTERSECTION):u&&s?(this.st[0]=e,this.st[1]=t,!e.equals(t)||r||h?In.COLLINEAR_INTERSECTION:In.POINT_INTERSECTION):u&&h?(this.st[0]=e,this.st[1]=n,!e.equals(n)||r||s?In.COLLINEAR_INTERSECTION:In.POINT_INTERSECTION):In.NO_INTERSECTION}},{key:"normalizeToEnvCentre",value:function(t,n,i,e,r){var u=(t.x<n.x?t:n).x,s=(t.y<n.y?t:n).y,h=(t.x>n.x?t:n).x,g=(t.y>n.y?t:n).y,o=(i.x<e.x?i:e).x,a=(i.y<e.y?i:e).y,A=(i.x>e.x?i:e).x,C=(i.y>e.y?i:e).y,C=((a<s?s:a)+(g<C?g:C))/2;r.x=((o<u?u:o)+(h<A?h:A))/2,r.y=C,t.x-=r.x,t.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y,e.x-=r.x,e.y-=r.y}},{key:"computeIntersect",value:function(t,n,i,e){if(this.et=!1,!T.intersects(t,n,i,e))return In.NO_INTERSECTION;var r=G.index(t,n,i),u=G.index(t,n,e);if(0<r&&0<u||r<0&&u<0)return In.NO_INTERSECTION;var s=G.index(i,e,t),h=G.index(i,e,n);return 0<s&&0<h||s<0&&h<0?In.NO_INTERSECTION:0===r&&0===u&&0===s&&0===h?this.computeCollinearIntersection(t,n,i,e):(0===r||0===u||0===s||0===h?(this.et=!1,t.equals2D(i)||t.equals2D(e)?this.st[0]=t:n.equals2D(i)||n.equals2D(e)?this.st[0]=n:0===r?this.st[0]=new k(i):0===u?this.st[0]=new k(e):0===s?this.st[0]=new k(t):0===h&&(this.st[0]=new k(n))):(this.et=!0,this.st[0]=this.intersection(t,n,i,e)),In.POINT_INTERSECTION)}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"nearestEndpoint",value:function(t,n,i,e){var r=t,u=V.pointToSegment(t,i,e),s=V.pointToSegment(n,i,e);return s<u&&(u=s,r=n),(s=V.pointToSegment(i,t,n))<u&&(u=s,r=i),(s=V.pointToSegment(e,t,n))<u&&(u=s,r=e),r}}]),s}();ln.constructor_=function(){};var fn=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof r){var t=arguments[0],n=G.index(this.p0,this.p1,t.p0),t=G.index(this.p0,this.p1,t.p1);return 0<=n&&0<=t||n<=0&&t<=0?Math.max(n,t):0}if(arguments[0]instanceof k)return G.index(this.p0,this.p1,arguments[0])}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)}},{key:"intersection",value:function(t){var n=new ln;return n.computeIntersection(this.p0,this.p1,t.p0,t.p1),n.hasIntersection()?n.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof k){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new k(t);var n=this.projectionFactor(t),i=new k;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof r){var e=arguments[0],t=this.projectionFactor(e.p0),n=this.projectionFactor(e.p1);if(1<=t&&1<=n)return null;if(t<=0&&n<=0)return null;i=this.project(e.p0);t<0&&(i=this.p0),1<t&&(i=this.p1);e=this.project(e.p1);return n<0&&(e=this.p0),new r(i,e=1<n?this.p1:e)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return V.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return r.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var n=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,e=n*n+i*i;return e<=0?c.NaN:((t.x-this.p0.x)*n+(t.y-this.p0.y)*i)/e}},{key:"closestPoints",value:function(t){var n=this.intersection(t);if(null!==n)return[n,n];var i=new Array(2).fill(null),e=c.MAX_VALUE,r=null,n=this.closestPoint(t.p0),e=n.distance(t.p0);i[0]=n,i[1]=t.p0;n=this.closestPoint(t.p1);(r=n.distance(t.p1))<e&&(e=r,i[0]=n,i[1]=t.p1);n=t.closestPoint(this.p0);(r=n.distance(this.p0))<e&&(e=r,i[0]=this.p0,i[1]=n);t=t.closestPoint(this.p1);return(r=t.distance(this.p1))<e&&(e=r,i[0]=this.p1,i[1]=t),i}},{key:"closestPoint",value:function(t){var n=this.projectionFactor(t);return 0<n&&n<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var n=t,t=this.p0.compareTo(n.p0);return 0!==t?t:this.p1.compareTo(n.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){try{return B.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof P))throw t}return null}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,n){var i=this.p0.x+t*(this.p1.x-this.p0.x),e=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,s=Math.sqrt(r*r+u*u),h=0,t=0;if(0!==n){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");h=n*r/s,t=n*u/s}return new k(i-t,e+h)}},{key:"setCoordinates",value:function(){var t,n;1===arguments.length?this.setCoordinates((n=arguments[0]).p0,n.p1):2===arguments.length&&(t=arguments[0],n=arguments[1],this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y)}},{key:"segmentFraction",value:function(t){t=this.projectionFactor(t);return t<0?t=0:(1<t||c.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"distance",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return V.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof k)return V.pointToSegment(arguments[0],this.p0,this.p1)}},{key:"pointAlong",value:function(t){var n=new k;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}},{key:"hashCode",value:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var n=Math.trunc(t)^Math.trunc(t>>32),t=java.lang.Double.doubleToLongBits(this.p1.x);return t^=31*java.lang.Double.doubleToLongBits(this.p1.y),n^(Math.trunc(t)^Math.trunc(t>>32))}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[u,h]}}],[{key:"midPoint",value:function(t,n){return new k((t.x+n.x)/2,(t.y+n.y)/2)}}]),r}();fn.constructor_=function(){var t,n,i,e;this.p0=null,this.p1=null,0===arguments.length?fn.constructor_.call(this,new k,new k):1===arguments.length?fn.constructor_.call(this,(n=arguments[0]).p0,n.p1):2===arguments.length?(i=arguments[0],e=arguments[1],this.p0=i,this.p1=e):4===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],fn.constructor_.call(this,new k(t,n),new k(i,e)))},fn.serialVersionUID=0x2d2172135f411c00;var cn=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLocationSymbol",value:function(t){switch(t){case n.EXTERIOR:return"e";case n.BOUNDARY:return"b";case n.INTERIOR:return"i";case n.NONE:return"-"}throw new l("Unknown location value: "+t)}}]),n}();cn.constructor_=function(){},cn.INTERIOR=0,cn.BOUNDARY=1,cn.EXTERIOR=2,cn.NONE=-1;var vn=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])||e.isTrue(this.At[cn.INTERIOR][cn.BOUNDARY])||e.isTrue(this.At[cn.BOUNDARY][cn.INTERIOR])||e.isTrue(this.At[cn.BOUNDARY][cn.BOUNDARY]))&&this.At[cn.EXTERIOR][cn.INTERIOR]===kt.FALSE&&this.At[cn.EXTERIOR][cn.BOUNDARY]===kt.FALSE}},{key:"isCoveredBy",value:function(){return(e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])||e.isTrue(this.At[cn.INTERIOR][cn.BOUNDARY])||e.isTrue(this.At[cn.BOUNDARY][cn.INTERIOR])||e.isTrue(this.At[cn.BOUNDARY][cn.BOUNDARY]))&&this.At[cn.INTERIOR][cn.EXTERIOR]===kt.FALSE&&this.At[cn.BOUNDARY][cn.EXTERIOR]===kt.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],n=0;n<t.length;n++){var i=Math.trunc(n/3);this.At[i][n%3]=kt.toDimensionValue(t.charAt(n))}else 3===arguments.length&&(this.At[arguments[0]][arguments[1]]=arguments[2])}},{key:"isContains",value:function(){return e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])&&this.At[cn.EXTERIOR][cn.INTERIOR]===kt.FALSE&&this.At[cn.EXTERIOR][cn.BOUNDARY]===kt.FALSE}},{key:"setAtLeast",value:function(){var t,n,i;if(1===arguments.length)for(var e=arguments[0],r=0;r<e.length;r++){var u=Math.trunc(r/3);this.setAtLeast(u,r%3,kt.toDimensionValue(e.charAt(r)))}else 3!==arguments.length||this.At[t=arguments[0]][n=arguments[1]]<(i=arguments[2])&&(this.At[t][n]=i)}},{key:"setAtLeastIfValid",value:function(t,n,i){0<=t&&0<=n&&this.setAtLeast(t,n,i)}},{key:"isWithin",value:function(){return e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])&&this.At[cn.INTERIOR][cn.EXTERIOR]===kt.FALSE&&this.At[cn.BOUNDARY][cn.EXTERIOR]===kt.FALSE}},{key:"isTouches",value:function(t,n){return n<t?this.isTouches(n,t):(t===kt.A&&n===kt.A||t===kt.L&&n===kt.L||t===kt.L&&n===kt.A||t===kt.P&&n===kt.A||t===kt.P&&n===kt.L)&&this.At[cn.INTERIOR][cn.INTERIOR]===kt.FALSE&&(e.isTrue(this.At[cn.INTERIOR][cn.BOUNDARY])||e.isTrue(this.At[cn.BOUNDARY][cn.INTERIOR])||e.isTrue(this.At[cn.BOUNDARY][cn.BOUNDARY]))}},{key:"isOverlaps",value:function(t,n){return t===kt.P&&n===kt.P||t===kt.A&&n===kt.A?e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])&&e.isTrue(this.At[cn.INTERIOR][cn.EXTERIOR])&&e.isTrue(this.At[cn.EXTERIOR][cn.INTERIOR]):t===kt.L&&n===kt.L&&1===this.At[cn.INTERIOR][cn.INTERIOR]&&e.isTrue(this.At[cn.INTERIOR][cn.EXTERIOR])&&e.isTrue(this.At[cn.EXTERIOR][cn.INTERIOR])}},{key:"isEquals",value:function(t,n){return t===n&&e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])&&this.At[cn.INTERIOR][cn.EXTERIOR]===kt.FALSE&&this.At[cn.BOUNDARY][cn.EXTERIOR]===kt.FALSE&&this.At[cn.EXTERIOR][cn.INTERIOR]===kt.FALSE&&this.At[cn.EXTERIOR][cn.BOUNDARY]===kt.FALSE}},{key:"toString",value:function(){for(var t=new Pt("123456789"),n=0;n<3;n++)for(var i=0;i<3;i++)t.setCharAt(3*n+i,kt.toDimensionSymbol(this.At[n][i]));return t.toString()}},{key:"setAll",value:function(t){for(var n=0;n<3;n++)for(var i=0;i<3;i++)this.At[n][i]=t}},{key:"get",value:function(t,n){return this.At[t][n]}},{key:"transpose",value:function(){var t=this.At[1][0];return this.At[1][0]=this.At[0][1],this.At[0][1]=t,t=this.At[2][0],this.At[2][0]=this.At[0][2],this.At[0][2]=t,t=this.At[2][1],this.At[2][1]=this.At[1][2],this.At[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new l("Should be length 9: "+t);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!e.matches(this.At[n][i],t.charAt(3*n+i)))return!1;return!0}},{key:"add",value:function(t){for(var n=0;n<3;n++)for(var i=0;i<3;i++)this.setAtLeast(n,i,t.get(n,i))}},{key:"isDisjoint",value:function(){return this.At[cn.INTERIOR][cn.INTERIOR]===kt.FALSE&&this.At[cn.INTERIOR][cn.BOUNDARY]===kt.FALSE&&this.At[cn.BOUNDARY][cn.INTERIOR]===kt.FALSE&&this.At[cn.BOUNDARY][cn.BOUNDARY]===kt.FALSE}},{key:"isCrosses",value:function(t,n){return t===kt.P&&n===kt.L||t===kt.P&&n===kt.A||t===kt.L&&n===kt.A?e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])&&e.isTrue(this.At[cn.INTERIOR][cn.EXTERIOR]):t===kt.L&&n===kt.P||t===kt.A&&n===kt.P||t===kt.A&&n===kt.L?e.isTrue(this.At[cn.INTERIOR][cn.INTERIOR])&&e.isTrue(this.At[cn.EXTERIOR][cn.INTERIOR]):t===kt.L&&n===kt.L&&0===this.At[cn.INTERIOR][cn.INTERIOR]}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[s]}}],[{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return n===kt.SYM_DONTCARE||n===kt.SYM_TRUE&&(0<=t||t===kt.TRUE)||n===kt.SYM_FALSE&&t===kt.FALSE||n===kt.SYM_P&&t===kt.P||n===kt.SYM_L&&t===kt.L||n===kt.SYM_A&&t===kt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){n=arguments[0],t=arguments[1];return new e(n).matches(t)}}},{key:"isTrue",value:function(t){return 0<=t||t===kt.TRUE}}]),e}();vn.constructor_=function(){var t;this.At=null,0===arguments.length?(this.At=Array(3).fill().map(function(){return Array(3)}),this.setAll(kt.FALSE)):1===arguments.length&&("string"==typeof arguments[0]?(t=arguments[0],vn.constructor_.call(this),this.set(t)):arguments[0]instanceof vn&&(t=arguments[0],vn.constructor_.call(this),this.At[cn.INTERIOR][cn.INTERIOR]=t.At[cn.INTERIOR][cn.INTERIOR],this.At[cn.INTERIOR][cn.BOUNDARY]=t.At[cn.INTERIOR][cn.BOUNDARY],this.At[cn.INTERIOR][cn.EXTERIOR]=t.At[cn.INTERIOR][cn.EXTERIOR],this.At[cn.BOUNDARY][cn.INTERIOR]=t.At[cn.BOUNDARY][cn.INTERIOR],this.At[cn.BOUNDARY][cn.BOUNDARY]=t.At[cn.BOUNDARY][cn.BOUNDARY],this.At[cn.BOUNDARY][cn.EXTERIOR]=t.At[cn.BOUNDARY][cn.EXTERIOR],this.At[cn.EXTERIOR][cn.INTERIOR]=t.At[cn.EXTERIOR][cn.INTERIOR],this.At[cn.EXTERIOR][cn.BOUNDARY]=t.At[cn.EXTERIOR][cn.BOUNDARY],this.At[cn.EXTERIOR][cn.EXTERIOR]=t.At[cn.EXTERIOR][cn.EXTERIOR]))};var yn=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var n=arguments[0],i=arguments[1],t=i.x-n.x,n=i.y-n.y;return Math.atan2(n,t)}}},{key:"isAcute",value:function(t,n,i){var e=t.x-n.x,t=t.y-n.y;return 0<e*(i.x-n.x)+t*(i.y-n.y)}},{key:"isObtuse",value:function(t,n,i){var e=t.x-n.x,t=t.y-n.y;return e*(i.x-n.x)+t*(i.y-n.y)<0}},{key:"interiorAngle",value:function(t,n,i){t=e.angle(n,t),i=e.angle(n,i);return Math.abs(i-t)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;e.PI_TIMES_2<=t&&(t=0)}else{for(;e.PI_TIMES_2<=t;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,i){t=e.angle(n,t),i=e.angle(n,i);return e.diff(t,i)}},{key:"diff",value:function(t,n){var i=null;return i=(i=t<n?n-t:t-n)>Math.PI?2*Math.PI-i:i}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,n){t=Math.sin(n-t);return 0<t?e.COUNTERCLOCKWISE:t<0?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,i){t=e.angle(n,t),t=e.angle(n,i)-t;return t<=-Math.PI?t+e.PI_TIMES_2:t>Math.PI?t-e.PI_TIMES_2:t}}]),e}();yn.constructor_=function(){},yn.PI_TIMES_2=2*Math.PI,yn.PI_OVER_2=Math.PI/2,yn.PI_OVER_4=Math.PI/4,yn.COUNTERCLOCKWISE=G.COUNTERCLOCKWISE,yn.CLOCKWISE=G.CLOCKWISE,yn.NONE=G.COLLINEAR;var kn=function(){function g(){hs(this,g),g.constructor_.apply(this,arguments)}return gs(g,[{key:"area",value:function(){return g.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return g.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new l("Supplied point is null.");return g.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return g.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return g.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return g.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return g.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return g.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return g.inCentre(this.p0,this.p1,this.p2)}},{key:"getClass",value:function(){return g}},{key:"interfaces_",get:function(){return[]}}],[{key:"area",value:function(t,n,i){return Math.abs(((i.x-t.x)*(n.y-t.y)-(n.x-t.x)*(i.y-t.y))/2)}},{key:"signedArea",value:function(t,n,i){return((i.x-t.x)*(n.y-t.y)-(n.x-t.x)*(i.y-t.y))/2}},{key:"det",value:function(t,n,i,e){return t*e-n*i}},{key:"interpolateZ",value:function(t,n,i,e){var r=n.x,u=n.y,s=i.x-r,h=e.x-r,g=i.y-u,o=e.y-u,a=s*o-h*g,r=t.x-r,u=t.y-u;return n.z+(o*r-h*u)/a*(i.z-n.z)+(-g*r+s*u)/a*(e.z-n.z)}},{key:"longestSideLength",value:function(t,n,i){var e=t.distance(n),n=n.distance(i),i=i.distance(t),t=e;return t=(t=e<n?n:e)<i?i:t}},{key:"isAcute",value:function(t,n,i){return!!yn.isAcute(t,n,i)&&!!yn.isAcute(n,i,t)&&!!yn.isAcute(i,t,n)}},{key:"circumcentre",value:function(t,n,i){var e=i.x,r=i.y,u=t.x-e,s=t.y-r,h=n.x-e,i=n.y-r,t=2*g.det(u,s,h,i),n=g.det(s,u*u+s*s,i,h*h+i*i),i=g.det(u,u*u+s*s,h,h*h+i*i);return new k(e-n/t,r+i/t)}},{key:"perpendicularBisector",value:function(t,n){var i=n.x-t.x,e=n.y-t.y,n=new B(t.x+i/2,t.y+e/2,1),e=new B(t.x-e+i/2,t.y+i+e/2,1);return new B(n,e)}},{key:"angleBisector",value:function(t,n,i){var e=n.distance(t),e=e/(e+n.distance(i)),n=i.x-t.x,i=i.y-t.y;return new k(t.x+e*n,t.y+e*i)}},{key:"area3D",value:function(t,n,i){var e=n.x-t.x,r=n.y-t.y,u=n.z-t.z,s=i.x-t.x,n=i.y-t.y,i=i.z-t.z,t=r*i-u*n,i=u*s-e*i,s=e*n-r*s;return Math.sqrt(t*t+i*i+s*s)/2}},{key:"centroid",value:function(t,n,i){var e=(t.x+n.x+i.x)/3,i=(t.y+n.y+i.y)/3;return new k(e,i)}},{key:"inCentre",value:function(t,n,i){var e=n.distance(i),r=t.distance(i),u=t.distance(n),s=e+r+u,h=(e*t.x+r*n.x+u*i.x)/s,s=(e*t.y+r*n.y+u*i.y)/s;return new k(h,s)}}]),g}();kn.constructor_=function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],n=arguments[1],i=arguments[2];this.p0=t,this.p1=n,this.p2=i};var dn=Object.freeze({Coordinate:k,CoordinateList:R,Envelope:T,LineSegment:fn,GeometryFactory:hn,Geometry:X,Point:_t,LineString:Lt,LinearRing:Zt,Polygon:jt,GeometryCollection:mt,MultiPoint:Bt,MultiLineString:pt,MultiPolygon:Vt,Dimension:kt,IntersectionMatrix:vn,PrecisionModel:un,Location:cn,Triangle:kn}),wn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinates",value:function(){return this.Ct}},{key:"getCoordinate",value:function(t){return this.Ct[t]}},{key:"setMinimum",value:function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t.Ct[0],t.Ct[1])}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.It)return this.initialize(n,i),null;t=n.distance(i);t<this.ft&&this.initialize(n,i,t)}}},{key:"initialize",value:function(){var t,n,i;0===arguments.length?this.It=!0:2===arguments.length?(n=arguments[0],i=arguments[1],this.Ct[0].setCoordinate(n),this.Ct[1].setCoordinate(i),this.ft=n.distance(i),this.It=!1):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.Ct[0].setCoordinate(t),this.Ct[1].setCoordinate(n),this.ft=i,this.It=!1)}},{key:"toString",value:function(){return Cn.toLineString(this.Ct[0],this.Ct[1])}},{key:"getDistance",value:function(){return this.ft}},{key:"setMaximum",value:function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t.Ct[0],t.Ct[1])}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.It)return this.initialize(n,i),null;t=n.distance(i);t>this.ft&&this.initialize(n,i,t)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();wn.constructor_=function(){this.Ct=[new k,new k],this.ft=c.NaN,this.It=!0};var mn=function(){function c(){hs(this,c),c.constructor_.apply(this,arguments)}return gs(c,[{key:"getClass",value:function(){return c}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeDistance",value:function(){if(arguments[2]instanceof wn&&arguments[0]instanceof Lt&&arguments[1]instanceof k)for(var t=arguments[0],n=arguments[1],i=arguments[2],e=new fn,r=t.getCoordinates(),u=0;u<r.length-1;u++){e.setCoordinates(r[u],r[u+1]);var s=e.closestPoint(n);i.setMinimum(s,n)}else if(arguments[2]instanceof wn&&arguments[0]instanceof jt&&arguments[1]instanceof k){var h=arguments[0],g=arguments[1],o=arguments[2];for(c.computeDistance(h.getExteriorRing(),g,o),u=0;u<h.getNumInteriorRing();u++)c.computeDistance(h.getInteriorRingN(u),g,o)}else if(arguments[2]instanceof wn&&arguments[0]instanceof X&&arguments[1]instanceof k){var a=arguments[0],A=arguments[1],C=arguments[2];if(a instanceof Lt)c.computeDistance(a,A,C);else if(a instanceof jt)c.computeDistance(a,A,C);else if(a instanceof mt)for(var I=a,u=0;u<I.getNumGeometries();u++){var l=I.getGeometryN(u);c.computeDistance(l,A,C)}else C.setMinimum(a.getCoordinate(),A)}else{var f;arguments[2]instanceof wn&&arguments[0]instanceof fn&&arguments[1]instanceof k&&(f=arguments[0],t=arguments[1],a=arguments[2],s=f.closestPoint(t),a.setMinimum(s,t))}}}]),c}();mn.constructor_=function(){};var pn=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"getCoordinates",value:function(){return this.ct.getCoordinates()}},{key:"setDensifyFraction",value:function(t){if(1<t||t<=0)throw new l("Fraction is not in range (0.0 - 1.0]");this.vt=t}},{key:"compute",value:function(t,n){this.computeOrientedDistance(t,n,this.ct),this.computeOrientedDistance(n,t,this.ct)}},{key:"distance",value:function(){return this.compute(this.yt,this.kt),this.ct.getDistance()}},{key:"computeOrientedDistance",value:function(t,n,i){var e=new Mn(n);t.apply(e),i.setMaximum(e.getMaxPointDistance()),0<this.vt&&(n=new bn(n,this.vt),t.apply(n),i.setMaximum(n.getMaxPointDistance()))}},{key:"orientedDistance",value:function(){return this.computeOrientedDistance(this.yt,this.kt,this.ct),this.ct.getDistance()}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(){if(2===arguments.length)return(t=new r(arguments[0],arguments[1])).distance();if(3===arguments.length){var t,n=arguments[0],i=arguments[1],e=arguments[2];return(t=new r(n,i)).setDensifyFraction(e),t.distance()}}}]),r}(),Mn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t){this.dt.initialize(),mn.computeDistance(this.O,t,this.dt),this.wt.setMaximum(this.dt)}},{key:"getMaxPointDistance",value:function(){return this.wt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[z]}}]),t}();Mn.constructor_=function(){this.wt=new wn,this.dt=new wn,this.mt=new mn,this.O=null,this.O=arguments[0]};var bn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t,n){if(0===n)return null;for(var i=t.getCoordinate(n-1),n=t.getCoordinate(n),e=(n.x-i.x)/this.Mt,r=(n.y-i.y)/this.Mt,u=0;u<this.Mt;u++){var s=i.x+u*e,h=i.y+u*r,h=new k(s,h);this.dt.initialize(),mn.computeDistance(this.O,h,this.dt),this.wt.setMaximum(this.dt)}}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!1}},{key:"getMaxPointDistance",value:function(){return this.wt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[wt]}}]),t}();bn.constructor_=function(){this.wt=new wn,this.dt=new wn,this.O=null;var t=arguments[this.Mt=0],n=arguments[1];this.O=t,this.Mt=Math.trunc(Math.round(1/n))},pn.MaxPointDistanceFilter=Mn,pn.MaxDensifiedByFractionDistanceFilter=bn,pn.constructor_=function(){this.yt=null,this.kt=null,this.ct=new wn;var t=arguments[this.vt=0],n=arguments[1];this.yt=t,this.kt=n};var En=Object.freeze({DiscreteHausdorffDistance:pn,DistanceToPoint:mn,PointPairDistance:wn}),Sn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visitItem",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Sn.constructor_=function(){};var xn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"locate",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();xn.constructor_=function(){};var Rn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getMin",value:function(){return this.bt}},{key:"intersects",value:function(t,n){return!(this.bt>n||this.Et<t)}},{key:"getMax",value:function(){return this.Et}},{key:"toString",value:function(){return Cn.toLineString(new k(this.bt,0),new k(this.Et,0))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),Tn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"compare",value:function(t,n){t=(t.bt+t.Et)/2,n=(n.bt+n.Et)/2;return t<n?-1:n<t?1:0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[n]}}]),t}();Tn.constructor_=function(){},Rn.NodeComparator=Tn,Rn.constructor_=function(){this.bt=c.POSITIVE_INFINITY,this.Et=c.NEGATIVE_INFINITY};var Nn=function(){is(i,Rn);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"query",value:function(t,n,i){if(!this.intersects(t,n))return null;i.visitItem(this.St)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Nn.constructor_=function(){this.St=null;var t=arguments[0],n=arguments[1],i=arguments[2];this.bt=t,this.Et=n,this.St=i};var Pn={reverseOrder:function(){return{compare:function(t,n){return n.compareTo(t)}}},min:function(t){return Pn.sort(t),t.get(0)},sort:function(t,n){var i=t.toArray();n?yt.sort(i,n):yt.sort(i);for(var e=t.iterator(),r=0,u=i.length;r<u;r++)e.next(),e.set(i[r])},singletonList:function(t){var n=new S;return n.add(t),n}},On=function(){is(i,Rn);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"buildExtent",value:function(t,n){this.bt=Math.min(t.bt,n.bt),this.Et=Math.max(t.Et,n.Et)}},{key:"query",value:function(t,n,i){if(!this.intersects(t,n))return null;null!==this.xt&&this.xt.query(t,n,i),null!==this.Rt&&this.Rt.query(t,n,i)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();On.constructor_=function(){this.xt=null,this.Rt=null;var t=arguments[0],n=arguments[1];this.xt=t,this.Rt=n,this.buildExtent(this.xt,this.Rt)};var Ln=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"buildTree",value:function(){Pn.sort(this.Tt,new Rn.NodeComparator);for(var t,n=this.Tt,i=new S;;){if(this.buildLevel(n,i),1===i.size())return i.get(0);t=n,n=i,i=t}}},{key:"insert",value:function(t,n,i){if(null!==this.Nt)throw new IllegalStateException("Index cannot be added to once it has been queried");this.Tt.add(new Nn(t,n,i))}},{key:"query",value:function(t,n,i){this.init(),this.Nt.query(t,n,i)}},{key:"buildRoot",value:function(){if(null!==this.Nt)return null;this.Nt=this.buildTree()}},{key:"printNode",value:function(t){j.out.println(Cn.toLineString(new k(t.bt,this.Pt),new k(t.Et,this.Pt)))}},{key:"init",value:function(){if(null!==this.Nt)return null;this.buildRoot()}},{key:"buildLevel",value:function(t,n){this.Pt++,n.clear();for(var i=0;i<t.size();i+=2){var e=t.get(i);null===(i+1<t.size()?t.get(i):null)?n.add(e):(e=new On(t.get(i),t.get(i+1)),n.add(e))}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ln.constructor_=function(){this.Tt=new S,this.Nt=null,this.Pt=0};var Dn=function(){function a(){hs(this,a),a.constructor_.apply(this,arguments)}return gs(a,[{key:"filter",value:function(t){if(this.Ot&&t instanceof Zt){var n=t.getFactory().createLineString(t.getCoordinateSequence());return this.Lt.add(n),null}t instanceof Lt&&this.Lt.add(t)}},{key:"setForceToLineString",value:function(t){this.Ot=t}},{key:"getClass",value:function(){return a}},{key:"interfaces_",get:function(){return[W]}}],[{key:"getGeometry",value:function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(a.getLines(t))}if(2===arguments.length){var n=arguments[0],t=arguments[1];return n.getFactory().buildGeometry(a.getLines(n,t))}}},{key:"getLines",value:function(){if(1===arguments.length)return a.getLines(arguments[0],!1);if(2===arguments.length){if(d(arguments[0],m)&&d(arguments[1],m)){for(var t=arguments[0],n=arguments[1],i=t.iterator();i.hasNext();){var e=i.next();a.getLines(e,n)}return n}if(arguments[0]instanceof X&&"boolean"==typeof arguments[1]){var r=arguments[0],t=arguments[1],u=new S;return r.apply(new a(u,t)),u}if(arguments[0]instanceof X&&d(arguments[1],m)){var u=arguments[0],s=arguments[1];return u instanceof Lt?s.add(u):u.apply(new a(s)),s}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&d(arguments[0],m)&&d(arguments[1],m)){for(var h=arguments[0],g=arguments[1],o=arguments[2],i=h.iterator();i.hasNext();)e=i.next(),a.getLines(e,g,o);return g}if("boolean"==typeof arguments[2]&&arguments[0]instanceof X&&d(arguments[1],m)){s=arguments[0],h=arguments[1];return s.apply(new a(h,arguments[2])),h}}}}]),a}();Dn.constructor_=function(){var t,n;this.Lt=null,this.Ot=!1,1===arguments.length?this.Lt=arguments[0]:2===arguments.length&&(t=arguments[0],n=arguments[1],this.Lt=t,this.Ot=n)};var _n=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visitItem",value:function(t){this.Dt.add(t)}},{key:"getItems",value:function(){return this.Dt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Sn]}}]),t}();_n.constructor_=function(){this.Dt=new S};var Fn=function(){function h(){hs(this,h),h.constructor_.apply(this,arguments)}return gs(h,[{key:"countSegment",value:function(t,n){if(t.x<this._t.x&&n.x<this._t.x)return null;if(this._t.x===n.x&&this._t.y===n.y)return this.Ft=!0,null;if(t.y===this._t.y&&n.y===this._t.y){var i=t.x,e=n.x;return e<i&&(i=n.x,e=t.x),this._t.x>=i&&this._t.x<=e&&(this.Ft=!0),null}if(t.y>this._t.y&&n.y<=this._t.y||n.y>this._t.y&&t.y<=this._t.y){e=G.index(t,n,this._t);if(e===G.COLLINEAR)return this.Ft=!0,null;(e=n.y<t.y?-e:e)===G.LEFT&&this.Gt++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==cn.EXTERIOR}},{key:"getLocation",value:function(){return this.Ft?cn.BOUNDARY:this.Gt%2==1?cn.INTERIOR:cn.EXTERIOR}},{key:"isOnSegment",value:function(){return this.Ft}},{key:"getClass",value:function(){return h}},{key:"interfaces_",get:function(){return[]}}],[{key:"locatePointInRing",value:function(){if(arguments[0]instanceof k&&d(arguments[1],Y)){for(var t=arguments[0],n=arguments[1],i=new h(t),e=new k,r=new k,u=1;u<n.size();u++)if(n.getCoordinate(u,e),n.getCoordinate(u-1,r),i.countSegment(e,r),i.isOnSegment())return i.getLocation();return i.getLocation()}if(arguments[0]instanceof k&&arguments[1]instanceof Array){for(var t=arguments[0],s=arguments[1],i=new h(t),u=1;u<s.length;u++)if(e=s[u],r=s[u-1],i.countSegment(e,r),i.isOnSegment())return i.getLocation();return i.getLocation()}}}]),h}();Fn.constructor_=function(){this._t=null,this.Gt=0,this.Ft=!1,this._t=arguments[0]};var Gn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"locate",value:function(t){var n=new Fn(t),i=new jn(n);return this.jt.query(t.y,t.y,i),n.getLocation()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[xn]}}]),t}(),jn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visitItem",value:function(t){this.Bt.countSegment(t.getCoordinate(0),t.getCoordinate(1))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Sn]}}]),t}();jn.constructor_=function(){this.Bt=null,this.Bt=arguments[0]};var Bn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"init",value:function(t){for(var n=Dn.getLines(t).iterator();n.hasNext();){var i=n.next().getCoordinates();this.addLine(i)}}},{key:"addLine",value:function(t){for(var n=1;n<t.length;n++){var i=new fn(t[n-1],t[n]),e=Math.min(i.p0.y,i.p1.y),r=Math.max(i.p0.y,i.p1.y);this.jt.insert(e,r,i)}}},{key:"query",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1],i=new _n;return this.jt.query(t,n,i),i.getItems()}3===arguments.length&&this.jt.query(arguments[0],arguments[1],arguments[2])}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Bn.constructor_=function(){this.jt=new Ln,this.init(arguments[0])},Gn.SegmentVisitor=jn,Gn.IntervalIndexedGeometry=Bn,Gn.constructor_=function(){this.jt=null;var t=arguments[0];if(!(d(t,Gt)||t instanceof Zt))throw new l("Argument must be Polygonal or LinearRing");this.jt=new Bn(t)};var Zn=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"isOnLine",value:function(){if(arguments[0]instanceof k&&d(arguments[1],Y)){for(var t=arguments[0],n=arguments[1],i=new ln,e=new k,r=new k,u=n.size(),s=1;s<u;s++)if(n.getCoordinate(s-1,e),n.getCoordinate(s,r),i.computeIntersection(t,e,r),i.hasIntersection())return!0;return!1}if(arguments[0]instanceof k&&arguments[1]instanceof Array){for(var h=arguments[0],g=arguments[1],i=new ln,s=1;s<g.length;s++)if(e=g[s-1],r=g[s],i.computeIntersection(h,e,r),i.hasIntersection())return!0;return!1}}},{key:"locateInRing",value:function(t,n){return Fn.locatePointInRing(t,n)}},{key:"isInRing",value:function(t,n){return i.locateInRing(t,n)!==cn.EXTERIOR}}]),i}();Zn.constructor_=function(){};var Vn=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"next",value:function(){if(this.Zt)return this.Zt=!1,n.isAtomic(this.Vt)&&this.jt++,this.Vt;if(null!==this.Yt){if(this.Yt.hasNext())return this.Yt.next();this.Yt=null}if(this.jt>=this.Et)throw new b;var t=this.Vt.getGeometryN(this.jt++);return t instanceof mt?(this.Yt=new n(t),this.Yt.next()):t}},{key:"remove",value:function(){throw new UnsupportedOperationException(this.getClass().getName())}},{key:"hasNext",value:function(){if(this.Zt)return!0;if(null!==this.Yt){if(this.Yt.hasNext())return!0;this.Yt=null}return!(this.jt>=this.Et)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[w]}}],[{key:"isAtomic",value:function(t){return!(t instanceof mt)}}]),n}();Vn.constructor_=function(){this.Vt=null,this.Zt=null,this.Et=null,this.jt=null,this.Yt=null;var t=arguments[0];this.Vt=t,this.Zt=!0,this.jt=0,this.Et=t.getNumGeometries()};var Yn=function(){function u(){hs(this,u),u.constructor_.apply(this,arguments)}return gs(u,[{key:"locate",value:function(t){return u.locate(t,this.O)}},{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[xn]}}],[{key:"locatePointInPolygon",value:function(t,n){if(n.isEmpty())return cn.EXTERIOR;var i=n.getExteriorRing(),i=u.locatePointInRing(t,i);if(i!==cn.INTERIOR)return i;for(var e=0;e<n.getNumInteriorRing();e++){var r=n.getInteriorRingN(e),r=u.locatePointInRing(t,r);if(r===cn.BOUNDARY)return cn.BOUNDARY;if(r===cn.INTERIOR)return cn.EXTERIOR}return cn.INTERIOR}},{key:"locatePointInRing",value:function(t,n){return n.getEnvelopeInternal().intersects(t)?Zn.locateInRing(t,n.getCoordinates()):cn.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,n){return cn.EXTERIOR!==u.locatePointInPolygon(t,n)}},{key:"locateInGeometry",value:function(t,n){if(n instanceof jt)return u.locatePointInPolygon(t,n);if(n instanceof mt)for(var i=new Vn(n);i.hasNext();){var e=i.next();if(e!==n){e=u.locateInGeometry(t,e);if(e!==cn.EXTERIOR)return e}}return cn.EXTERIOR}},{key:"locate",value:function(t,n){return n.isEmpty()?cn.EXTERIOR:u.locateInGeometry(t,n)}}]),u}();Yn.constructor_=function(){this.O=null,this.O=arguments[0]};var Un=Object.freeze({IndexedPointInAreaLocator:Gn,PointOnGeometryLocator:xn,SimplePointInAreaLocator:Yn}),Wn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"measure",value:function(t,n){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Wn.constructor_=function(){};K=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"measure",value:function(t,n){return t.intersection(n).getArea()/t.union(n).getArea()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Wn]}}]),t}();K.constructor_=function(){};H=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"measure",value:function(t,n){var i=pn.distance(t,n,e.DENSIFY_FRACTION),t=new T(t.getEnvelopeInternal());return t.expandToInclude(n.getEnvelopeInternal()),1-i/e.diagonalSize(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Wn]}}],[{key:"diagonalSize",value:function(t){if(t.isNull())return 0;var n=t.getWidth(),t=t.getHeight();return Math.sqrt(n*n+t*t)}}]),e}();H.constructor_=function(){},H.DENSIFY_FRACTION=.25;J=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(t,n){return Math.min(t,n)}}]),t}();J.constructor_=function(){};var q=Object.freeze({AreaSimilarityMeasure:K,HausdorffSimilarityMeasure:H,SimilarityMeasure:Wn,SimilarityMeasureCombiner:J}),Xn=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"setAreaBasePoint",value:function(t){this.Ut=t}},{key:"addPoint",value:function(t){this.Wt+=1,this.Xt.x+=t.x,this.Xt.y+=t.y}},{key:"addLineSegments",value:function(t){for(var n=0,i=0;i<t.length-1;i++){var e,r=t[i].distance(t[i+1]);0!==r&&(n+=r,e=(t[i].x+t[i+1].x)/2,this.zt.x+=r*e,e=(t[i].y+t[i+1].y)/2,this.zt.y+=r*e)}this.Qt+=n,0===n&&0<t.length&&this.addPoint(t[0])}},{key:"addHole",value:function(t){for(var n=G.isCCW(t),i=0;i<t.length-1;i++)this.addTriangle(this.Ut,t[i],t[i+1],n);this.addLineSegments(t)}},{key:"getCentroid",value:function(){var t=new k;if(0<Math.abs(this.Kt))t.x=this.Ht.x/3/this.Kt,t.y=this.Ht.y/3/this.Kt;else if(0<this.Qt)t.x=this.zt.x/this.Qt,t.y=this.zt.y/this.Qt;else{if(!(0<this.Wt))return null;t.x=this.Xt.x/this.Wt,t.y=this.Xt.y/this.Wt}return t}},{key:"addShell",value:function(t){0<t.length&&this.setAreaBasePoint(t[0]);for(var n=!G.isCCW(t),i=0;i<t.length-1;i++)this.addTriangle(this.Ut,t[i],t[i+1],n);this.addLineSegments(t)}},{key:"addTriangle",value:function(t,n,i,e){e=e?1:-1;r.centroid3(t,n,i,this.Jt);i=r.area2(t,n,i);this.Ht.x+=e*i*this.Jt.x,this.Ht.y+=e*i*this.Jt.y,this.Kt+=e*i}},{key:"add",value:function(){if(arguments[0]instanceof jt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var n=0;n<t.getNumInteriorRing();n++)this.addHole(t.getInteriorRingN(n).getCoordinates())}else if(arguments[0]instanceof X){var i=arguments[0];if(i.isEmpty())return null;if(i instanceof _t)this.addPoint(i.getCoordinate());else if(i instanceof Lt)this.addLineSegments(i.getCoordinates());else if(i instanceof jt)this.add(i);else if(i instanceof mt)for(var e=i,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"area2",value:function(t,n,i){return(n.x-t.x)*(i.y-t.y)-(i.x-t.x)*(n.y-t.y)}},{key:"centroid3",value:function(t,n,i,e){return e.x=t.x+n.x+i.x,e.y=t.y+n.y+i.y,null}},{key:"getCentroid",value:function(t){return new r(t).getCentroid()}}]),r}();function zn(t){this.message=t||""}function Qn(){this.array_=[]}Xn.constructor_=function(){this.Ut=null,this.Jt=new k,this.Kt=0,this.Ht=new k,this.zt=new k,this.Qt=0,this.Wt=0,this.Xt=new k;var t=arguments[0];this.Ut=null,this.add(t)},(zn.prototype=new Error).name="EmptyStackException",(Qn.prototype=new M).add=function(t){return this.array_.push(t),!0},Qn.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},Qn.prototype.push=function(t){return this.array_.push(t),t},Qn.prototype.pop=function(t){if(0===this.array_.length)throw new zn;return this.array_.pop()},Qn.prototype.peek=function(){if(0===this.array_.length)throw new zn;return this.array_[this.array_.length-1]},Qn.prototype.empty=function(){return 0===this.array_.length},Qn.prototype.isEmpty=function(){return this.empty()},Qn.prototype.search=function(t){return this.array_.indexOf(t)},Qn.prototype.size=function(){return this.array_.length},Qn.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};var Kn=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"filter",value:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))}},{key:"getCoordinates",value:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[z]}}],[{key:"filterCoordinates",value:function(t){for(var n=new e,i=0;i<t.length;i++)n.filter(t[i]);return n.getCoordinates()}}]),e}();Kn.constructor_=function(){this.treeSet=new ft,this.list=new S};var Hn=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"preSort",value:function(t){for(var n,i=1;i<t.length;i++)(t[i].y<t[0].y||t[i].y===t[0].y&&t[i].x<t[0].x)&&(n=t[0],t[0]=t[i],t[i]=n);return yt.sort(t,1,t.length,new Jn(t[0])),t}},{key:"computeOctRing",value:function(t){var n=this.computeOctPts(t),t=new R;return t.add(n,!1),t.size()<3?null:(t.closeRing(),t.toCoordinateArray())}},{key:"lineOrPolygon",value:function(t){if(3===(t=this.cleanRing(t)).length)return this.qt.createLineString([t[0],t[1]]);t=this.qt.createLinearRing(t);return this.qt.createPolygon(t)}},{key:"cleanRing",value:function(t){y.equals(t[0],t[t.length-1]);for(var n=new S,i=null,e=0;e<=t.length-2;e++){var r=t[e],u=t[e+1];r.equals(u)||null!==i&&this.isBetween(i,r,u)||(n.add(r),i=r)}n.add(t[t.length-1]);var s=new Array(n.size()).fill(null);return n.toArray(s)}},{key:"isBetween",value:function(t,n,i){if(0!==G.index(t,n,i))return!1;if(t.x!==i.x){if(t.x<=n.x&&n.x<=i.x)return!0;if(i.x<=n.x&&n.x<=t.x)return!0}if(t.y!==i.y){if(t.y<=n.y&&n.y<=i.y)return!0;if(i.y<=n.y&&n.y<=t.y)return!0}return!1}},{key:"reduce",value:function(t){var n=this.computeOctRing(t);if(null===n)return t;for(var i=new ft,e=0;e<n.length;e++)i.add(n[e]);for(e=0;e<t.length;e++)Zn.isInRing(t[e],n)||i.add(t[e]);var r=$.toCoordinateArray(i);return r.length<3?this.padArray3(r):r}},{key:"getConvexHull",value:function(){if(0===this.$t.length)return this.qt.createGeometryCollection();if(1===this.$t.length)return this.qt.createPoint(this.$t[0]);if(2===this.$t.length)return this.qt.createLineString(this.$t);var t=this.$t;50<this.$t.length&&(t=this.reduce(this.$t));t=this.preSort(t),t=this.grahamScan(t),t=this.toCoordinateArray(t);return this.lineOrPolygon(t)}},{key:"padArray3",value:function(t){for(var n=new Array(3).fill(null),i=0;i<n.length;i++)i<t.length?n[i]=t[i]:n[i]=t[0];return n}},{key:"computeOctPts",value:function(t){for(var n=new Array(8).fill(null),i=0;i<n.length;i++)n[i]=t[0];for(var e=1;e<t.length;e++)t[e].x<n[0].x&&(n[0]=t[e]),t[e].x-t[e].y<n[1].x-n[1].y&&(n[1]=t[e]),t[e].y>n[2].y&&(n[2]=t[e]),t[e].x+t[e].y>n[3].x+n[3].y&&(n[3]=t[e]),t[e].x>n[4].x&&(n[4]=t[e]),t[e].x-t[e].y>n[5].x-n[5].y&&(n[5]=t[e]),t[e].y<n[6].y&&(n[6]=t[e]),t[e].x+t[e].y<n[7].x+n[7].y&&(n[7]=t[e]);return n}},{key:"toCoordinateArray",value:function(t){for(var n=new Array(t.size()).fill(null),i=0;i<t.size();i++){var e=t.get(i);n[i]=e}return n}},{key:"grahamScan",value:function(t){var n=null,i=new Qn;i.push(t[0]),i.push(t[1]),i.push(t[2]);for(var e=3;e<t.length;e++){for(n=i.pop();!i.empty()&&0<G.index(i.peek(),n,t[e]);)n=i.pop();i.push(n),i.push(t[e])}return i.push(t[0]),i}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(t){var n=new Kn;return t.apply(n),n.getCoordinates()}}]),t}(),Jn=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"compare",value:function(t,n){return i.polarCompare(this.tn,t,n)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[n]}}],[{key:"polarCompare",value:function(t,n,i){var e=n.x-t.x,r=n.y-t.y,u=i.x-t.x,s=i.y-t.y,i=G.index(t,n,i);if(i===G.COUNTERCLOCKWISE)return 1;if(i===G.CLOCKWISE)return-1;r=e*e+r*r,s=u*u+s*s;return r<s?-1:s<r?1:0}}]),i}();Jn.constructor_=function(){this.tn=null,this.tn=arguments[0]},Hn.RadialComparator=Jn,Hn.constructor_=function(){var t,n;this.qt=null,this.$t=null,1===arguments.length?Hn.constructor_.call(this,Hn.extractCoordinates(n=arguments[0]),n.getFactory()):2===arguments.length&&(t=arguments[0],n=arguments[1],this.$t=Kn.filterCoordinates(t),this.qt=n)};var qn=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"addPolygon",value:function(t){if(t.isEmpty())return null;var n=null,i=null,e=this.horizontalBisector(t);n=0===e.getLength()?(i=0,e.getCoordinate()):(t=e.intersection(t),i=(t=this.widestGeometry(t)).getEnvelopeInternal().getWidth(),r.centre(t.getEnvelopeInternal())),(null===this.nn||i>this.in)&&(this.nn=n,this.in=i)}},{key:"getInteriorPoint",value:function(){return this.nn}},{key:"widestGeometry",value:function(){if(arguments[0]instanceof mt){var t=arguments[0];if(t.isEmpty())return t;for(var n=t.getGeometryN(0),i=1;i<t.getNumGeometries();i++)t.getGeometryN(i).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=t.getGeometryN(i));return n}if(arguments[0]instanceof X){var e=arguments[0];return e instanceof mt?this.widestGeometry(e):e}}},{key:"horizontalBisector",value:function(t){var n=t.getEnvelopeInternal(),t=$n.getBisectorY(t);return this.k.createLineString([new k(n.getMinX(),t),new k(n.getMaxX(),t)])}},{key:"add",value:function(t){if(t instanceof jt)this.addPolygon(t);else if(t instanceof mt)for(var n=t,i=0;i<n.getNumGeometries();i++)this.add(n.getGeometryN(i))}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"centre",value:function(t){return new k(r.avg(t.getMinX(),t.getMaxX()),r.avg(t.getMinY(),t.getMaxY()))}},{key:"avg",value:function(t,n){return(t+n)/2}}]),r}(),$n=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"updateInterval",value:function(t){t<=this.en?t>this.rn&&(this.rn=t):t>this.en&&t<this.un&&(this.un=t)}},{key:"getBisectorY",value:function(){this.process(this.sn.getExteriorRing());for(var t=0;t<this.sn.getNumInteriorRing();t++)this.process(this.sn.getInteriorRingN(t));return qn.avg(this.un,this.rn)}},{key:"process",value:function(t){for(var n=t.getCoordinateSequence(),i=0;i<n.size();i++){var e=n.getY(i);this.updateInterval(e)}}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBisectorY",value:function(t){return new n(t).getBisectorY()}}]),n}();$n.constructor_=function(){this.sn=null,this.en=null,this.un=c.MAX_VALUE,this.rn=-c.MAX_VALUE;var t=arguments[0];this.sn=t,this.un=t.getEnvelopeInternal().getMaxY(),this.rn=t.getEnvelopeInternal().getMinY(),this.en=qn.avg(this.rn,this.un)},qn.SafeBisectorFinder=$n,qn.constructor_=function(){this.k=null,this.nn=null;var t=arguments[this.in=0];this.k=t.getFactory(),this.add(t)};var ti=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"addEndpoints",value:function(){if(arguments[0]instanceof X){var t=arguments[0];if(t instanceof Lt)this.addEndpoints(t.getCoordinates());else if(t instanceof mt)for(var n=t,i=0;i<n.getNumGeometries();i++)this.addEndpoints(n.getGeometryN(i))}else arguments[0]instanceof Array&&(this.add((t=arguments[0])[0]),this.add(t[t.length-1]))}},{key:"getInteriorPoint",value:function(){return this.nn}},{key:"addInterior",value:function(){if(arguments[0]instanceof X){var t=arguments[0];if(t instanceof Lt)this.addInterior(t.getCoordinates());else if(t instanceof mt)for(var n=t,i=0;i<n.getNumGeometries();i++)this.addInterior(n.getGeometryN(i))}else if(arguments[0]instanceof Array)for(var e=arguments[0],i=1;i<e.length-1;i++)this.add(e[i])}},{key:"add",value:function(t){var n=t.distance(this.hn);n<this.gn&&(this.nn=new k(t),this.gn=n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ti.constructor_=function(){this.hn=null,this.gn=c.MAX_VALUE,this.nn=null;var t=arguments[0];this.hn=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.nn&&this.addEndpoints(t)};var ni=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getInteriorPoint",value:function(){return this.nn}},{key:"add",value:function(){if(arguments[0]instanceof X){var t=arguments[0];if(t instanceof _t)this.add(t.getCoordinate());else if(t instanceof mt)for(var n=t,i=0;i<n.getNumGeometries();i++)this.add(n.getGeometryN(i))}else{var e;arguments[0]instanceof k&&((t=(e=arguments[0]).distance(this.hn))<this.gn&&(this.nn=new k(e),this.gn=t))}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ni.constructor_=function(){this.hn=null,this.gn=c.MAX_VALUE,this.nn=null;var t=arguments[0];this.hn=t.getCentroid().getCoordinate(),this.add(t)};tt=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"getRadius",value:function(){return this.compute(),this.an}},{key:"getDiameter",value:function(){switch(this.compute(),this.An.length){case 0:return this.Cn.getFactory().createLineString();case 1:return this.Cn.getFactory().createPoint(this.In)}var t=this.An[0],n=this.An[1];return this.Cn.getFactory().createLineString([t,n])}},{key:"getExtremalPoints",value:function(){return this.compute(),this.An}},{key:"computeCirclePoints",value:function(){if(this.Cn.isEmpty())return this.An=new Array(0).fill(null),null;if(1===this.Cn.getNumPoints()){var t=this.Cn.getCoordinates();return this.An=[new k(t[0])],null}var n=this.Cn.convexHull().getCoordinates(),t=n;if(n[0].equals2D(n[n.length-1])&&(t=new Array(n.length-1).fill(null),$.copyDeep(n,0,t,0,n.length-1)),t.length<=2)return this.An=$.copyDeep(t),null;for(var i=s.lowestPoint(t),e=s.pointWitMinAngleWithX(t,i),r=0;r<t.length;r++){var u=s.pointWithMinAngleWithSegment(t,i,e);if(yn.isObtuse(i,u,e))return this.An=[new k(i),new k(e)],null;if(yn.isObtuse(u,i,e))i=u;else{if(!yn.isObtuse(u,e,i))return this.An=[new k(i),new k(e),new k(u)],null;e=u}}y.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")}},{key:"compute",value:function(){if(null!==this.An)return null;this.computeCirclePoints(),this.computeCentre(),null!==this.In&&(this.an=this.In.distance(this.An[0]))}},{key:"getFarthestPoints",value:function(){switch(this.compute(),this.An.length){case 0:return this.Cn.getFactory().createLineString();case 1:return this.Cn.getFactory().createPoint(this.In)}var t=this.An[0],n=this.An[this.An.length-1];return this.Cn.getFactory().createLineString([t,n])}},{key:"getCircle",value:function(){if(this.compute(),null===this.In)return this.Cn.getFactory().createPolygon();var t=this.Cn.getFactory().createPoint(this.In);return 0===this.an?t:t.buffer(this.an)}},{key:"getCentre",value:function(){return this.compute(),this.In}},{key:"computeCentre",value:function(){switch(this.An.length){case 0:this.In=null;break;case 1:this.In=this.An[0];break;case 2:this.In=new k((this.An[0].x+this.An[1].x)/2,(this.An[0].y+this.An[1].y)/2);break;case 3:this.In=kn.circumcentre(this.An[0],this.An[1],this.An[2])}}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"pointWitMinAngleWithX",value:function(t,n){for(var i=c.MAX_VALUE,e=null,r=0;r<t.length;r++){var u,s,h=t[r];h!==n&&(u=h.x-n.x,(s=(s=(s=h.y-n.y)<0?-s:s)/Math.sqrt(u*u+s*s))<i&&(i=s,e=h))}return e}},{key:"lowestPoint",value:function(t){for(var n=t[0],i=1;i<t.length;i++)t[i].y<n.y&&(n=t[i]);return n}},{key:"pointWithMinAngleWithSegment",value:function(t,n,i){for(var e=c.MAX_VALUE,r=null,u=0;u<t.length;u++){var s,h=t[u];h===n||h===i||(s=yn.angleBetween(n,h,i))<e&&(e=s,r=h)}return r}}]),s}();tt.constructor_=function(){this.Cn=null,this.An=null,this.In=null,this.an=0,this.Cn=arguments[0]};var ii=function(){function I(){hs(this,I),I.constructor_.apply(this,arguments)}return gs(I,[{key:"getWidthCoordinate",value:function(){return this.computeMinimumDiameter(),this.ln}},{key:"getSupportingSegment",value:function(){return this.computeMinimumDiameter(),this.fn.getFactory().createLineString([this.cn.p0,this.cn.p1])}},{key:"getDiameter",value:function(){if(this.computeMinimumDiameter(),null===this.ln)return this.fn.getFactory().createLineString();var t=this.cn.project(this.ln);return this.fn.getFactory().createLineString([t,this.ln])}},{key:"computeWidthConvex",value:function(t){this.vn=(t instanceof jt?t.getExteriorRing():t).getCoordinates(),0===this.vn.length?(this.yn=0,this.ln=null,this.cn=null):1===this.vn.length?(this.yn=0,this.ln=this.vn[0],this.cn.p0=this.vn[0],this.cn.p1=this.vn[0]):2===this.vn.length||3===this.vn.length?(this.yn=0,this.ln=this.vn[0],this.cn.p0=this.vn[0],this.cn.p1=this.vn[1]):this.computeConvexRingMinDiameter(this.vn)}},{key:"computeConvexRingMinDiameter",value:function(t){this.yn=c.MAX_VALUE;for(var n=1,i=new fn,e=0;e<t.length-1;e++)i.p0=t[e],i.p1=t[e+1],n=this.findMaxPerpDistance(t,i,n)}},{key:"computeMinimumDiameter",value:function(){if(null!==this.ln)return null;var t;this.kn?this.computeWidthConvex(this.fn):(t=new Hn(this.fn).getConvexHull(),this.computeWidthConvex(t))}},{key:"getLength",value:function(){return this.computeMinimumDiameter(),this.yn}},{key:"findMaxPerpDistance",value:function(t,n,i){for(var e=n.distancePerpendicular(t[i]),r=e,u=i,s=u;e<=r;)e=r,u=s,s=I.nextIndex(t,u),r=n.distancePerpendicular(t[s]);return e<this.yn&&(this.dn=u,this.yn=e,this.ln=t[this.dn],this.cn=new fn(n)),u}},{key:"getMinimumRectangle",value:function(){if(this.computeMinimumDiameter(),0===this.yn)return this.cn.p0.equals2D(this.cn.p1)?this.fn.getFactory().createPoint(this.cn.p0):this.cn.toGeometry(this.fn.getFactory());for(var t=this.cn.p1.x-this.cn.p0.x,n=this.cn.p1.y-this.cn.p0.y,i=c.MAX_VALUE,e=-c.MAX_VALUE,r=c.MAX_VALUE,u=-c.MAX_VALUE,s=0;s<this.vn.length;s++){var h=I.computeC(t,n,this.vn[s]);e<h&&(e=h),h<i&&(i=h);h=I.computeC(-n,t,this.vn[s]);u<h&&(u=h),h<r&&(r=h)}var g=I.computeSegmentForLine(-t,-n,u),o=I.computeSegmentForLine(-t,-n,r),a=I.computeSegmentForLine(-n,t,e),A=I.computeSegmentForLine(-n,t,i),C=a.lineIntersection(g),g=A.lineIntersection(g),A=A.lineIntersection(o),o=a.lineIntersection(o),C=this.fn.getFactory().createLinearRing([C,g,A,o,C]);return this.fn.getFactory().createPolygon(C)}},{key:"getClass",value:function(){return I}},{key:"interfaces_",get:function(){return[]}}],[{key:"nextIndex",value:function(t,n){return n=++n>=t.length?0:n}},{key:"computeC",value:function(t,n,i){return t*i.y-n*i.x}},{key:"getMinimumDiameter",value:function(t){return new I(t).getDiameter()}},{key:"getMinimumRectangle",value:function(t){return new I(t).getMinimumRectangle()}},{key:"computeSegmentForLine",value:function(t,n,i){var e=null,r=null,r=Math.abs(n)>Math.abs(t)?(e=new k(0,i/n),new k(1,i/n-t/n)):(e=new k(i/t,0),new k(i/t-n/t,1));return new fn(e,r)}}]),I}();ii.constructor_=function(){var t,n;this.fn=null,this.kn=null,this.vn=null,this.cn=new fn,this.ln=null,this.dn=null,this.yn=0,1===arguments.length?ii.constructor_.call(this,arguments[0],!1):2===arguments.length&&(t=arguments[0],n=arguments[1],this.fn=t,this.kn=n)};var nt=Object.freeze({distance:En,locate:Un,match:q,Angle:yn,Area:Ft,Centroid:Xn,ConvexHull:Hn,Distance:V,InteriorPointArea:qn,InteriorPointLine:ti,InteriorPointPoint:ni,Length:Et,Orientation:G,PointLocation:Zn,RobustLineIntersector:ln,MinimumBoundingCircle:tt,MinimumDiameter:ii}),ei=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"transformPoint",value:function(t,n){return this.k.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))}},{key:"transformPolygon",value:function(t,n){var i=!0,e=this.transformLinearRing(t.getExteriorRing(),t);null!==e&&e instanceof Zt&&!e.isEmpty()||(i=!1);for(var r=new S,u=0;u<t.getNumInteriorRing();u++){var s=this.transformLinearRing(t.getInteriorRingN(u),t);null===s||s.isEmpty()||(s instanceof Zt||(i=!1),r.add(s))}if(i)return this.k.createPolygon(e,r.toArray([]));var h=new S;return null!==e&&h.add(e),h.addAll(r),this.k.buildGeometry(h)}},{key:"createCoordinateSequence",value:function(t){return this.k.getCoordinateSequenceFactory().create(t)}},{key:"getInputGeometry",value:function(){return this.fn}},{key:"transformMultiLineString",value:function(t,n){for(var i=new S,e=0;e<t.getNumGeometries();e++){var r=this.transformLineString(t.getGeometryN(e),t);null!==r&&(r.isEmpty()||i.add(r))}return this.k.buildGeometry(i)}},{key:"transformCoordinates",value:function(t,n){return this.copy(t)}},{key:"transformLineString",value:function(t,n){return this.k.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))}},{key:"transformMultiPoint",value:function(t,n){for(var i=new S,e=0;e<t.getNumGeometries();e++){var r=this.transformPoint(t.getGeometryN(e),t);null!==r&&(r.isEmpty()||i.add(r))}return this.k.buildGeometry(i)}},{key:"transformMultiPolygon",value:function(t,n){for(var i=new S,e=0;e<t.getNumGeometries();e++){var r=this.transformPolygon(t.getGeometryN(e),t);null!==r&&(r.isEmpty()||i.add(r))}return this.k.buildGeometry(i)}},{key:"copy",value:function(t){return t.copy()}},{key:"transformGeometryCollection",value:function(t,n){for(var i=new S,e=0;e<t.getNumGeometries();e++){var r=this.transform(t.getGeometryN(e));null!==r&&(this.wn&&r.isEmpty()||i.add(r))}return this.mn?this.k.createGeometryCollection(hn.toGeometryArray(i)):this.k.buildGeometry(i)}},{key:"transform",value:function(t){if(this.fn=t,this.k=t.getFactory(),t instanceof _t)return this.transformPoint(t,null);if(t instanceof Bt)return this.transformMultiPoint(t,null);if(t instanceof Zt)return this.transformLinearRing(t,null);if(t instanceof Lt)return this.transformLineString(t,null);if(t instanceof pt)return this.transformMultiLineString(t,null);if(t instanceof jt)return this.transformPolygon(t,null);if(t instanceof Vt)return this.transformMultiPolygon(t,null);if(t instanceof mt)return this.transformGeometryCollection(t,null);throw new l("Unknown Geometry subtype: "+t.getClass().getName())}},{key:"transformLinearRing",value:function(t,n){var i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this.k.createLinearRing(null);t=i.size();return 0<t&&t<4&&!this.pn?this.k.createLineString(i):this.k.createLinearRing(i)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ei.constructor_=function(){this.fn=null,this.k=null,this.wn=!0,this.mn=!0,this.Mn=!1,this.pn=!1};var ri=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"getResultGeometry",value:function(){return new ui(this.bn).transform(this.fn)}},{key:"setDistanceTolerance",value:function(t){if(t<=0)throw new l("Tolerance must be positive");this.bn=t}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"densifyPoints",value:function(t,n,i){for(var e=new fn,r=new R,u=0;u<t.length-1;u++){e.p0=t[u],e.p1=t[u+1],r.add(e.p0,!1);var s=e.getLength(),h=Math.trunc(s/n)+1;if(1<h)for(var g=s/h,o=1;o<h;o++){var a=e.pointAlong(o*g/s);i.makePrecise(a),r.add(a,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()}},{key:"densify",value:function(t,n){t=new i(t);return t.setDistanceTolerance(n),t.getResultGeometry()}}]),i}(),ui=function(){is(i,ei);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"transformMultiPolygon",value:function(t,n){n=ns(ss(i.prototype),"transformMultiPolygon",this).call(this,t,n);return this.createValidArea(n)}},{key:"transformPolygon",value:function(t,n){t=ns(ss(i.prototype),"transformPolygon",this).call(this,t,n);return n instanceof Vt?t:this.createValidArea(t)}},{key:"transformCoordinates",value:function(t,n){t=t.toCoordinateArray(),t=ri.densifyPoints(t,this.distanceTolerance,n.getPrecisionModel());return n instanceof Lt&&1===t.length&&(t=new Array(0).fill(null)),this.k.getCoordinateSequenceFactory().create(t)}},{key:"createValidArea",value:function(t){return t.buffer(0)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();ui.constructor_=function(){this.distanceTolerance=null,this.distanceTolerance=arguments[0]},ri.DensifyTransformer=ui,ri.constructor_=function(){this.fn=null,this.bn=null,this.fn=arguments[0]};var Wt=Object.freeze({Densifier:ri}),si=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"isNorthern",value:function(t){return t===i.NE||t===i.NW}},{key:"isOpposite",value:function(t,n){return t!==n&&2==(t-n+4)%4}},{key:"commonHalfPlane",value:function(t,n){if(t===n)return t;if(2==(t-n+4)%4)return-1;var i=t<n?t:n;return 0===i&&3===(n<t?t:n)?3:i}},{key:"isInHalfPlane",value:function(t,n){return n===i.SE?t===i.SE||t===i.SW:t===n||t===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new l("Cannot compute the quadrant for point ( "+t+", "+n+" )");return 0<=t?0<=n?i.NE:i.SE:0<=n?i.NW:i.SW}if(arguments[0]instanceof k&&arguments[1]instanceof k){t=arguments[0],n=arguments[1];if(n.x===t.x&&n.y===t.y)throw new l("Cannot compute the quadrant for two identical points "+t);return n.x>=t.x?n.y>=t.y?i.NE:i.SE:n.y>=t.y?i.NW:i.SW}}}]),i}();si.constructor_=function(){},si.NE=0,si.NW=1,si.SW=2,si.SE=3;var hi=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"find",value:function(t){var n=this;do{if(null===n)return null;if(n.dest().equals2D(t))return n}while((n=n.oNext())!==this);return null}},{key:"dest",value:function(){return this.Sn.En}},{key:"oNext",value:function(){return this.Sn.xn}},{key:"insert",value:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var n=this.compareTo(t),i=this;do{var e=i.oNext();if(e.compareTo(t)!==n||e===this)return i.insertAfter(t),null}while((i=e)!==this);y.shouldNeverReachHere()}},{key:"insertAfter",value:function(t){y.equals(this.En,t.orig());var n=this.oNext();this.Sn.setNext(t),t.sym().setNext(n)}},{key:"degree",value:function(){for(var t=0,n=this;t++,(n=n.oNext())!==this;);return t}},{key:"equals",value:function(){if(2===arguments.length&&arguments[1]instanceof k&&arguments[0]instanceof k){var t=arguments[0],n=arguments[1];return this.En.equals2D(t)&&this.Sn.En.equals(n)}}},{key:"deltaY",value:function(){return this.Sn.En.y-this.En.y}},{key:"sym",value:function(){return this.Sn}},{key:"prev",value:function(){return this.Sn.next().Sn}},{key:"compareAngularDirection",value:function(t){var n=this.deltaX(),i=this.deltaY(),e=t.deltaX(),r=t.deltaY();if(n===e&&i===r)return 0;i=si.quadrant(n,i),r=si.quadrant(e,r);return r<i?1:i<r?-1:G.index(t.En,t.dest(),this.dest())}},{key:"prevNode",value:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t}},{key:"compareTo",value:function(t){return this.compareAngularDirection(t)}},{key:"next",value:function(){return this.xn}},{key:"setSym",value:function(t){this.Sn=t}},{key:"orig",value:function(){return this.En}},{key:"toString",value:function(){return"HE("+this.En.x+" "+this.En.y+", "+this.Sn.En.x+" "+this.Sn.En.y+")"}},{key:"setNext",value:function(t){this.xn=t}},{key:"init",value:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)}},{key:"deltaX",value:function(){return this.Sn.En.x-this.En.x}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"init",value:function(t,n){if(null!==t.Sn||null!==n.Sn||null!==t.xn||null!==n.xn)throw new IllegalStateException("Edges are already initialized");return t.init(n),t}},{key:"create",value:function(t,n){t=new i(t),n=new i(n);return t.init(n),t}}]),i}();hi.constructor_=function(){this.En=null,this.Sn=null,this.xn=null,this.En=arguments[0]};var gi=function(){is(i,hi);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"mark",value:function(){this.Rn=!0}},{key:"setMark",value:function(t){this.Rn=t}},{key:"isMarked",value:function(){return this.Rn}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"setMarkBoth",value:function(t,n){t.setMark(n),t.sym().setMark(n)}},{key:"isMarked",value:function(t){return t.isMarked()}},{key:"setMark",value:function(t,n){t.setMark(n)}},{key:"markBoth",value:function(t){t.mark(),t.sym().mark()}},{key:"mark",value:function(t){t.mark()}}]),i}();gi.constructor_=function(){this.Rn=!1,hi.constructor_.call(this,arguments[0])};var oi=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"insert",value:function(t,n,i){var e=this.create(t,n);null!==i?i.insert(e):this.Tn.put(t,e);t=this.Tn.get(n);return null!==t?t.insert(e.sym()):this.Tn.put(n,e.sym()),e}},{key:"create",value:function(t,n){t=this.createEdge(t),n=this.createEdge(n);return hi.init(t,n),t}},{key:"createEdge",value:function(t){return new hi(t)}},{key:"addEdge",value:function(t,n){if(!r.isValidEdge(t,n))return null;var i=this.Tn.get(t),e=null;return null!==(e=null!==i?i.find(n):e)?e:this.insert(t,n,i)}},{key:"getVertexEdges",value:function(){return this.Tn.values()}},{key:"findEdge",value:function(t,n){t=this.Tn.get(t);return null===t?null:t.find(n)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"isValidEdge",value:function(t,n){return 0!==n.compareTo(t)}}]),r}();oi.constructor_=function(){this.Tn=new rn};var ai=function(){is(i,gi);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"setStart",value:function(){this.Nn=!0}},{key:"isStart",value:function(){return this.Nn}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();ai.constructor_=function(){this.Nn=!1,gi.constructor_.call(this,arguments[0])};var Ai=function(){is(i,oi);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"createEdge",value:function(t){return new ai(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Ai.constructor_=function(){};Xt=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"addLine",value:function(t){this.Lt.add(this.k.createLineString(t.toCoordinateArray()))}},{key:"updateRingStartEdge",value:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this.Pn?(this.Pn=t,null):void(t.orig().compareTo(this.Pn.orig())<0&&(this.Pn=t)):null}},{key:"getResult",value:function(){return null===this.ut&&this.computeResult(),this.ut}},{key:"process",value:function(t){var n=t.prevNode();this.stackEdges(n=null===n?t:n),this.buildLines()}},{key:"buildRing",value:function(t){var n=new R,i=t;for(n.add(i.orig().copy(),!1);2===i.sym().degree();){var e=i.next();if(e===t)break;n.add(e.orig().copy(),!1),i=e}n.add(i.dest().copy(),!1),this.addLine(n)}},{key:"buildLine",value:function(t){var n=new R,i=t;for(this.Pn=null,gi.markBoth(i),n.add(i.orig().copy(),!1);2===i.sym().degree();){this.updateRingStartEdge(i);var e=i.next();if(e===t)return this.buildRing(this.Pn),null;n.add(e.orig().copy(),!1),gi.markBoth(i=e)}n.add(i.dest().clone(),!1),this.stackEdges(i.sym()),this.addLine(n)}},{key:"stackEdges",value:function(t){for(var n=t;gi.isMarked(n)||this.On.add(n),(n=n.oNext())!==t;);}},{key:"computeResult",value:function(){for(var t=this.Ln.getVertexEdges().iterator();t.hasNext();){var n=t.next();gi.isMarked(n)||this.process(n)}this.ut=this.k.buildGeometry(this.Lt)}},{key:"buildLines",value:function(){for(;!this.On.empty();){var t=this.On.pop();gi.isMarked(t)||this.buildLine(t)}}},{key:"add",value:function(){if(arguments[0]instanceof X)arguments[0].apply(new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[W]}},{key:"filter",value:function(t){t instanceof Lt&&this.add(t)}}]),t}()));else if(d(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var n=t.next();this.add(n)}else if(arguments[0]instanceof Lt){var i=arguments[0];null===this.k&&(this.k=i.getFactory());for(var e=i.getCoordinateSequence(),r=!1,t=1;t<e.size();t++){var u=this.Ln.addEdge(e.getCoordinate(t-1),e.getCoordinate(t));null!==u&&(r||(u.setStart(),r=!0))}}}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"dissolve",value:function(t){var n=new i;return n.add(t),n.getResult()}}]),i}();Xt.constructor_=function(){this.ut=null,this.k=null,this.Ln=null,this.Lt=new S,this.On=new Qn,this.Pn=null,this.Ln=new Ai};var zt=Object.freeze({LineDissolver:Xt}),Ci=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"locateInPolygonRing",value:function(t,n){return n.getEnvelopeInternal().intersects(t)?Zn.locateInRing(t,n.getCoordinates()):cn.EXTERIOR}},{key:"intersects",value:function(t,n){return this.locate(t,n)!==cn.EXTERIOR}},{key:"updateLocationInfo",value:function(t){t===cn.INTERIOR&&(this.Dn=!0),t===cn.BOUNDARY&&this._n++}},{key:"computeLocation",value:function(t,n){if(n instanceof _t&&this.updateLocationInfo(this.locateOnPoint(t,n)),n instanceof Lt)this.updateLocationInfo(this.locateOnLineString(t,n));else if(n instanceof jt)this.updateLocationInfo(this.locateInPolygon(t,n));else if(n instanceof pt)for(var i=n,e=0;e<i.getNumGeometries();e++){var r=i.getGeometryN(e);this.updateLocationInfo(this.locateOnLineString(t,r))}else if(n instanceof Vt)for(var u=n,e=0;e<u.getNumGeometries();e++){var s=u.getGeometryN(e);this.updateLocationInfo(this.locateInPolygon(t,s))}else if(n instanceof mt)for(var h=new Vn(n);h.hasNext();){var g=h.next();g!==n&&this.computeLocation(t,g)}}},{key:"locateOnPoint",value:function(t,n){return n.getCoordinate().equals2D(t)?cn.INTERIOR:cn.EXTERIOR}},{key:"locateOnLineString",value:function(t,n){if(!n.getEnvelopeInternal().intersects(t))return cn.EXTERIOR;var i=n.getCoordinateSequence();return n.isClosed()||!t.equals(i.getCoordinate(0))&&!t.equals(i.getCoordinate(i.size()-1))?Zn.isOnLine(t,i)?cn.INTERIOR:cn.EXTERIOR:cn.BOUNDARY}},{key:"locateInPolygon",value:function(t,n){if(n.isEmpty())return cn.EXTERIOR;var i=n.getExteriorRing(),i=this.locateInPolygonRing(t,i);if(i===cn.EXTERIOR)return cn.EXTERIOR;if(i===cn.BOUNDARY)return cn.BOUNDARY;for(var e=0;e<n.getNumInteriorRing();e++){var r=n.getInteriorRingN(e),r=this.locateInPolygonRing(t,r);if(r===cn.INTERIOR)return cn.EXTERIOR;if(r===cn.BOUNDARY)return cn.BOUNDARY}return cn.INTERIOR}},{key:"locate",value:function(t,n){return n.isEmpty()?cn.EXTERIOR:n instanceof Lt?this.locateOnLineString(t,n):n instanceof jt?this.locateInPolygon(t,n):(this.Dn=!1,this._n=0,this.computeLocation(t,n),this.Fn.isInBoundary(this._n)?cn.BOUNDARY:0<this._n||this.Dn?cn.INTERIOR:cn.EXTERIOR)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ci.constructor_=function(){if(this.Fn=Q.OGC_SFS_BOUNDARY_RULE,this.Dn=null,this._n=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new l("Rule must be non-null");this.Fn=t}};var Ii=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"opposite",value:function(t){return t===n.LEFT?n.RIGHT:t===n.RIGHT?n.LEFT:t}}]),n}();Ii.constructor_=function(){},Ii.ON=0,Ii.LEFT=1,Ii.RIGHT=2;var li=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"computeIntersections",value:function(t,n){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();li.constructor_=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],n=arguments[1];this.mce=t,this.chainIndex=n};var fi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isDelete",value:function(){return this.Gn===t.DELETE}},{key:"setDeleteEventIndex",value:function(t){this.jn=t}},{key:"getObject",value:function(){return this.Bn}},{key:"compareTo",value:function(t){return this.Zn<t.Zn?-1:this.Zn>t.Zn?1:this.Gn<t.Gn?-1:this.Gn>t.Gn?1:0}},{key:"getInsertEvent",value:function(){return this.Vn}},{key:"isInsert",value:function(){return this.Gn===t.INSERT}},{key:"isSameLabel",value:function(t){return null!==this.Yn&&this.Yn===t.Yn}},{key:"getDeleteEventIndex",value:function(){return this.jn}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[u]}}]),t}();fi.constructor_=function(){var t,n,i;this.Yn=null,this.Zn=null,this.Gn=null,this.Vn=null,this.jn=null,this.Bn=null,2===arguments.length?(n=arguments[0],i=arguments[1],this.Gn=fi.DELETE,this.Zn=n,this.Vn=i):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.Gn=fi.INSERT,this.Yn=t,this.Zn=n,this.Bn=i)},fi.INSERT=1,fi.DELETE=2;var ci=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ci.constructor_=function(){};var vi=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"isTrivialIntersection",value:function(t,n,i,e){if(t===i&&1===this.Un.getIntersectionNum()){if(r.isAdjacentSegments(n,e))return!0;if(t.isClosed()){t=t.getNumPoints()-1;if(0===n&&e===t||0===e&&n===t)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.Wn}},{key:"setIsDoneIfProperInt",value:function(t){this.Xn=t}},{key:"hasProperInteriorIntersection",value:function(){return this.zn}},{key:"isBoundaryPointInternal",value:function(t,n){for(var i=n.iterator();i.hasNext();){var e=i.next().getCoordinate();if(t.isIntersection(e))return!0}return!1}},{key:"hasProperIntersection",value:function(){return this.Qn}},{key:"hasIntersection",value:function(){return this.Kn}},{key:"isDone",value:function(){return this.Hn}},{key:"isBoundaryPoint",value:function(t,n){return!(null===n||!this.isBoundaryPointInternal(t,n[0])&&!this.isBoundaryPointInternal(t,n[1]))}},{key:"setBoundaryNodes",value:function(t,n){this.Jn=new Array(2).fill(null),this.Jn[0]=t,this.Jn[1]=n}},{key:"addIntersections",value:function(t,n,i,e){if(t===i&&n===e)return null;this.numTests++;var r=t.getCoordinates()[n],u=t.getCoordinates()[n+1],s=i.getCoordinates()[e],h=i.getCoordinates()[e+1];this.Un.computeIntersection(r,u,s,h),this.Un.hasIntersection()&&(this.qn&&(t.setIsolated(!1),i.setIsolated(!1)),this.$n++,this.isTrivialIntersection(t,n,i,e)||(this.Kn=!0,!this.ti&&this.Un.isProper()||(t.addIntersections(this.Un,n,0),i.addIntersections(this.Un,e,1)),this.Un.isProper()&&(this.Wn=this.Un.getIntersection(0).copy(),this.Qn=!0,this.Xn&&(this.Hn=!0),this.isBoundaryPoint(this.Un,this.Jn)||(this.zn=!0))))}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"isAdjacentSegments",value:function(t,n){return 1===Math.abs(t-n)}}]),r}();vi.constructor_=function(){this.Kn=!1,this.Qn=!1,this.zn=!1,this.Wn=null,this.Un=null,this.ti=null,this.qn=null,this.ni=null,this.$n=0,this.numTests=0,this.Jn=null,this.Hn=!1,this.Xn=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this.Un=t,this.ti=n,this.qn=i};var yi=function(){is(i,ci);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"prepareEvents",value:function(){Pn.sort(this.events);for(var t=0;t<this.events.size();t++){var n=this.events.get(t);n.isDelete()&&n.getInsertEvent().setDeleteEventIndex(t)}}},{key:"computeIntersections",value:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var i=this.events.get(n);if(i.isInsert()&&this.processOverlaps(n,i.getDeleteEventIndex(),i,t),t.isDone())break}}else{var e,r,u;3===arguments.length&&(arguments[2]instanceof vi&&d(arguments[0],M)&&d(arguments[1],M)?(e=arguments[0],r=arguments[1],u=arguments[2],this.addEdges(e,e),this.addEdges(r,r),this.computeIntersections(u)):"boolean"==typeof arguments[2]&&d(arguments[0],M)&&arguments[1]instanceof vi&&(r=arguments[0],u=arguments[1],arguments[2]?this.addEdges(r,null):this.addEdges(r),this.computeIntersections(u)))}}},{key:"addEdge",value:function(t,n){for(var i=t.getMonotoneChainEdge(),e=i.getStartIndexes(),r=0;r<e.length-1;r++){var u=new li(i,r),u=new fi(n,i.getMinX(r),u);this.events.add(u),this.events.add(new fi(i.getMaxX(r),u))}}},{key:"processOverlaps",value:function(t,n,i,e){for(var r=i.getObject(),u=t;u<n;u++){var s,h=this.events.get(u);h.isInsert()&&(s=h.getObject(),i.isSameLabel(h)||(r.computeIntersections(s,e),this.nOverlaps++))}}},{key:"addEdges",value:function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var n=t.next();this.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],e=arguments[1],t=i.iterator();t.hasNext();)n=t.next(),this.addEdge(n,e)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();yi.constructor_=function(){this.events=new S,this.nOverlaps=null};var ki=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"setAllLocations",value:function(t){for(var n=0;n<this.location.length;n++)this.location[n]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==cn.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var n=0;n<this.location.length;n++)this.location[n]===cn.NONE&&(this.location[n]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){var n;t.location.length>this.location.length&&((n=new Array(3).fill(null))[Ii.ON]=this.location[Ii.ON],n[Ii.LEFT]=cn.NONE,n[Ii.RIGHT]=cn.NONE,this.location=n);for(var i=0;i<this.location.length;i++)this.location[i]===cn.NONE&&i<t.location.length&&(this.location[i]=t.location[i])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[Ii.LEFT];this.location[Ii.LEFT]=this.location[Ii.RIGHT],this.location[Ii.RIGHT]=t}},{key:"toString",value:function(){var t=new O;return 1<this.location.length&&t.append(cn.toLocationSymbol(this.location[Ii.LEFT])),t.append(cn.toLocationSymbol(this.location[Ii.ON])),1<this.location.length&&t.append(cn.toLocationSymbol(this.location[Ii.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,n,i){this.location[Ii.ON]=t,this.location[Ii.LEFT]=n,this.location[Ii.RIGHT]=i}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:cn.NONE}},{key:"isArea",value:function(){return 1<this.location.length}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===cn.NONE)return!0;return!1}},{key:"setLocation",value:function(){1===arguments.length?this.setLocation(Ii.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(cn.NONE)}},{key:"isEqualOnSide",value:function(t,n){return this.location[n]===t.location[n]}},{key:"allPositionsEqual",value:function(t){for(var n=0;n<this.location.length;n++)if(this.location[n]!==t)return!1;return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ki.constructor_=function(){var t,n;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[Ii.ON]=i}else if(arguments[0]instanceof ki){var e=arguments[0];if(this.init(e.location.length),null!==e)for(var r=0;r<this.location.length;r++)this.location[r]=e.location[r]}}else 3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.init(3),this.location[Ii.ON]=t,this.location[Ii.LEFT]=n,this.location[Ii.RIGHT]=i)};var di=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,n){this.elt[t].setAllLocations(n)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){var t;1===arguments.length?(this.setAllLocationsIfNull(0,t=arguments[0]),this.setAllLocationsIfNull(1,t)):2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var n=0;n<2;n++)null===this.elt[n]&&null!==t.elt[n]?this.elt[n]=new ki(t.elt[n]):this.elt[n].merge(t.elt[n])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){return 1===arguments.length?this.elt[arguments[0]].get(Ii.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0}},{key:"toString",value:function(){var t=new O;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){2===arguments.length?this.elt[arguments[0]].setLocation(Ii.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])}},{key:"isEqualOnSide",value:function(t,n){return this.elt[0].isEqualOnSide(t.elt[0],n)&&this.elt[1].isEqualOnSide(t.elt[1],n)}},{key:"allPositionsEqual",value:function(t,n){return this.elt[t].allPositionsEqual(n)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new ki(this.elt[t].location[0]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLineLabel",value:function(t){for(var n=new e(cn.NONE),i=0;i<2;i++)n.setLocation(i,t.getLocation(i));return n}}]),e}();di.constructor_=function(){var t,n,i,e,r,u;this.elt=new Array(2).fill(null),1===arguments.length?Number.isInteger(arguments[0])?(this.elt[0]=new ki(t=arguments[0]),this.elt[1]=new ki(t)):arguments[0]instanceof di&&(this.elt[0]=new ki((n=arguments[0]).elt[0]),this.elt[1]=new ki(n.elt[1])):2===arguments.length?(n=arguments[0],i=arguments[1],this.elt[0]=new ki(cn.NONE),this.elt[1]=new ki(cn.NONE),this.elt[n].setLocation(i)):3===arguments.length?(this.elt[0]=new ki(e=arguments[0],r=arguments[1],u=arguments[2]),this.elt[1]=new ki(e,r,u)):4===arguments.length&&(i=arguments[0],e=arguments[1],r=arguments[2],u=arguments[3],this.elt[0]=new ki(cn.NONE,cn.NONE,cn.NONE),this.elt[1]=new ki(cn.NONE,cn.NONE,cn.NONE),this.elt[i].setLocations(e,r,u))};var wi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,n){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<n?-1:this.dist>n?1:0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[u]}}]),t}();wi.constructor_=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],n=arguments[1],i=arguments[2];this.coord=new k(t),this.segmentIndex=n,this.dist=i};var mi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"print",value:function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();)n.next().print(t)}},{key:"iterator",value:function(){return this.ii.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var e=n.next(),r=this.createSplitEdge(i,e);t.add(r),i=e}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,n){var i=n.segmentIndex-t.segmentIndex+2,e=this.edge.pts[n.segmentIndex],e=0<n.dist||!n.coord.equals2D(e);e||i--;var r=new Array(i).fill(null),u=0;r[u++]=new k(t.coord);for(var s=t.segmentIndex+1;s<=n.segmentIndex;s++)r[u++]=this.edge.pts[s];return e&&(r[u]=n.coord),new Si(r,new di(this.edge.Yn))}},{key:"add",value:function(t,n,i){n=new wi(t,n,i),i=this.ii.get(n);return null!==i?i:(this.ii.put(n,n),n)}},{key:"isIntersection",value:function(t){for(var n=this.iterator();n.hasNext();)if(n.next().coord.equals(t))return!0;return!1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();mi.constructor_=function(){this.ii=new Ct,this.edge=null,this.edge=arguments[0]};var pi=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"getChainStartIndices",value:function(t){var n=0,i=new S;i.add(new L(n));do{var e=this.findChainEnd(t,n)}while(i.add(new L(e)),(n=e)<t.length-1);return r.toIntArray(i)}},{key:"findChainEnd",value:function(t,n){for(var i=si.quadrant(t[n],t[n+1]),e=n+1;e<t.length&&si.quadrant(t[e-1],t[e])===i;)e++;return e-1}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"toIntArray",value:function(t){for(var n=new Array(t.size()).fill(null),i=0;i<n.length;i++)n[i]=t.get(i).intValue();return n}}]),r}();pi.constructor_=function(){};var Mi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var n=this.pts[this.startIndex[t]].x,t=this.pts[this.startIndex[t+1]].x;return t<n?n:t}},{key:"getMinX",value:function(t){var n=this.pts[this.startIndex[t]].x,t=this.pts[this.startIndex[t+1]].x;return n<t?n:t}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],n,n.startIndex[i],n.startIndex[i+1],arguments[3])}else if(6===arguments.length){var e=arguments[0],r=arguments[1],u=arguments[2],s=arguments[3],h=arguments[4],t=arguments[5];if(r-e==1&&h-s==1)return t.addIntersections(this.e,e,u.e,s),null;if(!this.overlaps(e,r,u,s,h))return null;n=Math.trunc((e+r)/2),i=Math.trunc((s+h)/2);e<n&&(s<i&&this.computeIntersectsForChain(e,n,u,s,i,t),i<h&&this.computeIntersectsForChain(e,n,u,i,h,t)),n<r&&(s<i&&this.computeIntersectsForChain(n,r,u,s,i,t),i<h&&this.computeIntersectsForChain(n,r,u,i,h,t))}}},{key:"overlaps",value:function(t,n,i,e,r){return T.intersects(this.pts[t],this.pts[n],i.pts[e],i.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,n){for(var i=0;i<this.startIndex.length-1;i++)for(var e=0;e<t.startIndex.length-1;e++)this.computeIntersectsForChain(i,t,e,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Mi.constructor_=function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();t=new pi;this.startIndex=t.getChainStartIndices(this.pts)};var bi=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"getDepth",value:function(t,n){return this.ei[t][n]}},{key:"setDepth",value:function(t,n,i){this.ei[t][n]=i}},{key:"isNull",value:function(){if(0!==arguments.length)return 1===arguments.length?this.ei[arguments[0]][1]===s.NULL_VALUE:2===arguments.length?this.ei[arguments[0]][arguments[1]]===s.NULL_VALUE:void 0;for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this.ei[t][n]!==s.NULL_VALUE)return!1;return!0}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var n=this.ei[t][1];(n=this.ei[t][2]<n?this.ei[t][2]:n)<0&&(n=0);for(var i=1;i<3;i++){var e=0;this.ei[t][i]>n&&(e=1),this.ei[t][i]=e}}}},{key:"getDelta",value:function(t){return this.ei[t][Ii.RIGHT]-this.ei[t][Ii.LEFT]}},{key:"getLocation",value:function(t,n){return this.ei[t][n]<=0?cn.EXTERIOR:cn.INTERIOR}},{key:"toString",value:function(){return"A: "+this.ei[0][1]+","+this.ei[0][2]+" B: "+this.ei[1][1]+","+this.ei[1][2]}},{key:"add",value:function(){var t,n;if(1===arguments.length)for(var i=arguments[0],e=0;e<2;e++)for(var r=1;r<3;r++){var u=i.getLocation(e,r);u!==cn.EXTERIOR&&u!==cn.INTERIOR||(this.isNull(e,r)?this.ei[e][r]=s.depthAtLocation(u):this.ei[e][r]+=s.depthAtLocation(u))}else 3===arguments.length&&(t=arguments[0],n=arguments[1],arguments[2]===cn.INTERIOR&&this.ei[t][n]++)}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthAtLocation",value:function(t){return t===cn.EXTERIOR?0:t===cn.INTERIOR?1:s.NULL_VALUE}}]),s}();bi.constructor_=function(){this.ei=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var n=0;n<3;n++)this.ei[t][n]=bi.NULL_VALUE},bi.NULL_VALUE=-1;var Ei=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"setVisited",value:function(t){this.ri=t}},{key:"setInResult",value:function(t){this.ui=t}},{key:"isCovered",value:function(){return this.si}},{key:"isCoveredSet",value:function(){return this.hi}},{key:"setLabel",value:function(t){this.Yn=t}},{key:"getLabel",value:function(){return this.Yn}},{key:"setCovered",value:function(t){this.si=t,this.hi=!0}},{key:"updateIM",value:function(t){y.isTrue(2<=this.Yn.getGeometryCount(),"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this.ui}},{key:"isVisited",value:function(){return this.ri}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ei.constructor_=function(){this.Yn=null,this.ui=!1,this.si=!1,this.hi=!1,this.ri=!1,0===arguments.length||1===arguments.length&&(this.Yn=arguments[0])};var Si=function(){is(s,Ei);var n=es(s);function s(){var t;return hs(this,s),t=n.call(this),s.constructor_.apply(us(t),arguments),t}return gs(s,[{key:"getDepth",value:function(){return this.ei}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,di.toLineLabel(this.Yn))}},{key:"isIsolated",value:function(){return this.gi}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this.gi=t}},{key:"setName",value:function(t){this.$=t}},{key:"equals",value:function(t){if(!(t instanceof s))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,e=!0,r=this.pts.length,u=0;u<this.pts.length;u++)if(this.pts[u].equals2D(n.pts[u])||(i=!1),this.pts[u].equals2D(n.pts[--r])||(e=!1),!i&&!e)return!1;return!0}},{key:"getCoordinate",value:function(){return 0===arguments.length?0<this.pts.length?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0}},{key:"print",value:function(t){t.print("edge "+this.$+": "),t.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)0<n&&t.print(","),t.print(this.pts[n].x+" "+this.pts[n].y);t.print(")  "+this.Yn+" "+this.oi)}},{key:"computeIM",value:function(t){s.updateIM(this.Yn,t)}},{key:"isCollapsed",value:function(){return!!this.Yn.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this.oi}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this.$+": ");for(var n=this.pts.length-1;0<=n;n--)t.print(this.pts[n]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this.ai&&(this.ai=new Mi(this)),this.ai}},{key:"getEnvelope",value:function(){if(null===this.Ai){this.Ai=new T;for(var t=0;t<this.pts.length;t++)this.Ai.expandToInclude(this.pts[t])}return this.Ai}},{key:"addIntersection",value:function(t,n,i,e){var r=new k(t.getIntersection(e)),n=n,t=t.getEdgeDistance(i,e),i=n+1;i<this.pts.length&&(e=this.pts[i],r.equals2D(e)&&(n=i,t=0)),this.eiList.add(r,n,t)}},{key:"toString",value:function(){var t=new Pt;t.append("edge "+this.$+": "),t.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)0<n&&t.append(","),t.append(this.pts[n].x+" "+this.pts[n].y);return t.append(")  "+this.Yn+" "+this.oi),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(t.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this.oi=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,n,i){for(var e=0;e<t.getIntersectionNum();e++)this.addIntersection(t,n,i,e)}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof vn&&arguments[0]instanceof di))return ns(ss(s),"updateIM",this).apply(this,arguments);var t=arguments[0],n=arguments[1];n.setAtLeastIfValid(t.getLocation(0,Ii.ON),t.getLocation(1,Ii.ON),1),t.isArea()&&(n.setAtLeastIfValid(t.getLocation(0,Ii.LEFT),t.getLocation(1,Ii.LEFT),2),n.setAtLeastIfValid(t.getLocation(0,Ii.RIGHT),t.getLocation(1,Ii.RIGHT),2))}}]),s}();Si.constructor_=function(){var t,n;this.pts=null,this.Ai=null,this.eiList=new mi(this),this.$=null,this.ai=null,this.gi=!0,this.ei=new bi,this.oi=0,1===arguments.length?Si.constructor_.call(this,arguments[0],null):2===arguments.length&&(t=arguments[0],n=arguments[1],this.pts=t,this.Yn=n)};var xi=function(){is(e,Ei);var n=es(e);function e(){var t;return hs(this,e),t=n.call(this),e.constructor_.apply(us(t),arguments),t}return gs(e,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this.Yn.getGeometryCount()}},{key:"getCoordinate",value:function(){return this.Ci}},{key:"print",value:function(t){t.println("node "+this.Ci+" lbl: "+this.Yn)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,n){var i=cn.NONE,i=this.Yn.getLocation(n);return t.isNull(n)||(n=t.getLocation(n),i!==cn.BOUNDARY&&(i=n)),i}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return ns(ss(e.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],n=arguments[1];null===this.Yn?this.Yn=new di(t,n):this.Yn.setLocation(t,n)}},{key:"getEdges",value:function(){return this.Ii}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof e)this.mergeLabel(arguments[0].Yn);else if(arguments[0]instanceof di)for(var t=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(t,n);this.Yn.getLocation(n)===cn.NONE&&this.Yn.setLocation(n,i)}}},{key:"add",value:function(t){this.Ii.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this.Yn)return null;var n=cn.NONE,i=null,i=(n=null!==this.Yn?this.Yn.getLocation(t):n)===cn.BOUNDARY?cn.INTERIOR:(cn.INTERIOR,cn.BOUNDARY);this.Yn.setLocation(t,i)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();xi.constructor_=function(){this.Ci=null,this.Ii=null;var t=arguments[0],n=arguments[1];this.Ci=t,this.Ii=n,this.Yn=new di(0,cn.NONE)};var Ri=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof k){var t=arguments[0];return null===(n=this.nodeMap.get(t))&&(n=this.nodeFact.createNode(t),this.nodeMap.put(t,n)),n}if(arguments[0]instanceof xi){var n,t=arguments[0];return null===(n=this.nodeMap.get(t.getCoordinate()))?(this.nodeMap.put(t.getCoordinate(),t),t):(n.mergeLabel(t),n)}}},{key:"print",value:function(t){for(var n=this.iterator();n.hasNext();)n.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var n=new S,i=this.iterator();i.hasNext();){var e=i.next();e.getLabel().getLocation(t)===cn.BOUNDARY&&n.add(e)}return n}},{key:"add",value:function(t){var n=t.getCoordinate();this.addNode(n).add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ri.constructor_=function(){this.nodeMap=new Ct,this.nodeFact=null,this.nodeFact=arguments[0]};var Ti=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"compareDirection",value:function(t){return this.li===t.li&&this.fi===t.fi?0:this.ci>t.ci?1:this.ci<t.ci?-1:G.index(t.vi,t.yi,this.yi)}},{key:"getDy",value:function(){return this.fi}},{key:"getCoordinate",value:function(){return this.vi}},{key:"setNode",value:function(t){this.ki=t}},{key:"print",value:function(t){var n=Math.atan2(this.fi,this.li),i=this.getClass().getName(),e=i.lastIndexOf("."),e=i.substring(e+1);t.print("  "+e+": "+this.vi+" - "+this.yi+" "+this.ci+":"+n+"   "+this.Yn)}},{key:"compareTo",value:function(t){return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this.yi}},{key:"getDx",value:function(){return this.li}},{key:"getLabel",value:function(){return this.Yn}},{key:"getEdge",value:function(){return this.di}},{key:"getQuadrant",value:function(){return this.ci}},{key:"getNode",value:function(){return this.ki}},{key:"toString",value:function(){var t=Math.atan2(this.fi,this.li),n=this.getClass().getName(),i=n.lastIndexOf(".");return"  "+n.substring(i+1)+": "+this.vi+" - "+this.yi+" "+this.ci+":"+t+"   "+this.Yn}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,n){this.vi=t,this.yi=n,this.li=n.x-t.x,this.fi=n.y-t.y,this.ci=si.quadrant(this.li,this.fi),y.isTrue(!(0===this.li&&0===this.fi),"EdgeEnd with identical endpoints found")}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[u]}}]),t}();Ti.constructor_=function(){var t,n,i,e;this.di=null,this.Yn=null,this.ki=null,this.vi=null,this.yi=null,this.li=null,this.fi=null,this.ci=null,1===arguments.length?this.di=arguments[0]:3===arguments.length?Ti.constructor_.call(this,arguments[0],arguments[1],arguments[2],null):4===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],Ti.constructor_.call(this,t),this.init(n,i),this.Yn=e)};var Ni=function(){is(e,v);var i=es(e);function e(){var t,n;return hs(this,e),1===arguments.length?(t=i.call(this,n=arguments[0]),v.call(us(t),n)):2===arguments.length&&((t=i.call(this,e.msgWithCoord(arguments[0],n=arguments[1]))).name="TopologyException",t.pt=new k(n)),rs(t)}return gs(e,[{key:"getCoordinate",value:function(){return this.pt}},{key:"interfaces_",get:function(){return[]}},{key:"getClass",value:function(){return e}}],[{key:"msgWithCoord",value:function(t,n){return null!==n?t+" [ "+n+" ]":t}}]),e}(),Pi=function(){is(i,Ti);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getNextMin",value:function(){return this.wi}},{key:"getDepth",value:function(t){return this.ei[t]}},{key:"setVisited",value:function(t){this.ri=t}},{key:"computeDirectedLabel",value:function(){this.Yn=new di(this.di.getLabel()),this.mi||this.Yn.flip()}},{key:"getNext",value:function(){return this.xn}},{key:"setDepth",value:function(t,n){if(-999!==this.ei[t]&&this.ei[t]!==n)throw new Ni("assigned depths do not match",this.getCoordinate());this.ei[t]=n}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,n=0;n<2;n++)this.Yn.isArea(n)&&this.Yn.getLocation(n,Ii.LEFT)===cn.INTERIOR&&this.Yn.getLocation(n,Ii.RIGHT)===cn.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this.wi=t}},{key:"print",value:function(t){ns(ss(i.prototype),"print",this).call(this,t),t.print(" "+this.ei[Ii.LEFT]+"/"+this.ei[Ii.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this.ui&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this.pi=t}},{key:"isLineEdge",value:function(){var t=this.Yn.isLine(0)||this.Yn.isLine(1),n=!this.Yn.isArea(0)||this.Yn.allPositionsEqual(0,cn.EXTERIOR),i=!this.Yn.isArea(1)||this.Yn.allPositionsEqual(1,cn.EXTERIOR);return t&&n&&i}},{key:"setEdgeRing",value:function(t){this.Mi=t}},{key:"getMinEdgeRing",value:function(){return this.pi}},{key:"getDepthDelta",value:function(){var t=this.di.getDepthDelta();return t=!this.mi?-t:t}},{key:"setInResult",value:function(t){this.ui=t}},{key:"getSym",value:function(){return this.Sn}},{key:"isForward",value:function(){return this.mi}},{key:"getEdge",value:function(){return this.di}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this.mi?this.di.print(t):this.di.printReverse(t)}},{key:"setSym",value:function(t){this.Sn=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this.Sn.setVisited(t)}},{key:"setEdgeDepths",value:function(t,n){var i=this.getEdge().getDepthDelta();this.mi||(i=-i);var e=1;t===Ii.LEFT&&(e=-1);var r=Ii.opposite(t),e=n+i*e;this.setDepth(t,n),this.setDepth(r,e)}},{key:"getEdgeRing",value:function(){return this.Mi}},{key:"isInResult",value:function(){return this.ui}},{key:"setNext",value:function(t){this.xn=t}},{key:"isVisited",value:function(){return this.ri}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthFactor",value:function(t,n){return t===cn.EXTERIOR&&n===cn.INTERIOR?1:t===cn.INTERIOR&&n===cn.EXTERIOR?-1:0}}]),i}();Pi.constructor_=function(){this.mi=null,this.ui=!1,this.ri=!1,this.Sn=null,this.xn=null,this.wi=null,this.Mi=null,this.pi=null,this.ei=[0,-999,-999];var t=arguments[0],n=arguments[1];Ti.constructor_.call(this,t),(this.mi=n)?this.init(t.getCoordinate(0),t.getCoordinate(1)):(n=t.getNumPoints()-1,this.init(t.getCoordinate(n),t.getCoordinate(n-1))),this.computeDirectedLabel()};var Oi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"createNode",value:function(t){return new xi(t,null)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Oi.constructor_=function(){};var Li=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"printEdges",value:function(t){t.println("Edges:");for(var n=0;n<this.Ii.size();n++){t.println("edge "+n+":");var i=this.Ii.get(n);i.print(t),i.eiList.print(t)}}},{key:"find",value:function(t){return this.bi.find(t)}},{key:"addNode",value:function(){return arguments[0]instanceof xi||arguments[0]instanceof k?this.bi.addNode(arguments[0]):void 0}},{key:"getNodeIterator",value:function(){return this.bi.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this.bi.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){j.out.println(t)}},{key:"isBoundaryNode",value:function(t,n){n=this.bi.find(n);if(null===n)return!1;n=n.getLabel();return null!==n&&n.getLocation(t)===cn.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this.bi.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,n,i,e){return!!t.equals(i)&&G.index(t,n,e)===G.COLLINEAR&&si.quadrant(t,n)===si.quadrant(i,e)}},{key:"getEdgeEnds",value:function(){return this.Ei}},{key:"debugPrint",value:function(t){j.out.print(t)}},{key:"getEdgeIterator",value:function(){return this.Ii.iterator()}},{key:"findEdgeInSameDirection",value:function(t,n){for(var i=0;i<this.Ii.size();i++){var e=this.Ii.get(i),r=e.getCoordinates();if(this.matchInSameDirection(t,n,r[0],r[1]))return e;if(this.matchInSameDirection(t,n,r[r.length-1],r[r.length-2]))return e}return null}},{key:"insertEdge",value:function(t){this.Ii.add(t)}},{key:"findEdgeEnd",value:function(t){for(var n=this.getEdgeEnds().iterator();n.hasNext();){var i=n.next();if(i.getEdge()===t)return i}return null}},{key:"addEdges",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();this.Ii.add(i);var e=new Pi(i,!0),i=new Pi(i,!1);e.setSym(i),i.setSym(e),this.add(e),this.add(i)}}},{key:"add",value:function(t){this.bi.add(t),this.Ei.add(t)}},{key:"getNodes",value:function(){return this.bi.values()}},{key:"findEdge",value:function(t,n){for(var i=0;i<this.Ii.size();i++){var e=this.Ii.get(i),r=e.getCoordinates();if(t.equals(r[0])&&n.equals(r[1]))return e}return null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"linkResultDirectedEdges",value:function(t){for(var n=t.iterator();n.hasNext();)n.next().getEdges().linkResultDirectedEdges()}}]),t}();Li.constructor_=function(){this.Ii=new S,this.bi=null,this.Ei=new S,0===arguments.length?this.bi=new Ri(new Oi):1===arguments.length&&(this.bi=new Ri(arguments[0]))};var Di=function(){is(e,Li);var n=es(e);function e(){var t;return hs(this,e),t=n.call(this),e.constructor_.apply(us(t),arguments),t}return gs(e,[{key:"insertBoundaryPoint",value:function(t,n){var i=this.bi.addNode(n).getLabel(),n=1;cn.NONE,i.getLocation(t,Ii.ON)===cn.BOUNDARY&&n++;n=e.determineBoundary(this.Si,n);i.setLocation(t,n)}},{key:"computeSelfNodes",value:function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],e=new vi(t,!0,!1);e.setIsDoneIfProperInt(i);t=this.createEdgeSetIntersector(),i=this.xi instanceof Zt||this.xi instanceof jt||this.xi instanceof Vt;return t.computeIntersections(this.Ii,e,n||!i),this.addSelfIntersectionNodes(this.Ri),e}}},{key:"computeSplitEdges",value:function(t){for(var n=this.Ii.iterator();n.hasNext();)n.next().eiList.addSplitEdges(t)}},{key:"computeEdgeIntersections",value:function(t,n,i){i=new vi(n,i,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.Ii,t.Ii,i),i}},{key:"getGeometry",value:function(){return this.xi}},{key:"getBoundaryNodeRule",value:function(){return this.Si}},{key:"hasTooFewPoints",value:function(){return this.Ti}},{key:"addPoint",value:function(){var t;arguments[0]instanceof _t?(t=arguments[0].getCoordinate(),this.insertPoint(this.Ri,t,cn.INTERIOR)):arguments[0]instanceof k&&this.insertPoint(this.Ri,arguments[0],cn.INTERIOR)}},{key:"addPolygon",value:function(t){this.addPolygonRing(t.getExteriorRing(),cn.EXTERIOR,cn.INTERIOR);for(var n=0;n<t.getNumInteriorRing();n++){var i=t.getInteriorRingN(n);this.addPolygonRing(i,cn.INTERIOR,cn.EXTERIOR)}}},{key:"addEdge",value:function(t){this.insertEdge(t);t=t.getCoordinates();this.insertPoint(this.Ri,t[0],cn.BOUNDARY),this.insertPoint(this.Ri,t[t.length-1],cn.BOUNDARY)}},{key:"addLineString",value:function(t){var n=$.removeRepeatedPoints(t.getCoordinates());if(n.length<2)return this.Ti=!0,this.Ni=n[0],null;var i=new Si(n,new di(this.Ri,cn.INTERIOR));this.Pi.put(t,i),this.insertEdge(i),y.isTrue(2<=n.length,"found LineString with single point"),this.insertBoundaryPoint(this.Ri,n[0]),this.insertBoundaryPoint(this.Ri,n[n.length-1])}},{key:"getInvalidPoint",value:function(){return this.Ni}},{key:"getBoundaryPoints",value:function(){for(var t=this.getBoundaryNodes(),n=new Array(t.size()).fill(null),i=0,e=t.iterator();e.hasNext();){var r=e.next();n[i++]=r.getCoordinate().copy()}return n}},{key:"getBoundaryNodes",value:function(){return null===this.Oi&&(this.Oi=this.bi.getBoundaryNodes(this.Ri)),this.Oi}},{key:"addSelfIntersectionNode",value:function(t,n,i){if(this.isBoundaryNode(t,n))return null;i===cn.BOUNDARY&&this.Li?this.insertBoundaryPoint(t,n):this.insertPoint(t,n,i)}},{key:"addPolygonRing",value:function(t,n,i){if(t.isEmpty())return null;var e=$.removeRepeatedPoints(t.getCoordinates());if(e.length<4)return this.Ti=!0,this.Ni=e[0],null;var r=n,u=i;G.isCCW(e)&&(r=i,u=n);u=new Si(e,new di(this.Ri,cn.BOUNDARY,r,u));this.Pi.put(t,u),this.insertEdge(u),this.insertPoint(this.Ri,e[0],cn.BOUNDARY)}},{key:"insertPoint",value:function(t,n,i){var e=this.bi.addNode(n),n=e.getLabel();null===n?e.Yn=new di(t,i):n.setLocation(t,i)}},{key:"createEdgeSetIntersector",value:function(){return new yi}},{key:"addSelfIntersectionNodes",value:function(t){for(var n=this.Ii.iterator();n.hasNext();)for(var i=n.next(),e=i.getLabel().getLocation(t),r=i.eiList.iterator();r.hasNext();){var u=r.next();this.addSelfIntersectionNode(t,u.coord,e)}}},{key:"add",value:function(){if(!(1===arguments.length&&arguments[0]instanceof X))return ns(ss(e.prototype),"add",this).apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Vt&&(this.Li=!1),t instanceof jt)this.addPolygon(t);else if(t instanceof Lt)this.addLineString(t);else if(t instanceof _t)this.addPoint(t);else if(t instanceof Bt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof Vt)this.addCollection(t);else{if(!(t instanceof mt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}}},{key:"addCollection",value:function(t){for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.add(i)}}},{key:"locate",value:function(t){return d(this.xi,Gt)&&50<this.xi.getNumGeometries()?(null===this.Di&&(this.Di=new Gn(this.xi)),this.Di.locate(t)):this._i.locate(t,this.xi)}},{key:"findEdge",value:function(){return 1===arguments.length&&arguments[0]instanceof Lt?this.Pi.get(arguments[0]):ns(ss(e.prototype),"findEdge",this).apply(this,arguments)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"determineBoundary",value:function(t,n){return t.isInBoundary(n)?cn.BOUNDARY:cn.INTERIOR}}]),e}();Di.constructor_=function(){var t,n,i;this.xi=null,this.Pi=new rn,this.Si=null,this.Li=!0,this.Ri=null,this.Oi=null,this.Ti=!1,this.Ni=null,this.Di=null,this._i=new Ci,2===arguments.length?Di.constructor_.call(this,arguments[0],arguments[1],Q.OGC_SFS_BOUNDARY_RULE):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.Ri=t,this.xi=n,this.Si=i,null!==n&&this.add(n))};var Jt=Object.freeze({GeometryGraph:Di}),_i=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visit",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();_i.constructor_=function(){};var Fi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isRepeated",value:function(){return 1<this.Fi}},{key:"getRight",value:function(){return this.Gi}},{key:"getCoordinate",value:function(){return this._t}},{key:"setLeft",value:function(t){this.ji=t}},{key:"getX",value:function(){return this._t.x}},{key:"getData",value:function(){return this.Bi}},{key:"getCount",value:function(){return this.Fi}},{key:"getLeft",value:function(){return this.ji}},{key:"getY",value:function(){return this._t.y}},{key:"increment",value:function(){this.Fi=this.Fi+1}},{key:"setRight",value:function(t){this.Gi=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Fi.constructor_=function(){var t,n,i;this._t=null,this.Bi=null,this.ji=null,this.Gi=null,this.Fi=null,2===arguments.length?(n=arguments[0],i=arguments[1],this._t=new k(n),this.ji=null,this.Gi=null,this.Fi=1,this.Bi=i):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this._t=new k(t,n),this.ji=null,this.Gi=null,this.Fi=1,this.Bi=i)};var Gi=function(){function h(){hs(this,h),h.constructor_.apply(this,arguments)}return gs(h,[{key:"insert",value:function(){if(1===arguments.length)return this.insert(arguments[0],null);if(2===arguments.length){var t=arguments[0],n=arguments[1];if(null===this.Nt)return this.Nt=new Fi(t,n),this.Nt;if(0<this.Zi){var i=this.findBestMatchNode(t);if(null!==i)return i.increment(),i}return this.insertExact(t,n)}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0],n=new S;return this.query(t,n),n}var i;2===arguments.length&&(arguments[0]instanceof T&&d(arguments[1],M)?(n=arguments[0],i=arguments[1],this.queryNode(this.Nt,n,!0,new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[_i]}},{key:"visit",value:function(t){i.add(t)}}]),t}()))):arguments[0]instanceof T&&d(arguments[1],_i)&&this.queryNode(this.Nt,arguments[0],!0,arguments[1]))}},{key:"queryNode",value:function(t,n,i,e){if(null===t)return null;var r=null,u=null,s=null,u=(s=i?(r=n.getMinX(),u=n.getMaxX(),t.getX()):(r=n.getMinY(),u=n.getMaxY(),t.getY()))<=u;r<s&&this.queryNode(t.getLeft(),n,!i,e),n.contains(t.getCoordinate())&&e.visit(t),u&&this.queryNode(t.getRight(),n,!i,e)}},{key:"findBestMatchNode",value:function(t){t=new ji(t,this.Zi);return this.query(t.queryEnvelope(),t),t.getNode()}},{key:"isEmpty",value:function(){return null===this.Nt}},{key:"insertExact",value:function(t,n){for(var i=this.Nt,e=this.Nt,r=!0,u=!0;null!==i;){if(null!==i&&t.distance(i.getCoordinate())<=this.Zi)return i.increment(),i;u=r?t.x<i.getX():t.y<i.getY(),e=i,i=u?i.getLeft():i.getRight(),r=!r}this.Vi=this.Vi+1;n=new Fi(t,n);return u?e.setLeft(n):e.setRight(n),n}},{key:"getClass",value:function(){return h}},{key:"interfaces_",get:function(){return[]}}],[{key:"toCoordinates",value:function(){if(1===arguments.length)return h.toCoordinates(arguments[0],!1);if(2===arguments.length){for(var t=arguments[0],n=arguments[1],i=new R,e=t.iterator();e.hasNext();)for(var r=e.next(),u=n?r.getCount():1,s=0;s<u;s++)i.add(r.getCoordinate(),!0);return i.toCoordinateArray()}}}]),h}(),ji=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visit",value:function(t){var n=this._t.distance(t.getCoordinate());if(!(n<=this.Zi))return null;var i=!1;(i=null===this.Yi||n<this.Ui||null!==this.Yi&&n===this.Ui&&t.getCoordinate().compareTo(this.Yi.getCoordinate())<1?!0:i)&&(this.Yi=t,this.Ui=n)}},{key:"queryEnvelope",value:function(){var t=new T(this._t);return t.expandBy(this.Zi),t}},{key:"getNode",value:function(){return this.Yi}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_i]}}]),t}();ji.constructor_=function(){this.Zi=null,this.Yi=null,this.Ui=0,this._t=null;var t=arguments[0],n=arguments[1];this._t=t,this.Zi=n},Gi.BestMatchVisitor=ji,Gi.constructor_=function(){this.Nt=null,this.Vi=null,this.Zi=null,0===arguments.length?Gi.constructor_.call(this,0):1===arguments.length&&(this.Zi=arguments[0])};var Bi=Object.freeze({KdTree:Gi}),Zi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"hasChildren",value:function(){for(var t=0;t<4;t++)if(null!==this.Wi[t])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(t){t.addAll(this.Dt);for(var n=0;n<4;n++)null!==this.Wi[n]&&this.Wi[n].addAllItems(t);return t}},{key:"getNodeCount",value:function(){for(var t=0,n=0;n<4;n++)null!==this.Wi[n]&&(t+=this.Wi[n].size());return t+1}},{key:"size",value:function(){for(var t=0,n=0;n<4;n++)null!==this.Wi[n]&&(t+=this.Wi[n].size());return t+this.Dt.size()}},{key:"addAllItemsFromOverlapping",value:function(t,n){if(!this.isSearchMatch(t))return null;n.addAll(this.Dt);for(var i=0;i<4;i++)null!==this.Wi[i]&&this.Wi[i].addAllItemsFromOverlapping(t,n)}},{key:"visitItems",value:function(t,n){for(var i=this.Dt.iterator();i.hasNext();)n.visitItem(i.next())}},{key:"hasItems",value:function(){return!this.Dt.isEmpty()}},{key:"remove",value:function(t,n){if(!this.isSearchMatch(t))return!1;for(var i=!1,e=0;e<4;e++)if(null!==this.Wi[e]&&(i=this.Wi[e].remove(t,n))){this.Wi[e].isPrunable()&&(this.Wi[e]=null);break}return i||this.Dt.remove(n)}},{key:"visit",value:function(t,n){if(!this.isSearchMatch(t))return null;this.visitItems(t,n);for(var i=0;i<4;i++)null!==this.Wi[i]&&this.Wi[i].visit(t,n)}},{key:"getItems",value:function(){return this.Dt}},{key:"depth",value:function(){for(var t,n=0,i=0;i<4;i++)null===this.Wi[i]||n<(t=this.Wi[i].depth())&&(n=t);return n+1}},{key:"isEmpty",value:function(){var t=!0;if(this.Dt.isEmpty()){for(var n=0;n<4;n++)if(null!==this.Wi[n]&&!this.Wi[n].isEmpty()){t=!1;break}}else t=!1;return t}},{key:"add",value:function(t){this.Dt.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[h]}}],[{key:"getSubnodeIndex",value:function(t,n,i){var e=-1;return t.getMinX()>=n&&(t.getMinY()>=i&&(e=3),t.getMaxY()<=i&&(e=1)),t.getMaxX()<=n&&(t.getMinY()>=i&&(e=2),t.getMaxY()<=i&&(e=0)),e}}]),t}();function Vi(){}Zi.constructor_=function(){this.Dt=new S,this.Wi=new Array(4).fill(null)},Vi.exponent=function(t){return function(t){var n,i,e,r;if(r||(n=t<0||1/t<0,isFinite(t)||(r={d:32752,c:0,b:0,a:0},n&&(r.d+=32768),i=Math.pow(2,11)-1,e=0)),!r){for(i=1023,e=Math.abs(t);2<=e;)i++,e/=2;for(;e<1&&0<i;)i--,e*=2;i<=0&&(e/=2)}return i}(t)-1023},Vi.powerOf2=function(t){return Math.pow(2,t)};var Yi=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getLevel",value:function(){return this.Pt}},{key:"computeKey",value:function(){if(1===arguments.length){var t=arguments[0];for(this.Pt=e.computeQuadLevel(t),this.Ai=new T,this.computeKey(this.Pt,t);!this.Ai.contains(t);)this.Pt+=1,this.computeKey(this.Pt,t)}else{var n,i;2===arguments.length&&(i=arguments[0],n=arguments[1],i=Vi.powerOf2(i),this.Ct.x=Math.floor(n.getMinX()/i)*i,this.Ct.y=Math.floor(n.getMinY()/i)*i,this.Ai.init(this.Ct.x,this.Ct.x+i,this.Ct.y,this.Ct.y+i))}}},{key:"getEnvelope",value:function(){return this.Ai}},{key:"getCentre",value:function(){return new k((this.Ai.getMinX()+this.Ai.getMaxX())/2,(this.Ai.getMinY()+this.Ai.getMaxY())/2)}},{key:"getPoint",value:function(){return this.Ct}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeQuadLevel",value:function(t){var n=t.getWidth(),t=t.getHeight();return Vi.exponent(t<n?n:t)+1}}]),e}();Yi.constructor_=function(){this.Ct=new k,this.Pt=0,this.Ai=null,this.computeKey(arguments[0])};var Ui=function(){is(u,Zi);var n=es(u);function u(){var t;return hs(this,u),t=n.call(this),u.constructor_.apply(us(t),arguments),t}return gs(u,[{key:"find",value:function(t){var n=Zi.getSubnodeIndex(t,this.Xi,this.zi);return-1!==n&&null!==this.Wi[n]?this.Wi[n].find(t):this}},{key:"isSearchMatch",value:function(t){return null!==t&&this.Ai.intersects(t)}},{key:"getSubnode",value:function(t){return null===this.Wi[t]&&(this.Wi[t]=this.createSubnode(t)),this.Wi[t]}},{key:"getEnvelope",value:function(){return this.Ai}},{key:"getNode",value:function(t){var n=Zi.getSubnodeIndex(t,this.Xi,this.zi);return-1!==n?this.getSubnode(n).getNode(t):this}},{key:"createSubnode",value:function(t){var n=0,i=0,e=0,r=0;switch(t){case 0:n=this.Ai.getMinX(),i=this.Xi,e=this.Ai.getMinY(),r=this.zi;break;case 1:n=this.Xi,i=this.Ai.getMaxX(),e=this.Ai.getMinY(),r=this.zi;break;case 2:n=this.Ai.getMinX(),i=this.Xi,e=this.zi,r=this.Ai.getMaxY();break;case 3:n=this.Xi,i=this.Ai.getMaxX(),e=this.zi,r=this.Ai.getMaxY()}return new u(new T(n,i,e,r),this.Pt-1)}},{key:"insertNode",value:function(t){y.isTrue(null===this.Ai||this.Ai.contains(t.Ai));var n,i=Zi.getSubnodeIndex(t.Ai,this.Xi,this.zi);t.Pt===this.Pt-1?this.Wi[i]=t:((n=this.createSubnode(i)).insertNode(t),this.Wi[i]=n)}},{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(t){t=new Yi(t);return new u(t.getEnvelope(),t.getLevel())}},{key:"createExpanded",value:function(t,n){n=new T(n);null!==t&&n.expandToInclude(t.Ai);n=u.createNode(n);return null!==t&&n.insertNode(t),n}}]),u}();Ui.constructor_=function(){this.Ai=null,this.Xi=null,this.zi=null,this.Pt=null;var t=arguments[0],n=arguments[1];this.Ai=t,this.Pt=n,this.Xi=(t.getMinX()+t.getMaxX())/2,this.zi=(t.getMinY()+t.getMaxY())/2};var Wi=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isZeroWidth",value:function(t,n){var i=n-t;if(0==i)return!0;n=i/Math.max(Math.abs(t),Math.abs(n));return Vi.exponent(n)<=e.MIN_BINARY_EXPONENT}}]),e}();Wi.constructor_=function(){},Wi.MIN_BINARY_EXPONENT=-50;var Xi=function(){is(r,Zi);var n=es(r);function r(){var t;return hs(this,r),t=n.call(this),r.constructor_.apply(us(t),arguments),t}return gs(r,[{key:"insert",value:function(t,n){var i=Zi.getSubnodeIndex(t,r.origin.x,r.origin.y);if(-1===i)return this.add(n),null;var e=this.Wi[i];null!==e&&e.getEnvelope().contains(t)||(e=Ui.createExpanded(e,t),this.Wi[i]=e),this.insertContained(this.Wi[i],t,n)}},{key:"isSearchMatch",value:function(t){return!0}},{key:"insertContained",value:function(t,n,i){y.isTrue(t.getEnvelope().contains(n));var e=Wi.isZeroWidth(n.getMinX(),n.getMaxX()),r=Wi.isZeroWidth(n.getMinY(),n.getMaxY());(e||r?t.find(n):t.getNode(n)).add(i)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();Xi.constructor_=function(){},Xi.origin=new k(0,0);var zi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"insert",value:function(t,n){}},{key:"remove",value:function(t,n){}},{key:"query",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();zi.constructor_=function(){};var Qi=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"size",value:function(){return null!==this.Nt?this.Nt.size():0}},{key:"insert",value:function(t,n){this.collectStats(t);t=i.ensureExtent(t,this.Qi);this.Nt.insert(t,n)}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0],n=new _n;return this.query(t,n),n.getItems()}2===arguments.length&&this.Nt.visit(arguments[0],arguments[1])}},{key:"queryAll",value:function(){var t=new S;return this.Nt.addAllItems(t),t}},{key:"remove",value:function(t,n){t=i.ensureExtent(t,this.Qi);return this.Nt.remove(t,n)}},{key:"collectStats",value:function(t){var n=t.getWidth();n<this.Qi&&0<n&&(this.Qi=n);t=t.getHeight();t<this.Qi&&0<t&&(this.Qi=t)}},{key:"depth",value:function(){return null!==this.Nt?this.Nt.depth():0}},{key:"isEmpty",value:function(){return null===this.Nt||this.Nt.isEmpty()}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[zi,h]}}],[{key:"ensureExtent",value:function(t,n){var i=t.getMinX(),e=t.getMaxX(),r=t.getMinY(),u=t.getMaxY();return i!==e&&r!==u?t:(i===e&&(e=(i-=n/2)+n/2),r===u&&(u=(r-=n/2)+n/2),new T(i,e,r,u))}}]),i}();Qi.constructor_=function(){this.Nt=null,this.Qi=1,this.Nt=new Xi},Qi.serialVersionUID=-0x678b60c967a25400;var qt=Object.freeze({Quadtree:Qi}),Ki=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getBounds",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ki.constructor_=function(){};var Hi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getItem",value:function(){return this.St}},{key:"getBounds",value:function(){return this.Ki}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ki,h]}}]),t}();Hi.constructor_=function(){this.Ki=null,this.St=null;var t=arguments[0],n=arguments[1];this.Ki=t,this.St=n};var Ji=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this.Dt.get(1);return this.Dt.set(1,this.Dt.get(this.Hi)),--this.Hi,this.reorder(1),t}},{key:"size",value:function(){return this.Hi}},{key:"reorder",value:function(t){for(var n=null,i=this.Dt.get(t);2*t<=this.Hi&&((n=2*t)!==this.Hi&&this.Dt.get(n+1).compareTo(this.Dt.get(n))<0&&n++,this.Dt.get(n).compareTo(i)<0);t=n)this.Dt.set(t,this.Dt.get(n));this.Dt.set(t,i)}},{key:"clear",value:function(){this.Hi=0,this.Dt.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this.Dt.get(1)}},{key:"isEmpty",value:function(){return 0===this.Hi}},{key:"add",value:function(t){this.Dt.add(null),this.Hi+=1;var n=this.Hi;for(this.Dt.set(0,t);t.compareTo(this.Dt.get(Math.trunc(n/2)))<0;n/=2)this.Dt.set(n,this.Dt.get(Math.trunc(n/2)));this.Dt.set(n,t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ji.constructor_=function(){this.Hi=null,this.Dt=null,this.Hi=0,this.Dt=new S,this.Dt.add(null)};var qi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getLevel",value:function(){return this.Pt}},{key:"size",value:function(){return this.Ji.size()}},{key:"getChildBoundables",value:function(){return this.Ji}},{key:"addChildBoundable",value:function(t){y.isTrue(null===this.Ki),this.Ji.add(t)}},{key:"isEmpty",value:function(){return this.Ji.isEmpty()}},{key:"getBounds",value:function(){return null===this.Ki&&(this.Ki=this.computeBounds()),this.Ki}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ki,h]}}]),t}();qi.constructor_=function(){this.Ji=new S,this.Ki=null,this.Pt=null,0===arguments.length||1===arguments.length&&(this.Pt=arguments[0])},qi.serialVersionUID=0x5a1e55ec41369800;var $i=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"expandToQueue",value:function(t,n){var i=s.isComposite(this.qi),e=s.isComposite(this.$i);if(i&&e)return s.area(this.qi)>s.area(this.$i)?this.expand(this.qi,this.$i,t,n):this.expand(this.$i,this.qi,t,n),null;if(i)return this.expand(this.qi,this.$i,t,n),null;if(e)return this.expand(this.$i,this.qi,t,n),null;throw new l("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(s.isComposite(this.qi)||s.isComposite(this.$i))}},{key:"compareTo",value:function(t){return this.ft<t.ft?-1:this.ft>t.ft?1:0}},{key:"expand",value:function(t,n,i,e){for(var r=t.getChildBoundables().iterator();r.hasNext();){var u=new s(r.next(),n,this.te);u.getDistance()<e&&i.add(u)}}},{key:"getBoundable",value:function(t){return 0===t?this.qi:this.$i}},{key:"getDistance",value:function(){return this.ft}},{key:"distance",value:function(){return this.isLeaves()?this.te.distance(this.qi,this.$i):this.qi.getBounds().distance(this.$i.getBounds())}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[u]}}],[{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof qi}}]),s}();$i.constructor_=function(){this.qi=null,this.$i=null,this.ft=null,this.te=null;var t=arguments[0],n=arguments[1],i=arguments[2];this.qi=t,this.$i=n,this.te=i,this.ft=this.distance()};var te=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"queryInternal",value:function(){if(d(arguments[2],Sn)&&arguments[0]instanceof Object&&arguments[1]instanceof qi)for(var t=arguments[0],n=arguments[1],i=arguments[2],e=n.getChildBoundables(),r=0;r<e.size();r++){var u=e.get(r);this.getIntersectsOp().intersects(u.getBounds(),t)&&(u instanceof qi?this.queryInternal(t,u,i):u instanceof Hi?i.visitItem(u.getItem()):y.shouldNeverReachHere())}else if(d(arguments[2],M)&&arguments[0]instanceof Object&&arguments[1]instanceof qi)for(var s=arguments[0],n=arguments[1],h=arguments[2],e=n.getChildBoundables(),r=0;r<e.size();r++)u=e.get(r),this.getIntersectsOp().intersects(u.getBounds(),s)&&(u instanceof qi?this.queryInternal(s,u,h):u instanceof Hi?h.add(u.getItem()):y.shouldNeverReachHere())}},{key:"getNodeCapacity",value:function(){return this.ne}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.Nt));if(1===arguments.length){for(var t=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof qi?t+=this.size(i):i instanceof Hi&&(t+=1)}return t}}},{key:"removeItem",value:function(t,n){for(var i=null,e=t.getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof Hi&&r.getItem()===n&&(i=r)}return null!==i&&(t.getChildBoundables().remove(i),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.Nt);return null===t?new S:t}if(1===arguments.length){for(var t=arguments[0],n=new S,i=t.getChildBoundables().iterator();i.hasNext();){var e,r=i.next();r instanceof qi?null!==(e=this.itemsTree(r))&&n.add(e):r instanceof Hi?n.add(r.getItem()):y.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,n){y.isTrue(!this.ie,"Cannot insert items into an STR packed R-tree after it has been built."),this.ee.add(new Hi(t,n))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],n=new S;return this.boundablesAtLevel(t,this.Nt,n),n}if(3===arguments.length){var i=arguments[0],n=arguments[1],e=arguments[2];if(y.isTrue(-2<i),n.getLevel()===i)return e.add(n),null;for(var r=n.getChildBoundables().iterator();r.hasNext();){var u=r.next();u instanceof qi?this.boundablesAtLevel(i,u,e):(y.isTrue(u instanceof Hi),-1===i&&e.add(u))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var n=new S;return this.isEmpty()||this.getIntersectsOp().intersects(this.Nt.getBounds(),t)&&this.queryInternal(t,this.Nt,n),n}if(2===arguments.length){t=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.Nt.getBounds(),t)&&this.queryInternal(t,this.Nt,n)}}},{key:"build",value:function(){if(this.ie)return null;this.Nt=this.ee.isEmpty()?this.createNode(0):this.createHigherLevels(this.ee,-1),this.ee=null,this.ie=!0}},{key:"getRoot",value:function(){return this.build(),this.Nt}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.Nt.getBounds(),t)&&this.remove(t,this.Nt,n)}if(3===arguments.length){var i=arguments[0],n=arguments[1],e=arguments[2],r=this.removeItem(n,e);if(r)return!0;for(var u=null,s=n.getChildBoundables().iterator();s.hasNext();){var h=s.next();if(this.getIntersectsOp().intersects(h.getBounds(),i)&&h instanceof qi&&(r=this.remove(i,h,e))){u=h;break}}return null!==u&&u.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(u),r}}},{key:"createHigherLevels",value:function(t,n){y.isTrue(!t.isEmpty());t=this.createParentBoundables(t,n+1);return 1===t.size()?t.get(0):this.createHigherLevels(t,n+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.Nt));if(1===arguments.length){for(var t=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof qi&&(t<(i=this.depth(i))&&(t=i))}return t+1}}},{key:"createParentBoundables",value:function(t,n){y.isTrue(!t.isEmpty());var i=new S;i.add(this.createNode(n));t=new S(t);Pn.sort(t,this.getComparator());for(var e=t.iterator();e.hasNext();){var r=e.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(n)),this.lastNode(i).addChildBoundable(r)}return i}},{key:"isEmpty",value:function(){return(this.ie?this.Nt:this.ee).isEmpty()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[h]}}],[{key:"compareDoubles",value:function(t,n){return n<t?1:t<n?-1:0}}]),t}();te.IntersectsOp=function(){},te.constructor_=function(){var t;this.Nt=null,this.ie=!1,this.ee=new S,this.ne=null,0===arguments.length?te.constructor_.call(this,te.DEFAULT_NODE_CAPACITY):1===arguments.length&&(y.isTrue(1<(t=arguments[0]),"Node capacity must be greater than 1"),this.ne=t)},te.serialVersionUID=-0x35ef64c82d4c5400,te.DEFAULT_NODE_CAPACITY=10;var ne=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"distance",value:function(t,n){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ne.constructor_=function(){};var ie=function(){is(f,te);var n=es(f);function f(){var t;return hs(this,f),t=n.call(this),f.constructor_.apply(us(t),arguments),t}return gs(f,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,n){y.isTrue(0<t.length);for(var i=new S,e=0;e<t.length;e++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[e],n));return i}},{key:"createNode",value:function(t){return new ee(t)}},{key:"size",value:function(){return 0===arguments.length?ns(ss(f.prototype),"size",this).call(this):ns(ss(f.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof T))return ns(ss(f.prototype),"insert",this).apply(this,arguments);var t=arguments[0],n=arguments[1];if(t.isNull())return null;ns(ss(f.prototype),"insert",this).call(this,t,n)}},{key:"getIntersectsOp",value:function(){return f.intersectsOp}},{key:"verticalSlices",value:function(t,n){for(var i=Math.trunc(Math.ceil(t.size()/n)),e=new Array(n).fill(null),r=t.iterator(),u=0;u<n;u++){e[u]=new S;for(var s=0;r.hasNext()&&s<i;){var h=r.next();e[u].add(h),s++}}return e}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];return ns(ss(f.prototype),"query",this).call(this,t)}var n;2===arguments.length&&(n=arguments[0],t=arguments[1],ns(ss(f.prototype),"query",this).call(this,n,t))}},{key:"getComparator",value:function(){return f.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,n){return ns(ss(f.prototype),"createParentBoundables",this).call(this,t,n)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof T){var t=arguments[0],n=arguments[1];return ns(ss(f.prototype),"remove",this).call(this,t,n)}return ns(ss(f.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?ns(ss(f.prototype),"depth",this).call(this):ns(ss(f.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,n){y.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),t=new S(t);Pn.sort(t,f.xComparator);i=this.verticalSlices(t,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(i,n)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(d(arguments[0],ne)){var t=arguments[0],n=new $i(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof $i)return this.nearestNeighbour(arguments[0],c.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof f&&d(arguments[1],ne)){var t=arguments[0],i=arguments[1],n=new $i(this.getRoot(),t.getRoot(),i);return this.nearestNeighbour(n)}if(arguments[0]instanceof $i&&"number"==typeof arguments[1]){var i=arguments[0],e=arguments[1],r=null;for((g=new Ji).add(i);!g.isEmpty()&&0<e&&!((I=(C=g.poll()).getDistance())>=e);)C.isLeaves()?(e=I,r=C):C.expandToQueue(g,e);return[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}if(arguments[0]instanceof $i&&Number.isInteger(arguments[1]))return this.nearestNeighbour(arguments[0],c.POSITIVE_INFINITY,arguments[1])}else if(3===arguments.length){if(d(arguments[2],ne)&&arguments[0]instanceof T&&arguments[1]instanceof Object){var u=arguments[0],s=arguments[1],h=arguments[2],u=new Hi(u,s);return n=new $i(this.getRoot(),u,h),this.nearestNeighbour(n)[0]}if(Number.isInteger(arguments[2])&&arguments[0]instanceof $i&&"number"==typeof arguments[1]){var g,o=arguments[0],a=arguments[1],A=arguments[2],e=a;(g=new Ji).add(o);for(var C,I,l=new Ji;!g.isEmpty()&&0<=e;){if((I=(C=g.poll()).getDistance())>=e)break;C.isLeaves()?l.size()<A?l.add(C):(l.peek().getDistance()>I&&(l.poll(),l.add(C)),e=l.peek().getDistance()):C.expandToQueue(g,e)}return f.getItems(l)}}else if(4===arguments.length){s=arguments[0],h=arguments[1],a=arguments[2],o=arguments[3],u=new Hi(s,h);return n=new $i(this.getRoot(),u,a),this.nearestNeighbour(n,o)}}},{key:"getClass",value:function(){return f}},{key:"interfaces_",get:function(){return[zi,h]}}],[{key:"centreX",value:function(t){return f.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,n){return(t+n)/2}},{key:"getItems",value:function(t){for(var n=new Array(t.size()).fill(null),i=0;!t.isEmpty();){var e=t.poll();n[i]=e.getBoundable(0).getItem(),i++}return n}},{key:"centreY",value:function(t){return f.avg(t.getMinY(),t.getMaxY())}}]),f}(),ee=function(){is(i,qi);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"computeBounds",value:function(){for(var t=null,n=this.getChildBoundables().iterator();n.hasNext();){var i=n.next();null===t?t=new T(i.getBounds()):t.expandToInclude(i.getBounds())}return t}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();ee.constructor_=function(){qi.constructor_.call(this,arguments[0])},ie.STRtreeNode=ee,ie.constructor_=function(){0===arguments.length?ie.constructor_.call(this,ie.DEFAULT_NODE_CAPACITY):1===arguments.length&&te.constructor_.call(this,arguments[0])},ie.serialVersionUID=0x39920f7d5f261e0,ie.xComparator=new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[n]}},{key:"compare",value:function(t,n){return te.compareDoubles(ie.centreX(t.getBounds()),ie.centreX(n.getBounds()))}}]),t}()),ie.yComparator=new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[n]}},{key:"compare",value:function(t,n){return te.compareDoubles(ie.centreY(t.getBounds()),ie.centreY(n.getBounds()))}}]),t}()),ie.intersectsOp=new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(t,n){return t.intersects(n)}}]),t}()),ie.DEFAULT_NODE_CAPACITY=10;var Tn=Object.freeze({STRtree:ie}),K=Object.freeze({kdtree:Bi,quadtree:qt,strtree:Tn}),re=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ue=function(){function n(t){hs(this,n),this.geometryFactory=t||new hn}return gs(n,[{key:"read",value:function(t){var n,t=(n="string"==typeof t?JSON.parse(t):t).type;if(!se[t])throw new Error("Unknown GeoJSON type: "+n.type);return-1!==re.indexOf(t)?se[t].call(this,n.coordinates):"GeometryCollection"===t?se[t].call(this,n.geometries):se[t].call(this,n)}},{key:"write",value:function(t){var n=t.getGeometryType();if(!he[n])throw new Error("Geometry is not supported");return he[n].call(this,t)}}]),n}(),se={Feature:function(t){var n,i={};for(n in t)i[n]=t[n];if(t.geometry){var e=t.geometry.type;if(!se[e])throw new Error("Unknown GeoJSON type: "+t.type);i.geometry=this.read(t.geometry)}return t.bbox&&(i.bbox=se.bbox.call(this,t.bbox)),i},FeatureCollection:function(t){var n={};if(t.features){n.features=[];for(var i=0;i<t.features.length;++i)n.features.push(this.read(t.features[i]))}return t.bbox&&(n.bbox=this.parse.bbox.call(this,t.bbox)),n},coordinates:function(t){for(var n=[],i=0;i<t.length;++i){var e=t[i];n.push(new k(e[0],e[1]))}return n},bbox:function(t){return this.geometryFactory.createLinearRing([new k(t[0],t[1]),new k(t[2],t[1]),new k(t[2],t[3]),new k(t[0],t[3]),new k(t[0],t[1])])},Point:function(t){t=new k(t[0],t[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(t){for(var n=[],i=0;i<t.length;++i)n.push(se.Point.call(this,t[i]));return this.geometryFactory.createMultiPoint(n)},LineString:function(t){t=se.coordinates.call(this,t);return this.geometryFactory.createLineString(t)},MultiLineString:function(t){for(var n=[],i=0;i<t.length;++i)n.push(se.LineString.call(this,t[i]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(t){for(var n=se.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(n),i=[],e=1;e<t.length;++e){var r=t[e],r=se.coordinates.call(this,r),r=this.geometryFactory.createLinearRing(r);i.push(r)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var n=[],i=0;i<t.length;++i){var e=t[i];n.push(se.Polygon.call(this,e))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(t){for(var n=[],i=0;i<t.length;++i){var e=t[i];n.push(this.read(e))}return this.geometryFactory.createGeometryCollection(n)}},he={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:he.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var n=[],i=0;i<t.N.length;++i){var e=t.N[i],e=he.Point.call(this,e);n.push(e.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(t){for(var n=[],i=t.getCoordinates(),e=0;e<i.length;++e){var r=i[e];n.push(he.coordinate.call(this,r))}return{type:"LineString",coordinates:n}},MultiLineString:function(t){for(var n=[],i=0;i<t.N.length;++i){var e=t.N[i],e=he.LineString.call(this,e);n.push(e.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(t){var n=[],i=he.LineString.call(this,t.B);n.push(i.coordinates);for(var e=0;e<t.V.length;++e){var r=t.V[e],r=he.LineString.call(this,r);n.push(r.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(t){for(var n=[],i=0;i<t.N.length;++i){var e=t.N[i],e=he.Polygon.call(this,e);n.push(e.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(t){for(var n=[],i=0;i<t.N.length;++i){var e=t.N[i],r=e.getGeometryType();n.push(he[r].call(this,e))}return{type:"GeometryCollection",geometries:n}}};function ge(t){return[t.x,t.y]}var H=Object.freeze({GeoJSONReader:function(){function n(t){hs(this,n),this.parser=new ue(t||new hn)}return gs(n,[{key:"read",value:function(t){return this.parser.read(t)}}]),n}(),GeoJSONWriter:function(){function t(){hs(this,t),this.parser=new ue(this.geometryFactory)}return gs(t,[{key:"write",value:function(t){return this.parser.write(t)}}]),t}(),OL3Parser:function(){function i(t,n){hs(this,i),this.geometryFactory=t||new hn,this.ol=n||"undefined"!=typeof ol&&ol}return gs(i,[{key:"inject",value:function(t,n,i,e,r,u,s,h){this.ol={geom:{Point:t,LineString:n,LinearRing:i,Polygon:e,MultiPoint:r,MultiLineString:u,MultiPolygon:s,GeometryCollection:h}}}},{key:"read",value:function(t){var n=this.ol;return t instanceof n.geom.Point?this.convertFromPoint(t):t instanceof n.geom.LineString?this.convertFromLineString(t):t instanceof n.geom.LinearRing?this.convertFromLinearRing(t):t instanceof n.geom.Polygon?this.convertFromPolygon(t):t instanceof n.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof n.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof n.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof n.geom.GeometryCollection?this.convertFromCollection(t):void 0}},{key:"convertFromPoint",value:function(t){t=t.getCoordinates();return this.geometryFactory.createPoint(new k(t[0],t[1]))}},{key:"convertFromLineString",value:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new k(t[0],t[1])}))}},{key:"convertFromLinearRing",value:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new k(t[0],t[1])}))}},{key:"convertFromPolygon",value:function(t){for(var n=t.getLinearRings(),i=null,e=[],r=0;r<n.length;r++){var u=this.convertFromLinearRing(n[r]);0===r?i=u:e.push(u)}return this.geometryFactory.createPolygon(i,e)}},{key:"convertFromMultiPoint",value:function(t){t=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(t)}},{key:"convertFromMultiLineString",value:function(t){t=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(t)}},{key:"convertFromMultiPolygon",value:function(t){t=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(t)}},{key:"convertFromCollection",value:function(t){t=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(t)}},{key:"write",value:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}},{key:"convertToPoint",value:function(t){return new this.ol.geom.Point([t.x,t.y])}},{key:"convertToLineString",value:function(t){t=t.G.j.map(ge);return new this.ol.geom.LineString(t)}},{key:"convertToLinearRing",value:function(t){t=t.G.j.map(ge);return new this.ol.geom.LinearRing(t)}},{key:"convertToPolygon",value:function(t){for(var n=[t.B.G.j.map(ge)],i=0;i<t.V.length;i++)n.push(t.V[i].G.j.map(ge));return new this.ol.geom.Polygon(n)}},{key:"convertToMultiPoint",value:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(ge))}},{key:"convertToMultiLineString",value:function(t){for(var n=[],i=0;i<t.N.length;i++)n.push(this.convertToLineString(t.N[i]).getCoordinates());return new this.ol.geom.MultiLineString(n)}},{key:"convertToMultiPolygon",value:function(t){for(var n=[],i=0;i<t.N.length;i++)n.push(this.convertToPolygon(t.N[i]).getCoordinates());return new this.ol.geom.MultiPolygon(n)}},{key:"convertToCollection",value:function(t){for(var n=[],i=0;i<t.N.length;i++){var e=t.N[i];n.push(this.write(e))}return new this.ol.geom.GeometryCollection(n)}}]),i}(),WKTReader:function(){function n(t){hs(this,n),this.parser=new on(t||new hn)}return gs(n,[{key:"read",value:function(t){return this.parser.read(t)}}]),n}(),WKTWriter:Cn}),oe=function(){function u(){hs(this,u),u.constructor_.apply(this,arguments)}return gs(u,[{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[]}}],[{key:"relativeSign",value:function(t,n){return t<n?-1:n<t?1:0}},{key:"compare",value:function(t,n,i){if(n.equals2D(i))return 0;var e=u.relativeSign(n.x,i.x),r=u.relativeSign(n.y,i.y);switch(t){case 0:return u.compareValue(e,r);case 1:return u.compareValue(r,e);case 2:return u.compareValue(r,-e);case 3:return u.compareValue(-e,r);case 4:return u.compareValue(-e,-r);case 5:return u.compareValue(-r,-e);case 6:return u.compareValue(-r,e);case 7:return u.compareValue(e,-r)}return y.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,n){return t<0?-1:0<t?1:n<0?-1:0<n?1:0}}]),u}();oe.constructor_=function(){};var ae=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:oe.compare(this.re,this.coord,t.coord)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this.ue||this.segmentIndex===t}},{key:"isInterior",value:function(){return this.ue}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[u]}}]),t}();ae.constructor_=function(){this.se=null,this.coord=null,this.segmentIndex=null,this.re=null,this.ue=null;var t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3];this.se=t,this.coord=new k(n),this.segmentIndex=i,this.re=e,this.ue=!n.equals2D(t.getCoordinate(i))};var Ae=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getSplitCoordinates",value:function(){var t=new R;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var e=n.next();this.addEdgeCoordinates(i,e,t),i=e}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new S;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var i=n.next().intValue();this.add(this.di.getCoordinate(i),i)}}},{key:"print",value:function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();)n.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var n=0;n<this.di.size()-2;n++){var i=this.di.getCoordinate(n),e=(this.di.getCoordinate(n+1),this.di.getCoordinate(n+2));i.equals2D(e)&&t.add(new L(n+1))}}},{key:"addEdgeCoordinates",value:function(t,n,i){n.segmentIndex,t.segmentIndex;var e=this.di.getCoordinate(n.segmentIndex),e=n.isInterior()||!n.coord.equals2D(e);i.add(new k(t.coord),!1);for(var r=t.segmentIndex+1;r<=n.segmentIndex;r++)i.add(this.di.getCoordinate(r));e&&i.add(new k(n.coord))}},{key:"iterator",value:function(){return this.ii.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),i=n.next();n.hasNext();){var e=n.next(),r=this.createSplitEdge(i,e);t.add(r),i=e}}},{key:"findCollapseIndex",value:function(t,n,i){if(!t.coord.equals2D(n.coord))return!1;var e=n.segmentIndex-t.segmentIndex;return n.isInterior()||e--,1===e&&(i[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var n=new Array(1).fill(null),i=this.iterator(),e=i.next();i.hasNext();){var r=i.next();this.findCollapseIndex(e,r,n)&&t.add(new L(n[0])),e=r}}},{key:"getEdge",value:function(){return this.di}},{key:"addEndpoints",value:function(){var t=this.di.size()-1;this.add(this.di.getCoordinate(0),0),this.add(this.di.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,n){var i=n.segmentIndex-t.segmentIndex+2,e=this.di.getCoordinate(n.segmentIndex),e=n.isInterior()||!n.coord.equals2D(e);e||i--;var r=new Array(i).fill(null),u=0;r[u++]=new k(t.coord);for(var s=t.segmentIndex+1;s<=n.segmentIndex;s++)r[u++]=this.di.getCoordinate(s);return e&&(r[u]=new k(n.coord)),new fe(r,this.di.getData())}},{key:"add",value:function(t,n){var i=new ae(this.di,t,n,this.di.getSegmentOctant(n)),n=this.ii.get(i);return null!==n?(y.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this.ii.put(i,i),i)}},{key:"checkSplitEdgesCorrectness",value:function(t){var n=this.di.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(n[0]))throw new v("bad split edge start point at "+i);t=t.get(t.size()-1).getCoordinates(),t=t[t.length-1];if(!t.equals2D(n[n.length-1]))throw new v("bad split edge end point at "+t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ae.constructor_=function(){this.ii=new Ct,this.di=null,this.di=arguments[0]};var Ce=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new l("Cannot compute the octant for point ( "+t+", "+n+" )");var i=Math.abs(t),e=Math.abs(n);return 0<=t?0<=n?e<=i?0:1:e<=i?7:6:0<=n?e<=i?3:2:e<=i?4:5}if(arguments[0]instanceof k&&arguments[1]instanceof k){n=arguments[0],e=arguments[1],i=e.x-n.x,e=e.y-n.y;if(0==i&&0==e)throw new l("Cannot compute the octant for two identical points "+n);return r.octant(i,e)}}}]),r}();Ce.constructor_=function(){};var Ie=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ie.constructor_=function(){};var le=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"addIntersection",value:function(t,n){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ie]}}]),t}();le.constructor_=function(){};var fe=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"getCoordinates",value:function(){return this.he}},{key:"size",value:function(){return this.he.length}},{key:"getCoordinate",value:function(t){return this.he[t]}},{key:"isClosed",value:function(){return this.he[0].equals(this.he[this.he.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this.he.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this.Bi=t}},{key:"safeOctant",value:function(t,n){return t.equals2D(n)?0:Ce.octant(t,n)}},{key:"getData",value:function(){return this.Bi}},{key:"addIntersection",value:function(){var t,n;2===arguments.length?this.addIntersectionNode(arguments[0],arguments[1]):4===arguments.length&&(n=arguments[0],t=arguments[1],n=new k(n.getIntersection(arguments[3])),this.addIntersection(n,t))}},{key:"toString",value:function(){return Cn.toLineString(new Qt(this.he))}},{key:"getNodeList",value:function(){return this.oe}},{key:"addIntersectionNode",value:function(t,n){var i=n,e=i+1;return e<this.he.length&&(n=this.he[e],t.equals2D(n)&&(i=e)),this.oe.add(t,i)}},{key:"addIntersections",value:function(t,n,i){for(var e=0;e<t.getIntersectionNum();e++)this.addIntersection(t,n,i,e)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[le]}}],[{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],n=new S;return r.getNodedSubstrings(t,n),n}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],e=n.iterator();e.hasNext();)e.next().getNodeList().addSplitEdges(i)}}]),r}();fe.constructor_=function(){this.oe=new Ae(this),this.he=null,this.Bi=null;var t=arguments[0],n=arguments[1];this.he=t,this.Bi=n};var ce=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"overlap",value:function(){var t,n,i,e;2===arguments.length||4===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],t.getLineSegment(n,this.ae),i.getLineSegment(e,this.Ae),this.overlap(this.ae,this.Ae))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ce.constructor_=function(){this.ae=new fn,this.Ae=new fn};var ve=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getLineSegment",value:function(t,n){n.p0=this.he[t],n.p1=this.he[t+1]}},{key:"computeSelect",value:function(t,n,i,e){var r=this.he[n],u=this.he[i];if(i-n==1)return e.select(this,n),null;if(!t.intersects(r,u))return null;u=Math.trunc((n+i)/2);n<u&&this.computeSelect(t,n,u,e),u<i&&this.computeSelect(t,u,i,e)}},{key:"getCoordinates",value:function(){for(var t=new Array(this.Ce-this.Ie+1).fill(null),n=0,i=this.Ie;i<=this.Ce;i++)t[n++]=this.he[i];return t}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var t=arguments[0];this.computeOverlaps(this.Ie,this.Ce,t,t.Ie,t.Ce,arguments[1])}else if(6===arguments.length){var n=arguments[0],i=arguments[1],e=arguments[2],r=arguments[3],u=arguments[4],s=arguments[5];if(i-n==1&&u-r==1)return s.overlap(this,n,e,r),null;if(!this.overlaps(n,i,e,r,u))return null;var h=Math.trunc((n+i)/2),t=Math.trunc((r+u)/2);n<h&&(r<t&&this.computeOverlaps(n,h,e,r,t,s),t<u&&this.computeOverlaps(n,h,e,t,u,s)),h<i&&(r<t&&this.computeOverlaps(h,i,e,r,t,s),t<u&&this.computeOverlaps(h,i,e,t,u,s))}}},{key:"setId",value:function(t){this.fe=t}},{key:"select",value:function(t,n){this.computeSelect(t,this.Ie,this.Ce,n)}},{key:"getEnvelope",value:function(){var t,n;return null===this.Ai&&(t=this.he[this.Ie],n=this.he[this.Ce],this.Ai=new T(t,n)),this.Ai}},{key:"overlaps",value:function(t,n,i,e,r){return T.intersects(this.he[t],this.he[n],i.he[e],i.he[r])}},{key:"getEndIndex",value:function(){return this.Ce}},{key:"getStartIndex",value:function(){return this.Ie}},{key:"getContext",value:function(){return this.ce}},{key:"getId",value:function(){return this.fe}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ve.constructor_=function(){this.he=null,this.Ie=null,this.Ce=null,this.Ai=null,this.ce=null,this.fe=null;var t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3];this.he=t,this.Ie=n,this.Ce=i,this.ce=e};var ye=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"getChainStartIndices",value:function(t){var n=0,i=new S;i.add(new L(n));do{var e=s.findChainEnd(t,n)}while(i.add(new L(e)),(n=e)<t.length-1);return s.toIntArray(i)}},{key:"findChainEnd",value:function(t,n){for(var i=n;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var e=si.quadrant(t[i],t[i+1]),r=n+1;r<t.length&&(t[r-1].equals2D(t[r])||si.quadrant(t[r-1],t[r])===e);)r++;return r-1}},{key:"getChains",value:function(){if(1===arguments.length)return s.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],n=arguments[1],i=new S,e=s.getChainStartIndices(t),r=0;r<e.length-1;r++){var u=new ve(t,e[r],e[r+1],n);i.add(u)}return i}}},{key:"toIntArray",value:function(t){for(var n=new Array(t.size()).fill(null),i=0;i<n.length;i++)n[i]=t.get(i).intValue();return n}}]),s}();ye.constructor_=function(){};var ke=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ke.constructor_=function(){};var de=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"setSegmentIntersector",value:function(t){this.ve=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ke]}}]),t}();de.constructor_=function(){this.ve=null,0===arguments.length||1===arguments.length&&this.setSegmentIntersector(arguments[0])};var we=function(){is(i,de);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getMonotoneChains",value:function(){return this.ye}},{key:"getNodedSubstrings",value:function(){return fe.getNodedSubstrings(this.ke)}},{key:"getIndex",value:function(){return this.jt}},{key:"add",value:function(t){for(var n=ye.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var i=n.next();i.setId(this.de++),this.jt.insert(i.getEnvelope(),i),this.ye.add(i)}}},{key:"computeNodes",value:function(t){for(var n=(this.ke=t).iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new me(this.ve),n=this.ye.iterator();n.hasNext();)for(var i=n.next(),e=this.jt.query(i.getEnvelope()).iterator();e.hasNext();){var r=e.next();if(r.getId()>i.getId()&&(i.computeOverlaps(r,t),this.we++),this.ve.isDone())return null}}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}(),me=function(){is(r,ce);var n=es(r);function r(){var t;return hs(this,r),t=n.call(this),r.constructor_.apply(us(t),arguments),t}return gs(r,[{key:"overlap",value:function(){if(4!==arguments.length)return ns(ss(r.prototype),"overlap",this).apply(this,arguments);var t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],t=t.getContext(),i=i.getContext();this.me.processIntersections(t,n,i,e)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();me.constructor_=function(){this.me=null,this.me=arguments[0]},we.SegmentOverlapAction=me,we.constructor_=function(){this.ye=new S,this.jt=new ie,this.de=0,this.ke=null,(this.we=0)===arguments.length||1===arguments.length&&de.constructor_.call(this,arguments[0])};var pe=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"rescale",value:function(){if(d(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var n=t.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var i=arguments[0];for(2===i.length&&(new k(i[0]),new k(i[1])),t=0;t<i.length;t++)i[t].x=i[t].x/this.pe+this.Me,i[t].y=i[t].y/this.pe+this.be;2===i.length&&i[0].equals2D(i[1])&&j.out.println(i)}}},{key:"scale",value:function(){if(d(arguments[0],m)){for(var t=arguments[0],n=new S(t.size()),i=t.iterator();i.hasNext();){var e=i.next();n.add(new fe(this.scale(e.getCoordinates()),e.getData()))}return n}if(arguments[0]instanceof Array){for(var r=arguments[0],u=new Array(r.length).fill(null),i=0;i<r.length;i++)u[i]=new k(Math.round((r[i].x-this.Me)*this.pe),Math.round((r[i].y-this.be)*this.pe),r[i].z);return $.removeRepeatedPoints(u)}}},{key:"isIntegerPrecision",value:function(){return 1===this.pe}},{key:"getNodedSubstrings",value:function(){var t=this.Ee.getNodedSubstrings();return this.Se&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var n=t;this.Se&&(n=this.scale(t)),this.Ee.computeNodes(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ke]}}]),t}();pe.constructor_=function(){var t,n;this.Ee=null,this.pe=null,this.Me=null,this.be=null,this.Se=!1,2===arguments.length?pe.constructor_.call(this,arguments[0],arguments[1],0,0):4===arguments.length&&(t=arguments[0],n=arguments[1],this.Ee=t,this.pe=n,this.Se=!this.isIntegerPrecision())};var J=Object.freeze({MCIndexNoder:we,ScaledNoder:pe,SegmentString:Ie}),Me=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isSimpleMultiPoint",value:function(t){if(t.isEmpty())return!0;for(var n=new ft,i=0;i<t.getNumGeometries();i++){var e=t.getGeometryN(i).getCoordinate();if(n.contains(e))return this.xe=e,!1;n.add(e)}return!0}},{key:"isSimplePolygonal",value:function(t){for(var n=Dn.getLines(t).iterator();n.hasNext();){var i=n.next();if(!this.isSimpleLinearGeometry(i))return!1}return!0}},{key:"hasClosedEndpointIntersection",value:function(t){for(var n=new Ct,i=t.getEdgeIterator();i.hasNext();){var e=i.next(),r=(e.getMaximumSegmentIndex(),e.isClosed()),u=e.getCoordinate(0);this.addEndpoint(n,u,r);e=e.getCoordinate(e.getNumPoints()-1);this.addEndpoint(n,e,r)}for(i=n.values().iterator();i.hasNext();){var s=i.next();if(s.isClosed&&2!==s.degree)return this.xe=s.getCoordinate(),!0}return!1}},{key:"getNonSimpleLocation",value:function(){return this.xe}},{key:"isSimpleLinearGeometry",value:function(t){if(t.isEmpty())return!0;var n=new Di(0,t),t=new ln,t=n.computeSelfNodes(t,!0);return!(t.hasIntersection()&&(t.hasProperIntersection()?(this.xe=t.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(n)||this.Re&&this.hasClosedEndpointIntersection(n)))}},{key:"hasNonEndpointIntersection",value:function(t){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),e=i.getMaximumSegmentIndex(),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var u=r.next();if(!u.isEndPoint(e))return this.xe=u.getCoordinate(),!0}return!1}},{key:"addEndpoint",value:function(t,n,i){var e=t.get(n);null===e&&(e=new be(n),t.put(n,e)),e.addEndpoint(i)}},{key:"computeSimple",value:function(t){return this.xe=null,!!t.isEmpty()||(t instanceof Lt||t instanceof pt?this.isSimpleLinearGeometry(t):t instanceof Bt?this.isSimpleMultiPoint(t):d(t,Gt)?this.isSimplePolygonal(t):!(t instanceof mt)||this.isSimpleGeometryCollection(t))}},{key:"isSimple",value:function(){return this.xe=null,this.computeSimple(this.fn)}},{key:"isSimpleGeometryCollection",value:function(t){for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);if(!this.computeSimple(i))return!1}return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isSimple",value:function(){return 1===arguments.length?new t(arguments[0]).isSimple():2===arguments.length?new t(arguments[0],arguments[1]).isSimple():void 0}}]),t}(),be=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"addEndpoint",value:function(t){this.degree++,this.isClosed|=t}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();be.constructor_=function(){this.pt=null,this.isClosed=null,this.degree=null,this.pt=arguments[0],this.isClosed=!1,this.degree=0},Me.EndpointInfo=be,Me.constructor_=function(){var t,n;this.fn=null,this.Re=!0,this.xe=null,1===arguments.length?this.fn=arguments[0]:2===arguments.length&&(t=arguments[0],n=arguments[1],this.fn=t,this.Re=!n.isInBoundary(2))};var Ee=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"getEndCapStyle",value:function(){return this.Te}},{key:"isSingleSided",value:function(){return this.Ne}},{key:"setQuadrantSegments",value:function(t){this.Pe=t,0===this.Pe&&(this.Oe=n.JOIN_BEVEL),this.Pe<0&&(this.Oe=n.JOIN_MITRE,this.Le=Math.abs(this.Pe)),t<=0&&(this.Pe=1),this.Oe!==n.JOIN_ROUND&&(this.Pe=n.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this.Oe}},{key:"setJoinStyle",value:function(t){this.Oe=t}},{key:"setSimplifyFactor",value:function(t){this.De=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this.De}},{key:"getQuadrantSegments",value:function(){return this.Pe}},{key:"setEndCapStyle",value:function(t){this.Te=t}},{key:"getMitreLimit",value:function(){return this.Le}},{key:"setMitreLimit",value:function(t){this.Le=t}},{key:"setSingleSided",value:function(t){this.Ne=t}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferDistanceError",value:function(t){t=Math.PI/2/t;return 1-Math.cos(t/2)}}]),n}();Ee.constructor_=function(){var t,n,i,e;this.Pe=Ee.DEFAULT_QUADRANT_SEGMENTS,this.Te=Ee.CAP_ROUND,this.Oe=Ee.JOIN_ROUND,this.Le=Ee.DEFAULT_MITRE_LIMIT,this.Ne=!1,this.De=Ee.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length||(1===arguments.length?this.setQuadrantSegments(arguments[0]):2===arguments.length?(i=arguments[0],e=arguments[1],this.setQuadrantSegments(i),this.setEndCapStyle(e)):4===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],this.setQuadrantSegments(t),this.setEndCapStyle(n),this.setJoinStyle(i),this.setMitreLimit(e)))},Ee.CAP_ROUND=1,Ee.CAP_FLAT=2,Ee.CAP_SQUARE=3,Ee.JOIN_ROUND=1,Ee.JOIN_MITRE=2,Ee.JOIN_BEVEL=3,Ee.DEFAULT_QUADRANT_SEGMENTS=8,Ee.DEFAULT_MITRE_LIMIT=5,Ee.DEFAULT_SIMPLIFY_FACTOR=.01;var Se=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinate",value:function(){return this._e}},{key:"getRightmostSide",value:function(t,n){var i=this.getRightmostSideOfSegment(t,n);return(i=i<0?this.getRightmostSideOfSegment(t,n-1):i)<0&&(this._e=null,this.checkForRightmostCoordinate(t)),i}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this.Fe.getEdge().getCoordinates();y.isTrue(0<this.Ge&&this.Ge<t.length,"rightmost point expected to be interior vertex of edge");var n=t[this.Ge-1],i=t[this.Ge+1],e=G.index(this._e,i,n),t=!1;(t=n.y<this._e.y&&i.y<this._e.y&&e===G.COUNTERCLOCKWISE||n.y>this._e.y&&i.y>this._e.y&&e===G.CLOCKWISE?!0:t)&&(this.Ge=this.Ge-1)}},{key:"getRightmostSideOfSegment",value:function(t,n){var i=t.getEdge().getCoordinates();if(n<0||n+1>=i.length)return-1;if(i[n].y===i[n+1].y)return-1;t=Ii.LEFT;return t=i[n].y<i[n+1].y?Ii.RIGHT:t}},{key:"getEdge",value:function(){return this.je}},{key:"checkForRightmostCoordinate",value:function(t){for(var n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(null===this._e||n[i].x>this._e.x)&&(this.Fe=t,this.Ge=i,this._e=n[i])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this.Fe.getNode().getEdges();this.Fe=t.getRightmostEdge(),this.Fe.isForward()||(this.Fe=this.Fe.getSym(),this.Ge=this.Fe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isForward()&&this.checkForRightmostCoordinate(i)}y.isTrue(0!==this.Ge||this._e.equals(this.Fe.getCoordinate()),"inconsistency in rightmost processing"),0===this.Ge?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.je=this.Fe,this.getRightmostSide(this.Fe,this.Ge)===Ii.LEFT&&(this.je=this.Fe.getSym())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();function xe(){this.array_=[]}Se.constructor_=function(){this.Ge=-1,this._e=null,this.Fe=null,this.je=null},xe.prototype.addLast=function(t){this.array_.push(t)},xe.prototype.removeFirst=function(){return this.array_.shift()},xe.prototype.isEmpty=function(){return 0===this.array_.length};var Re=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"clearVisitedEdges",value:function(){for(var t=this.Be.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this.Ze}},{key:"computeNodeDepth",value:function(t){for(var n,i=null,e=t.getEdges().iterator();e.hasNext();)if((n=e.next()).isVisited()||n.getSym().isVisited()){i=n;break}if(null===i)throw new Ni("unable to find edge to compute depths at "+t.getCoordinate());for(t.getEdges().computeDepths(i),e=t.getEdges().iterator();e.hasNext();)(n=e.next()).setVisited(!0),this.copySymDepths(n)}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var n=this.Ve.getEdge();n.getNode(),n.getLabel(),n.setEdgeDepths(Ii.RIGHT,t),this.copySymDepths(n),this.computeDepths(n)}},{key:"create",value:function(t){this.addReachable(t),this.Ve.findEdge(this.Be),this.Ze=this.Ve.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this.Be.iterator();t.hasNext();){var n=t.next();1<=n.getDepth(Ii.RIGHT)&&n.getDepth(Ii.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)}}},{key:"computeDepths",value:function(t){var n=new ut,i=new xe,e=t.getNode();for(i.addLast(e),n.add(e),t.setVisited(!0);!i.isEmpty();){var r=i.removeFirst();n.add(r),this.computeNodeDepth(r);for(var u=r.getEdges().iterator();u.hasNext();){var s=u.next().getSym();s.isVisited()||(s=s.getNode(),n.contains(s)||(i.addLast(s),n.add(s)))}}}},{key:"compareTo",value:function(t){return this.Ze.x<t.Ze.x?-1:this.Ze.x>t.Ze.x?1:0}},{key:"getEnvelope",value:function(){if(null===this.Ai){for(var t=new T,n=this.Be.iterator();n.hasNext();)for(var i=n.next().getEdge().getCoordinates(),e=0;e<i.length-1;e++)t.expandToInclude(i[e]);this.Ai=t}return this.Ai}},{key:"addReachable",value:function(t){var n=new Qn;for(n.add(t);!n.empty();){var i=n.pop();this.add(i,n)}}},{key:"copySymDepths",value:function(t){var n=t.getSym();n.setDepth(Ii.LEFT,t.getDepth(Ii.RIGHT)),n.setDepth(Ii.RIGHT,t.getDepth(Ii.LEFT))}},{key:"add",value:function(t,n){t.setVisited(!0),this.bi.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var e=i.next();this.Be.add(e);e=e.getSym().getNode();e.isVisited()||n.push(e)}}},{key:"getNodes",value:function(){return this.bi}},{key:"getDirectedEdges",value:function(){return this.Be}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[u]}}]),t}();Re.constructor_=function(){this.Ve=null,this.Be=new S,this.bi=new S,this.Ze=null,this.Ai=null,this.Ve=new Se};var Te=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"computeRing",value:function(){if(null!==this.Ye)return null;for(var t=new Array(this.he.size()).fill(null),n=0;n<this.he.size();n++)t[n]=this.he.get(n);this.Ye=this.Ue.createLinearRing(t),this.We=G.isCCW(this.Ye.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this.Yn.getGeometryCount()}},{key:"computePoints",value:function(t){var n=this.Xe=t,i=!0;do{if(null===n)throw new Ni("Found null DirectedEdge");if(n.getEdgeRing()===this)throw new Ni("Directed Edge visited twice during ring-building at "+n.getCoordinate());this.Ii.add(n);var e=n.getLabel()}while(y.isTrue(e.isArea()),this.mergeLabel(e),this.addPoints(n.getEdge(),n.isForward(),i),i=!1,this.setEdgeRing(n,this),(n=this.getNext(n))!==this.Xe)}},{key:"getLinearRing",value:function(){return this.Ye}},{key:"getCoordinate",value:function(t){return this.he.get(t)}},{key:"computeMaxNodeDegree",value:function(){this.ze=0;var t=this.Xe;do{var n=t.getNode().getEdges().getOutgoingDegree(this)}while(n>this.ze&&(this.ze=n),(t=this.getNext(t))!==this.Xe);this.ze*=2}},{key:"addPoints",value:function(t,n,i){var e=t.getCoordinates();if(n)for(var r=1,u=r=i?0:r;u<e.length;u++)this.he.add(e[u]);else for(r=e.length-2,u=r=i?e.length-1:r;0<=u;u--)this.he.add(e[u])}},{key:"isHole",value:function(){return this.We}},{key:"setInResult",value:function(){for(var t=this.Xe;t.getEdge().setInResult(!0),(t=t.getNext())!==this.Xe;);}},{key:"containsPoint",value:function(t){var n=this.getLinearRing();if(!n.getEnvelopeInternal().contains(t))return!1;if(!Zn.isInRing(t,n.getCoordinates()))return!1;for(var i=this.V.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this.V.add(t)}},{key:"isShell",value:function(){return null===this.B}},{key:"getLabel",value:function(){return this.Yn}},{key:"getEdges",value:function(){return this.Ii}},{key:"getMaxNodeDegree",value:function(){return this.ze<0&&this.computeMaxNodeDegree(),this.ze}},{key:"getShell",value:function(){return this.B}},{key:"mergeLabel",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var n=arguments[0],t=arguments[1],n=n.getLocation(t,Ii.RIGHT);return n===cn.NONE?null:this.Yn.getLocation(t)===cn.NONE?(this.Yn.setLocation(t,n),null):void 0}}},{key:"setShell",value:function(t){null!==(this.B=t)&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var n=new Array(this.V.size()).fill(null),i=0;i<this.V.size();i++)n[i]=this.V.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Te.constructor_=function(){var t;this.Xe=null,this.ze=-1,this.Ii=new S,this.he=new S,this.Yn=new di(cn.NONE),this.Ye=null,this.We=null,this.B=null,this.V=new S,this.Ue=null,0===arguments.length||2===arguments.length&&(t=arguments[0],this.Ue=arguments[1],this.computePoints(t),this.computeRing())};var Ne=function(){is(i,Te);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"setEdgeRing",value:function(t,n){t.setMinEdgeRing(n)}},{key:"getNext",value:function(t){return t.getNextMin()}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Ne.constructor_=function(){Te.constructor_.call(this,arguments[0],arguments[1])};var Pe=function(){is(i,Te);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"buildMinimalRings",value:function(){var t,n=new S,i=this.Xe;do{}while(null===i.getMinEdgeRing()&&(t=new Ne(i,this.Ue),n.add(t)),(i=i.getNext())!==this.Xe);return n}},{key:"setEdgeRing",value:function(t,n){t.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){for(var t=this.Xe;t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this.Xe;);}},{key:"getNext",value:function(t){return t.getNext()}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Pe.constructor_=function(){Te.constructor_.call(this,arguments[0],arguments[1])};var Oe=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"sortShellsAndHoles",value:function(t,n,i){for(var e=t.iterator();e.hasNext();){var r=e.next();(r.isHole()?i:n).add(r)}}},{key:"computePolygons",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();){var e=i.next().toPolygon(this.Ue);n.add(e)}return n}},{key:"placeFreeHoles",value:function(t,n){for(var i=n.iterator();i.hasNext();){var e=i.next();if(null===e.getShell()){var r=this.findEdgeRingContaining(e,t);if(null===r)throw new Ni("unable to assign hole to a shell",e.getCoordinate(0));e.setShell(r)}}}},{key:"buildMinimalEdgeRings",value:function(t,n,i){for(var e=new S,r=t.iterator();r.hasNext();){var u,s,h=r.next();2<h.getMaxNodeDegree()?(h.linkDirectedEdgesForMinimalEdgeRings(),u=h.buildMinimalRings(),null!==(s=this.findShell(u))?(this.placePolygonHoles(s,u),n.add(s)):i.addAll(u)):e.add(h)}return e}},{key:"containsPoint",value:function(t){for(var n=this.Qe.iterator();n.hasNext();)if(n.next().containsPoint(t))return!0;return!1}},{key:"buildMaximalEdgeRings",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();){var e=i.next();e.isInResult()&&e.getLabel().isArea()&&null===e.getEdgeRing()&&(e=new Pe(e,this.Ue),n.add(e),e.setInResult())}return n}},{key:"placePolygonHoles",value:function(t,n){for(var i=n.iterator();i.hasNext();){var e=i.next();e.isHole()&&e.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this.Qe)}},{key:"findEdgeRingContaining",value:function(t,n){for(var t=t.getLinearRing(),i=t.getEnvelopeInternal(),e=t.getCoordinateN(0),r=null,u=null,s=n.iterator();s.hasNext();){var h=s.next(),g=h.getLinearRing(),o=g.getEnvelopeInternal();null!==r&&(u=r.getLinearRing().getEnvelopeInternal());var a=!1;(a=o.contains(i)&&Zn.isInRing(e,g.getCoordinates())?!0:a)&&(null===r||u.contains(o))&&(r=h)}return r}},{key:"findShell",value:function(t){for(var n=0,i=null,e=t.iterator();e.hasNext();){var r=e.next();r.isHole()||(i=r,n++)}return y.isTrue(n<=1,"found two shells in MinimalEdgeRing list"),i}},{key:"add",value:function(){var t,n;1===arguments.length?this.add((n=arguments[0]).getEdgeEnds(),n.getNodes()):2===arguments.length&&(t=arguments[0],Li.linkResultDirectedEdges(arguments[1]),n=this.buildMaximalEdgeRings(t),t=new S,n=this.buildMinimalEdgeRings(n,this.Qe,t),this.sortShellsAndHoles(n,this.Qe,t),this.placeFreeHoles(this.Qe,t))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Oe.constructor_=function(){this.Ue=null,this.Qe=new S,this.Ue=arguments[0]};var Le=function(){function h(){hs(this,h),h.constructor_.apply(this,arguments)}return gs(h,[{key:"isDeletable",value:function(t,n,i,e){var r=this.Ke[t],u=this.Ke[n],n=this.Ke[i];return!!this.isConcave(r,u,n)&&!!this.isShallow(r,u,n,e)&&this.isShallowSampled(r,u,t,i,e)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=(this.Ke.length,this.findNextNonDeletedIndex(t)),i=this.findNextNonDeletedIndex(n),e=!1;i<this.Ke.length;){var r=!1;this.isDeletable(t,n,i,this.He)&&(this.Je[n]=h.DELETE,e=r=!0),n=this.findNextNonDeletedIndex(t=r?i:n),i=this.findNextNonDeletedIndex(n)}return e}},{key:"isShallowConcavity",value:function(t,n,i,e){return G.index(t,n,i)===this.qe&&V.pointToSegment(n,t,i)<e}},{key:"isShallowSampled",value:function(t,n,i,e,r){var u=Math.trunc((e-i)/h.NUM_PTS_TO_CHECK);u<=0&&(u=1);for(var s=i;s<e;s+=u)if(!this.isShallow(t,n,this.Ke[s],r))return!1;return!0}},{key:"isConcave",value:function(t,n,i){return G.index(t,n,i)===this.qe}},{key:"simplify",value:function(t){this.He=Math.abs(t),t<0&&(this.qe=G.CLOCKWISE),this.Je=new Array(this.Ke.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this.Ke.length&&this.Je[n]===h.DELETE;)n++;return n}},{key:"isShallow",value:function(t,n,i,e){return V.pointToSegment(n,t,i)<e}},{key:"collapseLine",value:function(){for(var t=new R,n=0;n<this.Ke.length;n++)this.Je[n]!==h.DELETE&&t.add(this.Ke[n]);return t.toCoordinateArray()}},{key:"getClass",value:function(){return h}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){return new h(t).simplify(n)}}]),h}();Le.constructor_=function(){this.Ke=null,this.He=null,this.Je=null,this.qe=G.COUNTERCLOCKWISE,this.Ke=arguments[0]},Le.INIT=0,Le.DELETE=1,Le.KEEP=1,Le.NUM_PTS_TO_CHECK=10;var De=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinates",value:function(){return this.$e.toArray(t.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this.nt=t}},{key:"addPt",value:function(t){t=new k(t);if(this.nt.makePrecise(t),this.isRedundant(t))return null;this.$e.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,n){if(n)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(i=t.length-1;0<=i;i--)this.addPt(t[i])}},{key:"isRedundant",value:function(t){if(this.$e.size()<1)return!1;var n=this.$e.get(this.$e.size()-1);return t.distance(n)<this.tr}},{key:"toString",value:function(){return(new hn).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this.$e.size()<1)return null;var t=new k(this.$e.get(0)),n=this.$e.get(this.$e.size()-1);if(2<=this.$e.size()&&this.$e.get(this.$e.size()-2),t.equals(n))return null;this.$e.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this.tr=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();De.constructor_=function(){this.$e=null,this.nt=null,this.tr=0,this.$e=new S},De.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var _e=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"addNextSegment",value:function(t,n){if(this.nr=this.ir,this.ir=this.er,this.er=t,this.rr.setCoordinates(this.nr,this.ir),this.computeOffsetSegment(this.rr,this.ur,this.ft,this.sr),this.hr.setCoordinates(this.ir,this.er),this.computeOffsetSegment(this.hr,this.ur,this.ft,this.gr),this.ir.equals(this.er))return null;var i=G.index(this.nr,this.ir,this.er),t=i===G.CLOCKWISE&&this.ur===Ii.LEFT||i===G.COUNTERCLOCKWISE&&this.ur===Ii.RIGHT;0===i?this.addCollinear(n):t?this.addOutsideTurn(i,n):this.addInsideTurn(i,n)}},{key:"addLineEndCap",value:function(t,n){var i=new fn(t,n),e=new fn;this.computeOffsetSegment(i,Ii.LEFT,this.ft,e);var r=new fn;this.computeOffsetSegment(i,Ii.RIGHT,this.ft,r);var i=n.x-t.x,t=n.y-t.y,u=Math.atan2(t,i);switch(this.or.getEndCapStyle()){case Ee.CAP_ROUND:this.ar.addPt(e.p1),this.addDirectedFillet(n,u+Math.PI/2,u-Math.PI/2,G.CLOCKWISE,this.ft),this.ar.addPt(r.p1);break;case Ee.CAP_FLAT:this.ar.addPt(e.p1),this.ar.addPt(r.p1);break;case Ee.CAP_SQUARE:var s=new k;s.x=Math.abs(this.ft)*Math.cos(u),s.y=Math.abs(this.ft)*Math.sin(u);var h=new k(e.p1.x+s.x,e.p1.y+s.y),s=new k(r.p1.x+s.x,r.p1.y+s.y);this.ar.addPt(h),this.ar.addPt(s)}}},{key:"getCoordinates",value:function(){return this.ar.getCoordinates()}},{key:"addMitreJoin",value:function(t,n,i,e){var r=!0,u=null;try{u=B.intersection(n.p0,n.p1,i.p0,i.p1),(e<=0?1:u.distance(t)/Math.abs(e))>this.or.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof P))throw t;u=new k(0,0),r=!1}r?this.ar.addPt(u):this.addLimitedMitreJoin(n,i,e,this.or.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,n){if(this.sr.p1.distance(this.gr.p0)<this.ft*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this.ar.addPt(this.sr.p1),null;this.or.getJoinStyle()===Ee.JOIN_MITRE?this.addMitreJoin(this.ir,this.sr,this.gr,this.ft):this.or.getJoinStyle()===Ee.JOIN_BEVEL?this.addBevelJoin(this.sr,this.gr):(n&&this.ar.addPt(this.sr.p1),this.addCornerFillet(this.ir,this.sr.p1,this.gr.p0,t,this.ft),this.ar.addPt(this.gr.p0))}},{key:"createSquare",value:function(t){this.ar.addPt(new k(t.x+this.ft,t.y+this.ft)),this.ar.addPt(new k(t.x+this.ft,t.y-this.ft)),this.ar.addPt(new k(t.x-this.ft,t.y-this.ft)),this.ar.addPt(new k(t.x-this.ft,t.y+this.ft)),this.ar.closeRing()}},{key:"addSegments",value:function(t,n){this.ar.addPts(t,n)}},{key:"addFirstSegment",value:function(){this.ar.addPt(this.gr.p0)}},{key:"addCornerFillet",value:function(t,n,i,e,r){var u=n.x-t.x,s=n.y-t.y,h=Math.atan2(s,u),s=i.x-t.x,u=i.y-t.y,s=Math.atan2(u,s);e===G.CLOCKWISE?h<=s&&(h+=2*Math.PI):s<=h&&(h-=2*Math.PI),this.ar.addPt(n),this.addDirectedFillet(t,h,s,e,r),this.ar.addPt(i)}},{key:"addLastSegment",value:function(){this.ar.addPt(this.gr.p1)}},{key:"initSideSegments",value:function(t,n,i){this.ir=t,this.er=n,this.ur=i,this.hr.setCoordinates(t,n),this.computeOffsetSegment(this.hr,i,this.ft,this.gr)}},{key:"addLimitedMitreJoin",value:function(t,n,i,e){var r=this.rr.p1,u=yn.angle(r,this.rr.p0),s=(yn.angle(r,this.hr.p1),yn.angleBetweenOriented(this.rr.p0,r,this.hr.p1)/2),u=yn.normalize(u+s),u=yn.normalize(u+Math.PI),e=e*i,i=i-e*Math.abs(Math.sin(s)),s=r.x+e*Math.cos(u),u=r.y+e*Math.sin(u),u=new k(s,u),r=new fn(r,u),u=r.pointAlongOffset(1,i),i=r.pointAlongOffset(1,-i);this.ur===Ii.LEFT?(this.ar.addPt(u),this.ar.addPt(i)):(this.ar.addPt(i),this.ar.addPt(u))}},{key:"addDirectedFillet",value:function(t,n,i,e,r){var u=e===G.CLOCKWISE?-1:1,s=Math.abs(n-i),i=Math.trunc(s/this.Ar+.5);if(i<1)return null;for(var h=s/i,g=0,o=new k;g<s;){var a=n+u*g;o.x=t.x+r*Math.cos(a),o.y=t.y+r*Math.sin(a),this.ar.addPt(o),g+=h}}},{key:"computeOffsetSegment",value:function(t,n,i,e){var r=n===Ii.LEFT?1:-1,u=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,n=Math.sqrt(u*u+s*s),u=r*i*u/n,n=r*i*s/n;e.p0.x=t.p0.x-n,e.p0.y=t.p0.y+u,e.p1.x=t.p1.x-n,e.p1.y=t.p1.y+u}},{key:"addInsideTurn",value:function(t,n){var i;this.Un.computeIntersection(this.sr.p0,this.sr.p1,this.gr.p0,this.gr.p1),this.Un.hasIntersection()?this.ar.addPt(this.Un.getIntersection(0)):(this.Cr=!0,this.sr.p1.distance(this.gr.p0)<this.ft*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR?this.ar.addPt(this.sr.p1):(this.ar.addPt(this.sr.p1),0<this.Ir?(i=new k((this.Ir*this.sr.p1.x+this.ir.x)/(this.Ir+1),(this.Ir*this.sr.p1.y+this.ir.y)/(this.Ir+1)),this.ar.addPt(i),i=new k((this.Ir*this.gr.p0.x+this.ir.x)/(this.Ir+1),(this.Ir*this.gr.p0.y+this.ir.y)/(this.Ir+1)),this.ar.addPt(i)):this.ar.addPt(this.ir),this.ar.addPt(this.gr.p0)))}},{key:"createCircle",value:function(t){var n=new k(t.x+this.ft,t.y);this.ar.addPt(n),this.addDirectedFillet(t,0,2*Math.PI,-1,this.ft),this.ar.closeRing()}},{key:"addBevelJoin",value:function(t,n){this.ar.addPt(t.p1),this.ar.addPt(n.p0)}},{key:"init",value:function(t){this.ft=t,this.lr=t*(1-Math.cos(this.Ar/2)),this.ar=new De,this.ar.setPrecisionModel(this.nt),this.ar.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this.Un.computeIntersection(this.nr,this.ir,this.ir,this.er),2<=this.Un.getIntersectionNum()&&(this.or.getJoinStyle()===Ee.JOIN_BEVEL||this.or.getJoinStyle()===Ee.JOIN_MITRE?(t&&this.ar.addPt(this.sr.p1),this.ar.addPt(this.gr.p0)):this.addCornerFillet(this.ir,this.sr.p1,this.gr.p0,G.CLOCKWISE,this.ft))}},{key:"closeRing",value:function(){this.ar.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this.Cr}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();_e.constructor_=function(){this.lr=0,this.Ar=null,this.Ir=1,this.ar=null,this.ft=0,this.nt=null,this.or=null,this.Un=null,this.nr=null,this.ir=null,this.er=null,this.rr=new fn,this.hr=new fn,this.sr=new fn,this.gr=new fn,this.ur=0,this.Cr=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this.nt=t,this.or=n,this.Un=new ln,this.Ar=Math.PI/2/n.getQuadrantSegments(),8<=n.getQuadrantSegments()&&n.getJoinStyle()===Ee.JOIN_ROUND&&(this.Ir=_e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},_e.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,_e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,_e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,_e.MAX_CLOSING_SEG_LEN_FACTOR=80;var Fe=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getOffsetCurve",value:function(t,n){if(0===(this.ft=n))return null;var i=n<0,n=Math.abs(n),n=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],n):this.computeOffsetCurve(t,i,n);n=n.getCoordinates();return i&&$.reverse(n),n}},{key:"computeSingleSidedBufferCurve",value:function(t,n,i){var e=this.simplifyTolerance(this.ft);if(n){i.addSegments(t,!0);var r=Le.simplify(t,-e),n=r.length-1;i.initSideSegments(r[n],r[n-1],Ii.LEFT),i.addFirstSegment();for(var u=n-2;0<=u;u--)i.addNextSegment(r[u],!0)}else{i.addSegments(t,!1);var s=Le.simplify(t,e),h=s.length-1;for(i.initSideSegments(s[0],s[1],Ii.LEFT),i.addFirstSegment(),u=2;u<=h;u++)i.addNextSegment(s[u],!0)}i.addLastSegment(),i.closeRing()}},{key:"computeRingBufferCurve",value:function(t,n,i){var e=this.simplifyTolerance(this.ft);n===Ii.RIGHT&&(e=-e);var r=Le.simplify(t,e),u=r.length-1;i.initSideSegments(r[u-1],r[0],n);for(var s=1;s<=u;s++)i.addNextSegment(r[s],1!==s);i.closeRing()}},{key:"computeLineBufferCurve",value:function(t,n){var i=this.simplifyTolerance(this.ft),e=Le.simplify(t,i),r=e.length-1;n.initSideSegments(e[0],e[1],Ii.LEFT);for(var u=2;u<=r;u++)n.addNextSegment(e[u],!0);n.addLastSegment(),n.addLineEndCap(e[r-1],e[r]);var s=Le.simplify(t,-i),i=s.length-1;for(n.initSideSegments(s[i],s[i-1],Ii.LEFT),u=i-2;0<=u;u--)n.addNextSegment(s[u],!0);n.addLastSegment(),n.addLineEndCap(s[1],s[0]),n.closeRing()}},{key:"computePointCurve",value:function(t,n){switch(this.or.getEndCapStyle()){case Ee.CAP_ROUND:n.createCircle(t);break;case Ee.CAP_SQUARE:n.createSquare(t)}}},{key:"getLineCurve",value:function(t,n){if((this.ft=n)<0&&!this.or.isSingleSided())return null;if(0===n)return null;var i=Math.abs(n),i=this.getSegGen(i);return t.length<=1?this.computePointCurve(t[0],i):this.or.isSingleSided()?this.computeSingleSidedBufferCurve(t,n<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this.or}},{key:"simplifyTolerance",value:function(t){return t*this.or.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,i){if(this.ft=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return e.copyCoordinates(t);i=this.getSegGen(i);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,n,i){var e=this.simplifyTolerance(this.ft);if(n){var r=Le.simplify(t,-e),n=r.length-1;i.initSideSegments(r[n],r[n-1],Ii.LEFT),i.addFirstSegment();for(var u=n-2;0<=u;u--)i.addNextSegment(r[u],!0)}else{var s=Le.simplify(t,e),h=s.length-1;for(i.initSideSegments(s[0],s[1],Ii.LEFT),i.addFirstSegment(),u=2;u<=h;u++)i.addNextSegment(s[u],!0)}i.addLastSegment()}},{key:"getSegGen",value:function(t){return new _e(this.nt,this.or,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoordinates",value:function(t){for(var n=new Array(t.length).fill(null),i=0;i<n.length;i++)n[i]=new k(t[i]);return n}}]),e}();Fe.constructor_=function(){this.ft=0,this.nt=null,this.or=null;var t=arguments[0],n=arguments[1];this.nt=t,this.or=n};var Ge=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var t=arguments[0],n=new S,i=this.fr.iterator();i.hasNext();){var e=i.next(),r=e.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,e.getDirectedEdges(),n)}return n}if(3===arguments.length)if(d(arguments[2],M)&&arguments[0]instanceof k&&arguments[1]instanceof Pi)for(var u,s=arguments[0],h=arguments[1],g=arguments[2],o=h.getEdge().getCoordinates(),i=0;i<o.length-1;i++)this.cr.p0=o[i],this.cr.p1=o[i+1],this.cr.p0.y>this.cr.p1.y&&this.cr.reverse(),Math.max(this.cr.p0.x,this.cr.p1.x)<s.x||this.cr.isHorizontal()||s.y<this.cr.p0.y||s.y>this.cr.p1.y||G.index(this.cr.p0,this.cr.p1,s)===G.RIGHT||(u=h.getDepth(Ii.LEFT),this.cr.p0.equals(o[i])||(u=h.getDepth(Ii.RIGHT)),u=new je(this.cr,u),g.add(u));else if(d(arguments[2],M)&&arguments[0]instanceof k&&d(arguments[1],M)){var a=arguments[0],A=arguments[1],C=arguments[2];for(i=A.iterator();i.hasNext();){var I=i.next();I.isForward()&&this.findStabbedSegments(a,I,C)}}}},{key:"getDepth",value:function(t){t=this.findStabbedSegments(t);return 0===t.size()?0:Pn.min(t).vr}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),je=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"compareTo",value:function(t){var n=t;if(this.yr.minX()>=n.yr.maxX())return 1;if(this.yr.maxX()<=n.yr.minX())return-1;t=this.yr.orientationIndex(n.yr);return 0!==t||0!=(t=-1*n.yr.orientationIndex(this.yr))?t:this.yr.compareTo(n.yr)}},{key:"compareX",value:function(t,n){var i=t.p0.compareTo(n.p0);return 0!==i?i:t.p1.compareTo(n.p1)}},{key:"toString",value:function(){return this.yr.toString()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[u]}}]),t}();je.constructor_=function(){this.yr=null,this.vr=null;var t=arguments[0],n=arguments[1];this.yr=new fn(t),this.vr=n},Ge.DepthSegment=je,Ge.constructor_=function(){this.fr=null,this.cr=new fn,this.fr=arguments[0]};var Be=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"addPoint",value:function(t){if(this.ft<=0)return null;t=t.getCoordinates(),t=this.kr.getLineCurve(t,this.ft);this.addCurve(t,cn.EXTERIOR,cn.INTERIOR)}},{key:"addPolygon",value:function(t){var n=this.ft,i=Ii.LEFT;this.ft<0&&(n=-this.ft,i=Ii.RIGHT);var e=t.getExteriorRing(),r=$.removeRepeatedPoints(e.getCoordinates());if(this.ft<0&&this.isErodedCompletely(e,this.ft))return null;if(this.ft<=0&&r.length<3)return null;this.addPolygonRing(r,n,i,cn.EXTERIOR,cn.INTERIOR);for(var u=0;u<t.getNumInteriorRing();u++){var s=t.getInteriorRingN(u),h=$.removeRepeatedPoints(s.getCoordinates());0<this.ft&&this.isErodedCompletely(s,-this.ft)||this.addPolygonRing(h,n,Ii.opposite(i),cn.INTERIOR,cn.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,n){var i=new kn(t[0],t[1],t[2]),t=i.inCentre();return V.pointToSegment(t,i.p0,i.p1)<Math.abs(n)}},{key:"addLineString",value:function(t){if(this.ft<=0&&!this.kr.getBufferParameters().isSingleSided())return null;t=$.removeRepeatedPoints(t.getCoordinates()),t=this.kr.getLineCurve(t,this.ft);this.addCurve(t,cn.EXTERIOR,cn.INTERIOR)}},{key:"addCurve",value:function(t,n,i){if(null===t||t.length<2)return null;i=new fe(t,new di(0,cn.BOUNDARY,n,i));this.dr.add(i)}},{key:"getCurves",value:function(){return this.add(this.fn),this.dr}},{key:"addPolygonRing",value:function(t,n,i,e,r){if(0===n&&t.length<Zt.MINIMUM_VALID_SIZE)return null;var u=e,s=r;t.length>=Zt.MINIMUM_VALID_SIZE&&G.isCCW(t)&&(u=r,s=e,i=Ii.opposite(i));n=this.kr.getRingCurve(t,i,n);this.addCurve(n,u,s)}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof jt)this.addPolygon(t);else if(t instanceof Lt)this.addLineString(t);else if(t instanceof _t)this.addPoint(t);else if(t instanceof Bt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof Vt)this.addCollection(t);else{if(!(t instanceof mt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,n){var i=t.getCoordinates();if(i.length<4)return n<0;if(4===i.length)return this.isTriangleErodedCompletely(i,n);t=t.getEnvelopeInternal(),t=Math.min(t.getHeight(),t.getWidth());return n<0&&2*Math.abs(n)>t}},{key:"addCollection",value:function(t){for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.add(i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Be.constructor_=function(){this.fn=null,this.ft=null,this.kr=null,this.dr=new S;var t=arguments[0],n=arguments[1],i=arguments[2];this.fn=t,this.ft=n,this.kr=i};var Ze=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getNextCW",value:function(t){this.getEdges();var n=this.wr.indexOf(t),t=n-1;return 0===n&&(t=this.wr.size()-1),this.wr.get(t)}},{key:"propagateSideLabels",value:function(t){for(var n=cn.NONE,i=this.iterator();i.hasNext();)(r=(e=i.next()).getLabel()).isArea(t)&&r.getLocation(t,Ii.LEFT)!==cn.NONE&&(n=r.getLocation(t,Ii.LEFT));if(n===cn.NONE)return null;for(var e,r,u=n,i=this.iterator();i.hasNext();)if((r=(e=i.next()).getLabel()).getLocation(t,Ii.ON)===cn.NONE&&r.setLocation(t,Ii.ON,u),r.isArea(t)){var s=r.getLocation(t,Ii.LEFT),h=r.getLocation(t,Ii.RIGHT);if(h!==cn.NONE){if(h!==u)throw new Ni("side location conflict",e.getCoordinate());s===cn.NONE&&y.shouldNeverReachHere("found single null side (at "+e.getCoordinate()+")"),u=s}else y.isTrue(r.getLocation(t,Ii.LEFT)===cn.NONE,"found single null side"),r.setLocation(t,Ii.RIGHT,u),r.setLocation(t,Ii.LEFT,u)}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){j.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator();n.hasNext();)n.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var n=this.getEdges();if(n.size()<=0)return!0;var i=n.size()-1,i=n.get(i).getLabel().getLocation(t,Ii.LEFT);y.isTrue(i!==cn.NONE,"Found unlabelled area edge");for(var e=i,r=this.iterator();r.hasNext();){var u=r.next().getLabel();y.isTrue(u.isArea(t),"Found non-area edge");var s=u.getLocation(t,Ii.LEFT),u=u.getLocation(t,Ii.RIGHT);if(s===u)return!1;if(u!==e)return!1;e=s}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var n=0;n<this.wr.size();n++)if(this.wr.get(n)===t)return n;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this.wr&&(this.wr=new S(this.mr.values())),this.wr}},{key:"getLocation",value:function(t,n,i){return this.pr[t]===cn.NONE&&(this.pr[t]=Yn.locate(n,i[t].getGeometry())),this.pr[t]}},{key:"toString",value:function(){var t=new O;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var n=this.iterator();n.hasNext();){var i=n.next();t.append(i),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var n=this.iterator();n.hasNext();)n.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],i=this.iterator();i.hasNext();)for(var e=(u=i.next()).getLabel(),r=0;r<2;r++)e.isLine(r)&&e.getLocation(r)===cn.BOUNDARY&&(n[r]=!0);for(i=this.iterator();i.hasNext();)for(var u,s,h,e=(u=i.next()).getLabel(),r=0;r<2;r++)e.isAnyNull(r)&&(h=cn.NONE,h=n[r]?cn.EXTERIOR:(s=u.getCoordinate(),this.getLocation(r,s,t)),e.setAllLocationsIfNull(r,h))}},{key:"getDegree",value:function(){return this.mr.size()}},{key:"insertEdgeEnd",value:function(t,n){this.mr.put(t,n),this.wr=null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ze.constructor_=function(){this.mr=new Ct,this.wr=null,this.pr=[cn.NONE,cn.NONE]};var Ve=function(){is(u,Ze);var n=es(u);function u(){var t;return hs(this,u),t=n.call(this),u.constructor_.apply(us(t),arguments),t}return gs(u,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,n=null,i=this.Mr,e=0;e<this.br.size();e++){var r=this.br.get(e),u=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),i){case this.Mr:if(!u.isInResult())continue;n=u,i=this.Er;break;case this.Er:if(!r.isInResult())continue;n.setNext(r),i=this.Mr}}if(i===this.Er){if(null===t)throw new Ni("no outgoing dirEdge found",this.getCoordinate());y.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),n.setNext(t)}}},{key:"insert",value:function(t){this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),n=t.size();if(n<1)return null;var i=t.get(0);if(1===n)return i;var e=t.get(n-1),t=i.getQuadrant(),n=e.getQuadrant();return si.isNorthern(t)&&si.isNorthern(n)?i:si.isNorthern(t)||si.isNorthern(n)?0!==i.getDy()?i:0!==e.getDy()?e:(y.shouldNeverReachHere("found two horizontal edges incident on node"),null):e}},{key:"print",value:function(t){j.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var i=n.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this.br)return this.br;this.br=new S;for(var t=this.iterator();t.hasNext();){var n=t.next();(n.isInResult()||n.getSym().isInResult())&&this.br.add(n)}return this.br}},{key:"updateLabelling",value:function(t){for(var n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,n=null,i=this.wr.size()-1;0<=i;i--){var e=this.wr.get(i),r=e.getSym();null===n&&(n=r),null!==t&&r.setNext(t),t=e}n.setNext(t)}},{key:"computeDepths",value:function(){if(1===arguments.length){var t=arguments[0],n=this.findIndex(t),i=(t.getLabel(),t.getDepth(Ii.LEFT)),e=t.getDepth(Ii.RIGHT),i=this.computeDepths(n+1,this.wr.size(),i);if(this.computeDepths(0,n,i)!==e)throw new Ni("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var t=arguments[0],r=arguments[1],u=arguments[2],s=t;s<r;s++){var h=this.wr.get(s);h.getLabel(),h.setEdgeDepths(Ii.RIGHT,u),u=h.getDepth(Ii.LEFT)}return u}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var n=t.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var n=null,i=null,e=this.Mr,r=this.br.size()-1;0<=r;r--){var u=this.br.get(r),s=u.getSym();switch(null===n&&u.getEdgeRing()===t&&(n=u),e){case this.Mr:if(s.getEdgeRing()!==t)continue;i=s,e=this.Er;break;case this.Er:if(u.getEdgeRing()!==t)continue;i.setNextMin(u),e=this.Mr}}e===this.Er&&(y.isTrue(null!==n,"found null for first outgoing dirEdge"),y.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var t=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&t++;return t}if(1===arguments.length){for(var i=arguments[0],t=0,n=this.iterator();n.hasNext();)n.next().getEdgeRing()===i&&t++;return t}}},{key:"getLabel",value:function(){return this.Yn}},{key:"findCoveredLineEdges",value:function(){for(var t=cn.NONE,n=this.iterator();n.hasNext();){var i=(r=n.next()).getSym();if(!r.isLineEdge()){if(r.isInResult()){t=cn.INTERIOR;break}if(i.isInResult()){t=cn.EXTERIOR;break}}}if(t===cn.NONE)return null;for(var e=t,n=this.iterator();n.hasNext();){var r,i=(r=n.next()).getSym();r.isLineEdge()?r.getEdge().setCovered(e===cn.INTERIOR):(r.isInResult()&&(e=cn.EXTERIOR),i.isInResult()&&(e=cn.INTERIOR))}}},{key:"computeLabelling",value:function(t){ns(ss(u.prototype),"computeLabelling",this).call(this,t),this.Yn=new di(cn.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),e=0;e<2;e++){var r=i.getLocation(e);r!==cn.INTERIOR&&r!==cn.BOUNDARY||this.Yn.setLocation(e,cn.INTERIOR)}}},{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[]}}]),u}();Ve.constructor_=function(){this.br=null,this.Yn=null,this.Mr=1,this.Er=2};var Ye=function(){is(i,Oi);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"createNode",value:function(t){return new xi(t,new Ve)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Ye.constructor_=function(){};var Ue=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"compareTo",value:function(t){return n.compareOriented(this.he,this.Sr,t.he,t.Sr)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[u]}}],[{key:"orientation",value:function(t){return 1===$.increasingDirection(t)}},{key:"compareOriented",value:function(t,n,i,e){for(var r=n?1:-1,u=e?1:-1,s=n?t.length:-1,h=e?i.length:-1,g=n?0:t.length-1,o=e?0:i.length-1;;){var a=t[g].compareTo(i[o]);if(0!==a)return a;var A=(g+=r)===s,a=(o+=u)===h;if(A&&!a)return-1;if(!A&&a)return 1;if(A&&a)return 0}}}]),n}();Ue.constructor_=function(){this.he=null,this.Sr=null;var t=arguments[0];this.he=t,this.Sr=Ue.orientation(t)};var We=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var n=0;n<this.Ii.size();n++){var i=this.Ii.get(n);0<n&&t.print(","),t.print("(");for(var e=i.getCoordinates(),r=0;r<e.length;r++)0<r&&t.print(","),t.print(e[r].x+" "+e[r].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var n=t.iterator();n.hasNext();)this.add(n.next())}},{key:"findEdgeIndex",value:function(t){for(var n=0;n<this.Ii.size();n++)if(this.Ii.get(n).equals(t))return n;return-1}},{key:"iterator",value:function(){return this.Ii.iterator()}},{key:"getEdges",value:function(){return this.Ii}},{key:"get",value:function(t){return this.Ii.get(t)}},{key:"findEqualEdge",value:function(t){t=new Ue(t.getCoordinates());return this.xr.get(t)}},{key:"add",value:function(t){this.Ii.add(t);var n=new Ue(t.getCoordinates());this.xr.put(n,t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();We.constructor_=function(){this.Ii=new S,this.xr=new Ct};var Xe=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"processIntersections",value:function(t,n,i,e){}},{key:"isDone",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Xe.constructor_=function(){};var ze=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"isTrivialIntersection",value:function(t,n,i,e){if(t===i&&1===this.Un.getIntersectionNum()){if(r.isAdjacentSegments(n,e))return!0;if(t.isClosed()){t=t.size()-1;if(0===n&&e===t||0===e&&n===t)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.Wn}},{key:"hasProperInteriorIntersection",value:function(){return this.zn}},{key:"getLineIntersector",value:function(){return this.Un}},{key:"hasProperIntersection",value:function(){return this.Qn}},{key:"processIntersections",value:function(t,n,i,e){if(t===i&&n===e)return null;this.numTests++;var r=t.getCoordinates()[n],u=t.getCoordinates()[n+1],s=i.getCoordinates()[e],h=i.getCoordinates()[e+1];this.Un.computeIntersection(r,u,s,h),this.Un.hasIntersection()&&(this.numIntersections++,this.Un.isInteriorIntersection()&&(this.numInteriorIntersections++,this.Rr=!0),this.isTrivialIntersection(t,n,i,e)||(this.Kn=!0,t.addIntersections(this.Un,n,0),i.addIntersections(this.Un,e,1),this.Un.isProper()&&(this.numProperIntersections++,this.Qn=!0,this.zn=!0)))}},{key:"hasIntersection",value:function(){return this.Kn}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this.Rr}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[Xe]}}],[{key:"isAdjacentSegments",value:function(t,n){return 1===Math.abs(t-n)}}]),r}();ze.constructor_=function(){this.Kn=!1,this.Qn=!1,this.zn=!1,this.Rr=!1,this.Wn=null,this.Un=null,this.ni=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this.Un=arguments[0]};var Qe=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"setWorkingPrecisionModel",value:function(t){this.Tr=t}},{key:"insertUniqueEdge",value:function(t){var n,i,e=this.wr.findEqualEdge(t);null!==e?(n=e.getLabel(),i=t.getLabel(),e.isPointwiseEqual(t)||(i=new di(t.getLabel())).flip(),n.merge(i),i=r.depthDelta(i),i=e.getDepthDelta()+i,e.setDepthDelta(i)):(this.wr.add(t),t.setDepthDelta(r.depthDelta(t.getLabel())))}},{key:"buildSubgraphs",value:function(t,n){for(var i=new S,e=t.iterator();e.hasNext();){var r=e.next(),u=r.getRightmostCoordinate(),u=new Ge(i).getDepth(u);r.computeDepth(u),r.findResultEdges(),i.add(r),n.add(r.getDirectedEdges(),r.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var n=new S,i=t.getNodes().iterator();i.hasNext();){var e,r=i.next();r.isVisited()||((e=new Re).create(r),n.add(e))}return Pn.sort(n,Pn.reverseOrder()),n}},{key:"createEmptyResultGeometry",value:function(){return this.D.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this.Nr)return this.Nr;var n=new we,i=new ln;return i.setPrecisionModel(t),n.setSegmentIntersector(new ze(i)),n}},{key:"buffer",value:function(t,n){var i=this.Tr;null===i&&(i=t.getPrecisionModel()),this.D=t.getFactory();var e=new Fe(i,this.or),e=new Be(t,n,e).getCurves();if(e.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(e,i),this.Ln=new Li(new Ye),this.Ln.addEdges(this.wr.getEdges());e=this.createSubgraphs(this.Ln),i=new Oe(this.D);this.buildSubgraphs(e,i);i=i.getPolygons();return i.size()<=0?this.createEmptyResultGeometry():this.D.buildGeometry(i)}},{key:"computeNodedEdges",value:function(t,n){n=this.getNoder(n);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var e=i.next(),r=e.getCoordinates();2===r.length&&r[0].equals2D(r[1])||(r=e.getData(),r=new Si(e.getCoordinates(),new di(r)),this.insertUniqueEdge(r))}}},{key:"setNoder",value:function(t){this.Nr=t}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthDelta",value:function(t){var n=t.getLocation(0,Ii.LEFT),t=t.getLocation(0,Ii.RIGHT);return n===cn.INTERIOR&&t===cn.EXTERIOR?1:n===cn.EXTERIOR&&t===cn.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var n=new hn,i=new S;t.hasNext();){var e=t.next(),e=n.createLineString(e.getCoordinates());i.add(e)}return n.buildGeometry(i)}}]),r}();Qe.constructor_=function(){this.or=null,this.Tr=null,this.Nr=null,this.D=null,this.Ln=null,this.wr=new We,this.or=arguments[0]};var Ke=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this.Pr.iterator();t.hasNext();){var n=t.next().getCoordinates();this.checkEndPtVertexIntersections(n[0],this.Pr),this.checkEndPtVertexIntersections(n[n.length-1],this.Pr)}else if(2===arguments.length)for(var i=arguments[0],t=arguments[1].iterator();t.hasNext();)for(var n=t.next().getCoordinates(),e=1;e<n.length-1;e++)if(n[e].equals(i))throw new v("found endpt/interior pt intersection at index "+e+" :pt "+i)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this.Pr.iterator();t.hasNext();)for(var n=t.next(),i=this.Pr.iterator();i.hasNext();){var e=i.next();this.checkInteriorIntersections(n,e)}else if(2===arguments.length)for(var r=arguments[0],u=arguments[1],s=r.getCoordinates(),h=u.getCoordinates(),g=0;g<s.length-1;g++)for(var o=0;o<h.length-1;o++)this.checkInteriorIntersections(r,g,u,o);else if(4===arguments.length){var a=arguments[0],A=arguments[1],C=arguments[2],I=arguments[3];if(a===C&&A===I)return null;var l=a.getCoordinates()[A],a=a.getCoordinates()[A+1],A=C.getCoordinates()[I],I=C.getCoordinates()[I+1];if(this.Un.computeIntersection(l,a,A,I),this.Un.hasIntersection()&&(this.Un.isProper()||this.hasInteriorIntersection(this.Un,l,a)||this.hasInteriorIntersection(this.Un,A,I)))throw new v("found non-noded intersection at "+l+"-"+a+" and "+A+"-"+I)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this.Pr.iterator();t.hasNext();){var n=t.next();this.checkCollapses(n)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),t=0;t<i.length-2;t++)this.checkCollapse(i[t],i[t+1],i[t+2])}},{key:"hasInteriorIntersection",value:function(t,n,i){for(var e=0;e<t.getIntersectionNum();e++){var r=t.getIntersection(e);if(!r.equals(n)&&!r.equals(i))return!0}return!1}},{key:"checkCollapse",value:function(t,n,i){if(t.equals(i))throw new v("found non-noded collapse at "+e.fact.createLineString([t,n,i]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();Ke.constructor_=function(){this.Un=new ln,this.Pr=null,this.Pr=arguments[0]},Ke.fact=new hn;var He=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"intersectsScaled",value:function(t,n){var i=Math.min(t.x,n.x),e=Math.max(t.x,n.x),r=Math.min(t.y,n.y),u=Math.max(t.y,n.y),u=this.h<i||this.C>e||this.g<r||this.I>u;if(u)return!1;n=this.intersectsToleranceSquare(t,n);return y.isTrue(!(u&&n),"Found bad envelope test"),n}},{key:"initCorners",value:function(t){this.C=t.x-.5,this.h=t.x+.5,this.I=t.y-.5,this.g=t.y+.5,this.Or[0]=new k(this.h,this.g),this.Or[1]=new k(this.C,this.g),this.Or[2]=new k(this.C,this.I),this.Or[3]=new k(this.h,this.I)}},{key:"intersects",value:function(t,n){return 1===this.pe?this.intersectsScaled(t,n):(this.copyScaled(t,this.Lr),this.copyScaled(n,this.Dr),this.intersectsScaled(this.Lr,this.Dr))}},{key:"scale",value:function(t){return Math.round(t*this.pe)}},{key:"getCoordinate",value:function(){return this._r}},{key:"copyScaled",value:function(t,n){n.x=this.scale(t.x),n.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){var t;return null===this.Fr&&(t=n.SAFE_ENV_EXPANSION_FACTOR/this.pe,this.Fr=new T(this._r.x-t,this._r.x+t,this._r.y-t,this._r.y+t)),this.Fr}},{key:"intersectsPixelClosure",value:function(t,n){return this.Un.computeIntersection(t,n,this.Or[0],this.Or[1]),!!(this.Un.hasIntersection()||(this.Un.computeIntersection(t,n,this.Or[1],this.Or[2]),this.Un.hasIntersection()||(this.Un.computeIntersection(t,n,this.Or[2],this.Or[3]),this.Un.hasIntersection()||(this.Un.computeIntersection(t,n,this.Or[3],this.Or[0]),this.Un.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,n){var i=!1,e=!1;return this.Un.computeIntersection(t,n,this.Or[0],this.Or[1]),!!(this.Un.isProper()||(this.Un.computeIntersection(t,n,this.Or[1],this.Or[2]),this.Un.isProper()||(this.Un.hasIntersection()&&(i=!0),this.Un.computeIntersection(t,n,this.Or[2],this.Or[3]),this.Un.isProper()||(this.Un.hasIntersection()&&(e=!0),this.Un.computeIntersection(t,n,this.Or[3],this.Or[0]),this.Un.isProper()||i&&e||t.equals(this.Ct)||n.equals(this.Ct)))))}},{key:"addSnappedNode",value:function(t,n){var i=t.getCoordinate(n),e=t.getCoordinate(n+1);return!!this.intersects(i,e)&&(t.addIntersection(this.getCoordinate(),n),!0)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();He.constructor_=function(){this.Un=null,this.Ct=null,this._r=null,this.Gr=null,this.Lr=null,this.Dr=null,this.pe=null,this.C=null,this.h=null,this.I=null,this.g=null,this.Or=new Array(4).fill(null),this.Fr=null;var t=arguments[0],n=arguments[1],i=arguments[2];if(this._r=t,this.Ct=t,this.pe=n,this.Un=i,n<=0)throw new l("Scale factor must be non-zero");1!==n&&(this.Ct=new k(this.scale(t.x),this.scale(t.y)),this.Lr=new k,this.Dr=new k),this.initCorners(this.Ct)},He.SAFE_ENV_EXPANSION_FACTOR=.75;var Je=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"select",value:function(){1===arguments.length||2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Je.constructor_=function(){this.selectedSegment=new fn};var qe=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"snap",value:function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],e=t.getSafeEnvelope(),r=new $e(t,n,i);return this.jt.query(e,new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[Sn]}},{key:"visitItem",value:function(t){t.select(e,r)}}]),t}())),r.isNodeAdded()}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),$e=function(){is(i,Je);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"isNodeAdded",value:function(){return this.jr}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof ve))return ns(ss(i.prototype),"select",this).apply(this,arguments);var t=arguments[0],n=arguments[1],t=t.getContext();if(null!==this.Br&&t===this.Br&&n===this.Zr)return null;this.jr=this.Vr.addSnappedNode(t,n)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();$e.constructor_=function(){this.Vr=null,this.Br=null,this.Zr=null,this.jr=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this.Vr=t,this.Br=n,this.Zr=i},qe.HotPixelSnapAction=$e,qe.constructor_=function(){this.jt=null,this.jt=arguments[0]};var tr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"processIntersections",value:function(t,n,i,e){if(t===i&&n===e)return null;var r=t.getCoordinates()[n],u=t.getCoordinates()[n+1],s=i.getCoordinates()[e],h=i.getCoordinates()[e+1];if(this.Un.computeIntersection(r,u,s,h),this.Un.hasIntersection()&&this.Un.isInteriorIntersection()){for(var g=0;g<this.Un.getIntersectionNum();g++)this.Yr.add(this.Un.getIntersection(g));t.addIntersections(this.Un,n,0),i.addIntersections(this.Un,e,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this.Yr}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Xe]}}]),t}();tr.constructor_=function(){this.Un=null,this.Yr=null,this.Un=arguments[0],this.Yr=new S};var nr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"checkCorrectness",value:function(t){var n=fe.getNodedSubstrings(t),n=new Ke(n);try{n.checkValid()}catch(t){if(!(t instanceof N))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return fe.getNodedSubstrings(this.ke)}},{key:"snapRound",value:function(t,n){n=this.findInteriorIntersections(t,n);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,n){n=new tr(n);return this.Ee.setSegmentIntersector(n),this.Ee.computeNodes(t),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(d(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var n=t.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof fe)for(var i=arguments[0],e=i.getCoordinates(),r=0;r<e.length;r++){var u=new He(e[r],this.pe,this.Un);this.Ur.snap(u,i,r)&&i.addIntersection(e[r],r)}}},{key:"computeNodes",value:function(t){this.ke=t,this.Ee=new we,this.Ur=new qe(this.Ee.getIndex()),this.snapRound(t,this.Un)}},{key:"computeIntersectionSnaps",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next(),i=new He(i,this.pe,this.Un);this.Ur.snap(i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ke]}}]),t}();nr.constructor_=function(){this.Wr=null,this.Un=null,this.pe=null,this.Ee=null,this.Ur=null,this.ke=null;var t=arguments[0];this.Wr=t,this.Un=new ln,this.Un.setPrecisionModel(t),this.pe=t.getScale()};var ir=function(){function h(){hs(this,h),h.constructor_.apply(this,arguments)}return gs(h,[{key:"bufferFixedPrecision",value:function(t){var n=new pe(new nr(new un(1)),t.getScale()),i=new Qe(this.or);i.setWorkingPrecisionModel(t),i.setNoder(n),this.Xr=i.buffer(this.zr,this.ft)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=h.MAX_PRECISION_DIGITS;0<=t;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Ni))throw t;this.Qr=t}if(null!==this.Xr)return null}throw this.Qr}var n;1===arguments.length&&(n=h.precisionScaleFactor(this.zr,this.ft,arguments[0]),n=new un(n),this.bufferFixedPrecision(n))}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this.Xr)return null;var t=this.zr.getFactory().getPrecisionModel();t.getType()===un.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this.or.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new Qe(this.or);this.Xr=t.buffer(this.zr,this.ft)}catch(t){if(!(t instanceof v))throw t;this.Qr=t}}},{key:"getResultGeometry",value:function(t){return this.ft=t,this.computeGeometry(),this.Xr}},{key:"setEndCapStyle",value:function(t){this.or.setEndCapStyle(t)}},{key:"getClass",value:function(){return h}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return new h(t).getResultGeometry(n)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof X&&"number"==typeof arguments[1]){var i=arguments[0],e=arguments[1],r=arguments[2];return(i=new h(i)).setQuadrantSegments(r),i.getResultGeometry(e)}if(arguments[2]instanceof Ee&&arguments[0]instanceof X&&"number"==typeof arguments[1]){var u=arguments[0],s=arguments[1];return(i=new h(u,arguments[2])).getResultGeometry(s)}}else if(4===arguments.length){r=arguments[0],e=arguments[1],u=arguments[2],s=arguments[3];return(i=new h(r)).setQuadrantSegments(u),i.setEndCapStyle(s),i.getResultGeometry(e)}}},{key:"precisionScaleFactor",value:function(t,n,i){t=t.getEnvelopeInternal(),n=Z.max(Math.abs(t.getMaxX()),Math.abs(t.getMaxY()),Math.abs(t.getMinX()),Math.abs(t.getMinY()))+2*(0<n?n:0),n=i-Math.trunc(Math.log(n)/Math.log(10)+1);return Math.pow(10,n)}}]),h}();ir.constructor_=function(){var t,n;this.zr=null,this.ft=null,this.or=new Ee,this.Xr=null,this.Qr=null,1===arguments.length?this.zr=arguments[0]:2===arguments.length&&(t=arguments[0],n=arguments[1],this.zr=t,this.or=n)},ir.CAP_ROUND=Ee.CAP_ROUND,ir.CAP_BUTT=Ee.CAP_FLAT,ir.CAP_FLAT=Ee.CAP_FLAT,ir.CAP_SQUARE=Ee.CAP_SQUARE,ir.MAX_PRECISION_DIGITS=12;var En=Object.freeze({BufferOp:ir,BufferParameters:Ee}),er=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"filter",value:function(t){t instanceof jt&&this.Kr.add(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[dt]}}],[{key:"getPolygons",value:function(){if(1===arguments.length)return i.getPolygons(arguments[0],new S);if(2===arguments.length){var t=arguments[0],n=arguments[1];return t instanceof jt?n.add(t):t instanceof mt&&t.apply(new i(n)),n}}}]),i}();er.constructor_=function(){this.Kr=null,this.Kr=arguments[0]};var rr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isInsideArea",value:function(){return this.Hr===t.INSIDE_AREA}},{key:"getCoordinate",value:function(){return this.Ct}},{key:"getGeometryComponent",value:function(){return this.Jr}},{key:"getSegmentIndex",value:function(){return this.Hr}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();rr.constructor_=function(){var t,n,i;this.Jr=null,this.Hr=null,this.Ct=null,2===arguments.length?rr.constructor_.call(this,arguments[0],rr.INSIDE_AREA,arguments[1]):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.Jr=t,this.Hr=n,this.Ct=i)},rr.INSIDE_AREA=-1;var ur=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"filter",value:function(t){t instanceof _t&&this.he.add(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[dt]}}],[{key:"getPoints",value:function(){if(1===arguments.length){var t=arguments[0];return t instanceof _t?Pn.singletonList(t):i.getPoints(t,new S)}if(2===arguments.length){var n=arguments[0],t=arguments[1];return n instanceof _t?t.add(n):n instanceof mt&&n.apply(new i(t)),t}}}]),i}();ur.constructor_=function(){this.he=null,this.he=arguments[0]};var sr=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"filter",value:function(t){(t instanceof _t||t instanceof Lt||t instanceof jt)&&this.qr.add(new rr(t,0,t.getCoordinate()))}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[dt]}}],[{key:"getLocations",value:function(t){var n=new S;return t.apply(new i(n)),n}}]),i}();sr.constructor_=function(){this.qr=null,this.qr=arguments[0]};var hr=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"computeContainmentDistance",value:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.gn<=this.$r)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],t=this.O[n];if(t.getDimension()<2)return null;var e=1-n,r=er.getPolygons(t);if(0<r.size()){t=sr.getLocations(this.O[e]);if(this.computeContainmentDistance(t,r,i),this.gn<=this.$r)return this.tu[e]=i[0],this.tu[n]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&d(arguments[0],M)&&d(arguments[1],M)){for(var u=arguments[0],s=arguments[1],h=arguments[2],g=0;g<u.size();g++)for(var o=u.get(g),a=0;a<s.size();a++)if(this.computeContainmentDistance(o,s.get(a),h),this.gn<=this.$r)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof rr&&arguments[1]instanceof jt){r=arguments[0],e=arguments[1],n=arguments[2],i=r.getCoordinate();if(cn.EXTERIOR!==this._i.locate(i,e))return n[this.gn=0]=r,n[1]=new rr(e,i),null}}},{key:"computeMinDistanceLinesPoints",value:function(t,n,i){for(var e=0;e<t.size();e++)for(var r=t.get(e),u=0;u<n.size();u++){var s=n.get(u);if(this.computeMinDistance(r,s,i),this.gn<=this.$r)return null}}},{key:"computeFacetDistance",value:function(){var t=new Array(2).fill(null),n=Dn.getLines(this.O[0]),i=Dn.getLines(this.O[1]),e=ur.getPoints(this.O[0]),r=ur.getPoints(this.O[1]);return this.computeMinDistanceLines(n,i,t),this.updateMinDistance(t,!1),this.gn<=this.$r?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!1),this.gn<=this.$r?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,e,t),this.updateMinDistance(t,!0),this.gn<=this.$r?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(e,r,t),void this.updateMinDistance(t,!1))))}},{key:"nearestLocations",value:function(){return this.computeMinDistance(),this.tu}},{key:"updateMinDistance",value:function(t,n){if(null===t[0])return null;n?(this.tu[0]=t[1],this.tu[1]=t[0]):(this.tu[0]=t[0],this.tu[1]=t[1])}},{key:"nearestPoints",value:function(){return this.computeMinDistance(),[this.tu[0].getCoordinate(),this.tu[1].getCoordinate()]}},{key:"computeMinDistance",value:function(){if(0===arguments.length)return null!==this.tu?null:(this.tu=new Array(2).fill(null),this.computeContainmentDistance(),this.gn<=this.$r?null:void this.computeFacetDistance());if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Lt&&arguments[1]instanceof _t){var t=arguments[0],n=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this.gn)return null;for(var e,r=t.getCoordinates(),u=n.getCoordinate(),s=0;s<r.length-1;s++)if((A=V.pointToSegment(u,r[s],r[s+1]))<this.gn&&(this.gn=A,e=new fn(r[s],r[s+1]).closestPoint(u),i[0]=new rr(t,s,e),i[1]=new rr(n,0,u)),this.gn<=this.$r)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Lt&&arguments[1]instanceof Lt){var h=arguments[0],g=arguments[1],o=arguments[2];if(h.getEnvelopeInternal().distance(g.getEnvelopeInternal())>this.gn)return null;for(var r=h.getCoordinates(),a=g.getCoordinates(),s=0;s<r.length-1;s++)for(var A,C,I,l=0;l<a.length-1;l++)if((A=V.segmentToSegment(r[s],r[s+1],a[l],a[l+1]))<this.gn&&(this.gn=A,C=new fn(r[s],r[s+1]),I=new fn(a[l],a[l+1]),I=C.closestPoints(I),o[0]=new rr(h,s,I[0]),o[1]=new rr(g,l,I[1])),this.gn<=this.$r)return null}}},{key:"computeMinDistancePoints",value:function(t,n,i){for(var e=0;e<t.size();e++)for(var r=t.get(e),u=0;u<n.size();u++){var s=n.get(u),h=r.getCoordinate().distance(s.getCoordinate());if(h<this.gn&&(this.gn=h,i[0]=new rr(r,0,r.getCoordinate()),i[1]=new rr(s,0,s.getCoordinate())),this.gn<=this.$r)return null}}},{key:"distance",value:function(){if(null===this.O[0]||null===this.O[1])throw new l("null geometries are not supported");return this.O[0].isEmpty()||this.O[1].isEmpty()?0:(this.computeMinDistance(),this.gn)}},{key:"computeMinDistanceLines",value:function(t,n,i){for(var e=0;e<t.size();e++)for(var r=t.get(e),u=0;u<n.size();u++){var s=n.get(u);if(this.computeMinDistance(r,s,i),this.gn<=this.$r)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(t,n){return new e(t,n).distance()}},{key:"isWithinDistance",value:function(t,n,i){return!(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>i)&&new e(t,n,i).distance()<=i}},{key:"nearestPoints",value:function(t,n){return new e(t,n).nearestPoints()}}]),e}();hr.constructor_=function(){var t,n,i;this.O=null,this.$r=0,this._i=new Ci,this.tu=null,this.gn=c.MAX_VALUE,2===arguments.length?hr.constructor_.call(this,arguments[0],arguments[1],0):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.O=new Array(2).fill(null),this.O[0]=t,this.O[1]=n,this.$r=i)};var Un=Object.freeze({DistanceOp:hr}),gr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinates",value:function(){if(null===this.j){for(var t=0,n=0,i=new R,e=this.nu.iterator();e.hasNext();){var r=e.next();r.getEdgeDirection()?t++:n++,i.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.j=i.toCoordinateArray(),t<n&&$.reverse(this.j)}return this.j}},{key:"toLineString",value:function(){return this.k.createLineString(this.getCoordinates())}},{key:"add",value:function(t){this.nu.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();gr.constructor_=function(){this.k=null,this.nu=new S,this.j=null,this.k=arguments[0]};var or=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"setVisited",value:function(t){this.ri=t}},{key:"isMarked",value:function(){return this.Rn}},{key:"setData",value:function(t){this.Bi=t}},{key:"getData",value:function(){return this.Bi}},{key:"setMarked",value:function(t){this.Rn=t}},{key:"getContext",value:function(){return this.Bi}},{key:"isVisited",value:function(){return this.ri}},{key:"setContext",value:function(t){this.Bi=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getComponentWithVisitedState",value:function(t,n){for(;t.hasNext();){var i=t.next();if(i.isVisited()===n)return i}return null}},{key:"setVisited",value:function(t,n){for(;t.hasNext();)t.next().setVisited(n)}},{key:"setMarked",value:function(t,n){for(;t.hasNext();)t.next().setMarked(n)}}]),t}();or.constructor_=function(){this.Rn=!1,this.ri=!1,this.Bi=null};var ar=function(){is(i,or);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"isRemoved",value:function(){return null===this.Br}},{key:"compareDirection",value:function(t){return this.ci>t.ci?1:this.ci<t.ci?-1:G.index(t.vi,t.yi,this.yi)}},{key:"getCoordinate",value:function(){return this.iu.getCoordinate()}},{key:"print",value:function(t){var n=this.getClass().getName(),i=n.lastIndexOf("."),i=n.substring(i+1);t.print("  "+i+": "+this.vi+" - "+this.yi+" "+this.ci+":"+this.eu)}},{key:"getDirectionPt",value:function(){return this.yi}},{key:"getAngle",value:function(){return this.eu}},{key:"compareTo",value:function(t){return this.compareDirection(t)}},{key:"getFromNode",value:function(){return this.iu}},{key:"getSym",value:function(){return this.Sn}},{key:"setEdge",value:function(t){this.Br=t}},{key:"remove",value:function(){this.Sn=null,this.Br=null}},{key:"getEdge",value:function(){return this.Br}},{key:"getQuadrant",value:function(){return this.ci}},{key:"setSym",value:function(t){this.Sn=t}},{key:"getToNode",value:function(){return this.ru}},{key:"getEdgeDirection",value:function(){return this.uu}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[u]}}],[{key:"toEdges",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();)n.add(i.next().Br);return n}}]),i}();ar.constructor_=function(){var t,n,i,e;this.Br=null,this.iu=null,this.ru=null,this.vi=null,this.yi=null,this.Sn=null,this.uu=null,this.ci=null,this.eu=null,0===arguments.length||4===arguments.length&&(i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3],this.iu=i,this.ru=t,this.uu=n,this.vi=i.getCoordinate(),this.yi=e,i=this.yi.x-this.vi.x,e=this.yi.y-this.vi.y,this.ci=si.quadrant(i,e),this.eu=Math.atan2(e,i))};var Ar=function(){is(i,ar);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getNext",value:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(y.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Ar.constructor_=function(){ar.constructor_.call(this,arguments[0],arguments[1],arguments[2],arguments[3])};var Cr=function(){is(i,or);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"isRemoved",value:function(){return null===this.su}},{key:"setDirectedEdges",value:function(t,n){this.su=[t,n],t.setEdge(this),n.setEdge(this),t.setSym(n),n.setSym(t),t.getFromNode().addOutEdge(t),n.getFromNode().addOutEdge(n)}},{key:"getDirEdge",value:function(){if(Number.isInteger(arguments[0]))return this.su[arguments[0]];if(arguments[0]instanceof lr){var t=arguments[0];return this.su[0].getFromNode()===t?this.su[0]:this.su[1].getFromNode()===t?this.su[1]:null}}},{key:"remove",value:function(){this.su=null}},{key:"getOppositeNode",value:function(t){return this.su[0].getFromNode()===t?this.su[0].getToNode():this.su[1].getFromNode()===t?this.su[1].getToNode():null}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Cr.constructor_=function(){this.su=null,0===arguments.length||2===arguments.length&&this.setDirectedEdges(arguments[0],arguments[1])};var Ir=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getNextEdge",value:function(t){t=this.getIndex(t);return this.hu.get(this.getIndex(t+1))}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"iterator",value:function(){return this.sortEdges(),this.hu.iterator()}},{key:"sortEdges",value:function(){this.gu||(Pn.sort(this.hu),this.gu=!0)}},{key:"remove",value:function(t){this.hu.remove(t)}},{key:"getEdges",value:function(){return this.sortEdges(),this.hu}},{key:"getNextCWEdge",value:function(t){t=this.getIndex(t);return this.hu.get(this.getIndex(t-1))}},{key:"getIndex",value:function(){if(arguments[0]instanceof Cr){var t=arguments[0];this.sortEdges();for(var n=0;n<this.hu.size();n++)if(this.hu.get(n).getEdge()===t)return n;return-1}if(arguments[0]instanceof ar){var i=arguments[0];for(this.sortEdges(),n=0;n<this.hu.size();n++)if(this.hu.get(n)===i)return n;return-1}if(Number.isInteger(arguments[0])){var e=arguments[0]%this.hu.size();return e<0&&(e+=this.hu.size()),e}}},{key:"add",value:function(t){this.hu.add(t),this.gu=!1}},{key:"getDegree",value:function(){return this.hu.size()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ir.constructor_=function(){this.hu=new S,this.gu=!1};var lr=function(){is(i,or);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"isRemoved",value:function(){return null===this.Ct}},{key:"addOutEdge",value:function(t){this.ou.add(t)}},{key:"getCoordinate",value:function(){return this.Ct}},{key:"getOutEdges",value:function(){return this.ou}},{key:"remove",value:function(){0===arguments.length?this.Ct=null:1===arguments.length&&this.ou.remove(arguments[0])}},{key:"getIndex",value:function(t){return this.ou.getIndex(t)}},{key:"getDegree",value:function(){return this.ou.getDegree()}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"getEdgesBetween",value:function(t,n){t=new ut(ar.toEdges(t.getOutEdges().getEdges())),n=ar.toEdges(n.getOutEdges().getEdges());return t.retainAll(n),t}}]),i}();lr.constructor_=function(){var t,n;this.Ct=null,this.ou=null,1===arguments.length?lr.constructor_.call(this,arguments[0],new Ir):2===arguments.length&&(t=arguments[0],n=arguments[1],this.Ct=t,this.ou=n)};var fr=function(){is(i,Cr);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getLine",value:function(){return this.au}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();fr.constructor_=function(){this.au=null,this.au=arguments[0]};var cr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"find",value:function(t){return this.ii.get(t)}},{key:"iterator",value:function(){return this.ii.values().iterator()}},{key:"remove",value:function(t){return this.ii.remove(t)}},{key:"values",value:function(){return this.ii.values()}},{key:"add",value:function(t){return this.ii.put(t.getCoordinate(),t),t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();cr.constructor_=function(){this.ii=new Ct};var vr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"findNodesOfDegree",value:function(t){for(var n=new S,i=this.nodeIterator();i.hasNext();){var e=i.next();e.getDegree()===t&&n.add(e)}return n}},{key:"dirEdgeIterator",value:function(){return this.Au.iterator()}},{key:"edgeIterator",value:function(){return this.Ii.iterator()}},{key:"remove",value:function(){if(arguments[0]instanceof Cr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.Ii.remove(t),t.remove()}else if(arguments[0]instanceof ar){var n=arguments[0];null!==(e=n.getSym())&&e.setSym(null),n.getFromNode().remove(n),n.remove(),this.Au.remove(n)}else if(arguments[0]instanceof lr){for(var n=arguments[0],i=n.getOutEdges().getEdges().iterator();i.hasNext();){var e,r=i.next();null!==(e=r.getSym())&&this.remove(e),this.Au.remove(r);r=r.getEdge();null!==r&&this.Ii.remove(r)}this.ii.remove(n.getCoordinate()),n.remove()}}},{key:"findNode",value:function(t){return this.ii.find(t)}},{key:"getEdges",value:function(){return this.Ii}},{key:"nodeIterator",value:function(){return this.ii.iterator()}},{key:"contains",value:function(){return arguments[0]instanceof Cr?this.Ii.contains(arguments[0]):arguments[0]instanceof ar?this.Au.contains(arguments[0]):void 0}},{key:"add",value:function(){var t;arguments[0]instanceof lr?this.ii.add(arguments[0]):arguments[0]instanceof Cr?(this.Ii.add(t=arguments[0]),this.add(t.getDirEdge(0)),this.add(t.getDirEdge(1))):arguments[0]instanceof ar&&this.Au.add(arguments[0])}},{key:"getNodes",value:function(){return this.ii.values()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();vr.constructor_=function(){this.Ii=new ut,this.Au=new ut,this.ii=new cr};var yr=function(){is(i,vr);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"addEdge",value:function(t){if(t.isEmpty())return null;var n=$.removeRepeatedPoints(t.getCoordinates());if(n.length<=1)return null;var i=n[0],e=n[n.length-1],r=this.getNode(i),i=this.getNode(e),e=new Ar(r,i,n[1],!0),n=new Ar(i,r,n[n.length-2],!1),t=new fr(t);t.setDirectedEdges(e,n),this.add(t)}},{key:"getNode",value:function(t){var n=this.findNode(t);return null===n&&(n=new lr(t),this.add(n)),n}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();yr.constructor_=function(){};q=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"buildEdgeStringsForUnprocessedNodes",value:function(){for(var t=this.Ln.getNodes().iterator();t.hasNext();){var n=t.next();n.isMarked()||(y.isTrue(2===n.getDegree()),this.buildEdgeStringsStartingAt(n),n.setMarked(!0))}}},{key:"buildEdgeStringsForNonDegree2Nodes",value:function(){for(var t=this.Ln.getNodes().iterator();t.hasNext();){var n=t.next();2!==n.getDegree()&&(this.buildEdgeStringsStartingAt(n),n.setMarked(!0))}}},{key:"buildEdgeStringsForObviousStartNodes",value:function(){this.buildEdgeStringsForNonDegree2Nodes()}},{key:"getMergedLineStrings",value:function(){return this.merge(),this.Cu}},{key:"buildEdgeStringsStartingAt",value:function(t){for(var n=t.getOutEdges().iterator();n.hasNext();){var i=n.next();i.getEdge().isMarked()||this.Iu.add(this.buildEdgeStringStartingWith(i))}}},{key:"merge",value:function(){if(null!==this.Cu)return null;or.setMarked(this.Ln.nodeIterator(),!1),or.setMarked(this.Ln.edgeIterator(),!1),this.Iu=new S,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.Cu=new S;for(var t=this.Iu.iterator();t.hasNext();){var n=t.next();this.Cu.add(n.toLineString())}}},{key:"buildEdgeStringStartingWith",value:function(t){for(var n=new gr(this.k),i=t;n.add(i),i.getEdge().setMarked(!0),null!==(i=i.getNext())&&i!==t;);return n}},{key:"add",value:function(){if(arguments[0]instanceof X)arguments[0].apply(new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[W]}},{key:"filter",value:function(t){t instanceof Lt&&this.add(t)}}]),t}()));else if(d(arguments[0],m)){var t=arguments[0];this.Cu=null;for(var n=t.iterator();n.hasNext();){var i=n.next();this.add(i)}}else arguments[0]instanceof Lt&&(t=arguments[0],null===this.k&&(this.k=t.getFactory()),this.Ln.addEdge(t))}},{key:"buildEdgeStringsForIsolatedLoops",value:function(){this.buildEdgeStringsForUnprocessedNodes()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();q.constructor_=function(){this.Ln=new yr,this.Cu=null,this.k=null,this.Iu=null};var tt=Object.freeze({LineMerger:q}),kr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getCoordinates",value:function(){return this.he}},{key:"size",value:function(){return this.he.length}},{key:"getCoordinate",value:function(t){return this.he[t]}},{key:"isClosed",value:function(){return this.he[0].equals(this.he[this.he.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this.he.length-1?-1:Ce.octant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this.Bi=t}},{key:"getData",value:function(){return this.Bi}},{key:"toString",value:function(){return Cn.toLineString(new Qt(this.he))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ie]}}]),t}();kr.constructor_=function(){this.he=null,this.Bi=null;var t=arguments[0],n=arguments[1];this.he=t,this.Bi=n};var dr=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"getInteriorIntersection",value:function(){return this.lu}},{key:"setCheckEndSegmentsOnly",value:function(t){this.fu=t}},{key:"getIntersectionSegments",value:function(){return this.cu}},{key:"count",value:function(){return this.vu}},{key:"getIntersections",value:function(){return this.yu}},{key:"setFindAllIntersections",value:function(t){this.ku=t}},{key:"setKeepIntersections",value:function(t){this.du=t}},{key:"processIntersections",value:function(t,n,i,e){if(!this.ku&&this.hasIntersection())return null;if(t===i&&n===e)return null;if(this.fu&&!this.isEndSegment(t,n)&&!this.isEndSegment(i,e))return null;var r=t.getCoordinates()[n],t=t.getCoordinates()[n+1],n=i.getCoordinates()[e],e=i.getCoordinates()[e+1];this.Un.computeIntersection(r,t,n,e),this.Un.hasIntersection()&&this.Un.isInteriorIntersection()&&(this.cu=new Array(4).fill(null),this.cu[0]=r,this.cu[1]=t,this.cu[2]=n,this.cu[3]=e,this.lu=this.Un.getIntersection(0),this.du&&this.yu.add(this.lu),this.vu++)}},{key:"isEndSegment",value:function(t,n){return 0===n||n>=t.size()-2}},{key:"hasIntersection",value:function(){return null!==this.lu}},{key:"isDone",value:function(){return!this.ku&&null!==this.lu}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[Xe]}}],[{key:"createAllIntersectionsFinder",value:function(t){t=new n(t);return t.setFindAllIntersections(!0),t}},{key:"createAnyIntersectionFinder",value:function(t){return new n(t)}},{key:"createIntersectionCounter",value:function(t){t=new n(t);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t}}]),n}();dr.constructor_=function(){this.ku=!1,this.fu=!1,this.Un=null,this.lu=null,this.cu=null,this.yu=new S,this.vu=0,this.du=!0,this.Un=arguments[0],this.lu=null};var wr=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"execute",value:function(){if(null!==this.ve)return null;this.checkInteriorIntersections()}},{key:"getIntersections",value:function(){return this.ve.getIntersections()}},{key:"isValid",value:function(){return this.execute(),this.wu}},{key:"setFindAllIntersections",value:function(t){this.ku=t}},{key:"checkInteriorIntersections",value:function(){this.wu=!0,this.ve=new dr(this.Un),this.ve.setFindAllIntersections(this.ku);var t=new we;if(t.setSegmentIntersector(this.ve),t.computeNodes(this.Pr),this.ve.hasIntersection())return this.wu=!1,null}},{key:"checkValid",value:function(){if(this.execute(),!this.wu)throw new Ni(this.getErrorMessage(),this.ve.getInteriorIntersection())}},{key:"getErrorMessage",value:function(){if(this.wu)return"no intersections found";var t=this.ve.getIntersectionSegments();return"found non-noded intersection between "+Cn.toLineString(t[0],t[1])+" and "+Cn.toLineString(t[2],t[3])}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeIntersections",value:function(t){t=new n(t);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()}}]),n}();wr.constructor_=function(){this.Un=new ln,this.Pr=null,this.ku=!1,this.ve=null,this.wu=!0,this.Pr=arguments[0]};var mr=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"checkValid",value:function(){this.mu.checkValid()}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"toSegmentStrings",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();){var e=i.next();n.add(new kr(e.getCoordinates(),e))}return n}},{key:"checkValid",value:function(t){new n(t).checkValid()}}]),n}();mr.constructor_=function(){this.mu=null,this.mu=new wr(mr.toSegmentStrings(arguments[0]))};var pr=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"map",value:function(t){for(var n=new S,i=0;i<t.getNumGeometries();i++){var e=this.pu.map(t.getGeometryN(i));e.isEmpty()||n.add(e)}return t.getFactory().createGeometryCollection(hn.toGeometryArray(n))}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"map",value:function(t,n){return new i(n).map(t)}}]),i}();pr.constructor_=function(){this.pu=null,this.pu=arguments[0]};var Mr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"collectLines",value:function(t){for(var n=this.Mu.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();this.collectLineEdge(i,t,this.bu),this.collectBoundaryTouchEdge(i,t,this.bu)}}},{key:"labelIsolatedLine",value:function(t,n){var i=this._i.locate(t.getCoordinate(),this.Mu.getArgGeometry(n));t.getLabel().setLocation(n,i)}},{key:"build",value:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.Eu}},{key:"collectLineEdge",value:function(t,n,i){var e=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!_r.isResultOfOp(e,n)||r.isCovered()||(i.add(r),t.setVisitedEdge(!0)))}},{key:"findCoveredLineEdges",value:function(){for(var t=this.Mu.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var n=this.Mu.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next(),e=i.getEdge();i.isLineEdge()&&!e.isCoveredSet()&&(i=this.Mu.isCoveredByA(i.getCoordinate()),e.setCovered(i))}}},{key:"labelIsolatedLines",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next(),e=i.getLabel();i.isIsolated()&&(e.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}}},{key:"buildLines",value:function(t){for(var n=this.bu.iterator();n.hasNext();){var i=n.next(),e=(i.getLabel(),this.Ue.createLineString(i.getCoordinates()));this.Eu.add(e),i.setInResult(!0)}}},{key:"collectBoundaryTouchEdge",value:function(t,n,i){var e=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(y.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(_r.isResultOfOp(e,n)&&n===_r.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Mr.constructor_=function(){this.Mu=null,this.Ue=null,this._i=null,this.bu=new S,this.Eu=new S;var t=arguments[0],n=arguments[1],i=arguments[2];this.Mu=t,this.Ue=n,this._i=i};var br=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filterCoveredNodeToPoint",value:function(t){t=t.getCoordinate();this.Mu.isCoveredByLA(t)||(t=this.Ue.createPoint(t),this.Su.add(t))}},{key:"extractNonCoveredResultNodes",value:function(t){for(var n=this.Mu.getGraph().getNodes().iterator();n.hasNext();){var i,e=n.next();e.isInResult()||e.isIncidentEdgeInResult()||0!==e.getEdges().getDegree()&&t!==_r.INTERSECTION||(i=e.getLabel(),_r.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(e))}}},{key:"build",value:function(t){return this.extractNonCoveredResultNodes(t),this.Su}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();br.constructor_=function(){this.Mu=null,this.Ue=null,this.Su=new S;var t=arguments[0],n=arguments[1];this.Mu=t,this.Ue=n};var Er=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"snapVertices",value:function(t,n){for(var i=this.xu?t.size()-1:t.size(),e=0;e<i;e++){var r=t.get(e),r=this.findSnapForVertex(r,n);null!==r&&(t.set(e,new k(r)),0===e&&this.xu&&t.set(t.size()-1,new k(r)))}}},{key:"findSnapForVertex",value:function(t,n){for(var i=0;i<n.length;i++){if(t.equals2D(n[i]))return null;if(t.distance(n[i])<this.Ru)return n[i]}return null}},{key:"snapTo",value:function(t){var n=new R(this.Tu);return this.snapVertices(n,t),this.snapSegments(n,t),n.toCoordinateArray()}},{key:"snapSegments",value:function(t,n){if(0===n.length)return null;var i=n.length;n[0].equals2D(n[n.length-1])&&(i=n.length-1);for(var e=0;e<i;e++){var r=n[e],u=this.findSegmentIndexToSnap(r,t);0<=u&&t.add(u+1,new k(r),!1)}}},{key:"findSegmentIndexToSnap",value:function(t,n){for(var i=c.MAX_VALUE,e=-1,r=0;r<n.size()-1;r++){if(this.cr.p0=n.get(r),this.cr.p1=n.get(r+1),this.cr.p0.equals2D(t)||this.cr.p1.equals2D(t)){if(this.Nu)continue;return-1}var u=this.cr.distance(t);u<this.Ru&&u<i&&(i=u,e=r)}return e}},{key:"setAllowSnappingToSourceVertices",value:function(t){this.Nu=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isClosed",value:function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}}]),t}();Er.constructor_=function(){var t,n;this.Ru=0,this.Tu=null,this.cr=new fn,this.Nu=!1,this.xu=!1,arguments[0]instanceof Lt&&"number"==typeof arguments[1]?(t=arguments[0],n=arguments[1],Er.constructor_.call(this,t.getCoordinates(),n)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(t=arguments[0],n=arguments[1],this.Tu=t,this.xu=Er.isClosed(t),this.Ru=n)};var Sr=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"snapTo",value:function(t,n){t=this.extractTargetCoordinates(t);return new xr(n,t).transform(this.Pu)}},{key:"snapToSelf",value:function(t,n){var i=this.extractTargetCoordinates(this.Pu),t=new xr(t,i,!0).transform(this.Pu),i=t;return i=n&&d(t,Gt)?t.buffer(0):i}},{key:"computeSnapTolerance",value:function(t){return this.computeMinimumSegmentLength(t)/10}},{key:"extractTargetCoordinates",value:function(t){for(var n=new ft,i=t.getCoordinates(),e=0;e<i.length;e++)n.add(i[e]);return n.toArray(new Array(0).fill(null))}},{key:"computeMinimumSegmentLength",value:function(t){for(var n=c.MAX_VALUE,i=0;i<t.length-1;i++){var e=t[i].distance(t[i+1]);e<n&&(n=e)}return n}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"snap",value:function(t,n,i){var e=new Array(2).fill(null),t=new r(t);e[0]=t.snapTo(n,i);n=new r(n);return e[1]=n.snapTo(e[0],i),e}},{key:"computeOverlaySnapTolerance",value:function(){if(1===arguments.length){var t=arguments[0],n=r.computeSizeBasedSnapTolerance(t),t=t.getPrecisionModel();return t.getType()!==un.FIXED||n<(i=1/t.getScale()*2/1.415)&&(n=i),n}if(2===arguments.length){var i=arguments[0],n=arguments[1];return Math.min(r.computeOverlaySnapTolerance(i),r.computeOverlaySnapTolerance(n))}}},{key:"computeSizeBasedSnapTolerance",value:function(t){t=t.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*r.SNAP_PRECISION_FACTOR}},{key:"snapToSelf",value:function(t,n,i){return new r(t).snapToSelf(n,i)}}]),r}();Sr.constructor_=function(){this.Pu=null,this.Pu=arguments[0]},Sr.SNAP_PRECISION_FACTOR=1e-9;var xr=function(){is(i,ei);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"snapLine",value:function(t,n){t=new Er(t,this.Ru);return t.setAllowSnappingToSourceVertices(this.Ou),t.snapTo(n)}},{key:"transformCoordinates",value:function(t,n){t=t.toCoordinateArray(),t=this.snapLine(t,this.Lu);return this.k.getCoordinateSequenceFactory().create(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();xr.constructor_=function(){var t,n,i;this.Ru=null,this.Lu=null,this.Ou=!1,2===arguments.length?(n=arguments[0],i=arguments[1],this.Ru=n,this.Lu=i):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],this.Ru=t,this.Lu=n,this.Ou=i)};var Rr=function(){function r(){hs(this,r),this.Du=!0,this._u=53,this.Fu=new f,this.Gu=null}return gs(r,[{key:"getCommon",value:function(){return c.longBitsToDouble(this.Fu)}},{key:"add",value:function(t){t=c.doubleToLongBits(t);return this.Du?(this.Fu=t,this.Gu=r.signExpBits(this.Fu),this.Du=!1,null):r.signExpBits(t)!==this.Gu?(this.Fu.high=0,this.Fu.low=0,null):(this._u=r.numCommonMostSigMantissaBits(this.Fu,t),void(this.Fu=r.zeroLowerBits(this.Fu,64-(12+this._u))))}},{key:"toString",value:function(){if(1===arguments.length){var t=arguments[0],n=c.longBitsToDouble(t),t="0000000000000000000000000000000000000000000000000000000000000000"+f.toBinaryString(t),t=t.substring(t.length-64);return t.substring(0,1)+"  "+t.substring(1,12)+"(exp) "+t.substring(12)+" [ "+n+" ]"}}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBit",value:function(t,n){var i=1<<n%32;return n<32?0!=(t.low&i)?1:0:0!=(t.high&i)?1:0}},{key:"signExpBits",value:function(t){return t.high>>>20}},{key:"zeroLowerBits",value:function(t,n){var i="low";return 32<n&&(t.low=0,n%=32,i="high"),0<n&&(t[i]&=n<32?~((1<<n)-1):0),t}},{key:"numCommonMostSigMantissaBits",value:function(t,n){for(var i=0,e=52;0<=e;e--){if(r.getBit(t,e)!==r.getBit(n,e))return i;i++}return 52}}]),r}(),Tr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"addCommonBits",value:function(t){var n=new Pr(this.ju);t.apply(n),t.geometryChanged()}},{key:"removeCommonBits",value:function(t){if(0===this.ju.x&&0===this.ju.y)return t;var n=new k(this.ju);n.x=-n.x,n.y=-n.y;n=new Pr(n);return t.apply(n),t.geometryChanged(),t}},{key:"getCommonCoordinate",value:function(){return this.ju}},{key:"add",value:function(t){t.apply(this.Bu),this.ju=this.Bu.getCommonCoordinate()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),Nr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t){this.Zu.add(t.x),this.Vu.add(t.y)}},{key:"getCommonCoordinate",value:function(){return new k(this.Zu.getCommon(),this.Vu.getCommon())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[z]}}]),t}();Nr.constructor_=function(){this.Zu=new Rr,this.Vu=new Rr};var Pr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t,n){var i=t.getOrdinate(n,0)+this.trans.x,e=t.getOrdinate(n,1)+this.trans.y;t.setOrdinate(n,0,i),t.setOrdinate(n,1,e)}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[wt]}}]),t}();Pr.constructor_=function(){this.trans=null,this.trans=arguments[0]},Tr.CommonCoordinateFilter=Nr,Tr.Translater=Pr,Tr.constructor_=function(){this.ju=null,this.Bu=new Nr};var Or=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"selfSnap",value:function(t){return new Sr(t).snapTo(t,this.Ru)}},{key:"removeCommonBits",value:function(t){this.Yu=new Tr,this.Yu.add(t[0]),this.Yu.add(t[1]);var n=new Array(2).fill(null);return n[0]=this.Yu.removeCommonBits(t[0].copy()),n[1]=this.Yu.removeCommonBits(t[1].copy()),n}},{key:"prepareResult",value:function(t){return this.Yu.addCommonBits(t),t}},{key:"getResultGeometry",value:function(t){var n=this.snap(this.O),t=_r.overlayOp(n[0],n[1],t);return this.prepareResult(t)}},{key:"checkValid",value:function(t){t.isValid()||j.out.println("Snapped geometry is invalid")}},{key:"computeSnapTolerance",value:function(){this.Ru=Sr.computeOverlaySnapTolerance(this.O[0],this.O[1])}},{key:"snap",value:function(t){t=this.removeCommonBits(t);return Sr.snap(t[0],t[1],this.Ru)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,i){return new e(t,n).getResultGeometry(i)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,_r.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,_r.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,_r.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,_r.DIFFERENCE)}}]),e}();Or.constructor_=function(){this.O=new Array(2).fill(null),this.Ru=null,this.Yu=null;var t=arguments[0],n=arguments[1];this.O[0]=t,this.O[1]=n,this.computeSnapTolerance()};var Lr=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getResultGeometry",value:function(t){var n=null,i=!1,e=null;try{n=_r.overlayOp(this.O[0],this.O[1],t),i=!0}catch(t){if(!(t instanceof v))throw t;e=t}if(!i)try{n=Or.overlayOp(this.O[0],this.O[1],t)}catch(t){throw t instanceof v?e:t}return n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,i){return new e(t,n).getResultGeometry(i)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,_r.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,_r.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,_r.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,_r.DIFFERENCE)}}]),e}();Lr.constructor_=function(){this.O=new Array(2).fill(null);var t=arguments[0],n=arguments[1];this.O[0]=t,this.O[1]=n};var Dr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getArgGeometry",value:function(t){return this.Uu[t].getGeometry()}},{key:"setComputationPrecision",value:function(t){this.Wu=t,this.Un.setPrecisionModel(this.Wu)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Dr.constructor_=function(){var t,n,i;this.Un=new ln,this.Wu=null,this.Uu=null,1===arguments.length?(this.setComputationPrecision((i=arguments[0]).getPrecisionModel()),this.Uu=new Array(1).fill(null),this.Uu[0]=new Di(0,i)):2===arguments.length?Dr.constructor_.call(this,arguments[0],arguments[1],Q.OGC_SFS_BOUNDARY_RULE):3===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],0<=t.getPrecisionModel().compareTo(n.getPrecisionModel())?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this.Uu=new Array(2).fill(null),this.Uu[0]=new Di(0,t,i),this.Uu[1]=new Di(1,n,i))};var _r=function(){is(s,Dr);var n=es(s);function s(){var t;return hs(this,s),t=n.call(this),s.constructor_.apply(us(t),arguments),t}return gs(s,[{key:"insertUniqueEdge",value:function(t){var n,i,e=this.wr.findEqualEdge(t);null!==e?(n=e.getLabel(),i=t.getLabel(),e.isPointwiseEqual(t)||(i=new di(t.getLabel())).flip(),(e=e.getDepth()).isNull()&&e.add(n),e.add(i),n.merge(i)):this.wr.add(t)}},{key:"getGraph",value:function(){return this.Ln}},{key:"cancelDuplicateResultEdges",value:function(){for(var t=this.Ln.getEdgeEnds().iterator();t.hasNext();){var n=t.next(),i=n.getSym();n.isInResult()&&i.isInResult()&&(n.setInResult(!1),i.setInResult(!1))}}},{key:"isCoveredByLA",value:function(t){return!!this.isCovered(t,this.Eu)||!!this.isCovered(t,this.Xu)}},{key:"computeGeometry",value:function(t,n,i,e){var r=new S;return r.addAll(t),r.addAll(n),r.addAll(i),r.isEmpty()?s.createEmptyResult(e,this.Uu[0].getGeometry(),this.Uu[1].getGeometry(),this.D):this.D.buildGeometry(r)}},{key:"mergeSymLabels",value:function(){for(var t=this.Ln.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()}},{key:"isCovered",value:function(t,n){for(var i=n.iterator();i.hasNext();){var e=i.next();if(this._i.locate(t,e)!==cn.EXTERIOR)return!0}return!1}},{key:"replaceCollapsedEdges",value:function(){for(var t=new S,n=this.wr.iterator();n.hasNext();){var i=n.next();i.isCollapsed()&&(n.remove(),t.add(i.getCollapsedEdge()))}this.wr.addAll(t)}},{key:"updateNodeLabelling",value:function(){for(var t=this.Ln.getNodes().iterator();t.hasNext();){var n=t.next(),i=n.getEdges().getLabel();n.getLabel().merge(i)}}},{key:"getResultGeometry",value:function(t){return this.computeOverlay(t),this.zu}},{key:"insertUniqueEdges",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();this.insertUniqueEdge(i)}}},{key:"computeOverlay",value:function(t){this.copyPoints(0),this.copyPoints(1),this.Uu[0].computeSelfNodes(this.Un,!1),this.Uu[1].computeSelfNodes(this.Un,!1),this.Uu[0].computeEdgeIntersections(this.Uu[1],this.Un,!0);var n=new S;this.Uu[0].computeSplitEdges(n),this.Uu[1].computeSplitEdges(n),this.insertUniqueEdges(n),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),mr.checkValid(this.wr.getEdges()),this.Ln.addEdges(this.wr.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();n=new Oe(this.D);n.add(this.Ln),this.Xu=n.getPolygons();n=new Mr(this,this.D,this._i);this.Eu=n.build(t);n=new br(this,this.D,this._i);this.Su=n.build(t),this.zu=this.computeGeometry(this.Su,this.Eu,this.Xu,t)}},{key:"labelIncompleteNode",value:function(t,n){var i=this._i.locate(t.getCoordinate(),this.Uu[n].getGeometry());t.getLabel().setLocation(n,i)}},{key:"copyPoints",value:function(t){for(var n=this.Uu[t].getNodeIterator();n.hasNext();){var i=n.next();this.Ln.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}}},{key:"findResultAreaEdges",value:function(t){for(var n=this.Ln.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),e=i.getLabel();e.isArea()&&!i.isInteriorAreaEdge()&&s.isResultOfOp(e.getLocation(0,Ii.RIGHT),e.getLocation(1,Ii.RIGHT),t)&&i.setInResult(!0)}}},{key:"computeLabelsFromDepths",value:function(){for(var t=this.wr.iterator();t.hasNext();){var n=t.next(),i=n.getLabel(),e=n.getDepth();if(!e.isNull()){e.normalize();for(var r=0;r<2;r++)i.isNull(r)||!i.isArea()||e.isNull(r)||(0===e.getDelta(r)?i.toLine(r):(y.isTrue(!e.isNull(r,Ii.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(r,Ii.LEFT,e.getLocation(r,Ii.LEFT)),y.isTrue(!e.isNull(r,Ii.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(r,Ii.RIGHT,e.getLocation(r,Ii.RIGHT))))}}}},{key:"computeLabelling",value:function(){for(var t=this.Ln.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this.Uu);this.mergeSymLabels(),this.updateNodeLabelling()}},{key:"labelIncompleteNodes",value:function(){for(var t=this.Ln.getNodes().iterator();t.hasNext();){var n=t.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i)}}},{key:"isCoveredByA",value:function(t){return!!this.isCovered(t,this.Xu)}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,i){return new s(t,n).getResultGeometry(i)}},{key:"union",value:function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return s.createEmptyResult(s.UNION,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}if(t.isGeometryCollection()||n.isGeometryCollection())throw new l("This method does not support GeometryCollection arguments");return Lr.overlayOp(t,n,s.UNION)}},{key:"intersection",value:function(t,n){if(t.isEmpty()||n.isEmpty())return s.createEmptyResult(s.INTERSECTION,t,n,t.getFactory());if(t.isGeometryCollection()){var i=n;return pr.map(t,new(function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[MapOp]}},{key:"map",value:function(t){return t.intersection(i)}}]),t}()))}if(t.isGeometryCollection()||n.isGeometryCollection())throw new l("This method does not support GeometryCollection arguments");return Lr.overlayOp(t,n,s.INTERSECTION)}},{key:"symDifference",value:function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return s.createEmptyResult(s.SYMDIFFERENCE,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}if(t.isGeometryCollection()||n.isGeometryCollection())throw new l("This method does not support GeometryCollection arguments");return Lr.overlayOp(t,n,s.SYMDIFFERENCE)}},{key:"resultDimension",value:function(t,n,i){var e=n.getDimension(),r=i.getDimension(),u=-1;switch(t){case s.INTERSECTION:u=Math.min(e,r);break;case s.UNION:u=Math.max(e,r);break;case s.DIFFERENCE:u=e;break;case s.SYMDIFFERENCE:u=Math.max(e,r)}return u}},{key:"createEmptyResult",value:function(t,n,i,e){var r=null;switch(s.resultDimension(t,n,i)){case-1:r=e.createGeometryCollection();break;case 0:r=e.createPoint();break;case 1:r=e.createLineString();break;case 2:r=e.createPolygon()}return r}},{key:"difference",value:function(t,n){if(t.isEmpty())return s.createEmptyResult(s.DIFFERENCE,t,n,t.getFactory());if(n.isEmpty())return t.copy();if(t.isGeometryCollection()||n.isGeometryCollection())throw new l("This method does not support GeometryCollection arguments");return Lr.overlayOp(t,n,s.DIFFERENCE)}},{key:"isResultOfOp",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1],i=t.getLocation(0),t=t.getLocation(1);return s.isResultOfOp(i,t,n)}if(3===arguments.length){var e=arguments[0],r=arguments[1];switch(e===cn.BOUNDARY&&(e=cn.INTERIOR),r===cn.BOUNDARY&&(r=cn.INTERIOR),arguments[2]){case s.INTERSECTION:return e===cn.INTERIOR&&r===cn.INTERIOR;case s.UNION:return e===cn.INTERIOR||r===cn.INTERIOR;case s.DIFFERENCE:return e===cn.INTERIOR&&r!==cn.INTERIOR;case s.SYMDIFFERENCE:return e===cn.INTERIOR&&r!==cn.INTERIOR||e!==cn.INTERIOR&&r===cn.INTERIOR}return!1}}}]),s}();_r.constructor_=function(){this._i=new Ci,this.D=null,this.zu=null,this.Ln=null,this.wr=new We,this.Xu=new S,this.Eu=new S,this.Su=new S;var t=arguments[0];Dr.constructor_.call(this,t,arguments[1]),this.Ln=new Li(new Ye),this.D=t.getFactory()},_r.INTERSECTION=1,_r.UNION=2,_r.DIFFERENCE=3,_r.SYMDIFFERENCE=4;var Xt=Object.freeze({OverlayOp:_r}),Fr=function(){is(i,ar);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getNext",value:function(){return this.xn}},{key:"isInRing",value:function(){return null!==this.Mi}},{key:"setRing",value:function(t){this.Mi=t}},{key:"setLabel",value:function(t){this.Yn=t}},{key:"getLabel",value:function(){return this.Yn}},{key:"setNext",value:function(t){this.xn=t}},{key:"getRing",value:function(){return this.Mi}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Fr.constructor_=function(){this.Mi=null,this.xn=null,this.Yn=-1,ar.constructor_.call(this,arguments[0],arguments[1],arguments[2],arguments[3])};var Gr=function(){is(i,Cr);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getLine",value:function(){return this.au}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Gr.constructor_=function(){this.au=null,this.au=arguments[0]};var jr=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"isIncluded",value:function(){return this.Qu}},{key:"getCoordinates",value:function(){if(null===this.Ku){for(var t=new R,n=this.Hu.iterator();n.hasNext();){var i=n.next(),e=i.getEdge();r.addEdge(e.getLine().getCoordinates(),i.getEdgeDirection(),t)}this.Ku=t.toCoordinateArray()}return this.Ku}},{key:"isIncludedSet",value:function(){return this.Ju}},{key:"isValid",value:function(){return this.getCoordinates(),!(this.Ku.length<=3)&&(this.getRing(),this.Ye.isValid())}},{key:"build",value:function(t){for(var n=t;this.add(n),n.setRing(this),n=n.getNext(),y.isTrue(null!==n,"found null DE in ring"),y.isTrue(n===t||!n.isInRing(),"found DE already in ring"),n!==t;);}},{key:"isOuterHole",value:function(){return!!this.We&&!this.hasShell()}},{key:"getPolygon",value:function(){var t=null;if(null!==this.V)for(var t=new Array(this.V.size()).fill(null),n=0;n<this.V.size();n++)t[n]=this.V.get(n);return this.k.createPolygon(this.Ye,t)}},{key:"isHole",value:function(){return this.We}},{key:"isProcessed",value:function(){return this.qu}},{key:"addHole",value:function(){var t;arguments[0]instanceof Zt?(t=arguments[0],null===this.V&&(this.V=new S),this.V.add(t)):arguments[0]instanceof r&&((t=arguments[0]).setShell(this),t=t.getRing(),null===this.V&&(this.V=new S),this.V.add(t))}},{key:"setIncluded",value:function(t){this.Qu=t,this.Ju=!0}},{key:"getOuterHole",value:function(){if(this.isHole())return null;for(var t=0;t<this.Hu.size();t++){var n=this.Hu.get(t).getSym().getRing();if(n.isOuterHole())return n}return null}},{key:"computeHole",value:function(){var t=this.getRing();this.We=G.isCCW(t.getCoordinates())}},{key:"hasShell",value:function(){return null!==this.B}},{key:"isOuterShell",value:function(){return null!==this.getOuterHole()}},{key:"getLineString",value:function(){return this.getCoordinates(),this.k.createLineString(this.Ku)}},{key:"toString",value:function(){return Cn.toLineString(new Qt(this.getCoordinates()))}},{key:"getShell",value:function(){return this.isHole()?this.B:this}},{key:"add",value:function(t){this.Hu.add(t)}},{key:"getRing",value:function(){if(null!==this.Ye)return this.Ye;this.getCoordinates(),this.Ku.length<3&&j.out.println(this.Ku);try{this.Ye=this.k.createLinearRing(this.Ku)}catch(t){if(!(t instanceof N))throw t;j.out.println(this.Ku)}return this.Ye}},{key:"updateIncluded",value:function(){if(this.isHole())return null;for(var t=0;t<this.Hu.size();t++){var n=this.Hu.get(t).getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}}},{key:"setShell",value:function(t){this.B=t}},{key:"setProcessed",value:function(t){this.qu=t}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDirEdgesInRing",value:function(t){for(var n=t,i=new S;i.add(n),n=n.getNext(),y.isTrue(null!==n,"found null DE in ring"),y.isTrue(n===t||!n.isInRing(),"found DE already in ring"),n!==t;);return i}},{key:"addEdge",value:function(t,n,i){if(n)for(var e=0;e<t.length;e++)i.add(t[e],!1);else for(e=t.length-1;0<=e;e--)i.add(t[e],!1)}},{key:"findEdgeRingContaining",value:function(t,n){for(var i=t.getRing(),e=i.getEnvelopeInternal(),r=i.getCoordinateN(0),u=null,s=null,h=n.iterator();h.hasNext();){var g,o=h.next(),a=o.getRing(),A=a.getEnvelopeInternal();!A.equals(e)&&A.contains(e)&&(r=$.ptNotInList(i.getCoordinates(),a.getCoordinates()),g=!1,(g=Zn.isInRing(r,a.getCoordinates())?!0:g)&&(null===u||s.contains(A))&&(s=(u=o).getRing().getEnvelopeInternal()))}return u}}]),r}(),Bi=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"compare",value:function(t,n){return t.getRing().getEnvelope().compareTo(n.getRing().getEnvelope())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[n]}}]),t}();Bi.constructor_=function(){},jr.EnvelopeComparator=Bi,jr.constructor_=function(){this.k=null,this.Hu=new S,this.$u=null,this.Ye=null,this.Ku=null,this.V=null,this.B=null,this.We=null,this.qu=!1,this.Ju=!1,this.Qu=!1,this.k=arguments[0]};var Br=function(){is(h,vr);var n=es(h);function h(){var t;return hs(this,h),t=n.call(this),h.constructor_.apply(us(t),arguments),t}return gs(h,[{key:"findEdgeRing",value:function(t){var n=new jr(this.k);return n.build(t),n}},{key:"computeDepthParity",value:function(){if(0===arguments.length)return null}},{key:"computeNextCWEdges",value:function(){for(var t=this.nodeIterator();t.hasNext();){var n=t.next();h.computeNextCWEdges(n)}}},{key:"addEdge",value:function(t){if(t.isEmpty())return null;var n=$.removeRepeatedPoints(t.getCoordinates());if(n.length<2)return null;var i=n[0],e=n[n.length-1],r=this.getNode(i),i=this.getNode(e),e=new Fr(r,i,n[1],!0),n=new Fr(i,r,n[n.length-2],!1),t=new Gr(t);t.setDirectedEdges(e,n),this.add(t)}},{key:"deleteCutEdges",value:function(){this.computeNextCWEdges(),h.findLabeledEdgeRings(this.Au);for(var t=new S,n=this.Au.iterator();n.hasNext();){var i,e=n.next();e.isMarked()||(i=e.getSym(),e.getLabel()===i.getLabel()&&(e.setMarked(!0),i.setMarked(!0),e=e.getEdge(),t.add(e.getLine())))}return t}},{key:"getEdgeRings",value:function(){this.computeNextCWEdges(),h.label(this.Au,-1);var t=h.findLabeledEdgeRings(this.Au);this.convertMaximalToMinimalEdgeRings(t);for(var n=new S,i=this.Au.iterator();i.hasNext();){var e=i.next();e.isMarked()||e.isInRing()||(e=this.findEdgeRing(e),n.add(e))}return n}},{key:"getNode",value:function(t){var n=this.findNode(t);return null===n&&(n=new lr(t),this.add(n)),n}},{key:"convertMaximalToMinimalEdgeRings",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next(),e=i.getLabel(),i=h.findIntersectionNodes(i,e);if(null!==i)for(var r=i.iterator();r.hasNext();){var u=r.next();h.computeNextCCWEdges(u,e)}}}},{key:"deleteDangles",value:function(){for(var t=this.findNodesOfDegree(1),n=new ut,i=new Qn,e=t.iterator();e.hasNext();)i.push(e.next());for(;!i.isEmpty();){var r=i.pop();for(h.deleteAllEdges(r),e=r.getOutEdges().getEdges().iterator();e.hasNext();){var u=e.next();u.setMarked(!0);var s=u.getSym();null!==s&&s.setMarked(!0);s=u.getEdge();n.add(s.getLine());u=u.getToNode();1===h.getDegreeNonDeleted(u)&&i.push(u)}}return n}},{key:"getClass",value:function(){return h}},{key:"interfaces_",get:function(){return[]}}],[{key:"findLabeledEdgeRings",value:function(t){for(var n=new S,i=1,e=t.iterator();e.hasNext();){var r=e.next();r.isMarked()||0<=r.getLabel()||(n.add(r),r=jr.findDirEdgesInRing(r),h.label(r,i),i++)}return n}},{key:"getDegreeNonDeleted",value:function(t){for(var n=0,i=t.getOutEdges().getEdges().iterator();i.hasNext();)i.next().isMarked()||n++;return n}},{key:"deleteAllEdges",value:function(t){for(var n=t.getOutEdges().getEdges().iterator();n.hasNext();){var i=n.next();i.setMarked(!0);i=i.getSym();null!==i&&i.setMarked(!0)}}},{key:"label",value:function(t,n){for(var i=t.iterator();i.hasNext();)i.next().setLabel(n)}},{key:"computeNextCWEdges",value:function(t){for(var n=null,i=null,e=t.getOutEdges().getEdges().iterator();e.hasNext();){var r=e.next();r.isMarked()||(null===n&&(n=r),null!==i&&i.getSym().setNext(r),i=r)}null!==i&&i.getSym().setNext(n)}},{key:"computeNextCCWEdges",value:function(t,n){for(var i=null,e=null,r=t.getOutEdges().getEdges(),u=r.size()-1;0<=u;u--){var s=r.get(u),h=s.getSym(),g=null;s.getLabel()===n&&(g=s);s=null;h.getLabel()===n&&(s=h),null===g&&null===s||(null!==s&&(e=s),null!==g&&(null!==e&&(e.setNext(g),e=null),null===i&&(i=g)))}null!==e&&(y.isTrue(null!==i),e.setNext(i))}},{key:"getDegree",value:function(t,n){for(var i=0,e=t.getOutEdges().getEdges().iterator();e.hasNext();)e.next().getLabel()===n&&i++;return i}},{key:"findIntersectionNodes",value:function(t,n){var i=t,e=null;do{var r=i.getFromNode()}while(1<h.getDegree(r,n)&&(e=null===e?new S:e).add(r),i=i.getNext(),y.isTrue(null!==i,"found null DE in ring"),y.isTrue(i===t||!i.isInRing(),"found DE already in ring"),i!==t);return e}}]),h}();Br.constructor_=function(){this.k=null,this.k=arguments[0]};var Zr=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"getGeometry",value:function(){return null===this.qt&&(this.qt=new hn),this.polygonize(),this.ts?this.qt.buildGeometry(this.ns):this.qt.createGeometryCollection(hn.toGeometryArray(this.ns))}},{key:"getInvalidRingLines",value:function(){return this.polygonize(),this.es}},{key:"findValidRings",value:function(t,n,i){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isValid()?n.add(r):i.add(r.getLineString())}}},{key:"polygonize",value:function(){if(null!==this.ns)return null;if(this.ns=new S,null===this.Ln)return null;this.rs=this.Ln.deleteDangles(),this.us=this.Ln.deleteCutEdges();var t=this.Ln.getEdgeRings(),n=new S;this.es=new S,this.ss?this.findValidRings(t,n,this.es):n=t,this.findShellsAndHoles(n),r.assignHolesToShells(this.hs,this.Qe),Pn.sort(this.Qe,new jr.EnvelopeComparator);n=!0;this.ts&&(r.findDisjointShells(this.Qe),n=!1),this.ns=r.extractPolygons(this.Qe,n)}},{key:"getDangles",value:function(){return this.polygonize(),this.rs}},{key:"getCutEdges",value:function(){return this.polygonize(),this.us}},{key:"getPolygons",value:function(){return this.polygonize(),this.ns}},{key:"add",value:function(){var t;if(d(arguments[0],m))for(var n=arguments[0].iterator();n.hasNext();){var i=n.next();this.add(i)}else arguments[0]instanceof Lt?(this.qt=(t=arguments[0]).getFactory(),null===this.Ln&&(this.Ln=new Br(this.qt)),this.Ln.addEdge(t)):arguments[0]instanceof X&&arguments[0].apply(this.gs)}},{key:"setCheckRingsValid",value:function(t){this.ss=t}},{key:"findShellsAndHoles",value:function(t){this.hs=new S,this.Qe=new S;for(var n=t.iterator();n.hasNext();){var i=n.next();i.computeHole(),(i.isHole()?this.hs:this.Qe).add(i)}}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"findOuterShells",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next(),e=i.getOuterHole();null===e||e.isProcessed()||(i.setIncluded(!0),e.setProcessed(!0))}}},{key:"extractPolygons",value:function(t,n){for(var i=new S,e=t.iterator();e.hasNext();){var r=e.next();(n||r.isIncluded())&&i.add(r.getPolygon())}return i}},{key:"assignHolesToShells",value:function(t,n){for(var i=t.iterator();i.hasNext();){var e=i.next();r.assignHoleToShell(e,n)}}},{key:"assignHoleToShell",value:function(t,n){n=jr.findEdgeRingContaining(t,n);null!==n&&n.addHole(t)}},{key:"findDisjointShells",value:function(t){r.findOuterShells(t);var n=null;do{for(var n=!1,i=t.iterator();i.hasNext();){var e=i.next();e.isIncludedSet()||(e.updateIncluded(),e.isIncludedSet()||(n=!0))}}while(n)}}]),r}(),Vr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t){t instanceof Lt&&this.p.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[W]}}]),t}();Vr.constructor_=function(){this.p=null,this.p=arguments[0]},Zr.LineStringAdder=Vr,Zr.constructor_=function(){this.gs=new Vr(this),this.Ln=null,this.rs=new S,this.us=new S,this.es=new S,this.hs=null,this.Qe=null,this.ns=null,this.ss=!0,this.ts=null,this.qt=null,0===arguments.length?Zr.constructor_.call(this,!1):1===arguments.length&&(this.ts=arguments[0])};var qt=Object.freeze({Polygonizer:Zr}),Yr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"createEdgeEndForNext",value:function(t,n,i,e){var r=i.segmentIndex+1;if(r>=t.getNumPoints()&&null===e)return null;r=t.getCoordinate(r);null!==e&&e.segmentIndex===i.segmentIndex&&(r=e.coord);t=new Ti(t,i.coord,r,new di(t.getLabel()));n.add(t)}},{key:"createEdgeEndForPrev",value:function(t,n,i,e){var r=i.segmentIndex;if(0===i.dist){if(0===r)return null;r--}var u=t.getCoordinate(r);null!==e&&e.segmentIndex>=r&&(u=e.coord);e=new di(t.getLabel());e.flip();e=new Ti(t,i.coord,u,e);n.add(e)}},{key:"computeEdgeEnds",value:function(){if(1===arguments.length){for(var t=arguments[0],n=new S,i=t;i.hasNext();){var e=i.next();this.computeEdgeEnds(e,n)}return n}if(2===arguments.length){var r=arguments[0],u=arguments[1],t=r.getEdgeIntersectionList();t.addEndpoints();var s,h=t.iterator(),g=null;if(!h.hasNext())return null;for(var o=h.next();s=g,g=o,o=null,h.hasNext()&&(o=h.next()),null!==g&&(this.createEdgeEndForPrev(r,u,g,s),this.createEdgeEndForNext(r,u,g,o)),null!==g;);}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Yr.constructor_=function(){};var Ur=function(){is(i,Ti);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"insert",value:function(t){this.os.add(t)}},{key:"print",value:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.Yn);for(var n=this.iterator();n.hasNext();)n.next().print(t),t.println()}},{key:"iterator",value:function(){return this.os.iterator()}},{key:"getEdgeEnds",value:function(){return this.os}},{key:"computeLabelOn",value:function(t,n){for(var i=0,e=!1,r=this.iterator();r.hasNext();)(u=r.next().getLabel().getLocation(t))===cn.BOUNDARY&&i++,u===cn.INTERIOR&&(e=!0);var u=cn.NONE;e&&(u=cn.INTERIOR),0<i&&(u=Di.determineBoundary(n,i)),this.Yn.setLocation(t,u)}},{key:"computeLabelSide",value:function(t,n){for(var i=this.iterator();i.hasNext();){var e=i.next();if(e.getLabel().isArea()){e=e.getLabel().getLocation(t,n);if(e===cn.INTERIOR)return this.Yn.setLocation(t,n,cn.INTERIOR),null;e===cn.EXTERIOR&&this.Yn.setLocation(t,n,cn.EXTERIOR)}}}},{key:"getLabel",value:function(){return this.Yn}},{key:"computeLabelSides",value:function(t){this.computeLabelSide(t,Ii.LEFT),this.computeLabelSide(t,Ii.RIGHT)}},{key:"updateIM",value:function(t){Si.updateIM(this.Yn,t)}},{key:"computeLabel",value:function(t){for(var n=!1,i=this.iterator();i.hasNext();)i.next().getLabel().isArea()&&(n=!0);this.Yn=n?new di(cn.NONE,cn.NONE,cn.NONE):new di(cn.NONE);for(var e=0;e<2;e++)this.computeLabelOn(e,t),n&&this.computeLabelSides(e)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Ur.constructor_=function(){var t;this.os=new S,1===arguments.length?Ur.constructor_.call(this,null,arguments[0]):2===arguments.length&&(Ti.constructor_.call(this,(t=arguments[1]).getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new di(t.getLabel())),this.insert(t))};var Wr=function(){is(i,Ze);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"updateIM",value:function(t){for(var n=this.iterator();n.hasNext();)n.next().updateIM(t)}},{key:"insert",value:function(t){var n=this.mr.get(t);null===n?(n=new Ur(t),this.insertEdgeEnd(t,n)):n.insert(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Wr.constructor_=function(){};var Xr=function(){is(i,xi);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"updateIMFromEdges",value:function(t){this.Ii.updateIM(t)}},{key:"computeIM",value:function(t){t.setAtLeastIfValid(this.Yn.getLocation(0),this.Yn.getLocation(1),0)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Xr.constructor_=function(){xi.constructor_.call(this,arguments[0],arguments[1])};var zr=function(){is(i,Oi);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"createNode",value:function(t){return new Xr(t,new Wr)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();zr.constructor_=function(){};var Qr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"insertEdgeEnds",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();this.bi.add(i)}}},{key:"computeProperIntersectionIM",value:function(t,n){var i=this.Uu[0].getGeometry().getDimension(),e=this.Uu[1].getGeometry().getDimension(),r=t.hasProperIntersection(),t=t.hasProperInteriorIntersection();2===i&&2===e?r&&n.setAtLeast("212101212"):2===i&&1===e?(r&&n.setAtLeast("FFF0FFFF2"),t&&n.setAtLeast("1FFFFF1FF")):1===i&&2===e?(r&&n.setAtLeast("F0FFFFFF2"),t&&n.setAtLeast("1F1FFFFFF")):1===i&&1===e&&t&&n.setAtLeast("0FFFFFFFF")}},{key:"labelIsolatedEdges",value:function(t,n){for(var i=this.Uu[t].getEdgeIterator();i.hasNext();){var e=i.next();e.isIsolated()&&(this.labelIsolatedEdge(e,n,this.Uu[n].getGeometry()),this.as.add(e))}}},{key:"labelIsolatedEdge",value:function(t,n,i){0<i.getDimension()?(i=this._i.locate(t.getCoordinate(),i),t.getLabel().setAllLocations(n,i)):t.getLabel().setAllLocations(n,cn.EXTERIOR)}},{key:"computeIM",value:function(){var t=new vn;if(t.set(cn.EXTERIOR,cn.EXTERIOR,2),!this.Uu[0].getGeometry().getEnvelopeInternal().intersects(this.Uu[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.Uu[0].computeSelfNodes(this.Un,!1),this.Uu[1].computeSelfNodes(this.Un,!1);var n=this.Uu[0].computeEdgeIntersections(this.Uu[1],this.Un,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(n,t);var i=new Yr,n=i.computeEdgeEnds(this.Uu[0].getEdgeIterator());this.insertEdgeEnds(n);i=i.computeEdgeEnds(this.Uu[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}},{key:"labelNodeEdges",value:function(){for(var t=this.bi.iterator();t.hasNext();)t.next().getEdges().computeLabelling(this.Uu)}},{key:"copyNodesAndLabels",value:function(t){for(var n=this.Uu[t].getNodeIterator();n.hasNext();){var i=n.next();this.bi.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}}},{key:"labelIntersectionNodes",value:function(t){for(var n=this.Uu[t].getEdgeIterator();n.hasNext();)for(var i=n.next(),e=i.getLabel().getLocation(t),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var u=r.next(),u=this.bi.find(u.coord);u.getLabel().isNull(t)&&(e===cn.BOUNDARY?u.setLabelBoundary(t):u.setLabel(t,cn.INTERIOR))}}},{key:"labelIsolatedNode",value:function(t,n){var i=this._i.locate(t.getCoordinate(),this.Uu[n].getGeometry());t.getLabel().setAllLocations(n,i)}},{key:"computeIntersectionNodes",value:function(t){for(var n=this.Uu[t].getEdgeIterator();n.hasNext();)for(var i=n.next(),e=i.getLabel().getLocation(t),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var u=r.next(),u=this.bi.addNode(u.coord);e===cn.BOUNDARY?u.setLabelBoundary(t):u.getLabel().isNull(t)&&u.setLabel(t,cn.INTERIOR)}}},{key:"labelIsolatedNodes",value:function(){for(var t=this.bi.iterator();t.hasNext();){var n=t.next(),i=n.getLabel();y.isTrue(0<i.getGeometryCount(),"node with empty label found"),n.isIsolated()&&(i.isNull(0)?this.labelIsolatedNode(n,0):this.labelIsolatedNode(n,1))}}},{key:"updateIM",value:function(t){for(var n=this.as.iterator();n.hasNext();)n.next().updateIM(t);for(var i=this.bi.iterator();i.hasNext();){var e=i.next();e.updateIM(t),e.updateIMFromEdges(t)}}},{key:"computeDisjointIM",value:function(t){var n=this.Uu[0].getGeometry();n.isEmpty()||(t.set(cn.INTERIOR,cn.EXTERIOR,n.getDimension()),t.set(cn.BOUNDARY,cn.EXTERIOR,n.getBoundaryDimension()));n=this.Uu[1].getGeometry();n.isEmpty()||(t.set(cn.EXTERIOR,cn.INTERIOR,n.getDimension()),t.set(cn.EXTERIOR,cn.BOUNDARY,n.getBoundaryDimension()))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Qr.constructor_=function(){this.Un=new ln,this._i=new Ci,this.Uu=null,this.bi=new Ri(new zr),this.As=null,this.as=new S,this.Ni=null,this.Uu=arguments[0]};var Kr=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"isContainedInBoundary",value:function(t){if(t instanceof jt)return!1;if(t instanceof _t)return this.isPointContainedInBoundary(t);if(t instanceof Lt)return this.isLineStringContainedInBoundary(t);for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);if(!this.isContainedInBoundary(i))return!1}return!0}},{key:"isLineSegmentContainedInBoundary",value:function(t,n){if(t.equals(n))return this.isPointContainedInBoundary(t);if(t.x===n.x){if(t.x===this.Cs.getMinX()||t.x===this.Cs.getMaxX())return!0}else if(t.y===n.y&&(t.y===this.Cs.getMinY()||t.y===this.Cs.getMaxY()))return!0;return!1}},{key:"isLineStringContainedInBoundary",value:function(t){for(var n=t.getCoordinateSequence(),i=new k,e=new k,r=0;r<n.size()-1;r++)if(n.getCoordinate(r,i),n.getCoordinate(r+1,e),!this.isLineSegmentContainedInBoundary(i,e))return!1;return!0}},{key:"isPointContainedInBoundary",value:function(){if(arguments[0]instanceof _t){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof k){t=arguments[0];return t.x===this.Cs.getMinX()||t.x===this.Cs.getMaxX()||t.y===this.Cs.getMinY()||t.y===this.Cs.getMaxY()}}},{key:"contains",value:function(t){return!!this.Cs.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"contains",value:function(t,n){return new i(t).contains(n)}}]),i}();Kr.constructor_=function(){this.Cs=null;var t=arguments[0];this.Cs=t.getEnvelopeInternal()};var Hr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"intersects",value:function(t,n){var i=new T(t,n);if(!this.Cs.intersects(i))return!1;if(this.Cs.intersects(t))return!0;if(this.Cs.intersects(n))return!0;0<t.compareTo(n)&&(e=t,t=n,n=e);var e=!1;return(e=n.y>t.y?!0:e)?this.Un.computeIntersection(t,n,this.Is,this.ls):this.Un.computeIntersection(t,n,this.fs,this.cs),!!this.Un.hasIntersection()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Hr.constructor_=function(){this.Un=new ln,this.Cs=null,this.fs=null,this.cs=null,this.Is=null,this.ls=null;var t=arguments[0];this.Cs=t,this.fs=new k(t.getMinX(),t.getMinY()),this.cs=new k(t.getMaxX(),t.getMaxY()),this.Is=new k(t.getMinX(),t.getMaxY()),this.ls=new k(t.getMaxX(),t.getMinY())};var Jr=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"applyTo",value:function(t){for(var n=0;n<t.getNumGeometries()&&!this.Hn;n++){var i=t.getGeometryN(n);if(i instanceof mt)this.applyTo(i);else if(this.visit(i),this.isDone())return this.Hn=!0,null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Jr.constructor_=function(){this.Hn=!1};var qr=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"intersects",value:function(t){if(!this.Cs.intersects(t.getEnvelopeInternal()))return!1;var n=new $r(this.Cs);if(n.applyTo(t),n.intersects())return!0;n=new tu(this.vs);if(n.applyTo(t),n.containsPoint())return!0;n=new nu(this.vs);return n.applyTo(t),!!n.intersects()}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersects",value:function(t,n){return new i(t).intersects(n)}}]),i}();qr.constructor_=function(){this.vs=null,this.Cs=null;var t=arguments[0];this.vs=t,this.Cs=t.getEnvelopeInternal()};var $r=function(){is(i,Jr);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"isDone",value:function(){return!0===this.ys}},{key:"visit",value:function(t){t=t.getEnvelopeInternal();return this.Cs.intersects(t)?this.Cs.contains(t)||t.getMinX()>=this.Cs.getMinX()&&t.getMaxX()<=this.Cs.getMaxX()||t.getMinY()>=this.Cs.getMinY()&&t.getMaxY()<=this.Cs.getMaxY()?(this.ys=!0,null):void 0:null}},{key:"intersects",value:function(){return this.ys}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();$r.constructor_=function(){this.Cs=null,this.ys=!1,this.Cs=arguments[0]};var tu=function(){is(i,Jr);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"isDone",value:function(){return!0===this.ks}},{key:"visit",value:function(t){if(!(t instanceof jt))return null;var n=t.getEnvelopeInternal();if(!this.Cs.intersects(n))return null;for(var i=new k,e=0;e<4;e++)if(this.ds.getCoordinate(e,i),n.contains(i)&&Yn.containsPointInPolygon(i,t))return this.ks=!0,null}},{key:"containsPoint",value:function(){return this.ks}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();tu.constructor_=function(){this.ds=null,this.Cs=null,this.ks=!1;var t=arguments[0];this.ds=t.getExteriorRing().getCoordinateSequence(),this.Cs=t.getEnvelopeInternal()};var nu=function(){is(i,Jr);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"intersects",value:function(){return this.Kn}},{key:"isDone",value:function(){return!0===this.Kn}},{key:"visit",value:function(t){var n=t.getEnvelopeInternal();if(!this.Cs.intersects(n))return null;t=Dn.getLines(t);this.checkIntersectionWithLineStrings(t)}},{key:"checkIntersectionWithLineStrings",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();if(this.checkIntersectionWithSegments(i),this.Kn)return null}}},{key:"checkIntersectionWithSegments",value:function(t){for(var n=t.getCoordinateSequence(),i=1;i<n.size();i++)if(n.getCoordinate(i-1,this.vi),n.getCoordinate(i,this.yi),this.ws.intersects(this.vi,this.yi))return this.Kn=!0,null}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();nu.constructor_=function(){this.Cs=null,this.ws=null,this.Kn=!1,this.vi=new k,this.yi=new k;var t=arguments[0];this.Cs=t.getEnvelopeInternal(),this.ws=new Hr(this.Cs)};var iu=function(){is(r,Dr);var n=es(r);function r(){var t;return hs(this,r),t=n.call(this),r.constructor_.apply(us(t),arguments),t}return gs(r,[{key:"getIntersectionMatrix",value:function(){return this.ms.computeIM()}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"covers",value:function(t,n){return!(2===n.getDimension()&&t.getDimension()<2)&&!(1===n.getDimension()&&t.getDimension()<1&&0<n.getLength())&&!!t.getEnvelopeInternal().covers(n.getEnvelopeInternal())&&(!!t.isRectangle()||new r(t,n).getIntersectionMatrix().isCovers())}},{key:"intersects",value:function(t,n){if(!t.getEnvelopeInternal().intersects(n.getEnvelopeInternal()))return!1;if(t.isRectangle())return qr.intersects(t,n);if(n.isRectangle())return qr.intersects(n,t);if(t.isGeometryCollection()||n.isGeometryCollection()){for(var i=0;i<t.getNumGeometries();i++)for(var e=0;e<n.getNumGeometries();e++)if(t.getGeometryN(i).intersects(n.getGeometryN(e)))return!0;return!1}return new r(t,n).getIntersectionMatrix().isIntersects()}},{key:"touches",value:function(t,n){return!!t.getEnvelopeInternal().intersects(n.getEnvelopeInternal())&&new r(t,n).getIntersectionMatrix().isTouches(t.getDimension(),n.getDimension())}},{key:"relate",value:function(){return 2===arguments.length?new r(arguments[0],arguments[1]).getIntersectionMatrix():3===arguments.length?new r(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0}},{key:"overlaps",value:function(t,n){return!!t.getEnvelopeInternal().intersects(n.getEnvelopeInternal())&&new r(t,n).getIntersectionMatrix().isOverlaps(t.getDimension(),n.getDimension())}},{key:"crosses",value:function(t,n){return!!t.getEnvelopeInternal().intersects(n.getEnvelopeInternal())&&new r(t,n).getIntersectionMatrix().isCrosses(t.getDimension(),n.getDimension())}},{key:"contains",value:function(t,n){return!(2===n.getDimension()&&t.getDimension()<2)&&!(1===n.getDimension()&&t.getDimension()<1&&0<n.getLength())&&!!t.getEnvelopeInternal().contains(n.getEnvelopeInternal())&&(t.isRectangle()?Kr.contains(t,n):new r(t,n).getIntersectionMatrix().isContains())}}]),r}();iu.constructor_=function(){this.ms=null,2===arguments.length?(Dr.constructor_.call(this,arguments[0],arguments[1]),this.ms=new Qr(this.Uu)):3===arguments.length&&(Dr.constructor_.call(this,arguments[0],arguments[1],arguments[2]),this.ms=new Qr(this.Uu))};var Tn=Object.freeze({RelateOp:iu}),eu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"extractElements",value:function(t,n){if(null===t)return null;for(var i=0;i<t.getNumGeometries();i++){var e=t.getGeometryN(i);this.Ms&&e.isEmpty()||n.add(e)}}},{key:"combine",value:function(){for(var t=new S,n=this.bs.iterator();n.hasNext();){var i=n.next();this.extractElements(i,t)}return 0===t.size()?null!==this.qt?this.qt.createGeometryCollection():null:this.qt.buildGeometry(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(){return 1===arguments.length?new t(arguments[0]).combine():2===arguments.length?new t(t.createList(arguments[0],arguments[1])).combine():3===arguments.length?new t(t.createList(arguments[0],arguments[1],arguments[2])).combine():void 0}},{key:"extractFactory",value:function(t){return t.isEmpty()?null:t.iterator().next().getFactory()}},{key:"createList",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return(i=new S).add(t),i.add(n),i}if(3===arguments.length){var i,e=arguments[0],t=arguments[1],n=arguments[2];return(i=new S).add(e),i.add(t),i.add(n),i}}}]),t}();eu.constructor_=function(){this.qt=null,this.Ms=!1,this.bs=null;var t=arguments[0];this.qt=eu.extractFactory(t),this.bs=t};var ru=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"union",value:function(){for(var t=new Ci,n=new ft,i=0;i<this.Es.getNumGeometries();i++){var e=this.Es.getGeometryN(i).getCoordinate();t.locate(e,this.Ss)===cn.EXTERIOR&&n.add(e)}if(0===n.size())return this.Ss;var r=$.toCoordinateArray(n),u=1===r.length?this.D.createPoint(r[0]):this.D.createMultiPointFromCoords(r);return eu.combine(u,this.Ss)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(t,n){return new i(t,n).union()}}]),i}();ru.constructor_=function(){this.Es=null,this.Ss=null,this.D=null;var t=arguments[0],n=arguments[1];this.Es=t,this.Ss=n,this.D=n.getFactory()};var uu=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"filter",value:function(t){null!==this.xs&&!e.isOfType(t,this.xs)||this.Kr.add(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[dt]}}],[{key:"isOfType",value:function(t,n){return t.getGeometryType()===n||n===X.TYPENAME_LINESTRING&&t.getGeometryType()===X.TYPENAME_LINEARRING}},{key:"extract",value:function(){if(2===arguments.length)return e.extract(arguments[0],arguments[1],new S);if(3===arguments.length){if(d(arguments[2],M)&&arguments[0]instanceof X&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1],i=arguments[2];return t.getGeometryType()===n?i.add(t):t instanceof mt&&t.apply(new e(n,i)),i}if(d(arguments[2],M)&&arguments[0]instanceof X&&arguments[1]instanceof Class){t=arguments[0],n=arguments[1],i=arguments[2];return e.extract(t,e.toGeometryType(n),i)}}}}]),e}();uu.constructor_=function(){this.xs=null,this.Kr=null;var t=arguments[0],n=arguments[1];this.xs=t,this.Kr=n};var su=function(){function u(){hs(this,u),u.constructor_.apply(this,arguments)}return gs(u,[{key:"reduceToGeometries",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();){var e=i.next(),r=null;d(e,M)?r=this.unionTree(e):e instanceof X&&(r=e),n.add(r)}return n}},{key:"extractByEnvelope",value:function(t,n,i){for(var e=new S,r=0;r<n.getNumGeometries();r++){var u=n.getGeometryN(r);(u.getEnvelopeInternal().intersects(t)?e:i).add(u)}return this.qt.buildGeometry(e)}},{key:"unionOptimized",value:function(t,n){var i=t.getEnvelopeInternal(),e=n.getEnvelopeInternal();if(!i.intersects(e))return eu.combine(t,n);if(t.getNumGeometries()<=1&&n.getNumGeometries()<=1)return this.unionActual(t,n);e=i.intersection(e);return this.unionUsingEnvelopeIntersection(t,n,e)}},{key:"union",value:function(){if(null===this.Rs)throw new IllegalStateException("union() method cannot be called twice");if(this.Rs.isEmpty())return null;this.qt=this.Rs.iterator().next().getFactory();for(var t=new ie(u.STRTREE_NODE_CAPACITY),n=this.Rs.iterator();n.hasNext();){var i=n.next();t.insert(i.getEnvelopeInternal(),i)}this.Rs=null;var e=t.itemsTree();return this.unionTree(e)}},{key:"binaryUnion",value:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var n=arguments[0],i=arguments[1],e=arguments[2];if(e-i<=1){var r=u.getGeometry(n,i);return this.unionSafe(r,null)}if(e-i==2)return this.unionSafe(u.getGeometry(n,i),u.getGeometry(n,i+1));t=Math.trunc((e+i)/2),e=(r=this.binaryUnion(n,i,t),this.binaryUnion(n,t,e));return this.unionSafe(r,e)}}},{key:"repeatedUnion",value:function(t){for(var n=null,i=t.iterator();i.hasNext();)var e=i.next(),n=null===n?e.copy():n.union(e);return n}},{key:"unionSafe",value:function(t,n){return null===t&&null===n?null:null===t?n.copy():null===n?t.copy():this.unionOptimized(t,n)}},{key:"unionActual",value:function(t,n){return u.restrictToPolygons(t.union(n))}},{key:"unionTree",value:function(t){t=this.reduceToGeometries(t);return this.binaryUnion(t)}},{key:"unionUsingEnvelopeIntersection",value:function(t,n,i){var e=new S,t=this.extractByEnvelope(i,t,e),n=this.extractByEnvelope(i,n,e),n=this.unionActual(t,n);return e.add(n),eu.combine(e)}},{key:"bufferUnion",value:function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var n=arguments[0],t=arguments[1];return n.getFactory().createGeometryCollection([n,t]).buffer(0)}}},{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[]}}],[{key:"restrictToPolygons",value:function(t){if(d(t,Gt))return t;var n=er.getPolygons(t);return 1===n.size()?n.get(0):t.getFactory().createMultiPolygon(hn.toPolygonArray(n))}},{key:"getGeometry",value:function(t,n){return n>=t.size()?null:t.get(n)}},{key:"union",value:function(t){return new u(t).union()}}]),u}();su.constructor_=function(){this.Rs=null,this.qt=null,this.Rs=arguments[0],null===this.Rs&&(this.Rs=new S)},su.STRTREE_NODE_CAPACITY=4;var hu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"unionNoOpt",value:function(t){var n=this.D.createPoint();return Lr.overlayOp(t,n,_r.UNION)}},{key:"unionWithNull",value:function(t,n){return null===t&&null===n?null:null===n?t:null===t?n:t.union(n)}},{key:"extract",value:function(){var t;if(d(arguments[0],m))for(var n=arguments[0].iterator();n.hasNext();){var i=n.next();this.extract(i)}else arguments[0]instanceof X&&(t=arguments[0],null===this.D&&(this.D=t.getFactory()),uu.extract(t,X.TYPENAME_POLYGON,this.Ts),uu.extract(t,X.TYPENAME_LINESTRING,this.Lt),uu.extract(t,X.TYPENAME_POINT,this.G))}},{key:"union",value:function(){if(null===this.D)return null;var t=null;0<this.G.size()&&(n=this.D.buildGeometry(this.G),t=this.unionNoOpt(n));var n=null;0<this.Lt.size()&&(i=this.D.buildGeometry(this.Lt),n=this.unionNoOpt(i));var i=null;0<this.Ts.size()&&(i=su.union(this.Ts));n=this.unionWithNull(n,i),i=null;return null===(i=null===t?n:null===n?t:ru.union(t,n))?this.D.createGeometryCollection():i}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(){return 1===arguments.length?d(arguments[0],m)||arguments[0]instanceof X?new t(arguments[0]).union():void 0:2===arguments.length?new t(arguments[0],arguments[1]).union():void 0}}]),t}();hu.constructor_=function(){var t;this.Ts=new S,this.Lt=new S,this.G=new S,this.D=null,1===arguments.length?(d(arguments[0],m)||arguments[0]instanceof X)&&this.extract(arguments[0]):2===arguments.length&&(t=arguments[0],this.D=arguments[1],this.extract(t))};var q=Object.freeze({UnaryUnionOp:hu}),gu=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"visitInteriorRing",value:function(t,n){var i=t.getCoordinates(),t=i[0],i=e.findDifferentPoint(i,t),i=n.findEdgeInSameDirection(t,i),n=n.findEdgeEnd(i),i=null;n.getLabel().getLocation(0,Ii.RIGHT)===cn.INTERIOR?i=n:n.getSym().getLabel().getLocation(0,Ii.RIGHT)===cn.INTERIOR&&(i=n.getSym()),y.isTrue(null!==i,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(i)}},{key:"visitShellInteriors",value:function(t,n){var i;if(t instanceof jt&&this.visitInteriorRing((i=t).getExteriorRing(),n),t instanceof Vt)for(var e=t,r=0;r<e.getNumGeometries();r++)i=e.getGeometryN(r),this.visitInteriorRing(i.getExteriorRing(),n)}},{key:"getCoordinate",value:function(){return this.Ns}},{key:"setInteriorEdgesInResult",value:function(t){for(var n=t.getEdgeEnds().iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(0,Ii.RIGHT)===cn.INTERIOR&&i.setInResult(!0)}}},{key:"visitLinkedDirectedEdges",value:function(t){for(var n=t,i=t;y.isTrue(null!==i,"found null Directed Edge"),i.setVisited(!0),(i=i.getNext())!==n;);}},{key:"buildEdgeRings",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();){var e=i.next();e.isInResult()&&null===e.getEdgeRing()&&((e=new Pe(e,this.Ue)).linkDirectedEdgesForMinimalEdgeRings(),e=e.buildMinimalRings(),n.addAll(e))}return n}},{key:"hasUnvisitedShellEdge",value:function(t){for(var n=0;n<t.size();n++){var i=t.get(n);if(!i.isHole()){var e=i.getEdges(),r=e.get(0);if(r.getLabel().getLocation(0,Ii.RIGHT)===cn.INTERIOR)for(var u=0;u<e.size();u++)if(!(r=e.get(u)).isVisited())return this.Ns=r.getCoordinate(),!0}}return!1}},{key:"isInteriorsConnected",value:function(){var t=new S;this.Ps.computeSplitEdges(t);var n=new Li(new Ye);n.addEdges(t),this.setInteriorEdgesInResult(n),n.linkResultDirectedEdges();t=this.buildEdgeRings(n.getEdgeEnds());return this.visitShellInteriors(this.Ps.getGeometry(),n),!this.hasUnvisitedShellEdge(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDifferentPoint",value:function(t,n){for(var i=0;i<t.length;i++)if(!t[i].equals(n))return t[i];return null}}]),e}();gu.constructor_=function(){this.Ue=new hn,this.Ps=null,this.Ns=null,this.Ps=arguments[0]};var ou=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"insertEdgeEnds",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();this.bi.add(i)}}},{key:"getNodeIterator",value:function(){return this.bi.iterator()}},{key:"copyNodesAndLabels",value:function(t,n){for(var i=t.getNodeIterator();i.hasNext();){var e=i.next();this.bi.addNode(e.getCoordinate()).setLabel(n,e.getLabel().getLocation(n))}}},{key:"build",value:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);t=(new Yr).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(t)}},{key:"computeIntersectionNodes",value:function(t,n){for(var i=t.getEdgeIterator();i.hasNext();)for(var e=i.next(),r=e.getLabel().getLocation(n),u=e.getEdgeIntersectionList().iterator();u.hasNext();){var s=u.next(),s=this.bi.addNode(s.coord);r===cn.BOUNDARY?s.setLabelBoundary(n):s.getLabel().isNull(n)&&s.setLabel(n,cn.INTERIOR)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ou.constructor_=function(){this.bi=new Ri(new zr)};var au=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"isNodeEdgeAreaLabelsConsistent",value:function(){for(var t=this.Os.getNodeIterator();t.hasNext();){var n=t.next();if(!n.getEdges().isAreaLabelsConsistent(this.Ps))return this.Ni=n.getCoordinate().copy(),!1}return!0}},{key:"getInvalidPoint",value:function(){return this.Ni}},{key:"hasDuplicateRings",value:function(){for(var t=this.Os.getNodeIterator();t.hasNext();)for(var n=t.next().getEdges().iterator();n.hasNext();){var i=n.next();if(1<i.getEdgeEnds().size())return this.Ni=i.getEdge().getCoordinate(0),!0}return!1}},{key:"isNodeConsistentArea",value:function(){var t=this.Ps.computeSelfNodes(this.Un,!0,!0);return t.hasProperIntersection()?(this.Ni=t.getProperIntersectionPoint(),!1):(this.Os.build(this.Ps),this.isNodeEdgeAreaLabelsConsistent())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();au.constructor_=function(){this.Un=new ln,this.Ps=null,this.Os=new ou,this.Ni=null,this.Ps=arguments[0]};var Au=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"buildIndex",value:function(){this.jt=new ie;for(var t=0;t<this.Ls.size();t++){var n=this.Ls.get(t),i=n.getEnvelopeInternal();this.jt.insert(i,n)}}},{key:"getNestedPoint",value:function(){return this.Ds}},{key:"isNonNested",value:function(){this.buildIndex();for(var t=0;t<this.Ls.size();t++)for(var n=this.Ls.get(t),i=n.getCoordinates(),e=this.jt.query(n.getEnvelopeInternal()),r=0;r<e.size();r++){var u=e.get(r),s=u.getCoordinates();if(n!==u&&n.getEnvelopeInternal().intersects(u.getEnvelopeInternal())){u=Iu.findPtNotNode(i,u,this.Ln);if(null!==u&&Zn.isInRing(u,s))return this.Ds=u,!1}}return!0}},{key:"add",value:function(t){this.Ls.add(t),this._s.expandToInclude(t.getEnvelopeInternal())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Au.constructor_=function(){this.Ln=null,this.Ls=new S,this._s=new T,this.jt=null,this.Ds=null,this.Ln=arguments[0]};var Cu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getErrorType",value:function(){return this.Fs}},{key:"getMessage",value:function(){return t.errMsg[this.Fs]}},{key:"getCoordinate",value:function(){return this.Ct}},{key:"toString",value:function(){var t="";return null!==this.Ct&&(t=" at or near point "+this.Ct),this.getMessage()+t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Cu.constructor_=function(){var t,n;this.Fs=null,this.Ct=null,1===arguments.length?Cu.constructor_.call(this,arguments[0],null):2===arguments.length&&(t=arguments[0],n=arguments[1],this.Fs=t,null!==n&&(this.Ct=n.copy()))},Cu.ERROR=0,Cu.REPEATED_POINT=1,Cu.HOLE_OUTSIDE_SHELL=2,Cu.NESTED_HOLES=3,Cu.DISCONNECTED_INTERIOR=4,Cu.SELF_INTERSECTION=5,Cu.RING_SELF_INTERSECTION=6,Cu.NESTED_SHELLS=7,Cu.DUPLICATE_RINGS=8,Cu.TOO_FEW_POINTS=9,Cu.INVALID_COORDINATE=10,Cu.RING_NOT_CLOSED=11,Cu.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];var Iu=function(){function o(){hs(this,o),o.constructor_.apply(this,arguments)}return gs(o,[{key:"checkInvalidCoordinates",value:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],n=0;n<t.length;n++)if(!o.isValid(t[n]))return this.Gs=new Cu(Cu.INVALID_COORDINATE,t[n]),null}else if(arguments[0]instanceof jt){var i=arguments[0];if(this.checkInvalidCoordinates(i.getExteriorRing().getCoordinates()),null!==this.Gs)return null;for(n=0;n<i.getNumInteriorRing();n++)if(this.checkInvalidCoordinates(i.getInteriorRingN(n).getCoordinates()),null!==this.Gs)return null}}},{key:"checkHolesNotNested",value:function(t,n){for(var i=new Au(n),e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);i.add(r)}i.isNonNested()||(this.Gs=new Cu(Cu.NESTED_HOLES,i.getNestedPoint()))}},{key:"checkConsistentArea",value:function(t){t=new au(t);if(!t.isNodeConsistentArea())return this.Gs=new Cu(Cu.SELF_INTERSECTION,t.getInvalidPoint()),null;t.hasDuplicateRings()&&(this.Gs=new Cu(Cu.DUPLICATE_RINGS,t.getInvalidPoint()))}},{key:"isValid",value:function(){return this.checkValid(this.js),null===this.Gs}},{key:"checkShellInsideHole",value:function(t,n,i){var e=t.getCoordinates(),r=n.getCoordinates(),n=o.findPtNotNode(e,n,i);if(null!==n&&!Zn.isInRing(n,r))return n;i=o.findPtNotNode(r,t,i);return null!==i?Zn.isInRing(i,e)?i:null:(y.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}},{key:"checkNoSelfIntersectingRings",value:function(t){for(var n=t.getEdgeIterator();n.hasNext();){var i=n.next();if(this.checkNoSelfIntersectingRing(i.getEdgeIntersectionList()),null!==this.Gs)return null}}},{key:"checkConnectedInteriors",value:function(t){t=new gu(t);t.isInteriorsConnected()||(this.Gs=new Cu(Cu.DISCONNECTED_INTERIOR,t.getCoordinate()))}},{key:"checkNoSelfIntersectingRing",value:function(t){for(var n=new ft,i=!0,e=t.iterator();e.hasNext();){var r=e.next();if(i)i=!1;else{if(n.contains(r.coord))return this.Gs=new Cu(Cu.RING_SELF_INTERSECTION,r.coord),null;n.add(r.coord)}}}},{key:"checkHolesInShell",value:function(t,n){for(var i=t.getExteriorRing(),e=new Gn(i),r=0;r<t.getNumInteriorRing();r++){var u=t.getInteriorRingN(r),u=o.findPtNotNode(u.getCoordinates(),i,n);if(null===u)return null;if(cn.EXTERIOR===e.locate(u))return this.Gs=new Cu(Cu.HOLE_OUTSIDE_SHELL,u),null}}},{key:"checkTooFewPoints",value:function(t){if(t.hasTooFewPoints())return this.Gs=new Cu(Cu.TOO_FEW_POINTS,t.getInvalidPoint()),null}},{key:"getValidationError",value:function(){return this.checkValid(this.js),this.Gs}},{key:"checkValid",value:function(){if(arguments[0]instanceof _t){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Bt){t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Zt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.Gs)return null;if(this.checkClosedRing(n),null!==this.Gs)return null;var i=new Di(0,n);if(this.checkTooFewPoints(i),null!==this.Gs)return null;n=new ln;i.computeSelfNodes(n,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof Lt){n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.Gs)return null;i=new Di(0,n),this.checkTooFewPoints(i)}else{if(arguments[0]instanceof jt){var e=arguments[0];return(this.checkInvalidCoordinates(e),null!==this.Gs)?null:(this.checkClosedRings(e),null!==this.Gs?null:(i=new Di(0,e),this.checkTooFewPoints(i),null!==this.Gs?null:(this.checkConsistentArea(i),null===this.Gs&&(this.Bs||(this.checkNoSelfIntersectingRings(i),null===this.Gs))?(this.checkHolesInShell(e,i),null!==this.Gs?null:(this.checkHolesNotNested(e,i),null!==this.Gs?null:void this.checkConnectedInteriors(i))):null)))}if(arguments[0]instanceof Vt){for(var r=arguments[0],u=0;u<r.getNumGeometries();u++){var s=r.getGeometryN(u);if(this.checkInvalidCoordinates(s),null!==this.Gs)return null;if(this.checkClosedRings(s),null!==this.Gs)return null}if(i=new Di(0,r),this.checkTooFewPoints(i),null!==this.Gs)return null;if(this.checkConsistentArea(i),null!==this.Gs)return null;if(!this.Bs&&(this.checkNoSelfIntersectingRings(i),null!==this.Gs))return null;for(u=0;u<r.getNumGeometries();u++)if(s=r.getGeometryN(u),this.checkHolesInShell(s,i),null!==this.Gs)return null;for(u=0;u<r.getNumGeometries();u++)if(s=r.getGeometryN(u),this.checkHolesNotNested(s,i),null!==this.Gs)return null;if(this.checkShellsNotNested(r,i),null!==this.Gs)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof mt)for(var h=arguments[0],u=0;u<h.getNumGeometries();u++){var g=h.getGeometryN(u);if(this.checkValid(g),null!==this.Gs)return null}else if(arguments[0]instanceof X){e=arguments[0];if(this.Gs=null,e.isEmpty())return null;if(e instanceof _t)this.checkValid(e);else if(e instanceof Bt)this.checkValid(e);else if(e instanceof Zt)this.checkValid(e);else if(e instanceof Lt)this.checkValid(e);else if(e instanceof jt)this.checkValid(e);else if(e instanceof Vt)this.checkValid(e);else{if(!(e instanceof mt))throw new UnsupportedOperationException(e.getClass().getName());this.checkValid(e)}}}}},{key:"setSelfTouchingRingFormingHoleValid",value:function(t){this.Bs=t}},{key:"checkShellNotNested",value:function(t,n,i){var e=t.getCoordinates(),r=n.getExteriorRing(),u=r.getCoordinates(),r=o.findPtNotNode(e,r,i);if(null===r)return null;if(!Zn.isInRing(r,u))return null;if(n.getNumInteriorRing()<=0)return this.Gs=new Cu(Cu.NESTED_SHELLS,r),null;for(var s=null,h=0;h<n.getNumInteriorRing();h++){var g=n.getInteriorRingN(h);if(null===(s=this.checkShellInsideHole(t,g,i)))return null}this.Gs=new Cu(Cu.NESTED_SHELLS,s)}},{key:"checkClosedRings",value:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.Gs)return null;for(var n=0;n<t.getNumInteriorRing();n++)if(this.checkClosedRing(t.getInteriorRingN(n)),null!==this.Gs)return null}},{key:"checkClosedRing",value:function(t){var n;t.isClosed()||(n=null,1<=t.getNumPoints()&&(n=t.getCoordinateN(0)),this.Gs=new Cu(Cu.RING_NOT_CLOSED,n))}},{key:"checkShellsNotNested",value:function(t,n){for(var i=0;i<t.getNumGeometries();i++)for(var e=t.getGeometryN(i).getExteriorRing(),r=0;r<t.getNumGeometries();r++)if(i!==r){var u=t.getGeometryN(r);if(this.checkShellNotNested(e,u,n),null!==this.Gs)return null}}},{key:"getClass",value:function(){return o}},{key:"interfaces_",get:function(){return[]}}],[{key:"findPtNotNode",value:function(t,n,i){for(var e=i.findEdge(n).getEdgeIntersectionList(),r=0;r<t.length;r++){var u=t[r];if(!e.isIntersection(u))return u}return null}},{key:"isValid",value:function(){if(arguments[0]instanceof X)return new o(arguments[0]).isValid();if(arguments[0]instanceof k){var t=arguments[0];return!(c.isNaN(t.x)||c.isInfinite(t.x)||c.isNaN(t.y)||c.isInfinite(t.y))}}}]),o}();Iu.constructor_=function(){this.js=null,this.Bs=!1,this.Gs=null,this.js=arguments[0]};var Bi=Object.freeze({IsValidOp:Iu,ConsistentAreaTester:au}),tt=Object.freeze({BoundaryOp:Mt,IsSimpleOp:Me,buffer:En,distance:Un,linemerge:tt,overlay:Xt,polygonize:qt,relate:Tn,union:q,valid:Bi}),lu=function(){is(h,Yt.CoordinateOperation);var n=es(h);function h(){var t;return hs(this,h),t=n.call(this),h.constructor_.apply(us(t),arguments),t}return gs(h,[{key:"edit",value:function(){if(2===arguments.length&&arguments[1]instanceof X&&arguments[0]instanceof Array){var t=arguments[0],n=arguments[1];if(0===t.length)return null;for(var i=new Array(t.length).fill(null),e=0;e<t.length;e++){var r=new k(t[e]);this.Zs.makePrecise(r),i[e]=r}var u=new R(i,!1).toCoordinateArray(),s=n instanceof Zt?4:n instanceof Lt?2:0,n=i;return this.Vs&&(n=null),u.length<s?n:u}return ns(ss(h.prototype),"edit",this).apply(this,arguments)}},{key:"getClass",value:function(){return h}},{key:"interfaces_",get:function(){return[]}}]),h}();lu.constructor_=function(){this.Zs=null,this.Vs=!0;var t=arguments[0],n=arguments[1];this.Zs=t,this.Vs=n};Xt=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"fixPolygonalTopology",value:function(t){var n=t;this.Ys||(n=this.changePM(t,this.Zs));var i=ir.bufferOp(n,0),n=i;return this.Ys||(n=i.copy(),this.changePM(n,t.getPrecisionModel())),n}},{key:"reducePointwise",value:function(t){var n=null;n=this.Ys?(i=this.createFactory(t.getFactory(),this.Zs),new Yt(i)):new Yt;var i=this.Vs;return 2<=t.getDimension()&&(i=!0),n.edit(t,new lu(this.Zs,i))}},{key:"changePM",value:function(t,n){return this.createEditor(t.getFactory(),n).edit(t,new Yt.NoOpGeometryOperation)}},{key:"setRemoveCollapsedComponents",value:function(t){this.Vs=t}},{key:"createFactory",value:function(t,n){return new hn(n,t.getSRID(),t.getCoordinateSequenceFactory())}},{key:"setChangePrecisionModel",value:function(t){this.Ys=t}},{key:"reduce",value:function(t){t=this.reducePointwise(t);return this.Us||!d(t,Gt)||Iu.isValid(t)?t:this.fixPolygonalTopology(t)}},{key:"setPointwise",value:function(t){this.Us=t}},{key:"createEditor",value:function(t,n){if(t.getPrecisionModel()===n)return new Yt;n=this.createFactory(t,n);return new Yt(n)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"reduce",value:function(t,n){return new i(n).reduce(t)}},{key:"reducePointwise",value:function(t,n){n=new i(n);return n.setPointwise(!0),n.reduce(t)}}]),i}();Xt.constructor_=function(){this.Zs=null,this.Vs=!0,this.Ys=!1,this.Us=!1,this.Zs=arguments[0]};var qt=Object.freeze({GeometryPrecisionReducer:Xt}),fu=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"simplifySection",value:function(t,n){if(t+1===n)return null;this.cr.p0=this.he[t],this.cr.p1=this.he[n];for(var i=-1,e=t,r=t+1;r<n;r++){var u=this.cr.distance(this.he[r]);i<u&&(i=u,e=r)}if(i<=this.bn)for(r=t+1;r<n;r++)this.Ws[r]=!1;else this.simplifySection(t,e),this.simplifySection(e,n)}},{key:"setDistanceTolerance",value:function(t){this.bn=t}},{key:"simplify",value:function(){this.Ws=new Array(this.he.length).fill(null);for(var t=0;t<this.he.length;t++)this.Ws[t]=!0;this.simplifySection(0,this.he.length-1);for(var n=new R,t=0;t<this.he.length;t++)this.Ws[t]&&n.add(new k(this.he[t]));return n.toCoordinateArray()}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){t=new i(t);return t.setDistanceTolerance(n),t.simplify()}}]),i}();fu.constructor_=function(){this.he=null,this.Ws=null,this.bn=null,this.cr=new fn,this.he=arguments[0]};var Tn=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"setEnsureValid",value:function(t){this.Xs=t}},{key:"getResultGeometry",value:function(){return this.fn.isEmpty()?this.fn.copy():new cu(this.Xs,this.bn).transform(this.fn)}},{key:"setDistanceTolerance",value:function(t){if(t<0)throw new l("Tolerance must be non-negative");this.bn=t}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){t=new i(t);return t.setDistanceTolerance(n),t.getResultGeometry()}}]),i}(),cu=function(){is(e,ei);var n=es(e);function e(){var t;return hs(this,e),t=n.call(this),e.constructor_.apply(us(t),arguments),t}return gs(e,[{key:"transformPolygon",value:function(t,n){if(t.isEmpty())return null;t=ns(ss(e.prototype),"transformPolygon",this).call(this,t,n);return n instanceof Vt?t:this.createValidArea(t)}},{key:"createValidArea",value:function(t){return this.Xs?t.buffer(0):t}},{key:"transformCoordinates",value:function(t,n){var i=t.toCoordinateArray(),t=null,t=0===i.length?new Array(0).fill(null):fu.simplify(i,this.bn);return this.k.getCoordinateSequenceFactory().create(t)}},{key:"transformMultiPolygon",value:function(t,n){n=ns(ss(e.prototype),"transformMultiPolygon",this).call(this,t,n);return this.createValidArea(n)}},{key:"transformLinearRing",value:function(t,n){var i=n instanceof jt,n=ns(ss(e.prototype),"transformLinearRing",this).call(this,t,n);return!i||n instanceof Zt?n:null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();cu.constructor_=function(){this.Xs=!0,this.bn=null;var t=arguments[0],n=arguments[1];this.Xs=t,this.bn=n},Tn.DPTransformer=cu,Tn.constructor_=function(){this.fn=null,this.bn=null,this.Xs=!0,this.fn=arguments[0]};var vu=function(){is(i,fn);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getIndex",value:function(){return this.jt}},{key:"getParent",value:function(){return this.Vt}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();vu.constructor_=function(){var t,n,i,e;this.Vt=null,this.jt=null,2===arguments.length?vu.constructor_.call(this,arguments[0],arguments[1],null,-1):4===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],fn.constructor_.call(this,t,n),this.Vt=i,this.jt=e)};var yu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"addToResult",value:function(t){this.zs.add(t)}},{key:"asLineString",value:function(){return this.Qs.getFactory().createLineString(t.extractCoordinates(this.zs))}},{key:"getResultSize",value:function(){var t=this.zs.size();return 0===t?0:t+1}},{key:"getParent",value:function(){return this.Qs}},{key:"getSegment",value:function(t){return this.Ks[t]}},{key:"getParentCoordinates",value:function(){return this.Qs.getCoordinates()}},{key:"getMinimumSize",value:function(){return this.Hs}},{key:"asLinearRing",value:function(){return this.Qs.getFactory().createLinearRing(t.extractCoordinates(this.zs))}},{key:"getSegments",value:function(){return this.Ks}},{key:"init",value:function(){var t=this.Qs.getCoordinates();this.Ks=new Array(t.length-1).fill(null);for(var n=0;n<t.length-1;n++){var i=new vu(t[n],t[n+1],this.Qs,n);this.Ks[n]=i}}},{key:"getResultCoordinates",value:function(){return t.extractCoordinates(this.zs)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(t){for(var n=new Array(t.size()+1).fill(null),i=null,e=0;e<t.size();e++)i=t.get(e),n[e]=i.p0;return n[n.length-1]=i.p1,n}}]),t}();yu.constructor_=function(){var t,n;this.Qs=null,this.Ks=null,this.zs=new S,this.Hs=null,1===arguments.length?yu.constructor_.call(this,arguments[0],2):2===arguments.length&&(t=arguments[0],n=arguments[1],this.Qs=t,this.Hs=n,this.init())};var ku=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"remove",value:function(t){this.jt.remove(new T(t.p0,t.p1),t)}},{key:"add",value:function(){var t;if(arguments[0]instanceof yu)for(var n=arguments[0].getSegments(),i=0;i<n.length;i++){var e=n[i];this.add(e)}else arguments[0]instanceof fn&&this.jt.insert(new T((t=arguments[0]).p0,t.p1),t)}},{key:"query",value:function(t){var n=new T(t.p0,t.p1),t=new du(t);return this.jt.query(n,t),t.getItems()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ku.constructor_=function(){this.jt=new Qi};var du=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visitItem",value:function(t){T.intersects(t.p0,t.p1,this.Js.p0,this.Js.p1)&&this.Dt.add(t)}},{key:"getItems",value:function(){return this.Dt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Sn]}}]),t}();du.constructor_=function(){this.Js=null,this.Dt=new S,this.Js=arguments[0]};var wu=function(){function u(){hs(this,u),u.constructor_.apply(this,arguments)}return gs(u,[{key:"flatten",value:function(t,n){var i=this.qs[t],e=this.qs[n],e=new fn(i,e);return this.remove(this.au,t,n),this.$s.add(e),e}},{key:"hasBadIntersection",value:function(t,n,i){return!!this.hasBadOutputIntersection(i)||!!this.hasBadInputIntersection(t,n,i)}},{key:"setDistanceTolerance",value:function(t){this.bn=t}},{key:"simplifySection",value:function(t,n,i){i+=1;var e=new Array(2).fill(null);if(t+1===n){var r=this.au.getSegment(t);return this.au.addToResult(r),null}var u=!0;this.au.getResultSize()<this.au.getMinimumSize()&&i+1<this.au.getMinimumSize()&&(u=!1);var s=new Array(1).fill(null),h=this.findFurthestPoint(this.qs,t,n,s);s[0]>this.bn&&(u=!1);s=new fn;if(s.p0=this.qs[t],s.p1=this.qs[n],e[0]=t,e[1]=n,u=this.hasBadIntersection(this.au,e,s)?!1:u)return r=this.flatten(t,n),this.au.addToResult(r),null;this.simplifySection(t,h,i),this.simplifySection(h,n,i)}},{key:"hasBadOutputIntersection",value:function(t){for(var n=this.$s.query(t).iterator();n.hasNext();){var i=n.next();if(this.hasInteriorIntersection(i,t))return!0}return!1}},{key:"findFurthestPoint",value:function(t,n,i,e){var r=new fn;r.p0=t[n],r.p1=t[i];for(var u=-1,s=n,h=n+1;h<i;h++){var g=t[h],g=r.distance(g);u<g&&(u=g,s=h)}return e[0]=u,s}},{key:"simplify",value:function(t){this.au=t,this.qs=t.getParentCoordinates(),this.simplifySection(0,this.qs.length-1,0)}},{key:"remove",value:function(t,n,i){for(var e=n;e<i;e++){var r=t.getSegment(e);this.th.remove(r)}}},{key:"hasInteriorIntersection",value:function(t,n){return this.Un.computeIntersection(t.p0,t.p1,n.p0,n.p1),this.Un.isInteriorIntersection()}},{key:"hasBadInputIntersection",value:function(t,n,i){for(var e=this.th.query(i).iterator();e.hasNext();){var r=e.next();if(this.hasInteriorIntersection(r,i)&&!u.isInLineSection(t,n,r))return!0}return!1}},{key:"getClass",value:function(){return u}},{key:"interfaces_",get:function(){return[]}}],[{key:"isInLineSection",value:function(t,n,i){if(i.getParent()!==t.getParent())return!1;i=i.getIndex();return i>=n[0]&&i<n[1]}}]),u}();wu.constructor_=function(){this.Un=new ln,this.th=new ku,this.$s=new ku,this.au=null,this.qs=null;var t=arguments[this.bn=0],n=arguments[1];this.th=t,this.$s=n};var mu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"setDistanceTolerance",value:function(t){this.bn=t}},{key:"simplify",value:function(t){for(var n=t.iterator();n.hasNext();)this.th.add(n.next());for(n=t.iterator();n.hasNext();){var i=new wu(this.th,this.$s);i.setDistanceTolerance(this.bn),i.simplify(n.next())}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();mu.constructor_=function(){this.th=new ku,this.$s=new ku,this.bn=0};var q=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"getResultGeometry",value:function(){return this.fn.isEmpty()?this.fn.copy():(this.nh=new rn,this.fn.apply(new Mu(this)),this.ih.simplify(this.nh.values()),new pu(this.nh).transform(this.fn))}},{key:"setDistanceTolerance",value:function(t){if(t<0)throw new l("Tolerance must be non-negative");this.ih.setDistanceTolerance(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){t=new i(t);return t.setDistanceTolerance(n),t.getResultGeometry()}}]),i}(),pu=function(){is(e,ei);var n=es(e);function e(){var t;return hs(this,e),t=n.call(this),e.constructor_.apply(us(t),arguments),t}return gs(e,[{key:"transformCoordinates",value:function(t,n){if(0===t.size())return null;if(n instanceof Lt){var i=this.nh.get(n);return this.createCoordinateSequence(i.getResultCoordinates())}return ns(ss(e.prototype),"transformCoordinates",this).call(this,t,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();pu.constructor_=function(){this.nh=null,this.nh=arguments[0]};var Mu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"filter",value:function(t){if(t instanceof Lt){var n=t;if(n.isEmpty())return null;t=n.isClosed()?4:2,t=new yu(n,t);this.tps.nh.put(n,t)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[W]}}]),t}();Mu.constructor_=function(){this.tps=null,this.tps=arguments[0]},q.LineStringTransformer=pu,q.LineStringMapBuilderFilter=Mu,q.constructor_=function(){this.fn=null,this.ih=new mu,this.nh=null,this.fn=arguments[0]};var Bi=Object.freeze({DouglasPeuckerSimplifier:Tn,TopologyPreservingSimplifier:q}),bu=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"splitAt",value:function(){if(1===arguments.length){var t=arguments[0],n=this.eh/this.rh;return t.distance(this.cr.p0)<this.eh?(this.uh=this.cr.pointAlong(n),null):t.distance(this.cr.p1)<this.eh?(this.uh=i.pointAlongReverse(this.cr,n),null):void(this.uh=t)}2===arguments.length&&(n=arguments[0],t=arguments[1],n=this.getConstrainedLength(n)/this.rh,t.equals2D(this.cr.p0)?this.uh=this.cr.pointAlong(n):this.uh=i.pointAlongReverse(this.cr,n))}},{key:"setMinimumLength",value:function(t){this.eh=t}},{key:"getConstrainedLength",value:function(t){return t<this.eh?this.eh:t}},{key:"getSplitPoint",value:function(){return this.uh}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"pointAlongReverse",value:function(t,n){var i=new k;return i.x=t.p1.x-n*(t.p1.x-t.p0.x),i.y=t.p1.y-n*(t.p1.y-t.p0.y),i}}]),i}();bu.constructor_=function(){this.cr=null,this.rh=null,this.uh=null;var t=arguments[this.eh=0];this.cr=t,this.rh=t.getLength()};var Eu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"findSplitPoint",value:function(t,n){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Eu.constructor_=function(){};var Su=function(){function r(){hs(this,r),r.constructor_.apply(this,arguments)}return gs(r,[{key:"findSplitPoint",value:function(t,n){var i=t.getLineSegment(),e=i.getLength()/2,i=new bu(i),t=r.projectedSplitPoint(t,n),n=2*t.distance(n)*.8;return i.setMinimumLength(n=e<n?e:n),i.splitAt(t),i.getSplitPoint()}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[Eu]}}],[{key:"projectedSplitPoint",value:function(t,n){return t.getLineSegment().project(n)}}]),r}();Su.constructor_=function(){};var xu=function(){function A(){hs(this,A),A.constructor_.apply(this,arguments)}return gs(A,[{key:"getClass",value:function(){return A}},{key:"interfaces_",get:function(){return[]}}],[{key:"triArea",value:function(t,n,i){return(n.x-t.x)*(i.y-t.y)-(n.y-t.y)*(i.x-t.x)}},{key:"isInCircleDDNormalized",value:function(t,n,i,e){var r=_.valueOf(t.x).selfSubtract(e.x),u=_.valueOf(t.y).selfSubtract(e.y),s=_.valueOf(n.x).selfSubtract(e.x),h=_.valueOf(n.y).selfSubtract(e.y),g=_.valueOf(i.x).selfSubtract(e.x),t=_.valueOf(i.y).selfSubtract(e.y),n=r.multiply(h).selfSubtract(s.multiply(u)),i=s.multiply(t).selfSubtract(g.multiply(h)),e=g.multiply(u).selfSubtract(r.multiply(t)),u=r.multiply(r).selfAdd(u.multiply(u)),h=s.multiply(s).selfAdd(h.multiply(h)),t=g.multiply(g).selfAdd(t.multiply(t));return 0<u.selfMultiply(i).selfAdd(h.selfMultiply(e)).selfAdd(t.selfMultiply(n)).doubleValue()}},{key:"checkRobustInCircle",value:function(t,n,i,e){var r=A.isInCircleNonRobust(t,n,i,e),u=A.isInCircleDDSlow(t,n,i,e),s=A.isInCircleCC(t,n,i,e),h=kn.circumcentre(t,n,i);j.out.println("p radius diff a = "+Math.abs(e.distance(h)-t.distance(h))/t.distance(h)),r===u&&r===s||(j.out.println("inCircle robustness failure (double result = "+r+", DD result = "+u+", CC result = "+s+")"),j.out.println(Cn.toLineString(new Qt([t,n,i,e]))),j.out.println("Circumcentre = "+Cn.toPoint(h)+" radius = "+t.distance(h)),j.out.println("p radius diff a = "+Math.abs(e.distance(h)/t.distance(h)-1)),j.out.println("p radius diff b = "+Math.abs(e.distance(h)/n.distance(h)-1)),j.out.println("p radius diff c = "+Math.abs(e.distance(h)/i.distance(h)-1)),j.out.println())}},{key:"isInCircleDDFast",value:function(t,n,i,e){var r=_.sqr(t.x).selfAdd(_.sqr(t.y)).selfMultiply(A.triAreaDDFast(n,i,e)),u=_.sqr(n.x).selfAdd(_.sqr(n.y)).selfMultiply(A.triAreaDDFast(t,i,e)),s=_.sqr(i.x).selfAdd(_.sqr(i.y)).selfMultiply(A.triAreaDDFast(t,n,e)),i=_.sqr(e.x).selfAdd(_.sqr(e.y)).selfMultiply(A.triAreaDDFast(t,n,i));return 0<r.selfSubtract(u).selfAdd(s).selfSubtract(i).doubleValue()}},{key:"isInCircleCC",value:function(t,n,i,e){i=kn.circumcentre(t,n,i),t=t.distance(i);return e.distance(i)-t<=0}},{key:"isInCircleNormalized",value:function(t,n,i,e){var r=t.x-e.x,u=t.y-e.y,s=n.x-e.x,t=n.y-e.y,n=i.x-e.x,e=i.y-e.y;return 0<(r*r+u*u)*(s*e-n*t)+(s*s+t*t)*(n*u-r*e)+(n*n+e*e)*(r*t-s*u)}},{key:"isInCircleDDSlow",value:function(t,n,i,e){var r=_.valueOf(e.x),u=_.valueOf(e.y),s=_.valueOf(t.x),h=_.valueOf(t.y),g=_.valueOf(n.x),o=_.valueOf(n.y),a=_.valueOf(i.x),e=_.valueOf(i.y),t=s.multiply(s).add(h.multiply(h)).multiply(A.triAreaDDSlow(g,o,a,e,r,u)),n=g.multiply(g).add(o.multiply(o)).multiply(A.triAreaDDSlow(s,h,a,e,r,u)),i=a.multiply(a).add(e.multiply(e)).multiply(A.triAreaDDSlow(s,h,g,o,r,u)),e=r.multiply(r).add(u.multiply(u)).multiply(A.triAreaDDSlow(s,h,g,o,a,e));return 0<t.subtract(n).add(i).subtract(e).doubleValue()}},{key:"isInCircleNonRobust",value:function(t,n,i,e){return 0<(t.x*t.x+t.y*t.y)*A.triArea(n,i,e)-(n.x*n.x+n.y*n.y)*A.triArea(t,i,e)+(i.x*i.x+i.y*i.y)*A.triArea(t,n,e)-(e.x*e.x+e.y*e.y)*A.triArea(t,n,i)}},{key:"isInCircleRobust",value:function(t,n,i,e){return A.isInCircleNormalized(t,n,i,e)}},{key:"triAreaDDSlow",value:function(t,n,i,e,r,u){return i.subtract(t).multiply(u.subtract(n)).subtract(e.subtract(n).multiply(r.subtract(t)))}},{key:"triAreaDDFast",value:function(t,n,i){var e=_.valueOf(n.x).selfSubtract(t.x).selfMultiply(_.valueOf(i.y).selfSubtract(t.y)),t=_.valueOf(n.y).selfSubtract(t.y).selfMultiply(_.valueOf(i.x).selfSubtract(t.x));return e.selfSubtract(t)}}]),A}();xu.constructor_=function(){};var Ru=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"circleCenter",value:function(t,n){var i=new s(this.getX(),this.getY()),e=this.bisector(i,t),r=this.bisector(t,n),u=new B(e,r),r=null;try{r=new s(u.getX(),u.getY())}catch(e){if(!(e instanceof P))throw e;j.err.println("a: "+i+"  b: "+t+"  c: "+n),j.err.println(e)}return r}},{key:"dot",value:function(t){return this._t.x*t.getX()+this._t.y*t.getY()}},{key:"magn",value:function(){return Math.sqrt(this._t.x*this._t.x+this._t.y*this._t.y)}},{key:"getZ",value:function(){return this._t.z}},{key:"bisector",value:function(t,n){var i=n.getX()-t.getX(),e=n.getY()-t.getY(),n=new B(t.getX()+i/2,t.getY()+e/2,1),e=new B(t.getX()-e+i/2,t.getY()+i+e/2,1);return new B(n,e)}},{key:"equals",value:function(){if(1===arguments.length){var t=arguments[0];return this._t.x===t.getX()&&this._t.y===t.getY()}if(2===arguments.length){var n=arguments[0],t=arguments[1];return this._t.distance(n.getCoordinate())<t}}},{key:"getCoordinate",value:function(){return this._t}},{key:"isInCircle",value:function(t,n,i){return xu.isInCircleRobust(t._t,n._t,i._t,this._t)}},{key:"interpolateZValue",value:function(t,n,i){var e=t.getX(),r=t.getY(),u=n.getX()-e,s=i.getX()-e,h=n.getY()-r,g=i.getY()-r,o=u*g-s*h,e=this.getX()-e,r=this.getY()-r,s=(g*e-s*r)/o,o=(-h*e+u*r)/o;return t.getZ()+s*(n.getZ()-t.getZ())+o*(i.getZ()-t.getZ())}},{key:"midPoint",value:function(t){return new s((this._t.x+t.getX())/2,(this._t.y+t.getY())/2,(this._t.z+t.getZ())/2)}},{key:"rightOf",value:function(t){return this.isCCW(t.dest(),t.orig())}},{key:"isCCW",value:function(t,n){return 0<(t._t.x-this._t.x)*(n._t.y-this._t.y)-(t._t.y-this._t.y)*(n._t.x-this._t.x)}},{key:"getX",value:function(){return this._t.x}},{key:"crossProduct",value:function(t){return this._t.x*t.getY()-this._t.y*t.getX()}},{key:"setZ",value:function(t){this._t.z=t}},{key:"times",value:function(t){return new s(t*this._t.x,t*this._t.y)}},{key:"cross",value:function(){return new s(this._t.y,-this._t.x)}},{key:"leftOf",value:function(t){return this.isCCW(t.orig(),t.dest())}},{key:"toString",value:function(){return"POINT ("+this._t.x+" "+this._t.y+")"}},{key:"sub",value:function(t){return new s(this._t.x-t.getX(),this._t.y-t.getY())}},{key:"getY",value:function(){return this._t.y}},{key:"classify",value:function(t,n){var i=n.sub(t),e=this.sub(t),r=i.crossProduct(e);return 0<r?s.LEFT:r<0?s.RIGHT:i.getX()*e.getX()<0||i.getY()*e.getY()<0?s.BEHIND:i.magn()<e.magn()?s.BEYOND:t.equals(this)?s.ORIGIN:n.equals(this)?s.DESTINATION:s.BETWEEN}},{key:"sum",value:function(t){return new s(this._t.x+t.getX(),this._t.y+t.getY())}},{key:"distance",value:function(t,n){return Math.sqrt(Math.pow(n.getX()-t.getX(),2)+Math.pow(n.getY()-t.getY(),2))}},{key:"circumRadiusRatio",value:function(t,n){var i=this.circleCenter(t,n),e=this.distance(i,t),i=this.distance(this,t),t=this.distance(t,n);return t<i&&(i=t),e/(i=(t=this.distance(n,this))<i?t:i)}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"interpolateZ",value:function(){if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],e=n.distance(i),r=t.distance(n),u=i.z-n.z;return n.z+r/e*u}if(4===arguments.length){var s=arguments[0],h=arguments[1],g=arguments[2],o=arguments[3],a=h.x,t=h.y,i=g.x-a,n=o.x-a,r=g.y-t,e=o.y-t,u=i*e-n*r,a=s.x-a,t=s.y-t;return h.z+(e*a-n*t)/u*(g.z-h.z)+(-r*a+i*t)/u*(o.z-h.z)}}}]),s}();Ru.constructor_=function(){this._t=null,1===arguments.length?this._t=new k(arguments[0]):2===arguments.length?this._t=new k(arguments[0],arguments[1]):3===arguments.length&&(this._t=new k(arguments[0],arguments[1],arguments[2]))},Ru.LEFT=0,Ru.RIGHT=1,Ru.BEYOND=2,Ru.BEHIND=3,Ru.BETWEEN=4,Ru.ORIGIN=5,Ru.DESTINATION=6;var Tu=function(){is(i,Ru);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getConstraint",value:function(){return this.sh}},{key:"setOnConstraint",value:function(t){this.hh=t}},{key:"merge",value:function(t){t.hh&&(this.hh=!0,this.sh=t.sh)}},{key:"isOnConstraint",value:function(){return this.hh}},{key:"setConstraint",value:function(t){this.hh=!0,this.sh=t}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}]),i}();Tu.constructor_=function(){this.hh=null,this.sh=null,Ru.constructor_.call(this,arguments[0])};var Nu=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"equalsNonOriented",value:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())}},{key:"toLineSegment",value:function(){return new fn(this.gh.getCoordinate(),this.dest().getCoordinate())}},{key:"dest",value:function(){return this.sym().orig()}},{key:"oNext",value:function(){return this.xn}},{key:"equalsOriented",value:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))}},{key:"dNext",value:function(){return this.sym().oNext().sym()}},{key:"lPrev",value:function(){return this.xn.sym()}},{key:"rPrev",value:function(){return this.sym().oNext()}},{key:"rot",value:function(){return this.oh}},{key:"oPrev",value:function(){return this.oh.xn.oh}},{key:"sym",value:function(){return this.oh.oh}},{key:"setOrig",value:function(t){this.gh=t}},{key:"lNext",value:function(){return this.invRot().oNext().rot()}},{key:"getLength",value:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())}},{key:"invRot",value:function(){return this.oh.sym()}},{key:"setDest",value:function(t){this.sym().setOrig(t)}},{key:"setData",value:function(t){this.Bi=t}},{key:"getData",value:function(){return this.Bi}},{key:"delete",value:function(){this.oh=null}},{key:"orig",value:function(){return this.gh}},{key:"rNext",value:function(){return this.oh.xn.invRot()}},{key:"toString",value:function(){var t=this.gh.getCoordinate(),n=this.dest().getCoordinate();return Cn.toLineString(t,n)}},{key:"isLive",value:function(){return null!==this.oh}},{key:"getPrimary",value:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()}},{key:"dPrev",value:function(){return this.invRot().oNext().invRot()}},{key:"setNext",value:function(t){this.xn=t}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"makeEdge",value:function(t,n){var i=new s,e=new s,r=new s,u=new s;((((i.oh=e).oh=r).oh=u).oh=i).setNext(i),e.setNext(u),r.setNext(r),u.setNext(e);return i.setOrig(t),i.setDest(n),i}},{key:"swap",value:function(t){var n=t.oPrev(),i=t.sym().oPrev();s.splice(t,n),s.splice(t.sym(),i),s.splice(t,n.lNext()),s.splice(t.sym(),i.lNext()),t.setOrig(n.dest()),t.setDest(i.dest())}},{key:"splice",value:function(t,n){var i=t.oNext().rot(),e=n.oNext().rot(),r=n.oNext(),u=t.oNext(),s=e.oNext(),h=i.oNext();t.setNext(r),n.setNext(u),i.setNext(s),e.setNext(h)}},{key:"connect",value:function(t,n){var i=s.makeEdge(t.dest(),n.orig());return s.splice(i,t.lNext()),s.splice(i.sym(),n),i}}]),s}();Nu.constructor_=function(){this.oh=null,this.gh=null,this.xn=null,this.Bi=null};var Pu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"insertSite",value:function(t){var n=this.ah.locate(t);if(this.ah.isVertexOfEdge(n,t))return n;this.ah.isOnEdge(n,t.getCoordinate())&&(n=n.oPrev(),this.ah.delete(n.oNext()));var i=this.ah.makeEdge(n.orig(),t);Nu.splice(i,n);for(var e=i;(n=(i=this.ah.connect(n,i.sym())).oPrev()).lNext()!==e;);for(;;){var r=n.oPrev();if(r.dest().rightOf(n)&&t.isInCircle(n.orig(),r.dest(),n.dest()))Nu.swap(n),n=n.oPrev();else{if(n.oNext()===e)return i;n=n.oNext().lPrev()}}}},{key:"insertSites",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();this.insertSite(i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Pu.constructor_=function(){this.ah=null,this.Ah=!1;var t=arguments[0];this.ah=t,this.Ah=0<t.getTolerance()};var Ou=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"locate",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ou.constructor_=function(){};var Lu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"init",value:function(){this.Ch=this.findEdge()}},{key:"locate",value:function(t){this.Ch.isLive()||this.init();t=this.ah.locateFromEdge(t,this.Ch);return this.Ch=t}},{key:"findEdge",value:function(){return this.ah.getEdges().iterator().next()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ou]}}]),t}();Lu.constructor_=function(){this.ah=null,this.Ch=null,this.ah=arguments[0],this.init()};var Du=function(){is(i,v);var n=es(i);function i(){var t;return hs(this,i),t=n.call(this),i.constructor_.apply(us(t),arguments),t}return gs(i,[{key:"getSegment",value:function(){return this.cr}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"msgWithSpatial",value:function(t,n){return null!==n?t+" [ "+n+" ]":t}}]),i}();Du.constructor_=function(){var t;this.cr=null,1===arguments.length?"string"==typeof arguments[0]?v.constructor_.call(this,arguments[0]):arguments[0]instanceof fn&&(v.constructor_.call(this,"Locate failed to converge (at edge: "+(t=arguments[0])+").  Possible causes include invalid Subdivision topology or very close sites"),this.cr=new fn(t)):2===arguments.length&&(v.constructor_.call(this,Du.msgWithSpatial(arguments[0],t=arguments[1])),this.cr=new fn(t))};var _u=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visit",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();_u.constructor_=function(){};var Fu=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"getTriangleVertices",value:function(t){var n=new Bu;return this.visitTriangles(n,t),n.getTriangleVertices()}},{key:"isFrameVertex",value:function(t){return!!t.equals(this.Ih[0])||!!t.equals(this.Ih[1])||!!t.equals(this.Ih[2])}},{key:"isVertexOfEdge",value:function(t,n){return!(!n.equals(t.orig(),this.Zi)&&!n.equals(t.dest(),this.Zi))}},{key:"connect",value:function(t,n){n=Nu.connect(t,n);return this.lh.add(n),n}},{key:"getVoronoiCellPolygon",value:function(t,n){var i=new S,e=t;do{var r=t.rot().orig().getCoordinate()}while(i.add(r),(t=t.oPrev())!==e);var u=new R;u.addAll(i,!1),u.closeRing(),u.size()<4&&(j.out.println(u),u.add(u.get(u.size()-1),!0));u=u.toCoordinateArray(),n=n.createPolygon(n.createLinearRing(u)),u=e.orig();return n.setUserData(u.getCoordinate()),n}},{key:"setLocator",value:function(t){this.fh=t}},{key:"initSubdiv",value:function(){var t=this.makeEdge(this.Ih[0],this.Ih[1]),n=this.makeEdge(this.Ih[1],this.Ih[2]);Nu.splice(t.sym(),n);var i=this.makeEdge(this.Ih[2],this.Ih[0]);return Nu.splice(n.sym(),i),Nu.splice(i.sym(),t),t}},{key:"isFrameBorderEdge",value:function(t){var n=new Array(3).fill(null);i.getTriangleEdges(t,n);n=new Array(3).fill(null);i.getTriangleEdges(t.sym(),n);n=t.lNext().dest();if(this.isFrameVertex(n))return!0;t=t.sym().lNext().dest();return!!this.isFrameVertex(t)}},{key:"makeEdge",value:function(t,n){n=Nu.makeEdge(t,n);return this.lh.add(n),n}},{key:"visitTriangles",value:function(t,n){this.ch++;var i=new Qn;i.push(this.vh);for(var e=new ut;!i.empty();){var r=i.pop();e.contains(r)||null!==(r=this.fetchTriangleToVisit(r,i,n,e))&&t.visit(r)}}},{key:"isFrameEdge",value:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))}},{key:"isOnEdge",value:function(t,n){return this.cr.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.cr.distance(n)<this.yh}},{key:"getEnvelope",value:function(){return new T(this.kh)}},{key:"createFrame",value:function(t){var n=t.getWidth(),i=t.getHeight(),e=i<n?10*n:10*i;this.Ih[0]=new Ru((t.getMaxX()+t.getMinX())/2,t.getMaxY()+e),this.Ih[1]=new Ru(t.getMinX()-e,t.getMinY()-e),this.Ih[2]=new Ru(t.getMaxX()+e,t.getMinY()-e),this.kh=new T(this.Ih[0].getCoordinate(),this.Ih[1].getCoordinate()),this.kh.expandToInclude(this.Ih[2].getCoordinate())}},{key:"getTriangleCoordinates",value:function(t){var n=new Zu;return this.visitTriangles(n,t),n.getTriangles()}},{key:"getVertices",value:function(t){for(var n=new ut,i=this.lh.iterator();i.hasNext();){var e=i.next(),r=e.orig();!t&&this.isFrameVertex(r)||n.add(r);e=e.dest();!t&&this.isFrameVertex(e)||n.add(e)}return n}},{key:"fetchTriangleToVisit",value:function(t,n,i,e){var r=t,u=0,s=!1;do{this.dh[u]=r,this.isFrameEdge(r)&&(s=!0);var h=r.sym()}while(e.contains(h)||n.push(h),e.add(r),u++,(r=r.lNext())!==t);return s&&!i?null:this.dh}},{key:"getEdges",value:function(){if(0===arguments.length)return this.lh;if(1===arguments.length){for(var t=arguments[0],n=this.getPrimaryEdges(!1),i=new Array(n.size()).fill(null),e=0,r=n.iterator();r.hasNext();){var u=r.next();i[e++]=t.createLineString([u.orig().getCoordinate(),u.dest().getCoordinate()])}return t.createMultiLineString(i)}}},{key:"getVertexUniqueEdges",value:function(t){for(var n=new S,i=new ut,e=this.lh.iterator();e.hasNext();){var r=e.next(),u=r.orig();i.contains(u)||(i.add(u),!t&&this.isFrameVertex(u)||n.add(r));u=r.sym(),r=u.orig();i.contains(r)||(i.add(r),!t&&this.isFrameVertex(r)||n.add(u))}return n}},{key:"getTriangleEdges",value:function(t){var n=new ju;return this.visitTriangles(n,t),n.getTriangleEdges()}},{key:"getPrimaryEdges",value:function(t){this.ch++;var n=new S,i=new Qn;i.push(this.vh);for(var e=new ut;!i.empty();){var r,u=i.pop();e.contains(u)||(r=u.getPrimary(),!t&&this.isFrameEdge(r)||n.add(r),i.push(u.oNext()),i.push(u.sym().oNext()),e.add(u),e.add(u.sym()))}return n}},{key:"delete",value:function(t){Nu.splice(t,t.oPrev()),Nu.splice(t.sym(),t.sym().oPrev());var n=t.sym(),i=t.rot(),e=t.rot().sym();this.lh.remove(t),this.lh.remove(n),this.lh.remove(i),this.lh.remove(e),t.delete(),n.delete(),i.delete(),e.delete()}},{key:"locateFromEdge",value:function(t,n){for(var i=0,e=this.lh.size(),r=n;;){if(++i>e)throw new Du(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r}},{key:"getTolerance",value:function(){return this.Zi}},{key:"getVoronoiCellPolygons",value:function(t){this.visitTriangles(new Gu,!0);for(var n=new S,i=this.getVertexUniqueEdges(!1).iterator();i.hasNext();){var e=i.next();n.add(this.getVoronoiCellPolygon(e,t))}return n}},{key:"getVoronoiDiagram",value:function(t){var n=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(hn.toGeometryArray(n))}},{key:"getTriangles",value:function(t){for(var n=this.getTriangleCoordinates(!1),i=new Array(n.size()).fill(null),e=0,r=n.iterator();r.hasNext();){var u=r.next();i[e++]=t.createPolygon(t.createLinearRing(u))}return t.createGeometryCollection(i)}},{key:"insertSite",value:function(t){var n=this.locate(t);if(t.equals(n.orig(),this.Zi)||t.equals(n.dest(),this.Zi))return n;var i=this.makeEdge(n.orig(),t);Nu.splice(i,n);for(var e=i;(n=(i=this.connect(n,i.sym())).oPrev()).lNext()!==e;);return e}},{key:"locate",value:function(){if(1===arguments.length)return arguments[0]instanceof Ru?this.fh.locate(arguments[0]):arguments[0]instanceof k?this.fh.locate(new Ru(arguments[0])):void 0;if(2===arguments.length){var t=arguments[0],n=arguments[1],i=this.fh.locate(new Ru(t));if(null===i)return null;var e=i,r=e=i.dest().getCoordinate().equals2D(t)?i.sym():e;do{if(r.dest().getCoordinate().equals2D(n))return r}while((r=r.oNext())!==e);return null}}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"getTriangleEdges",value:function(t,n){if(n[0]=t,n[1]=n[0].lNext(),n[2]=n[1].lNext(),n[2].lNext()!==n[0])throw new l("Edges do not form a triangle")}}]),i}(),Gu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visit",value:function(t){for(var n=t[0].orig().getCoordinate(),i=t[1].orig().getCoordinate(),e=t[2].orig().getCoordinate(),e=kn.circumcentre(n,i,e),r=new Ru(e),u=0;u<3;u++)t[u].rot().setOrig(r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_u]}}]),t}();Gu.constructor_=function(){};var ju=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getTriangleEdges",value:function(){return this.wh}},{key:"visit",value:function(t){this.wh.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_u]}}]),t}();ju.constructor_=function(){this.wh=new S};var Bu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"visit",value:function(t){this.wh.add([t[0].orig(),t[1].orig(),t[2].orig()])}},{key:"getTriangleVertices",value:function(){return this.wh}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_u]}}]),t}();Bu.constructor_=function(){this.wh=new S};var Zu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"checkTriangleSize",value:function(t){2<=t.length?Cn.toLineString(t[0],t[1]):1<=t.length&&Cn.toPoint(t[0])}},{key:"visit",value:function(t){this.mh.clear();for(var n=0;n<3;n++){var i=t[n].orig();this.mh.add(i.getCoordinate())}if(0<this.mh.size()){this.mh.closeRing();var e=this.mh.toCoordinateArray();if(4!==e.length)return null;this.ph.add(e)}}},{key:"getTriangles",value:function(){return this.ph}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_u]}}]),t}();Zu.constructor_=function(){this.mh=new R,this.ph=new S},Fu.TriangleCircumcentreVisitor=Gu,Fu.TriangleEdgesListVisitor=ju,Fu.TriangleVertexListVisitor=Bu,Fu.TriangleCoordinatesVisitor=Zu,Fu.constructor_=function(){this.ch=0,this.lh=new S,this.vh=null,this.Zi=null,this.yh=null,this.Ih=new Array(3).fill(null),this.kh=null,this.fh=null,this.cr=new fn,this.dh=new Array(3).fill(null);var t=arguments[0],n=arguments[1];this.Zi=n,this.yh=n/Fu.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.vh=this.initSubdiv(),this.fh=new Lu(this)},Fu.EDGE_COINCIDENCE_TOL_FACTOR=1e3;var Vu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getLineSegment",value:function(){return this.Mh}},{key:"getEndZ",value:function(){return this.Mh.getCoordinate(1).z}},{key:"getStartZ",value:function(){return this.Mh.getCoordinate(0).z}},{key:"intersection",value:function(t){return this.Mh.intersection(t.getLineSegment())}},{key:"getStart",value:function(){return this.Mh.getCoordinate(0)}},{key:"getEnd",value:function(){return this.Mh.getCoordinate(1)}},{key:"getEndY",value:function(){return this.Mh.getCoordinate(1).y}},{key:"getStartX",value:function(){return this.Mh.getCoordinate(0).x}},{key:"equalsTopo",value:function(t){return this.Mh.equalsTopo(t.getLineSegment())}},{key:"getStartY",value:function(){return this.Mh.getCoordinate(0).y}},{key:"setData",value:function(t){this.Bi=t}},{key:"getData",value:function(){return this.Bi}},{key:"getEndX",value:function(){return this.Mh.getCoordinate(1).x}},{key:"toString",value:function(){return this.Mh.toString()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Vu.constructor_=function(){var t,n,i,e,r,u,s,h,g;this.Mh=null,this.Bi=null,2===arguments.length?this.Mh=new fn(arguments[0],arguments[1]):3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],this.Mh=new fn(t,n),this.Bi=i):6===arguments.length?(e=arguments[0],r=arguments[1],u=arguments[2],s=arguments[3],h=arguments[4],g=arguments[5],Vu.constructor_.call(this,new k(e,r,u),new k(s,h,g))):7===arguments.length&&(i=arguments[0],e=arguments[1],r=arguments[2],u=arguments[3],s=arguments[4],h=arguments[5],g=arguments[6],Vu.constructor_.call(this,new k(i,e,r),new k(u,s,h),g))};var Yu=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getInitialVertices",value:function(){return this.bh}},{key:"getKDT",value:function(){return this.Eh}},{key:"enforceConstraints",value:function(){this.addConstraintVertices();for(var t=0;t++,0<this.enforceGabriel(this.Sh)&&t<e.MAX_SPLIT_ITER;);}},{key:"insertSites",value:function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();this.insertSite(i)}}},{key:"getVertexFactory",value:function(){return this.xh}},{key:"getPointArray",value:function(){for(var t=new Array(this.bh.size()+this.Rh.size()).fill(null),n=0,i=this.bh.iterator();i.hasNext();){var e=i.next();t[n++]=e.getCoordinate()}for(var r=this.Rh.iterator();r.hasNext();)e=r.next(),t[n++]=e.getCoordinate();return t}},{key:"setConstraints",value:function(t,n){this.Sh=t,this.Rh=n}},{key:"computeConvexHull",value:function(){var t=new hn,n=this.getPointArray(),t=new Hn(n,t);this.Th=t.getConvexHull()}},{key:"addConstraintVertices",value:function(){this.computeConvexHull(),this.insertSites(this.Rh)}},{key:"findNonGabrielPoint",value:function(t){var n=t.getStart(),i=t.getEnd(),e=new k((n.x+i.x)/2,(n.y+i.y)/2),r=n.distance(e),t=new T(e);t.expandBy(r);for(var t=this.Eh.query(t),u=null,s=c.MAX_VALUE,h=t.iterator();h.hasNext();){var g,o=h.next().getCoordinate();o.equals2D(n)||o.equals2D(i)||(g=e.distance(o))<r&&(null===u||g<s)&&(u=o,s=g)}return u}},{key:"getConstraintSegments",value:function(){return this.Sh}},{key:"setSplitPointFinder",value:function(t){this.Nh=t}},{key:"getConvexHull",value:function(){return this.Th}},{key:"getTolerance",value:function(){return this.Zi}},{key:"enforceGabriel",value:function(t){for(var n=new S,i=0,e=new S,r=t.iterator();r.hasNext();){var u,s=r.next(),h=this.findNonGabrielPoint(s);null!==h&&(this.uh=this.Nh.findSplitPoint(s,h),u=this.createVertex(this.uh,s),this.insertSite(u).getCoordinate().equals2D(this.uh),h=new Vu(s.getStartX(),s.getStartY(),s.getStartZ(),u.getX(),u.getY(),u.getZ(),s.getData()),u=new Vu(u.getX(),u.getY(),u.getZ(),s.getEndX(),s.getEndY(),s.getEndZ(),s.getData()),n.add(h),n.add(u),e.add(s),i+=1)}return t.removeAll(e),t.addAll(n),i}},{key:"createVertex",value:function(){if(1===arguments.length){var t=arguments[0],n=null;return null!==this.xh?this.xh.createVertex(t,null):new Tu(t)}if(2===arguments.length){t=arguments[0],n=null;return(n=null!==this.xh?this.xh.createVertex(t,arguments[1]):new Tu(t)).setOnConstraint(!0),n}}},{key:"getSubdivision",value:function(){return this.ah}},{key:"computeBoundingBox",value:function(){var t=e.computeVertexEnvelope(this.bh),n=e.computeVertexEnvelope(this.Rh),i=new T(t);i.expandToInclude(n);t=.2*i.getWidth(),n=.2*i.getHeight(),n=Math.max(t,n);this.Ph=new T(i),this.Ph.expandBy(n)}},{key:"setVertexFactory",value:function(t){this.xh=t}},{key:"formInitialDelaunay",value:function(){this.computeBoundingBox(),this.ah=new Fu(this.Ph,this.Zi),this.ah.setLocator(new Lu(this.ah)),this.Oh=new Pu(this.ah),this.insertSites(this.bh)}},{key:"insertSite",value:function(){if(arguments[0]instanceof Tu){var t=arguments[0],n=this.Eh.insert(t.getCoordinate(),t);if(n.isRepeated()){n=n.getData();return n.merge(t),n}return this.Oh.insertSite(t),t}arguments[0]instanceof k&&this.insertSite(this.createVertex(arguments[0]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeVertexEnvelope",value:function(t){for(var n=new T,i=t.iterator();i.hasNext();){var e=i.next();n.expandToInclude(e.getCoordinate())}return n}}]),e}();Yu.constructor_=function(){this.bh=null,this.Rh=null,this.Sh=new S,this.ah=null,this.Oh=null,this.Th=null,this.Nh=new Su,this.Eh=null,this.xh=null,this.Ph=null,this.uh=null,this.Zi=null;var t=arguments[0],n=arguments[1];this.bh=new S(t),this.Zi=n,this.Eh=new Gi(n)},Yu.MAX_SPLIT_ITER=99;var Uu=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"create",value:function(){if(null!==this.ah)return null;var t=i.envelope(this.Lh),n=i.toVertices(this.Lh);this.ah=new Fu(t,this.Zi),new Pu(this.ah).insertSites(n)}},{key:"setTolerance",value:function(t){this.Zi=t}},{key:"setSites",value:function(){arguments[0]instanceof X?this.Lh=i.extractUniqueCoordinates(arguments[0]):d(arguments[0],m)&&(this.Lh=i.unique($.toCoordinateArray(arguments[0])))}},{key:"getEdges",value:function(t){return this.create(),this.ah.getEdges(t)}},{key:"getSubdivision",value:function(){return this.create(),this.ah}},{key:"getTriangles",value:function(t){return this.create(),this.ah.getTriangles(t)}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractUniqueCoordinates",value:function(t){if(null===t)return new R;t=t.getCoordinates();return i.unique(t)}},{key:"envelope",value:function(t){for(var n=new T,i=t.iterator();i.hasNext();){var e=i.next();n.expandToInclude(e)}return n}},{key:"unique",value:function(t){t=$.copyDeep(t);return yt.sort(t),new R(t,!1)}},{key:"toVertices",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();){var e=i.next();n.add(new Ru(e))}return n}}]),i}();Uu.constructor_=function(){this.Lh=null,this.Zi=0,this.ah=null};Xt=function(){function s(){hs(this,s),s.constructor_.apply(this,arguments)}return gs(s,[{key:"createSiteVertices",value:function(t){for(var n=new S,i=t.iterator();i.hasNext();){var e=i.next();this.Dh.containsKey(e)||n.add(new Tu(e))}return n}},{key:"create",value:function(){if(null!==this.ah)return null;var t=Uu.envelope(this.Lh),n=new S;null!==this._h&&(t.expandToInclude(this._h.getEnvelopeInternal()),this.createVertices(this._h),n=s.createConstraintSegments(this._h));t=this.createSiteVertices(this.Lh),t=new Yu(t,this.Zi);t.setConstraints(n,new S(this.Dh.values())),t.formInitialDelaunay(),t.enforceConstraints(),this.ah=t.getSubdivision()}},{key:"setTolerance",value:function(t){this.Zi=t}},{key:"setConstraints",value:function(t){this._h=t}},{key:"setSites",value:function(t){this.Lh=Uu.extractUniqueCoordinates(t)}},{key:"getEdges",value:function(t){return this.create(),this.ah.getEdges(t)}},{key:"getSubdivision",value:function(){return this.create(),this.ah}},{key:"getTriangles",value:function(t){return this.create(),this.ah.getTriangles(t)}},{key:"createVertices",value:function(t){for(var n=t.getCoordinates(),i=0;i<n.length;i++){var e=new Tu(n[i]);this.Dh.put(n[i],e)}}},{key:"getClass",value:function(){return s}},{key:"interfaces_",get:function(){return[]}}],[{key:"createConstraintSegments",value:function(){if(1===arguments.length){for(var t=Dn.getLines(arguments[0]),n=new S,i=t.iterator();i.hasNext();){var e=i.next();s.createConstraintSegments(e,n)}return n}if(2===arguments.length)for(var t=arguments[0],r=arguments[1],u=t.getCoordinates(),i=1;i<u.length;i++)r.add(new Vu(u[i-1],u[i]))}}]),s}();Xt.constructor_=function(){this.Lh=null,this._h=null,this.Zi=0,this.ah=null,this.Dh=new Ct};Tn=function(){function n(){hs(this,n),n.constructor_.apply(this,arguments)}return gs(n,[{key:"create",value:function(){if(null!==this.ah)return null;var t=Uu.envelope(this.Lh);this.Fh=t;var n=Math.max(this.Fh.getWidth(),this.Fh.getHeight());this.Fh.expandBy(n),null!==this.Gh&&this.Fh.expandToInclude(this.Gh);n=Uu.toVertices(this.Lh);this.ah=new Fu(t,this.Zi),new Pu(this.ah).insertSites(n)}},{key:"getDiagram",value:function(t){this.create();t=this.ah.getVoronoiDiagram(t);return n.clipGeometryCollection(t,this.Fh)}},{key:"setTolerance",value:function(t){this.Zi=t}},{key:"setSites",value:function(){arguments[0]instanceof X?this.Lh=Uu.extractUniqueCoordinates(arguments[0]):d(arguments[0],m)&&(this.Lh=Uu.unique($.toCoordinateArray(arguments[0])))}},{key:"setClipEnvelope",value:function(t){this.Gh=t}},{key:"getSubdivision",value:function(){return this.create(),this.ah}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"clipGeometryCollection",value:function(t,n){for(var i=t.getFactory().toGeometry(n),e=new S,r=0;r<t.getNumGeometries();r++){var u=t.getGeometryN(r),s=null;n.contains(u.getEnvelopeInternal())?s=u:n.intersects(u.getEnvelopeInternal())&&(s=i.intersection(u)).setUserData(u.getUserData()),null===s||s.isEmpty()||e.add(s)}return t.getFactory().createGeometryCollection(hn.toGeometryArray(e))}}]),n}();Tn.constructor_=function(){this.Lh=null,this.Zi=0,this.ah=null,this.Gh=null,this.Fh=null};var q=Object.freeze({Vertex:Ru}),Tn=Object.freeze({ConformingDelaunayTriangulationBuilder:Xt,DelaunayTriangulationBuilder:Uu,VoronoiDiagramBuilder:Tn,quadedge:q}),Wu=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"getSegmentIndex",value:function(){return this.jh}},{key:"getComponentIndex",value:function(){return this.Bh}},{key:"isEndpoint",value:function(t){t=t.getGeometryN(this.Bh).getNumPoints()-1;return this.jh>=t||this.jh===t&&1<=this.Zh}},{key:"isValid",value:function(t){if(this.Bh<0||this.Bh>=t.getNumGeometries())return!1;t=t.getGeometryN(this.Bh);return!(this.jh<0||this.jh>t.getNumPoints()||this.jh===t.getNumPoints()&&0!==this.Zh||this.Zh<0||1<this.Zh)}},{key:"normalize",value:function(){this.Zh<0&&(this.Zh=0),1<this.Zh&&(this.Zh=1),this.Bh<0&&(this.Bh=0,this.jh=0,this.Zh=0),this.jh<0&&(this.jh=0,this.Zh=0),1===this.Zh&&(this.Zh=0,this.jh+=1)}},{key:"toLowest",value:function(t){t=t.getGeometryN(this.Bh).getNumPoints()-1;return this.jh<t?this:new i(this.Bh,t,1,!1)}},{key:"getCoordinate",value:function(t){var n=t.getGeometryN(this.Bh),t=n.getCoordinateN(this.jh);if(this.jh>=n.getNumPoints()-1)return t;n=n.getCoordinateN(this.jh+1);return i.pointAlongSegmentByFraction(t,n,this.Zh)}},{key:"getSegmentFraction",value:function(){return this.Zh}},{key:"getSegment",value:function(t){var n=t.getGeometryN(this.Bh),i=n.getCoordinateN(this.jh);if(this.jh>=n.getNumPoints()-1){t=n.getCoordinateN(n.getNumPoints()-2);return new fn(t,i)}n=n.getCoordinateN(this.jh+1);return new fn(i,n)}},{key:"clamp",value:function(t){if(this.Bh>=t.getNumGeometries())return this.setToEnd(t),null;this.jh>=t.getNumPoints()&&(t=t.getGeometryN(this.Bh),this.jh=t.getNumPoints()-1,this.Zh=1)}},{key:"setToEnd",value:function(t){this.Bh=t.getNumGeometries()-1;t=t.getGeometryN(this.Bh);this.jh=t.getNumPoints()-1,this.Zh=1}},{key:"compareTo",value:function(t){return this.Bh<t.Bh?-1:this.Bh>t.Bh?1:this.jh<t.jh?-1:this.jh>t.jh?1:this.Zh<t.Zh?-1:this.Zh>t.Zh?1:0}},{key:"copy",value:function(){return new i(this.Bh,this.jh,this.Zh)}},{key:"toString",value:function(){return"LinearLoc["+this.Bh+", "+this.jh+", "+this.Zh+"]"}},{key:"isOnSameSegment",value:function(t){return this.Bh===t.Bh&&(this.jh===t.jh||t.jh-this.jh==1&&0===t.Zh||this.jh-t.jh==1&&0===this.Zh)}},{key:"snapToVertex",value:function(t,n){if(this.Zh<=0||1<=this.Zh)return null;var i=this.getSegmentLength(t),t=this.Zh*i,i=i-t;t<=i&&t<n?this.Zh=0:i<=t&&i<n&&(this.Zh=1)}},{key:"compareLocationValues",value:function(t,n,i){return this.Bh<t?-1:this.Bh>t?1:this.jh<n?-1:this.jh>n?1:this.Zh<i?-1:this.Zh>i?1:0}},{key:"getSegmentLength",value:function(t){var n=t.getGeometryN(this.Bh),i=this.jh;this.jh>=n.getNumPoints()-1&&(i=n.getNumPoints()-2);t=n.getCoordinateN(i),i=n.getCoordinateN(i+1);return t.distance(i)}},{key:"isVertex",value:function(){return this.Zh<=0||1<=this.Zh}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[u]}}],[{key:"getEndLocation",value:function(t){var n=new i;return n.setToEnd(t),n}},{key:"pointAlongSegmentByFraction",value:function(t,n,i){if(i<=0)return t;if(1<=i)return n;var e=(n.x-t.x)*i+t.x,r=(n.y-t.y)*i+t.y,t=(n.z-t.z)*i+t.z;return new k(e,r,t)}},{key:"compareLocationValues",value:function(t,n,i,e,r,u){return t<e?-1:e<t?1:n<r?-1:r<n?1:i<u?-1:u<i?1:0}}]),i}();Wu.constructor_=function(){var t,n,i,e;this.Bh=0,this.jh=0,(this.Zh=0)===arguments.length||(1===arguments.length?(this.Bh=(t=arguments[0]).Bh,this.jh=t.jh,this.Zh=t.Zh):2===arguments.length?Wu.constructor_.call(this,0,arguments[0],arguments[1]):3===arguments.length?(n=arguments[0],i=arguments[1],e=arguments[2],this.Bh=n,this.jh=i,this.Zh=e,this.normalize()):4===arguments.length&&(t=arguments[0],n=arguments[1],i=arguments[2],e=arguments[3],this.Bh=t,this.jh=n,this.Zh=i,e&&this.normalize()))};var Xu=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getComponentIndex",value:function(){return this.Bh}},{key:"getLine",value:function(){return this.Vh}},{key:"getVertexIndex",value:function(){return this.Yh}},{key:"getSegmentEnd",value:function(){return this.Yh<this.getLine().getNumPoints()-1?this.Vh.getCoordinateN(this.Yh+1):null}},{key:"next",value:function(){if(!this.hasNext())return null;this.Yh++,this.Yh>=this.Vh.getNumPoints()&&(this.Bh++,this.loadCurrentLine(),this.Yh=0)}},{key:"loadCurrentLine",value:function(){if(this.Bh>=this.Uh)return this.Vh=null;this.Vh=this.Wh.getGeometryN(this.Bh)}},{key:"getSegmentStart",value:function(){return this.Vh.getCoordinateN(this.Yh)}},{key:"isEndOfLine",value:function(){return!(this.Bh>=this.Uh||this.Yh<this.Vh.getNumPoints()-1)}},{key:"hasNext",value:function(){return!(this.Bh>=this.Uh||this.Bh===this.Uh-1&&this.Yh>=this.Vh.getNumPoints())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"segmentEndVertexIndex",value:function(t){return 0<t.getSegmentFraction()?t.getSegmentIndex()+1:t.getSegmentIndex()}}]),t}();Xu.constructor_=function(){if(this.Wh=null,this.Uh=null,this.Vh=null,this.Bh=0,this.Yh=0,1===arguments.length)Xu.constructor_.call(this,arguments[0],0,0);else if(2===arguments.length){var t=arguments[0],n=arguments[1];Xu.constructor_.call(this,t,n.getComponentIndex(),Xu.segmentEndVertexIndex(n))}else if(3===arguments.length){var i=arguments[0],t=arguments[1],n=arguments[2];if(!d(i,It))throw new l("Lineal geometry is required");this.Wh=i,this.Uh=i.getNumGeometries(),this.Bh=t,this.Yh=n,this.loadCurrentLine()}};var zu=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"indexOf",value:function(t){return this.indexOfFromStart(t,null)}},{key:"indexOfFromStart",value:function(t,n){for(var i,e,r,u,s=c.MAX_VALUE,h=0,g=0,o=-1,a=new fn,A=new Xu(this.Wh);A.hasNext();A.next())A.isEndOfLine()||(a.p0=A.getSegmentStart(),a.p1=A.getSegmentEnd(),i=a.distance(t),e=a.segmentFraction(t),r=A.getComponentIndex(),u=A.getVertexIndex(),i<s&&(null===n||n.compareLocationValues(r,u,e)<0)&&(h=r,g=u,o=e,s=i));return s===c.MAX_VALUE?new Wu(n):new Wu(h,g,o)}},{key:"indexOfAfter",value:function(t,n){if(null===n)return this.indexOf(t);var i=Wu.getEndLocation(this.Wh);if(i.compareTo(n)<=0)return i;t=this.indexOfFromStart(t,n);return y.isTrue(0<=t.compareTo(n),"computed location is before specified minimum location"),t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"indexOf",value:function(t,n){return new e(t).indexOf(n)}},{key:"indexOfAfter",value:function(t,n,i){return new e(t).indexOfAfter(n,i)}}]),e}();zu.constructor_=function(){this.Wh=null,this.Wh=arguments[0]};var Qu=function(){function i(){hs(this,i),i.constructor_.apply(this,arguments)}return gs(i,[{key:"indicesOf",value:function(t){var n=t.getGeometryN(0).getCoordinateN(0),i=t.getGeometryN(t.getNumGeometries()-1),e=i.getCoordinateN(i.getNumPoints()-1),r=new zu(this.Wh),i=new Array(2).fill(null);return i[0]=r.indexOf(n),0===t.getLength()?i[1]=i[0].copy():i[1]=r.indexOfAfter(e,i[0]),i}},{key:"getClass",value:function(){return i}},{key:"interfaces_",get:function(){return[]}}],[{key:"indicesOf",value:function(t,n){return new i(t).indicesOf(n)}}]),i}();Qu.constructor_=function(){this.Wh=null,this.Wh=arguments[0]};var Ku=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"getGeometry",value:function(){return this.endLine(),this.D.buildGeometry(this.Lt)}},{key:"getLastCoordinate",value:function(){return this.Xh}},{key:"endLine",value:function(){if(null===this.mh)return null;if(this.zh&&this.mh.size()<2)return this.mh=null;var t=this.mh.toCoordinateArray(),n=t;this.Qh&&(n=this.validCoordinateSequence(t));var i=this.mh=null;try{i=this.D.createLineString(n)}catch(t){if(!(t instanceof l))throw t;if(!this.zh)throw t}null!==i&&this.Lt.add(i)}},{key:"setFixInvalidLines",value:function(t){this.Qh=t}},{key:"add",value:function(){var t,n;1===arguments.length?this.add(arguments[0],!0):2===arguments.length&&(t=arguments[0],n=arguments[1],null===this.mh&&(this.mh=new R),this.mh.add(t,n),this.Xh=t)}},{key:"setIgnoreInvalidLines",value:function(t){this.zh=t}},{key:"validCoordinateSequence",value:function(t){return 2<=t.length?t:[t[0],t[0]]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ku.constructor_=function(){this.D=null,this.Lt=new S,this.mh=null,this.zh=!1,this.Qh=!1,this.Xh=null,this.D=arguments[0]};var Hu=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"computeLinear",value:function(t,n){var i=new Ku(this.au.getFactory());i.setFixInvalidLines(!0),t.isVertex()||i.add(t.getCoordinate(this.au));for(var e=new Xu(this.au,t);e.hasNext()&&!(n.compareLocationValues(e.getComponentIndex(),e.getVertexIndex(),0)<0);e.next()){var r=e.getSegmentStart();i.add(r),e.isEndOfLine()&&i.endLine()}return n.isVertex()||i.add(n.getCoordinate(this.au)),i.getGeometry()}},{key:"computeLine",value:function(t,n){var i=this.au.getCoordinates(),e=new R,r=t.getSegmentIndex();0<t.getSegmentFraction()&&(r+=1);var u=n.getSegmentIndex();1===n.getSegmentFraction()&&(u+=1),u>=i.length&&(u=i.length-1),t.isVertex()||e.add(t.getCoordinate(this.au));for(var s=r;s<=u;s++)e.add(i[s]);n.isVertex()||e.add(n.getCoordinate(this.au)),e.size()<=0&&e.add(t.getCoordinate(this.au));t=e.toCoordinateArray();return t.length<=1&&(t=[t[0],t[0]]),this.au.getFactory().createLineString(t)}},{key:"extract",value:function(t,n){return n.compareTo(t)<0?this.reverse(this.computeLinear(n,t)):this.computeLinear(t,n)}},{key:"reverse",value:function(t){return t instanceof Lt||t instanceof pt?t.reverse():(y.shouldNeverReachHere("non-linear geometry encountered"),null)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"extract",value:function(t,n,i){return new e(t).extract(n,i)}}]),e}();Hu.constructor_=function(){this.au=null,this.au=arguments[0]};var Ju=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"clampIndex",value:function(t){t=t.copy();return t.clamp(this.Wh),t}},{key:"project",value:function(t){return zu.indexOf(this.Wh,t)}},{key:"checkGeometryType",value:function(){if(!(this.Wh instanceof Lt||this.Wh instanceof pt))throw new l("Input geometry must be linear")}},{key:"extractPoint",value:function(){if(1===arguments.length)return arguments[0].getCoordinate(this.Wh);if(2===arguments.length){var t=arguments[0],n=arguments[1],t=t.toLowest(this.Wh);return t.getSegment(this.Wh).pointAlongOffset(t.getSegmentFraction(),n)}}},{key:"isValidIndex",value:function(t){return t.isValid(this.Wh)}},{key:"getEndIndex",value:function(){return Wu.getEndLocation(this.Wh)}},{key:"getStartIndex",value:function(){return new Wu}},{key:"indexOfAfter",value:function(t,n){return zu.indexOfAfter(this.Wh,t,n)}},{key:"extractLine",value:function(t,n){return Hu.extract(this.Wh,t,n)}},{key:"indexOf",value:function(t){return zu.indexOf(this.Wh,t)}},{key:"indicesOf",value:function(t){return Qu.indicesOf(this.Wh,t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ju.constructor_=function(){this.Wh=null,this.Wh=arguments[0],this.checkGeometryType()};var qu=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"indexOf",value:function(t){return this.indexOfFromStart(t,-1)}},{key:"indexOfFromStart",value:function(t,n){for(var i,e,r=c.MAX_VALUE,u=n,s=0,h=new fn,g=new Xu(this.Wh);g.hasNext();)g.isEndOfLine()||(h.p0=g.getSegmentStart(),h.p1=g.getSegmentEnd(),i=h.distance(t),e=this.segmentNearestMeasure(h,t,s),i<r&&n<e&&(u=e,r=i),s+=h.getLength()),g.next();return u}},{key:"indexOfAfter",value:function(t,n){if(n<0)return this.indexOf(t);var i=this.Wh.getLength();if(i<n)return i;t=this.indexOfFromStart(t,n);return y.isTrue(n<=t,"computed index is before specified minimum index"),t}},{key:"segmentNearestMeasure",value:function(t,n,i){n=t.projectionFactor(n);return n<=0?i:n<=1?i+n*t.getLength():i+t.getLength()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"indexOf",value:function(t,n){return new e(t).indexOf(n)}},{key:"indexOfAfter",value:function(t,n,i){return new e(t).indexOfAfter(n,i)}}]),e}();qu.constructor_=function(){this.Wh=null,this.Wh=arguments[0]};var $u=function(){function e(){hs(this,e),e.constructor_.apply(this,arguments)}return gs(e,[{key:"getLength",value:function(t){for(var n=0,i=new Xu(this.Wh);i.hasNext();){if(!i.isEndOfLine()){var e=i.getSegmentStart(),e=i.getSegmentEnd().distance(e);if(t.getComponentIndex()===i.getComponentIndex()&&t.getSegmentIndex()===i.getVertexIndex())return n+e*t.getSegmentFraction();n+=e}i.next()}return n}},{key:"resolveHigher",value:function(t){if(!t.isEndpoint(this.Wh))return t;var n=t.getComponentIndex();if(n>=this.Wh.getNumGeometries()-1)return t;for(;++n<this.Wh.getNumGeometries()-1&&0===this.Wh.getGeometryN(n).getLength(););return new Wu(n,0,0)}},{key:"getLocation",value:function(){if(1===arguments.length)return this.getLocation(arguments[0],!0);if(2===arguments.length){var t=arguments[0],n=arguments[1],i=t;t<0&&(i=this.Wh.getLength()+t);i=this.getLocationForward(i);return n?i:this.resolveHigher(i)}}},{key:"getLocationForward",value:function(t){if(t<=0)return new Wu;for(var n=0,i=new Xu(this.Wh);i.hasNext();){if(i.isEndOfLine()){if(n===t){var e=i.getComponentIndex(),r=i.getVertexIndex();return new Wu(e,r,0)}}else{var u=i.getSegmentStart(),s=i.getSegmentEnd().distance(u);if(t<n+s){u=(t-n)/s,e=i.getComponentIndex(),r=i.getVertexIndex();return new Wu(e,r,u)}n+=s}i.next()}return Wu.getEndLocation(this.Wh)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getLength",value:function(t,n){return new e(t).getLength(n)}},{key:"getLocation",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return new e(t).getLocation(n)}if(3===arguments.length){var i=arguments[0],t=arguments[1],n=arguments[2];return new e(i).getLocation(t,n)}}}]),e}();$u.constructor_=function(){this.Wh=null,this.Wh=arguments[0]};q=function(){function t(){hs(this,t),t.constructor_.apply(this,arguments)}return gs(t,[{key:"clampIndex",value:function(t){var n=this.positiveIndex(t),t=this.getStartIndex();if(n<t)return t;t=this.getEndIndex();return t<n?t:n}},{key:"locationOf",value:function(){return 1===arguments.length?$u.getLocation(this.Wh,arguments[0]):2===arguments.length?$u.getLocation(this.Wh,arguments[0],arguments[1]):void 0}},{key:"project",value:function(t){return qu.indexOf(this.Wh,t)}},{key:"positiveIndex",value:function(t){return 0<=t?t:this.Wh.getLength()+t}},{key:"extractPoint",value:function(){if(1===arguments.length)return $u.getLocation(this.Wh,arguments[0]).getCoordinate(this.Wh);if(2===arguments.length){var t=arguments[0],n=arguments[1],t=$u.getLocation(this.Wh,t).toLowest(this.Wh);return t.getSegment(this.Wh).pointAlongOffset(t.getSegmentFraction(),n)}}},{key:"isValidIndex",value:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()}},{key:"getEndIndex",value:function(){return this.Wh.getLength()}},{key:"getStartIndex",value:function(){return 0}},{key:"indexOfAfter",value:function(t,n){return qu.indexOfAfter(this.Wh,t,n)}},{key:"extractLine",value:function(t,n){new Ju(this.Wh);t=this.clampIndex(t),n=this.clampIndex(n),t=this.locationOf(t,t===n),n=this.locationOf(n);return Hu.extract(this.Wh,t,n)}},{key:"indexOf",value:function(t){return qu.indexOf(this.Wh,t)}},{key:"indicesOf",value:function(t){t=Qu.indicesOf(this.Wh,t);return[$u.getLength(this.Wh,t[0]),$u.getLength(this.Wh,t[1])]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();q.constructor_=function(){this.Wh=null,this.Wh=arguments[0]};var q=Object.freeze({LengthIndexedLine:q,LengthLocationMap:$u,LinearGeometryBuilder:Ku,LinearIterator:Xu,LinearLocation:Wu,LocationIndexedLine:Ju}),ts=function(){function t(){hs(this,t)}return gs(t,[{key:"interfaces_",get:function(){return[]}},{key:"getClass",value:function(){return t}}],[{key:"union",value:function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return _r.createEmptyResult(_r.UNION,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),Lr.overlayOp(t,n,_r.UNION)}}]),t}();X.prototype.equalsTopo=function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&iu.relate(this,t).isEquals(this.getDimension(),t.getDimension())},X.prototype.union=function(){return 0===arguments.length?hu.union(this):1===arguments.length?ts.union(this,arguments[0]):void 0},X.prototype.isValid=function(){return Iu.isValid(this)},X.prototype.intersection=function(t){if(this.isEmpty()||t.isEmpty())return _r.createEmptyResult(_r.INTERSECTION,this,t,this.k);if(this.isGeometryCollection()){var n=t;return pr.map(this,{interfaces_:[MapOp],map:function(t){return t.intersection(n)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Lr.overlayOp(this,t,_r.INTERSECTION)},X.prototype.covers=function(t){return iu.covers(this,t)},X.prototype.coveredBy=function(t){return iu.covers(t,this)},X.prototype.touches=function(t){return iu.touches(this,t)},X.prototype.intersects=function(t){return iu.intersects(this,t)},X.prototype.within=function(t){return iu.contains(t,this)},X.prototype.overlaps=function(t){return iu.overlaps(this,t)},X.prototype.disjoint=function(t){return iu.disjoint(this,t)},X.prototype.crosses=function(t){return iu.crosses(this,t)},X.prototype.buffer=function(){return 1===arguments.length?ir.bufferOp(this,arguments[0]):2===arguments.length?ir.bufferOp(this,arguments[0],arguments[1]):3===arguments.length?ir.bufferOp(this,arguments[0],arguments[1],arguments[2]):void 0},X.prototype.convexHull=function(){return new Hn(this).getConvexHull()},X.prototype.relate=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(1===arguments.length)return iu.relate(this,arguments[0]);if(2===arguments.length){var e=arguments[0],r=arguments[1];return iu.relate(this,e).matches(r)}},X.prototype.getCentroid=function(){if(this.isEmpty())return this.k.createPoint();var t=Xn.getCentroid(this);return this.createPointFromInternalCoord(t,this)},X.prototype.getInteriorPoint=function(){if(this.isEmpty())return this.k.createPoint();var t=null,n=this.getDimension(),t=new(0===n?ni:1===n?ti:qn)(this).getInteriorPoint();return this.createPointFromInternalCoord(t,this)},X.prototype.symDifference=function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return _r.createEmptyResult(_r.SYMDIFFERENCE,this,t,this.k);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Lr.overlayOp(this,t,_r.SYMDIFFERENCE)},X.prototype.createPointFromInternalCoord=function(t,n){return n.getPrecisionModel().makePrecise(t),n.getFactory().createPoint(t)},X.prototype.toText=function(){return(new Cn).write(this)},X.prototype.toString=function(){this.toText()},X.prototype.contains=function(t){return iu.contains(this,t)},X.prototype.difference=function(t){return this.isEmpty()?_r.createEmptyResult(_r.DIFFERENCE,this,t,this.k):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Lr.overlayOp(this,t,_r.DIFFERENCE))},X.prototype.isSimple=function(){return new Me(this).isSimple()},X.prototype.isWithinDistance=function(t,n){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>n)&&hr.isWithinDistance(this,t,n)},X.prototype.distance=function(t){return hr.distance(this,t)},X.prototype.isEquivalentClass=function(t){return this.getClass()===t.getClass()},t.version="2.0.2 (f363091)",t.algorithm=nt,t.densify=Wt,t.dissolve=zt,t.geom=dn,t.geomgraph=Jt,t.index=K,t.io=H,t.noding=J,t.operation=tt,t.precision=qt,t.simplify=Bi,t.triangulate=Tn,t.linearref=q,Object.defineProperty(t,"Kh",{value:!0})},"object"==s(n)&&void 0!==t?e(n):void 0===(e="function"==typeof(e=e)?e.apply(n,[n]):e)||(t.exports=e)},function(t,n,i){"use strict";i.r(n);var l={LEFT_TOP:1,LEFT_BOTTOM:2,RIGHT_TOP:3,RIGHT_BOTTOM:4};function r(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var e=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},this.Hh=null,this.Jh=t,this.qh=null,this.$h=null,void 0===this.Jh.backgroundImageSize&&(this.Jh.backgroundImageSize=50),void 0===this.Jh.pointerImageSize&&(this.Jh.pointerImageSize=50),this.Me=Math.floor((this.Jh.backgroundImageSize-this.Jh.pointerImageSize)/2),this.be=Math.floor((this.Jh.backgroundImageSize-this.Jh.pointerImageSize)/2),this.Jh.backgroundImageURL||(this.Jh.backgroundImageURL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAA4KGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxOC0wMy0wNVQxMTo0ODoyMCswODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE4LTAzLTA1VDExOjU3OjA1KzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxOC0wMy0wNVQxMTo1NzowNSswODowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDphZDgzZDBiZi1jODAyLTQwOTMtYjQ4Mi02YTVkYTMxYmE2Njk8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPnhtcC5kaWQ6YWQ4M2QwYmYtYzgwMi00MDkzLWI0ODItNmE1ZGEzMWJhNjY5PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06T3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6YWQ4M2QwYmYtYzgwMi00MDkzLWI0ODItNmE1ZGEzMWJhNjY5PC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOmFkODNkMGJmLWM4MDItNDA5My1iNDgyLTZhNWRhMzFiYTY2OTwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxOC0wMy0wNVQxMTo0ODoyMCswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjY0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjY0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz5neOjPAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAYbSURBVHja5JvdbxxXGYefMx9nZrK7tmexlZ60KqCqatRWVIXAVcVtBf8ARUVUNFiWDWmill4UrlEuUFHahFptSKVCJfIXUK5Rr0hAKlKroBaBKuqTyK537d3Nzp6Z2cNFZqmxHGdtx8565yft1Z6Z3d8z7/mc9xVLS0vsRkqpodpprSeBbwNfAx4BjgMKiIFK0awDNIEl4BrwD+DvwJ+VUmvso8R+ANBaPwT8APiOEOKbUsqu53k9z/OM53nGdd3McZy+EKIPYK11+v2+k+e5l2WZLD6BMSay1l4B3gPeVUr9c2QBaK1d4Blg3nXdb4VhuB6GYUdKmezlDxpjwiRJKkmSTOR5/hdgEbislMpHAkBh/DTwahiGrSNHjjSDIOjuR7j2er3o5s2bU0mS1ICXgNf2CmJPALTWPwYuRlG0Vq1WVz3PSzkAZVnmt9vterfbnQRmlVK/PWgAjwILvu+fnJiYuCGl7HEPZIwJ1tfXj6Zpegl4Qyn10UEAWBBCXKhWq8vVarXJCKjdbk+12+0Za+1PlVJv7CeAs67rvhjHsfZ9v8cIKU3ToNFoqDzPX1VK/XzY65wd/MY5KeUL09PTn46aeQDf93vT09OfSilPa63P3W0A54MgeL5er3/mOE6fEZXjOP16vf5ZEATPa63P3y0A54IgeK5er2shhGXEJYSw9XpdB0Hw3DCRcCcAZ6WUs3EcX+eQKY7j61LKWa312d0CWCgGvKXD8OS3ioQ4jpdc131Ra72wUwCPCyEuxHGsR7nPDzMmxHGshRAXtNaP7QTAfK1WWx7F0X43s0OtVlsG5ocFsOD7/o8qlUqTMVGlUmn6vn9Saz17p4WQB5hRnev3ulBaWVn5MuBt3EBtjoDTURStj5v5QVeIomit2LluGQEeYGZmZv59ULu6g1aWZf7y8vJXAKmUyjZHwLNhGLbG1TyA53lpGIZt4NmtusD8OA182wyIjY0zwgDAo57nPbnX46vDICll4nnek4N1wQDAM2EYtiiJCq/f2wjg6SAIOmUBUHh9egBgSghxogzhv7EbCCFOaK2nHOApKWWXkqnw/JQDPOF5Xq9sAArPTzjAcc/zTAkBGOC4AzxcYgAPO8ADrutmZQNQeH7AASYO86HHXg5LgEkHqA3e0pZJheeqQ0llrRWAcYCWtdYpIQAHaDnAer/fLx2AwnPLAf6T57lXQgAucMMBPs6yTJYNQOH5Ywe4VmIA1xzggyzLghICCIAPHOB9Y0xUNgCF5/cdoGmtvWqMCUtkPrTWXlVKNQfT33u9Xq9SFgCF1z/BF0di73a73YmyACi8/n4jgE/yPL9ShrHAGBPleX5FKfXJRgAAi51OZ3LcARQeF/+3K9zw3eUkSWpZlvljPPX5RZbp5a0AZMDL7Xa7Pq4ACm8/G7wX3AwA4Fy3251M03TsFkZpmgZFau1r/3cwsqldDsytra0dHTcAhae5zcnVW22D30rT9FKn05kao9CfStP0klLqrc3f3e4cYLHVas2kaSrHIfTb7fYMsGUO8e0AfGitfaHRaBw7zIcl/X7faTQax6y1c7fLJN/O3IU8z39d3EAcNvPWWtFoNI4VydMXb9fuTk/3FWPMxWazed9hA9BsNu8zxlxUSr2yXbthwvtMkiTvNBoNdRgioXjyKkmSd5RSZ+7Uftj+fSpJkrdXV1fvH+Uxod/vO6urq/cnSfK2UurUMNfsxMwZY8zrKysrD47i7JCmqVxZWXnQGPP6ME9+oN2UzPxECHG+Vqstj0pSVafTmWq1WjPW2lNKqd/s5NrdFk09Bsz7vn9ycnLyxr1KrEzTNFhbWxsUTS0qpT7c6T32WjY3C7wZRdF6rVb7/KDeMud57rVarS8VBxtz201z+woAQGvtAS8DvwzDsFWpVJr7lW9kjAk7nc6gcPIXwK827uzuCYCBtNYS+D4w57ruiSiK1oMguCuls71er9LtdifyPL8KvAn8QSl1V5I69rN4+ofAd4UQX5dS3vR9v1cUTqfbFU/nee5nWSbTNA2MMUestX8D/gj8bqSLp7eBMcWt8vlvcKvi9KvAUbYun78O/Av4CPgrt8rn93Wm+e8A7iLzS6p6CJoAAAAASUVORK5CYII="),this.Jh.pointerImageURL||(this.Jh.pointerImageURL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAA7bGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMwNjcgNzkuMTU3NzQ3LCAyMDE1LzAzLzMwLTIzOjQwOjQyICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE4LTAzLTA1VDExOjQ4OjExKzA4OjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMjAtMTEtMTNUMTQ6NDA6NDUrMDg6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDIwLTExLTEzVDE0OjQwOjQ1KzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOmUwOTZhNjVlLTU4ZTQtODU0Yy1iNTk0LWM5NzUzNmYwM2E1YjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjI4NDRhNDYzLTI1N2ItMTFlYi05YjE4LWFjZDEzNGM4YThlODwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDozRkM2NUZGNUEzQ0MxMUU2QjhGOTlFMTYyOEIzMUI4MDwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDozRkM2NUZGNkEzQ0MxMUU2QjhGOTlFMTYyOEIzMUI4MDwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjg3NzZBMTkxQTNEMDExRTZCOEY5OUUxNjI4QjMxQjgwPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDoyMDk3MmQ4Ni1lZDBmLTQyZDAtOTZiMS0xOWE0ZDUzN2YxZWQ8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTgtMDMtMDVUMTE6NTE6MjgrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChNYWNpbnRvc2gpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDplMDk2YTY1ZS01OGU0LTg1NGMtYjU5NC1jOTc1MzZmMDNhNWI8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMjAtMTEtMTNUMTQ6NDA6NDUrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+NjQ8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NjQ8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pq677moAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAYFJREFUeNrsmztOw0AQhj+jFJScg4pDIHEKDgFHgBwkEQU4CTXiHIGAqdK6IiWNvTSWkKIQO469L/9TWbszI+ubf/ZhyYkxhiHbCQM3ARAAARAAARAAARAAARiqjfpKfPXwU+eyfQlJ9jm/Xp9KATEBMA3HtAbECMC0nJMCYgBgOvKRAkIEYHrylQJCAGAsxUgBPgIwjmKlAB8AGE9ySAEuABhPc0kBAiAAf9bbN8HJ5fcGOKvzy/O8SboNXASngLWnuawBePE0lzUAE6DoIE8BTEME8AU8dpDnCchC3QXGR6qgAO5D3gYzID0iPu2z+rbOAXdA2SKu7Lv6tgBkVR+36f3PWE6C4wNVUFYx0RyFPw5cC9IqJqq7QFMVWOl9FwBWwKyB38xW9V3cButUYK33XQF4B+Z75ueVT9TfA/5TgdXedwngDVjsGF/Yrr4rALtUYL33XQNYAs9b1V+6eJER7uwGOK+eb129RKJ/hgZuAiAAAiAAAiAAAiAAAjBU+x0Ac4ZVr2BJd94AAAAASUVORK5CYII=")}var t,i,e;return t=n,(i=[{key:"addTo",value:function(t){this.Hh=t,this.tg()}},{key:"remove",value:function(){this.Jh.contain.removeChild(this.$h)}},{key:"on",value:function(t,n){this.$h.onclick=function(){n&&n()},this.$h.addEventListener("touchend",function(){n&&n()},!1)}},{key:"checkPosition",value:function(t,n,i){switch(i.style.left="",i.style.right="",i.style.top="",i.style.bottom="",t){case l.LEFT_TOP:i.style.left=(n=n||{x:10,y:10}).x+"px",i.style.top=n.y+"px";break;case l.RIGHT_TOP:i.style.right=-(n=n||{x:-10,y:10}).x+"px",i.style.top=n.y+"px";break;case l.LEFT_BOTTOM:i.style.left=(n=n||{x:10,y:-10}).x+"px",i.style.bottom=-n.y+"px";break;case l.RIGHT_BOTTOM:i.style.right=-(n=n||{x:-10,y:-10}).x+"px",i.style.bottom=-n.y+"px";break;default:i.style.left=(n=n||{x:10,y:10}).x+"px",i.style.top=n.y+"px"}}}])&&r(t.prototype,i),e&&r(t,e),n}();Object.assign(e.prototype,{tg:function(){var t=this,n=document.createElement("div");n.style.cssText="position:absolute;left:10px;top:10px;",n.style.width=this.Jh.backgroundImageSize+"px",n.style.height=this.Jh.backgroundImageSize+"px",n.style.backgroundColor="#FFFFFF",n.style.backgroundSize="100% 100%",n.style.zIndex=20,n.style.backgroundImage="url('"+this.Jh.backgroundImageURL+"')",n.style.borderRadius="80px",this.Jh.position&&this.checkPosition(this.Jh.position,this.Jh.offset,n),this.Jh.contain?this.Jh.contain.appendChild(n):(this.Jh.contain=this.Hh.getContainer(),this.Hh.getContainer().appendChild(n));var i=-this.Hh.getRotation();this.qh=document.createElement("div"),this.qh.style.cssText="position:absolute;left:"+this.Me+"px;top:"+this.be+"px;",this.qh.style.transform="rotate("+i+"deg)",this.qh.style.msTransform="rotate("+i+"deg)",this.qh.style.mozTransform="rotate("+i+"deg)",this.qh.style.webkitTransform="rotate("+i+"deg)",this.qh.style.oTransform="rotate("+i+"deg)",this.qh.style.width=this.Jh.pointerImageSize+"px",this.qh.style.height=this.Jh.pointerImageSize+"px",this.qh.style.backgroundSize="100% 100%",this.qh.style.backgroundImage="url('"+this.Jh.pointerImageURL+"')",n.appendChild(this.qh),this.$h=n,this.Hh.on("update",function(){t.ng()})},ng:function(){var t=-this.Hh.getRotation();this.qh.style.transform="rotate("+t+"deg)",this.qh.style.msTransform="rotate("+t+"deg)",this.qh.style.mozTransform="rotate("+t+"deg)",this.qh.style.webkitTransform="rotate("+t+"deg)",this.qh.style.oTransform="rotate("+t+"deg)",this.qh.style.top=this.Me+"px",this.qh.style.left=this.be+"px"}});var u=e;function s(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var o=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,e;return n=t,e=[{key:"toColor",value:function(t){if("number"==typeof t)return t;var n=t.split(",");return 3<=n.length?parseInt(n[0])<<16|parseInt(n[1])<<8|parseInt(n[2]):(console.error("color format error",t),0)}},{key:"bindEvent",value:function(t,u,n,s){t.addEventListener(n,function(t){var n,i=t||window.event,e=i.target||i.srcElement,r=i.currentTarget;for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var n=(this.document||this.ownerDocument).querySelectorAll(t),i=n.length;0<=--i&&n.item(i)!==this;);return-1<i});e!==r;)e.matches(u)&&(n=e,s.call(n,i)),e=e.parentNode})}},{key:"scrollTopAnFun",value:function(){var C,I=!1;return function n(i){var e=i.el,t=i.to,r=i.form,u=(i.time,t<r?"up":"bottom"),s=10,h=(r<t?t-r:t==r?0:r-t)/s,g=0,o=function(t){var n=t.val,i=t.nbak,e=t.n,t=t.elTop;return"up"==u?t+(i-e)*n:t-(i-e)*n};function a(){--C<=0?A():window.setTimeout(function(){!1!==C&&((g=o({val:s,nbak:h,n:C,elTop:t,VDIRECTIONE:u}))&&(e.scrollTop=g),a())},s)}var A=function(){C=I=!1,0==r&&(e.scrollTop=0)};!function(){if(I)return C=0,window.setTimeout(function(){var t=Object(i,{to:e.scrollTop});I=!1,n(t)},s+1);I=!0,C=h,a()}()}}},{key:"sleep",value:function(t){for(var n=(new Date).getTime(),i=0;i<1e7&&!((new Date).getTime()-n>t);i++);}}],(i=null)&&s(n.prototype,i),e&&s(n,e),t}(),h={FMMap_CONTROL_SMALL:"small",FMMap_CONTROL_NORMAL:"normal"};var g=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.size=h.FMMap_CONTROL_NORMAL,this.position=l.LEFT_TOP,this.offset={x:10,y:10},this.imgURL="resource/style/wedgets/img/",this.floorButtonCount=5,this.needAllLayerBtn=!0,Object.assign(this,n)};function a(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var A=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},this.Hh=null,this.ig=new g(t),this.ig.position||(this.ig.position=l.LEFT_TOP),this.eg=t.contain,this.ig.offset||(this.ig.offset={x:10,y:10}),this.rg=null,this.ug=t.imgURL||"resource/style/wedgets/img/"}var t,i,e;return t=n,(i=[{key:"addTo",value:function(t){this.Hh=t,this.eg||(this.eg=this.Hh.getContainer()),this.init()}},{key:"remove",value:function(){this.eg.removeChild(this.rg)}},{key:"init",value:function(){var t=this.createPanel();this.rg=t;var n=this;this.checkPosition(this.ig.position,this.ig.offset,t),o.bindEvent(t,"img","mouseover",function(t){this.src=this.dataset.on}),o.bindEvent(t,"img","mouseout",function(t){this.src=this.dataset.leave}),o.bindEvent(t,"div","click",function(t){"in"===this.dataset.type?n.Hh.zoomIn():n.Hh.zoomOut()}),o.bindEvent(t,"div","touchend",function(t){"in"===this.dataset.type?n.Hh.zoomIn():n.Hh.zoomOut()})}},{key:"showZoom",value:function(t){this.rg.style.display=t?"block":"none"}},{key:"createPanel",value:function(){var t=document.createElement("div");t.setAttribute("class","fm-control-zoom"),t.style.zIndex=20,t.style.position="absolute",t.style.backgroundColor="white",t.style.boxShadow="2px 2px 3px rgba(0,0,0, 0.3)",t.style.borderRadius="2px",t.style.left=0,t.style.top=0,this.eg.appendChild(t);return t.innerHTML=this.createInnerHtml("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAABmZmYAAABV8S+1AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAATSURBVAjXY2DAC0JDQwMgBF4AAFvvAp8tw46tAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAIElEQVQokWNgGAXUB4zGsrL/ydHIwsDAcI/KjhkFZAMA5XkCUOIdNxMAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAABmZmYAAABV8S+1AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAXSURBVAjXY2BgZQACXERoaGgAhMCrDgBkQQLbnsbDyQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAOElEQVQokWM0lpVlwAE+QGkBbJJMuHQRAiNBIwsDA8M7HHJ8UBqrPEU2CuGQg8UjVvkhFKr01wgAH8cEixbYBa8AAAAASUVORK5CYII="),t}},{key:"createInnerHtml",value:function(t,n,i,e){return'\n\n            <div data-type="in" style="padding: 14px; cursor: pointer;">\n            <img src='.concat(i," data-leave=").concat(i," data-on=").concat(e,' style="width: 14px; height: 14px;"/>\n             </div>\n            <hr style="height: 1px; border-top: 1px solid rgba(153, 153, 153, 0.45); border-right: none; border-bottom: none; border-left: none; border-image: initial; width: 60%; margin: 0px 20%;">\n            <div data-type="out" style="padding: 14px; cursor: pointer;">\n            <img src=').concat(t," data-leave=").concat(t," data-on=").concat(n,' style="width: 14px; height: 14px;"/>\n            </div>\n        ')}},{key:"checkPosition",value:function(t,n,i){switch(i.style.left="",i.style.right="",i.style.top="",i.style.bottom="",t){case l.LEFT_TOP:i.style.left=n.x+"px",i.style.top=n.y+"px";break;case l.RIGHT_TOP:i.style.right=-n.x+"px",i.style.top=n.y+"px";break;case l.LEFT_BOTTOM:i.style.left=n.x+"px",i.style.bottom=-n.y+"px";break;case l.RIGHT_BOTTOM:i.style.right=-n.x+"px",i.style.bottom=-n.y+"px"}}}])&&a(t.prototype,i),e&&a(t,e),n}(),C={MODE_3D:2,MODE_2D:4};Object.freeze(C);var f=C;function c(t,n,i){var e=document.createElement("div"),t='\n    <div class="scroll" id="scroll_'.concat(n+i,'"\n      style="\n        height: 18px;\n        background: url(&quot;').concat(t,'&quot;) 50% 50% no-repeat;\n        cursor: pointer;\n        background-color:#FFFFFF;">\n    </div>');return e.innerHTML=t.trim(),e.firstChild}function v(t,n){t&&n?t.appendChild(n):console.error(t,n)}for(var I=[],y=0;y<256;y++)I[y]=(y<16?"0":"")+y.toString(16);var k,d={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(I[255&t]+I[t>>8&255]+I[t>>16&255]+I[t>>24&255]+"-"+I[255&n]+I[n>>8&255]+"-"+I[n>>16&15|64]+I[n>>24&255]+"-"+I[63&i|128]+I[i>>8&255]+"-"+I[i>>16&255]+I[i>>24&255]+I[255&e]+I[e>>8&255]+I[e>>16&255]+I[e>>24&255]).toUpperCase()},clamp:function(t,n,i){return Math.max(n,Math.min(i,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,i,e,r){return e+(t-n)*(r-e)/(i-n)},lerp:function(t,n,i){return(1-i)*t+i*n},smoothstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*(3-2*t)},smootherstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*d.DEG2RAD},radToDeg:function(t){return t*d.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,n,i,e,r){var u=Math.cos,s=Math.sin,h=u(i/2),g=s(i/2),o=u((n+e)/2),a=s((n+e)/2),A=u((n-e)/2),i=s((n-e)/2),u=u((e-n)/2),n=s((e-n)/2);"XYX"===r?t.set(h*a,g*A,g*i,h*o):"YZY"===r?t.set(g*i,h*a,g*A,h*o):"ZXZ"===r?t.set(g*A,g*i,h*a,h*o):"XZX"===r?t.set(h*a,g*n,g*u,h*o):"YXY"===r?t.set(g*u,h*a,g*n,h*o):"ZYZ"===r?t.set(g*n,g*u,h*a,h*o):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function w(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var m=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.eg=(t=t||{}).contain,this.sg=new g(t),this.hg=42,this.gg=this.sg.floorButtonCount,this.Hh=null,this.og=null,this.ag=!1,this.Ag=!0,this.Cg=10,this.Ig=null,this.lg=null,this.fg=[],this.cg=null,this.vg=null,this.uuid=null,this.scrollTopAn_=new o.scrollTopAnFun,this.viewModeControl=void 0===t.viewModeControl||t.viewModeControl,this.floorModeControl=void 0===t.floorModeControl||t.floorModeControl,this.yg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAAEdUlEQVR4nO1bvU4bQRCeROkDT4DDCwQJ+oDk1LghLaRhyqSDDtOFzpTjJtDGTaixFPIAlsIDBNlPYHgCoiHfJsuy57tb794Z2Z9k2b69W89+O/PN/vnF/f09zTNe1dF2Zt4kojYRvcOln/pdRK6qtqVSD2DmNSLqWA13oUR8FpFfVdlUCQHM3ECP7xZ85BweMUxsWloCmHlJexSv107xHa4TvMJXrtc7InKbysZkBDDzZ/R6bsMKEKXe0ElhZ3QCmLmFBq54iie6dk6ojKAP32PaG40Aj7LbKCVuOWIZNWNMTUBOr12j4UHGglQl4q2nOIpQBhNgxe2Rp3gE486mMc76rT2Q7Aur42mEMogAuOhVlcpdQCg3Q8YPoQQMPb1xDndPlrLoPxEdT8iNRKRRtr6XAQasZbiixmurbH0BaOG3XKzAtlIImQssZVxXUr6aeI09rs/JMnm2ZSLGZGjkeIQa+IOZLxASU6k0soy6/Pb0pj5FDAK0xxselVaDt5n5FB5RShsQ61rnpwg2ZqK0Bvig6Q4CdAxFtqENGDJzu2h9uHeYuvGKKAQYiEgb3nDqFGnaOtLsAY3wQsuQYY48qS4JohJAf0m4FRHN1W+I6MIpNkJ5BVF7gH7Wa1qWkWGSIdmKEMSvlaHetlBSKoErguge4ELToYgoCR+RMWxs19l4RXICDHKEsjZURoBFhBHK67kkgCCURJR0zlAUtRAwS1gQMAM21IoFATNgQ61YEBChDt/qzLNBaQI8Kz25s7yqELIKFeoBx8537yyvYrg2pSMAw9ktz+TGzPKqJEJt2IJNpRFjZ2jSpkXm7g3m/5MWOPMQZfMl5t5g1m4w+fYMpiAg6m5xtDQIg7Kmu7tmXRCLnSG4Q92NmFvlSc4H5Kzomu2zzRIeELSyXASpT4iUPRrjIvlRmSrPCJ2V6HE9A7D37M8IuSiwvVX5cblaDkriGE3bOvhwjYZHPf5SBHN/UnQxG5wBG2rF3BOQbGuMmdeJaJ+ImkS0SkR9IhoQ0YmIjJ37vmRUc4NXT0RuUtiZaiS4Q0TfMoq18RumQcysBF0WqLant9vkxUD0EGDmZZ0aWI1lInpPRIe4puUHGY93cZ95dVGHQkm9RP3RkCIEdtBIxQcR6eNzn5lXERbrGc/2rPsfwMyHCBHznL6fxDI2xfkA7bUN7UG3MRZWS9Q3FhGGftAE7wlCkiwgIgMRedRLELsdfO0FVNvF+zLqioKkf5lh5n2r0U289y09KIOBdW80HUg9DlhGw03jx4jz0kquXmV9LRxCeUhNwMBR9IcMwcxS4NlHcNQ/mgckDQGI4D8hZOYBUuQ+M3edXs2DHfdlnpuIJB6g6c4nVMgQBs0nD06GfX+0UWGKgZD28G9rMGSX2a5bWAdApkl//ZjD4hQhYNxznZkPTDpE4+0xvy8V6jPutSYGPwYhGSQTqeYCl47yDxwXZhMOJeYCYzwXMobIRMq/zR2g5+yUpcZ37RFizmyQLAK7sSdCisWS2AzYUCvmmwAi+gPQcQvBT6vKtAAAAABJRU5ErkJggg==",this.kg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAAEgklEQVR4nO1bu04bQRS9WaUPfAETfiBI0MdIpI4b0kIaKJMOumW60JkSN4E2bkKNpZAPsBQ+IGT5AuAHhuiiM8kwzHofnrtrZB/JMrvz8L1n7mNevLi/v6dZxss2dFfadIjogIje4tVPfs7S5KJpWRq1AKXNChH1HMV9MBGfszT51ZRMjRCgtFEY8a2STU5hEZmwaLIEKG0WeETxeeUV3+E9wSpC5fy+l6XJrZSMYgQobT5j1AsVK0EUW0NPQs7oBChtulBwKVA81rQLXOUa8eF7THmjERCI7C4qBbeCYBk1Y0xMQMGoXULxWsKCVCbiTaA4SqCsTYDjt2mg+BrCnUwinPNb2yA55FZ6kkBZiwCY6EWTkbtEoOzUmT/UJSALjMYpzF0sZdF/InoBl7vO0kRV7S+pIcBKjimyv3ar9lcDXfyWjyXIVgl11gILOe+ZlK/WX2PP6wuyTJFsuYixGLr2LIIF/KG0OYNLTBSlkWXY5N9PLupTVHaBAHjEP4IIFyzwH6VND35bCdyG23IfUsozYhBAnO4QgDQisotPXEVpc1C2P9TN0FYUUQhwiGDBmYgjr4jTVsrZAzEiT/FtZJg0kOpEEJUAkHCbpQnn6tdEdOYV20B5gaBmFe/wOy7LyTBiENsRQvDr5kRvN1CSpI8XIboF+OB0mKVJZ0ygbE15hjgBFgWBsjU0RoBDhA2UlzNJACFQEpHomqEsWiFgmjAnYApkaBVzAqZAhlYxJyBCH6HdmWeDygQEdnoKV3lNoc4uVF0L0N5zcJXXMHyZ5AjAdHY9sLixq7wmiWAZ1iFTZcQ4GRp3aJF7eoP1/7gNziJEOXyJeTaYdxpMoTODCQiIelocLQ1CoLzl7pbdF6yzQQrcoW8V86hc5H4AlDzI2dS0x2edChZwhFGPvoKUviFS9WqMD/GrMk3eETqpMOJ8B2D72d8R8lHieKvx63KtXJTENZoD5+LDJRSPev2lDGb+puh8NTgFMrSKmSdA7GhMabNKRDtEtEFEy0Q0JKIRER1maXLj1fuS080VPoMsTa4k5JSaCW4S0becYlZ+zSqktGGCzkt0OyCiXZe8GIjuAkqbRSI6dpTdJaJ3RLSPd1y+l9O8j3r200cfDCb1HP1Hg4QLbEJJxocsTYb4e6i0WYZbrOa0HTj1H6C02YeL2Hb8fRhLWIn7ATxqazyCvjIOliv0d5OlyS7iB42xnloQyQJZmoyyNHk0Sgh2m3gc1Oi2j+9F9BUFov8yo7TZcZTewPfQiQdVMHLqRosD0vOARShulb+Bn1eO5GxVzmNpFyqCNAEjL6I/ZAilzXGJto/gRf9oFiDqAgiC/wKh0maEFLmjtOl7o1oE1++rtBsLEQvgdBcKVMgQFhtPGo6HWz/arFBiIsQj/NuZDLllrumWjgMg06a/YcxpsYQLWPNcVdrs2XQI5d05fygVchv/3QYmPxZ1MkgupNYC517kH3kmvGvdocJa4Abt6swhciH5b3N7GDk3ZbHwfXeGWLAaJIfAfuyFEGO+JTYFMrSK2SaAiP4CqdESq7xRwWUAAAAASUVORK5CYII=",this.dg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAbklEQVQI133NoQ3CUBiF0VNIagkLPAUbMEERnaVLVPwjwDJgOgCsUNUNap/CvCBeCVd+OcmlWoo8pMhD3ZsKdXiU3i9jO21ginzCC8eSVlyWsZ2/MEU+4I1z9TgXvDYp8h5PXP3ehH6H+x8EHW4fybsaVZb+mXYAAAAASUVORK5CYII=",this.wg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAb0lEQVQI133PsQ3CMAAF0RcXbtnAFSswBJSIJVJkBRceArbJBGwAVRZAbg0FTZBQQLny/jW/S6Wd0VvnEjBgXIlGDB2k0ja4YruIbthNOdYAU44Ve9Sv6IHDvAkfO+V4xxEvPHGa3X9SaX0q7efcG8DBHdeJEiXGAAAAAElFTkSuQmCC",this.mg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAZ0lEQVQI133NMQ3CYBgE0FcQUBO1AAI6EJx8qZ5OJ6UMVYAD8EBQAEvD8EO48e4lR5MkU5Kp7bsGjVjwwrmq1i+YZMAV/VY9cKyq+wcm6Tc0NI83HKrq2SXZ44LR76w47TD/QbZtfgP0tBvnAWb0twAAAABJRU5ErkJggg==",this.pg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAZUlEQVQI133PMQ0CQQBE0bdnAESAAzACIjZXgJwjIwYMYOFEQA8JzW4D5Kb8ec2UJBNGy7sMOOG6gG44F0iywh3bLzRjX2t9lF6SbBpet/TErtY6w9BhC0e88Maho79LMib5OfcBZrcc5/hnjOIAAAAASUVORK5CYII=",this.Mg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA0lBMVEUAAAAegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoAAABMZOkLAAAARHRSTlMAJQsRbtXylzE6oPbJYwwPbNPwlS84nvXHYQpq0JMsnPPFXQT5hTKZVMjqiQ6W/r9YB2TK7I0nmMFbZs3tjyk0m8QJT9xaIWkAAAABYktHRACIBR1IAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqklEQVQ4y2NgGAWjgDLAyEScOmYWVhc2dg7CCjm5uF3AgIeXD586fgFBFwQQEhbBpVBUTNwFDUhISmExUFrGBRsQkpVDVSgir+CCEygqKSMFjooLXqCKUKqGX6WLOpIDNDTxKNTS1kF1ra4QVnV6+gaGGGHAZ2SModDE1AxHyKqZsyErtLA0ZMAN+KysoepsbO0IpgJ7B2AYOyo5EU4vQKDjTNjAUTAK8AMAeypG+KfRwzwAAAAASUVORK5CYII=",this.bg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABa1BMVEUAAAAegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoegvoAAAAEmJR8AAAAd3RSTlMAJozoB1e+/iSJ6QVVuyKHUrn9IITmKLS12errUedUuiMGvSWLWb+vzK6N7a3j5YMfXMJbPNFOAxxPOqD25IEdEG7U/LNMEaL34n4bEnDXsEkCP6X44MXuzmwPFHPYE831njcBQacqttBqtyvznDVnDZozy2UM8sXx3pEAAAABYktHRACIBR1IAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5UlEQVQ4y81U+TsCQRheKtvh6hBRlJJEJBGSUI5KoUNJzgoR5Zx/387M2tm2Vf3k8f6wz3zf9+77zHwXRf0jdHVLJN1d7VhSWQ8NGNA9MmkLmlyhBByUCrk4S9XbR4MG0H29qiZa/4AEiEAy0N8gNqjWgF+gUQ/+yGp1Q6AlhnRahqYf1oC20IzoKUN7GoSBGu2MOEYZTZ3wTEbmyeMTdGsWPTHOPtzMr4gQSoWZl0mLbFJUlp6UWYS1sdqa3jVqs4q3zpSdJ0vbpxoaaNoxYySl1ztnMW3WqScVNs45pikX451fcBPZRQ8AniUi5l6YZyguyruMa7Ti40Krq9zRtzaCKrzsZYx1/wY8BzaDwksHNwMwsuFfZx1b2zvQEQrvElnKtxsOQe/O9h7/Z+/+AfRGojFsx6IRaB/se5uScxhPINmj45OT4yMklogfio9NMpWG8UwGftOpZEPwNJs7y3PWeeEC5/GicMk582e57BVq3OubW85bLJXT6XKpyDlub65R497do0Q9VIislGQ7X3lAaX58IsNVfX4R3vnluQojeLj445qr1QmrXsshMTKuCOwCqL6+YfvtFYkJFgCWZVfK+8fn58c7ajSxlYLALqmvLzwCvywp/ODO1h4Cs0gD7RfpX+IbsgQXrPXbyDgAAAAASUVORK5CYII="}var t,i,e;return t=n,(i=[{key:"addTo",value:function(t){this.Hh=t,this.og=this.Hh.getLevel(),this.eg||(this.eg=this.Hh.getContainer()),this.init(),1<this.Hh.getVisibleLevels().length?this.setLayerStatus(!0):this.setLayerStatus(!1)}},{key:"remove",value:function(){this.Hh.off("levelChanged",this.gidchange),this.Hh.off("visibleLevelsLoaded",this.handleLayerChangeStyle),this.lg&&this.eg.removeChild(this.lg),this.lg=null}},{key:"init",value:function(){var i=this;this.uuid=d.generateUUID();var t=((n=document.createElement("div")).innerHTML='\n    <div class="fm-control-groups"\n      style = "\n        width: 42px;\n        position: absolute;\n        box-shadow: rgba(0, 0, 0, 0.3) 2px 2px 3px;\n        border-radius: 2px;\n        top: 30px;\n        z-index: 20;\n        right: 30px;">\n    </div>'.trim(),n.firstChild);this.lg=t,function(t,n,i){switch(i.style.left="",i.style.right="",i.style.top="",i.style.bottom="",t){case l.LEFT_TOP:i.style.left=n.x+"px",i.style.top=n.y+"px";break;case l.RIGHT_TOP:i.style.right=-n.x+"px",i.style.top=n.y+"px";break;case l.LEFT_BOTTOM:i.style.left=n.x+"px",i.style.bottom=-n.y+"px";break;case l.RIGHT_BOTTOM:i.style.right=-n.x+"px",i.style.bottom=-n.y+"px";break;default:i.style.left=n.x+"px",i.style.top=n.y+"px"}}(this.sg.position,this.sg.offset,t),v(this.eg,t);var n,e=this.Hh.getLevels(),r=e.length,u=this.gg,s=!0;if(this.viewModeControl&&(this.Hh.getViewMode()===f.MODE_3D?this.Ag=!1:this.Ag=!0,this.vg=(n=this.Ag?this.yg:this.kg,h=document.createElement("div"),n='\n    <div class="fm-control-tool-3d"\n      style="\n        display: block;\n        margin-bottom:10px;\n        height: 42px;\n        width: 42px;\n        padding: 0px;\n        cursor: pointer;\n        box-shadow: rgba(0, 0, 0, 0.3) 2px 2px 3px;\n        border-radius: 2px;\n        background: url(&quot;'.concat(n,'&quot;) no-repeat white;background-size:100% 100%">\n    </div>'),h.innerHTML=n.trim(),h.firstChild),this.initViewModePanelEvent(this.vg),v(t,this.vg)),this.floorModeControl){r<=this.gg&&(u=r,s=!1);var h=this.Mg;this.ag&&(h=this.bg);r=(r=h,h=document.createElement("div"),r='\n      <div class="fm-control-groups-layer fm-btn-layer"\n        style = "\n          padding: 10px;\n          cursor: pointer;\n          background-color:#FFFFFF;"\n      >\n        <img src="'.concat(r,'" style="width: 22px; height: 22px;">\n      </div>'),h.innerHTML=r.trim(),h.firstChild);this.sg.needAllLayerBtn&&v(t,r),this.Eg=r,s&&t.appendChild(c(this.dg,"top",this.uuid));var g=(h=u*this.hg+2*(u-1),u=document.createElement("div"),h='\n   <div class = "fm-layer-list"\n    style = "\n      overflow: hidden;\n      height: '.concat(h,'px;\n      background-color:#FFFFFF;">\n    </div'),u.innerHTML=h.trim(),u.firstChild);v(t,g),this.Ig=g,this.fg=this.Hh.getBuilding().getFloorsInfo();for(var o,a,A,C,I=this.fg.length-1;-1<I;I--)g.appendChild((o=this.fg[I],a=this.hg,A=this.uuid,C=void 0,C=document.createElement("div"),o="\n    <label\n      data-gid=".concat(o.gid,'\n      id="gid_').concat(o.gid+A,'"\n      style="\n        display: inline-block;\n        text-align: center;\n        width: ').concat(a,"px;\n        height: ").concat(a,"px;\n        line-height: ").concat(a,'px;\n        margin: 0px; cursor: pointer;\n        font-size: 0.8em;\n        font-weight: bold;\n        color: rgb(102, 102, 102);\n      ">\n      <span>').concat(o.alias&&o.alias.toUpperCase()||o.gname.toUpperCase(),"</span>\n    </label>"),C.innerHTML=o.trim(),C.firstChild)),0<I&&g.appendChild((C=void 0,(C=document.createElement("div")).innerHTML='\n    <hr\n      style="\n        height: 1px;\n        border-top: 1px solid rgba(153, 153, 153, 0.45);\n        border-right: none;\n        border-bottom: none;\n        border-left: none;\n        border-image: initial;\n        width: 60%;\n        margin: 0px 20%;">'.trim(),C.firstChild));s&&t.appendChild(c(this.wg,"buttom")),g.scrollTop=this.getCenterScrolltopById(this.og,e.length),document.getElementById("gid_"+this.og+this.uuid).style.color="rgb(30, 130, 250)",this.eventBtnPanelInit(g),this.eventPanelInit(t,g,e),this.eventSwitchBtn(r);r=function(t){var n=i.Hh.getLevels();t.level<n[0]||t.level>n[n.length-1]||(g.scrollTop=i.getCenterScrolltopById(t.level,n.length),i.setFocusStaus(t.level))};this.gidchange=r,this.handleLayerChangeStyle=this.handleLayerChangeStyle.bind(this),this.Hh.on("levelChanged",r),this.Hh.on("visibleLevelsLoaded",this.handleLayerChangeStyle),this.Sg=function(t){return(i.map?i.map.mapView.container_:document).querySelector(t)}}}},{key:"handleLayerChange",value:function(){!this.ag?this.Hh.setVisibleLevels(this.Hh.getLevels()):this.Hh.setVisibleLevels([this.Hh.getLevel()])}},{key:"handleLayerChangeStyle",value:function(){1<this.Hh.getVisibleLevels().length?this.setLayerStatus(!0):this.setLayerStatus(!1)}},{key:"eventSwitchBtn",value:function(t){this.handleLayerChange=this.handleLayerChange.bind(this),t.addEventListener("click",this.handleLayerChange),t.addEventListener("touchend",this.handleLayerChange)}},{key:"initViewModePanelEvent",value:function(t){var n=this;t.addEventListener("click",function(){n.Hh.getViewMode()===f.MODE_3D?(n.Hh.setViewMode({mode:f.MODE_2D}),this.style.backgroundImage="url("+n.yg+")"):(n.Hh.setViewMode({mode:f.MODE_3D}),this.style.backgroundImage="url("+n.kg+")")}),t.addEventListener("touchend",function(){n.Hh.getViewMode()===f.MODE_3D?(n.Hh.setViewMode({mode:f.MODE_2D}),this.style.backgroundImage="url("+n.yg+")"):(n.Hh.setViewMode({mode:f.MODE_3D}),this.style.backgroundImage="url("+n.kg+")")})}},{key:"eventBtnPanelInit",value:function(i){var e=this,r=this;r.changeScrollBtnPic(),o.bindEvent(i,"label","click",function(){var t;r.og!==parseInt(this.dataset.gid)&&(r.foucusId=parseInt(this.dataset.gid),t=r.Hh.getLevels(),this.dataset.gid<t[0]||this.dataset.gid>t[t.length-1]||(i.scrollTop=r.getCenterScrolltopById(parseInt(this.dataset.gid),t.length),r.setFocusStaus(this.dataset.gid)))});function t(t){r.changeScrollBtnPic();var n=0;t.wheelDelta?n+=-t.wheelDelta:t.detail&&(n+=t.detail),e.scrollTopAn_({el:i,to:i.scrollTop,form:i.scrollTop+n}),t.stopPropagation()}i.addEventListener("mousewheel",t,{passive:!0}),i.addEventListener("MozMousePixelScroll",t,!1),i.addEventListener("touchstart",this.touchstart.bind(this),!1),i.addEventListener("touchmove",this.touchmove.bind(this),!1),i.addEventListener("touchend",this.touchend.bind(this),!0)}},{key:"touchstart",value:function(t){t.preventDefault(),this.touchStartPointY=t.touches[0].pageY,this.touchPointX=t.touches[0].pageX,this.touchPointY=t.touches[0].pageY,t.stopPropagation()}},{key:"touchmove",value:function(t){t.preventDefault(),this.touchEndPointX=t.touches[0].pageX,this.touchEndPointY=t.touches[0].pageY,this.handleTouchEnd(t),t.stopPropagation()}},{key:"handleTouchEnd",value:function(t){var n=null,i=0;0<(t=t||window.event).changedTouches.length&&(this.touchEndPointX=t.changedTouches[0].pageX,this.touchEndPointY=t.changedTouches[0].pageY),(n=t.target)instanceof HTMLSpanElement==!0&&(n=n.parentElement),0!=(i=-(this.touchEndPointY-this.touchPointY))&&(this.touchPointX=this.touchEndPointX,this.touchPointY=this.touchEndPointY,n=this.Sg(".fm-layer-list"),this.scrollTopAn_({el:n,to:n.scrollTop,form:n.scrollTop+i}))}},{key:"touchend",value:function(t){var n=null;0<(t=t||window.event).changedTouches.length&&(this.touchEndPointX=t.changedTouches[0].pageX,this.touchEndPointY=t.changedTouches[0].pageY),(n=t.target)instanceof HTMLSpanElement==!0&&(n=n.parentElement);var i=Math.abs(this.touchEndPointY-this.touchStartPointY);i<5&&0<=i&&n&&(n=parseInt(n.dataset.gid),isNaN(n)||(this.foucusId=n,this.setFocusStaus(n))),t.stopPropagation()}},{key:"eventPanelInit",value:function(t,s,h){var g=this;t.onselectstart=function(){return!1},t.style.MozUserSelect="none",o.bindEvent(t,".scroll","click",function(t){var n=h.length-Math.floor(s.scrollTop/44)-(g.gg-1),i=s.scrollTop%44,e=n+g.gg-1+(0<i?1:0),r=0;if(this.id==="scroll_top"+g.uuid){var u=g.og+1,u=Math.min(h[h.length-1],u);if(g.foucusId==u)return;(g.foucusId=u)<n?r-=0<i?44-i:0:u<=1+e&&u===1+e&&(r-=44+(0<i?44-i:0))}else{u=g.og-1,u=Math.max(h[0],u);if(g.foucusId==u)return;e<(g.foucusId=u)?r+=0<i?i:0:n-1<=u&&u===n-1&&(r+=44+(0<i?i:0))}0!=r&&g.scrollTopAn_({el:s,to:s.scrollTop,form:s.scrollTop+r})}),o.bindEvent(t,".scroll","touchend",function(t){var n=h.length-Math.floor(s.scrollTop/44)-(g.gg-1),i=s.scrollTop%44,e=n+g.gg-1+(0<i?1:0),r=0;if(this.id==="scroll_top"+g.uuid){var u=g.og+1,u=Math.min(h[h.length-1],u);if(g.foucusId==u)return;(g.foucusId=u)<n?r-=0<i?44-i:0:u<=1+e&&u===1+e&&(r-=44+(0<i?44-i:0))}else{u=g.og-1,u=Math.max(h[0],u);if(g.foucusId==u)return;e<(g.foucusId=u)?r+=0<i?i:0:n-1<=u&&u===n-1&&(r+=44+(0<i?i:0))}0!=r&&g.scrollTopAn_({el:s,to:s.scrollTop,form:s.scrollTop+r})})}},{key:"getCenterScrolltopById",value:function(t,n){return(n-t-Math.floor(this.gg/2))*(this.hg+2)}},{key:"changeScrollBtnPic",value:function(){var t=this.og,n=this.Hh.getLevels(),i=document.getElementById("scroll_buttom"+this.uuid),e=document.getElementById("scroll_top"+this.uuid);t==n[0]?i&&(i.style.backgroundImage="url("+this.pg+")"):i&&(i.style.backgroundImage="url("+this.wg+")"),t==n[n.length-1]?e&&(e.style.backgroundImage="url("+this.mg+")"):e&&(e.style.backgroundImage="url("+this.dg+")")}},{key:"changeFocusLevel",value:function(t){this.foucusId=t}},{key:"changeLevelsSelect",value:function(t){this.setLayerStatus(t),this.allLayer=t}},{key:"setLayerStatus",value:function(t){this.ag=t,this.ag?this.Eg.firstElementChild.src=this.bg+"":this.Eg.firstElementChild.src=this.Mg+""}},{key:"onChange",value:function(t){k=t}},{key:"foucusId",get:function(){return this.og},set:function(t){this.Hh.setLevel({level:t}),this.setFocusStaus(t),k&&k([t])}},{key:"setFocusStaus",value:function(t){document.getElementById("gid_"+this.og+this.uuid).style.color="rgb(102, 102, 102)",this.og=parseInt(t),document.getElementById("gid_"+this.og+this.uuid).style.color="rgb(30, 130, 250)",this.changeScrollBtnPic()}},{key:"allLayer",get:function(){return this.ag},set:function(t){t?this.Hh.setVisibleLevels(this.Hh.getLevels()):this.Hh.setVisibleLevels([this.Hh.getLevel()])}}])&&w(t.prototype,i),e&&w(t,e),n}(),p={MODULE_SHORTEST:1,MODULE_BEST:2},M={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},b={ZH:"zh",EN:"en"};e=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(e.prototype,{xg:function(t,n){void 0===this.Rg&&(this.Rg={});var i=this.Rg;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(n)&&i[t].push(n)},Tg:function(t,n){if(void 0===this.Rg)return!1;var i=this.Rg;return void 0!==i[t]&&-1!==i[t].indexOf(n)},Ng:function(t,n){void 0!==this.Rg&&(void 0===(t=this.Rg[t])||-1!==(n=t.indexOf(n))&&t.splice(n,1))},Pg:function(t){if(void 0!==this.Rg){var n=this.Rg[t.type];if(void 0!==n)for(var i=n.slice(0),e=0,r=i.length;e<r;e++)i[e].call(this,t)}}});var E=e;function S(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var x=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}var t,i,e;return t=n,(i=[{key:"start",value:function(){this.startTime=R(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t,n=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(n=((t=R())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=n),n)}}])&&S(t.prototype,i),e&&S(t,e),n}();function R(){return("undefined"==typeof performance?Date:performance).now()}for(var T=[],N=0;N<256;N++)T[N]=(N<16?"0":"")+N.toString(16);var P=1234567,O={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(T[255&t]+T[t>>8&255]+T[t>>16&255]+T[t>>24&255]+"-"+T[255&n]+T[n>>8&255]+"-"+T[n>>16&15|64]+T[n>>24&255]+"-"+T[63&i|128]+T[i>>8&255]+"-"+T[i>>16&255]+T[i>>24&255]+T[255&e]+T[e>>8&255]+T[e>>16&255]+T[e>>24&255]).toUpperCase()},clamp:function(t,n,i){return Math.max(n,Math.min(i,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,i,e,r){return e+(t-n)*(r-e)/(i-n)},lerp:function(t,n,i){return(1-i)*t+i*n},smoothstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*(3-2*t)},smootherstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((P=16807*(P=void 0!==t?t%2147483647:P)%2147483647)-1)/2147483646},degToRad:function(t){return t*O.DEG2RAD},radToDeg:function(t){return t*O.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,n,i,e,r){var u=Math.cos,s=Math.sin,h=u(i/2),g=s(i/2),o=u((n+e)/2),a=s((n+e)/2),A=u((n-e)/2),C=s((n-e)/2),I=u((e-n)/2),l=s((e-n)/2);switch(r){case"XYX":t.set(h*a,g*A,g*C,h*o);break;case"YZY":t.set(g*C,h*a,g*A,h*o);break;case"ZXZ":t.set(g*A,g*C,h*a,h*o);break;case"XZX":t.set(h*a,g*l,g*I,h*o);break;case"YXY":t.set(g*I,h*a,g*l,h*o);break;case"ZYZ":t.set(g*l,g*I,h*a,h*o);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function L(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}C=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),Object.defineProperty(this,"isQuaternion",{value:!0}),this.Og=t,this.Lg=n,this.Dg=i,this._g=e}var t,n,i;return t=r,i=[{key:"slerp",value:function(t,n,i,e){return i.copy(t).slerp(n,e)}},{key:"slerpFlat",value:function(t,n,i,e,r,u,s){var h=i[e+0],g=i[e+1],o=i[e+2],a=i[e+3],A=r[u+0],C=r[u+1],I=r[u+2],l=r[u+3];a===l&&h===A&&g===C&&o===I||(i=1-s,r=0<=(e=h*A+g*C+o*I+a*l)?1:-1,(u=1-e*e)>Number.EPSILON&&(u=Math.sqrt(u),e=Math.atan2(u,e*r),i=Math.sin(i*e)/u,s=Math.sin(s*e)/u),h=h*i+A*(r=s*r),g=g*i+C*r,o=o*i+I*r,a=a*i+l*r,i===1-s&&(h*=s=1/Math.sqrt(h*h+g*g+o*o+a*a),g*=s,o*=s,a*=s)),t[n]=h,t[n+1]=g,t[n+2]=o,t[n+3]=a}},{key:"multiplyQuaternionsFlat",value:function(t,n,i,e,r,u){var s=i[e],h=i[e+1],g=i[e+2],o=i[e+3],a=r[u],i=r[u+1],e=r[u+2],u=r[u+3];return t[n]=s*u+o*a+h*e-g*i,t[n+1]=h*u+o*i+g*a-s*e,t[n+2]=g*u+o*e+s*i-h*a,t[n+3]=o*u-s*a-h*i-g*e,t}}],(n=[{key:"x",get:function(){return this.Og},set:function(t){this.Og=t,this.Fg()}},{key:"y",get:function(){return this.Lg},set:function(t){this.Lg=t,this.Fg()}},{key:"z",get:function(){return this.Dg},set:function(t){this.Dg=t,this.Fg()}},{key:"w",get:function(){return this._g},set:function(t){this._g=t,this.Fg()}},{key:"set",value:function(t,n,i,e){return this.Og=t,this.Lg=n,this.Dg=i,this._g=e,this.Fg(),this}},{key:"clone",value:function(){return new this.constructor(this.Og,this.Lg,this.Dg,this._g)}},{key:"copy",value:function(t){return this.Og=t.x,this.Lg=t.y,this.Dg=t.z,this._g=t.w,this.Fg(),this}},{key:"setFromEuler",value:function(t,n){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t.Og,e=t.Lg,r=t.Dg,u=t.Gg,s=Math.cos,t=Math.sin,h=s(i/2),g=s(e/2),o=s(r/2),a=t(i/2),A=t(e/2),C=t(r/2);switch(u){case"XYZ":this.Og=a*g*o+h*A*C,this.Lg=h*A*o-a*g*C,this.Dg=h*g*C+a*A*o,this._g=h*g*o-a*A*C;break;case"YXZ":this.Og=a*g*o+h*A*C,this.Lg=h*A*o-a*g*C,this.Dg=h*g*C-a*A*o,this._g=h*g*o+a*A*C;break;case"ZXY":this.Og=a*g*o-h*A*C,this.Lg=h*A*o+a*g*C,this.Dg=h*g*C+a*A*o,this._g=h*g*o-a*A*C;break;case"ZYX":this.Og=a*g*o-h*A*C,this.Lg=h*A*o+a*g*C,this.Dg=h*g*C-a*A*o,this._g=h*g*o+a*A*C;break;case"YZX":this.Og=a*g*o+h*A*C,this.Lg=h*A*o+a*g*C,this.Dg=h*g*C-a*A*o,this._g=h*g*o-a*A*C;break;case"XZY":this.Og=a*g*o-h*A*C,this.Lg=h*A*o-a*g*C,this.Dg=h*g*C+a*A*o,this._g=h*g*o+a*A*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return!1!==n&&this.Fg(),this}},{key:"setFromAxisAngle",value:function(t,n){var i=n/2,n=Math.sin(i);return this.Og=t.x*n,this.Lg=t.y*n,this.Dg=t.z*n,this._g=Math.cos(i),this.Fg(),this}},{key:"setFromRotationMatrix",value:function(t){var n,i=t.elements,e=i[0],r=i[4],u=i[8],s=i[1],h=i[5],g=i[9],o=i[2],a=i[6],t=i[10],i=e+h+t;return 0<i?(i=.5/Math.sqrt(i+1),this._g=.25/i,this.Og=(a-g)*i,this.Lg=(u-o)*i,this.Dg=(s-r)*i):h<e&&t<e?(n=2*Math.sqrt(1+e-h-t),this._g=(a-g)/n,this.Og=.25*n,this.Lg=(r+s)/n,this.Dg=(u+o)/n):t<h?(n=2*Math.sqrt(1+h-e-t),this._g=(u-o)/n,this.Og=(r+s)/n,this.Lg=.25*n,this.Dg=(g+a)/n):(h=2*Math.sqrt(1+t-e-h),this._g=(s-r)/h,this.Og=(u+o)/h,this.Lg=(g+a)/h,this.Dg=.25*h),this.Fg(),this}},{key:"setFromUnitVectors",value:function(t,n){var i=t.dot(n)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.Og=-t.y,this.Lg=t.x,this.Dg=0):(this.Og=0,this.Lg=-t.z,this.Dg=t.y)):(this.Og=t.y*n.z-t.z*n.y,this.Lg=t.z*n.x-t.x*n.z,this.Dg=t.x*n.y-t.y*n.x),this._g=i,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(O.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,n){var i=this.angleTo(t);if(0===i)return this;i=Math.min(1,n/i);return this.slerp(t,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.Og*=-1,this.Lg*=-1,this.Dg*=-1,this.Fg(),this}},{key:"dot",value:function(t){return this.Og*t.Og+this.Lg*t.Lg+this.Dg*t.Dg+this._g*t._g}},{key:"lengthSq",value:function(){return this.Og*this.Og+this.Lg*this.Lg+this.Dg*this.Dg+this._g*this._g}},{key:"length",value:function(){return Math.sqrt(this.Og*this.Og+this.Lg*this.Lg+this.Dg*this.Dg+this._g*this._g)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.Og=0,this.Lg=0,this.Dg=0,this._g=1):(this.Og=this.Og*(t=1/t),this.Lg=this.Lg*t,this.Dg=this.Dg*t,this._g=this._g*t),this.Fg(),this}},{key:"multiply",value:function(t,n){return void 0!==n?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,n){var i=t.Og,e=t.Lg,r=t.Dg,u=t._g,s=n.Og,h=n.Lg,t=n.Dg,n=n._g;return this.Og=i*n+u*s+e*t-r*h,this.Lg=e*n+u*h+r*s-i*t,this.Dg=r*n+u*t+i*h-e*s,this._g=u*n-i*s-e*h-r*t,this.Fg(),this}},{key:"slerp",value:function(t,n){if(0===n)return this;if(1===n)return this.copy(t);var i=this.Og,e=this.Lg,r=this.Dg,u=this._g,s=u*t._g+i*t.Og+e*t.Lg+r*t.Dg;if(s<0?(this._g=-t._g,this.Og=-t.Og,this.Lg=-t.Lg,this.Dg=-t.Dg,s=-s):this.copy(t),1<=s)return this._g=u,this.Og=i,this.Lg=e,this.Dg=r,this;t=1-s*s;if(t<=Number.EPSILON){var h=1-n;return this._g=h*u+n*this._g,this.Og=h*i+n*this.Og,this.Lg=h*e+n*this.Lg,this.Dg=h*r+n*this.Dg,this.normalize(),this.Fg(),this}h=Math.sqrt(t),t=Math.atan2(h,s),s=Math.sin((1-n)*t)/h,h=Math.sin(n*t)/h;return this._g=u*s+this._g*h,this.Og=i*s+this.Og*h,this.Lg=e*s+this.Lg*h,this.Dg=r*s+this.Dg*h,this.Fg(),this}},{key:"equals",value:function(t){return t.Og===this.Og&&t.Lg===this.Lg&&t.Dg===this.Dg&&t._g===this._g}},{key:"fromArray",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.Og=t[n],this.Lg=t[n+1],this.Dg=t[n+2],this._g=t[n+3],this.Fg(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[n]=this.Og,t[n+1]=this.Lg,t[n+2]=this.Dg,t[n+3]=this._g,t}},{key:"fromBufferAttribute",value:function(t,n){return this.Og=t.getX(n),this.Lg=t.getY(n),this.Dg=t.getZ(n),this._g=t.getW(n),this}},{key:"_onChange",value:function(t){return this.Fg=t,this}},{key:"_onChangeCallback",value:function(){}}])&&L(t.prototype,n),i&&L(t,i),r}();function D(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var _=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=n,this.z=i}var t,n,i;return t=e,(n=[{key:"set",value:function(t,n,i){return void 0===i&&(i=this.z),this.x=t,this.y=n,this.z=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}},{key:"addScaledVector",value:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}},{key:"sub",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}},{key:"multiply",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(G.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,n){return this.applyQuaternion(G.setFromAxisAngle(t,n))}},{key:"applyMatrix3",value:function(t){var n=this.x,i=this.y,e=this.z,t=t.elements;return this.x=t[0]*n+t[3]*i+t[6]*e,this.y=t[1]*n+t[4]*i+t[7]*e,this.z=t[2]*n+t[5]*i+t[8]*e,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var n=this.x,i=this.y,e=this.z,r=t.elements,t=1/(r[3]*n+r[7]*i+r[11]*e+r[15]);return this.x=(r[0]*n+r[4]*i+r[8]*e+r[12])*t,this.y=(r[1]*n+r[5]*i+r[9]*e+r[13])*t,this.z=(r[2]*n+r[6]*i+r[10]*e+r[14])*t,this}},{key:"applyQuaternion",value:function(t){var n=this.x,i=this.y,e=this.z,r=t.x,u=t.y,s=t.z,h=t.w,g=h*n+u*e-s*i,o=h*i+s*n-r*e,t=h*e+r*i-u*n,e=-r*n-u*i-s*e;return this.x=g*h+e*-r+o*-s-t*-u,this.y=o*h+e*-u+t*-r-g*-s,this.z=t*h+e*-s+g*-u-o*-r,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var n=this.x,i=this.y,e=this.z,t=t.elements;return this.x=t[0]*n+t[4]*i+t[8]*e,this.y=t[1]*n+t[5]*i+t[9]*e,this.z=t[2]*n+t[6]*i+t[10]*e,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}},{key:"clampScalar",value:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}},{key:"clampLength",value:function(t,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}},{key:"lerpVectors",value:function(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this}},{key:"cross",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,n){var i=t.x,e=t.y,r=t.z,u=n.x,t=n.y,n=n.z;return this.x=e*n-r*t,this.y=r*u-i*n,this.z=i*t-e*u,this}},{key:"projectOnVector",value:function(t){var n=t.lengthSq();if(0===n)return this.set(0,0,0);n=t.dot(this)/n;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return F.copy(this).projectOnVector(t),this.sub(F)}},{key:"reflect",value:function(t){return this.sub(F.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;n=this.dot(t)/n;return Math.acos(O.clamp(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var n=this.x-t.x,i=this.y-t.y,t=this.z-t.z;return n*n+i*i+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,n,i){var e=Math.sin(n)*t;return this.x=e*Math.sin(i),this.y=Math.cos(n)*t,this.z=e*Math.cos(i),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,n){return this.fromArray(t.elements,4*n)}},{key:"setFromMatrix3Column",value:function(t,n){return this.fromArray(t.elements,3*n)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,n,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}])&&D(t.prototype,n),i&&D(t,i),e}(),F=new _,G=new C;function j(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}e=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.bt={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.Et={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var n,i,e;return n=t,(i=[{key:"min",get:function(){return this.bt}},{key:"max",get:function(){return this.Et}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.jg()&&(t.x=(this.bt.x+this.Et.x)/2,t.y=(this.bt.y+this.Et.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.jg()&&(t.x=this.Et.x-this.bt.x,t.y=this.Et.y-this.bt.y),t}},{key:"toObject",value:function(){return{min:this.bt,max:this.Et,center:this.center,size:this.size}}}])&&j(n.prototype,i),e&&j(n,e),t}();Object.assign(e.prototype,{jg:function(){return!(this.bt.x>this.Et.x||this.bt.y>this.Et.y)},Bg:function(t){t&&t.jg()&&(t.bt.x<this.bt.x&&(this.bt.x=t.bt.x),t.bt.y<this.bt.y&&(this.bt.y=t.bt.y),t.Et.x>this.Et.x&&(this.Et.x=t.Et.x),t.Et.y>this.Et.y&&(this.Et.y=t.Et.y))},Zg:function(t){var n=this;t&&0!=t.length&&t.forEach(function(t){t.x<n.bt.x&&(n.bt.x=t.x),t.y<n.bt.y&&(n.bt.y=t.y),t.x>n.Et.x&&(n.Et.x=t.x),t.y>n.Et.y&&(n.Et.y=t.y)})}});var B=e,Z=function(t,n,i){i=i||2;var e,r,u,s,h,g=n&&n.length,o=g?n[0]*i:t.length,a=V(t,0,o,i,!0),A=[];if(!a||a.next===a.prev)return A;if(g&&(a=function(t,n,i,e){var r,u,s,h,g=[];for(r=0,u=n.length;r<u;r++)s=n[r]*e,h=r<u-1?n[r+1]*e:t.length,(h=V(t,s,h,e,!1))===h.next&&(h.steiner=!0),g.push(function(t){var n=t,i=t;for(;(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next,n!==t;);return i}(h));for(g.sort(W),r=0;r<g.length;r++)!function(t,n){(n=function(t,n){var i,e=n,r=t.x,u=t.y,s=-1/0;do{if(u<=e.y&&u>=e.next.y&&e.next.y!==e.y){var h=e.x+(u-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=r&&s<h){if((s=h)===r){if(u===e.y)return e;if(u===e.next.y)return e.next}i=e.x<e.next.x?e:e.next}}}while(e=e.next,e!==n);if(!i)return null;if(r===s)return i;var g,o=i,a=i.x,A=i.y,C=1/0;e=i;for(;r>=e.x&&e.x>=a&&r!==e.x&&z(u<A?r:s,u,a,A,u<A?s:r,u,e.x,e.y)&&(g=Math.abs(u-e.y)/(r-e.x),$(e,t)&&(g<C||g===C&&(e.x>i.x||e.x===i.x&&function(t,n){return Q(t.prev,t,n.prev)<0&&Q(n.next,t,t.next)<0}(i,e)))&&(i=e,C=g)),e=e.next,e!==o;);return i}(t,n))&&(t=tt(n,t),Y(n,n.next),Y(t,t.next))}(g[r],i),i=Y(i,i.next);return i}(t,n,a,i)),t.length>80*i){for(var C=e=t[0],I=r=t[1],l=i;l<o;l+=i)(u=t[l])<C&&(C=u),(s=t[l+1])<I&&(I=s),e<u&&(e=u),r<s&&(r=s);h=0!==(h=Math.max(e-C,r-I))?1/h:0}return U(a,A,i,C,I,h),A};function V(t,n,i,e,r){var u,s;if(r===0<function(t,n,i,e){for(var r=0,u=n,s=i-e;u<i;u+=e)r+=(t[s]-t[u])*(t[u+1]+t[s+1]),s=u;return r}(t,n,i,e))for(u=n;u<i;u+=e)s=nt(u,t[u],t[u+1],s);else for(u=i-e;n<=u;u-=e)s=nt(u,t[u],t[u+1],s);return s&&K(s,s.next)&&(it(s),s=s.next),s}function Y(t,n){if(!t)return t;n=n||t;var i,e=t;do{if(i=!1,e.steiner||!K(e,e.next)&&0!==Q(e.prev,e,e.next))e=e.next;else{if(it(e),(e=n=e.prev)===e.next)break;i=!0}}while(i||e!==n);return n}function U(t,n,i,e,r,u,s){if(t){!s&&u&&function(t,n,i,e){var r=t;for(;null===r.z&&(r.z=X(r.x,r.y,n,i,e)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next,r!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var n,i,e,r,u,s,h,g,o=1;do{for(i=t,u=t=null,s=0;i;){for(s++,e=i,n=h=0;n<o&&(h++,e=e.nextZ);n++);for(g=o;0<h||0<g&&e;)0!==h&&(0===g||!e||i.z<=e.z)?(i=(r=i).nextZ,h--):(e=(r=e).nextZ,g--),u?u.nextZ=r:t=r,r.prevZ=u,u=r;i=e}}while(u.nextZ=null,o*=2,1<s)}(r)}(t,e,r,u);for(var h,g,o=t;t.prev!==t.next;)if(h=t.prev,g=t.next,u?function(t,n,i,e){var r=t.prev,u=t,s=t.next;if(0<=Q(r,u,s))return!1;var h=(r.x<u.x?r.x<s.x?r:s:u.x<s.x?u:s).x,g=(r.y<u.y?r.y<s.y?r:s:u.y<s.y?u:s).y,o=(r.x>u.x?r.x>s.x?r:s:u.x>s.x?u:s).x,a=(r.y>u.y?r.y>s.y?r:s:u.y>s.y?u:s).y,A=X(h,g,n,i,e),C=X(o,a,n,i,e),I=t.prevZ,l=t.nextZ;for(;I&&I.z>=A&&l&&l.z<=C;){if(I!==t.prev&&I!==t.next&&z(r.x,r.y,u.x,u.y,s.x,s.y,I.x,I.y)&&0<=Q(I.prev,I,I.next))return!1;if(I=I.prevZ,l!==t.prev&&l!==t.next&&z(r.x,r.y,u.x,u.y,s.x,s.y,l.x,l.y)&&0<=Q(l.prev,l,l.next))return!1;l=l.nextZ}for(;I&&I.z>=A;){if(I!==t.prev&&I!==t.next&&z(r.x,r.y,u.x,u.y,s.x,s.y,I.x,I.y)&&0<=Q(I.prev,I,I.next))return!1;I=I.prevZ}for(;l&&l.z<=C;){if(l!==t.prev&&l!==t.next&&z(r.x,r.y,u.x,u.y,s.x,s.y,l.x,l.y)&&0<=Q(l.prev,l,l.next))return!1;l=l.nextZ}return!0}(t,e,r,u):function(t){var n=t.prev,i=t,e=t.next;if(0<=Q(n,i,e))return!1;var r=t.next.next;for(;r!==t.prev;){if(z(n.x,n.y,i.x,i.y,e.x,e.y,r.x,r.y)&&0<=Q(r.prev,r,r.next))return!1;r=r.next}return!0}(t))n.push(h.i/i),n.push(t.i/i),n.push(g.i/i),it(t),t=g.next,o=g.next;else if((t=g)===o){s?1===s?U(t=function(t,n,i){var e=t;do{var r=e.prev,u=e.next.next}while(!K(r,u)&&H(r,e,e.next,u)&&$(r,u)&&$(u,r)&&(n.push(r.i/i),n.push(e.i/i),n.push(u.i/i),it(e),it(e.next),e=t=u),e=e.next,e!==t);return Y(e)}(Y(t),n,i),n,i,e,r,u,2):2===s&&function(t,n,i,e,r,u){var s=t;do{for(var h=s.next.next;h!==s.prev;){if(s.i!==h.i&&function(t,n){return t.next.i!==n.i&&t.prev.i!==n.i&&!function(t,n){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==n.i&&i.next.i!==n.i&&H(i,i.next,t,n))return!0}while(i=i.next,i!==t);return!1}(t,n)&&($(t,n)&&$(n,t)&&function(t,n){var i=t,e=!1,r=(t.x+n.x)/2,u=(t.y+n.y)/2;for(;i.y>u!=i.next.y>u&&i.next.y!==i.y&&r<(i.next.x-i.x)*(u-i.y)/(i.next.y-i.y)+i.x&&(e=!e),i=i.next,i!==t;);return e}(t,n)&&(Q(t.prev,t,n.prev)||Q(t,n.prev,n))||K(t,n)&&0<Q(t.prev,t,t.next)&&0<Q(n.prev,n,n.next))}(s,h)){var g=tt(s,h);return s=Y(s,s.next),g=Y(g,g.next),U(s,n,i,e,r,u),U(g,n,i,e,r,u)}h=h.next}}while(s=s.next,s!==t)}(t,n,i,e,r,u):U(Y(t),n,i,e,r,u,1);break}}}function W(t,n){return t.x-n.x}function X(t,n,i,e,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-e)*r)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function z(t,n,i,e,r,u,s,h){return 0<=(r-s)*(n-h)-(t-s)*(u-h)&&0<=(t-s)*(e-h)-(i-s)*(n-h)&&0<=(i-s)*(u-h)-(r-s)*(e-h)}function Q(t,n,i){return(n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y)}function K(t,n){return t.x===n.x&&t.y===n.y}function H(t,n,i,e){var r=q(Q(t,n,i)),u=q(Q(t,n,e)),s=q(Q(i,e,t)),h=q(Q(i,e,n));return r!==u&&s!==h||(0===r&&J(t,i,n)||(0===u&&J(t,e,n)||(0===s&&J(i,t,e)||!(0!==h||!J(i,n,e)))))}function J(t,n,i){return n.x<=Math.max(t.x,i.x)&&n.x>=Math.min(t.x,i.x)&&n.y<=Math.max(t.y,i.y)&&n.y>=Math.min(t.y,i.y)}function q(t){return 0<t?1:t<0?-1:0}function $(t,n){return Q(t.prev,t,t.next)<0?0<=Q(t,n,t.next)&&0<=Q(t,t.prev,n):Q(t,n,t.prev)<0||Q(t,t.next,n)<0}function tt(t,n){var i=new et(t.i,t.x,t.y),e=new et(n.i,n.x,n.y),r=t.next,u=n.prev;return(t.next=n).prev=t,(i.next=r).prev=i,(e.next=i).prev=e,(u.next=e).prev=u,e}function nt(t,n,i,e){i=new et(t,n,i);return e?(i.next=e.next,(i.prev=e).next.prev=i,e.next=i):(i.prev=i).next=i,i}function it(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function et(t,n,i){this.i=t,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rt(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return ut(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ut(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}var st={area:function(t){for(var n=t.length,i=0,e=n-1,r=0;r<n;e=r++)i+=t[e].x*t[r].y-t[r].x*t[e].y;return.5*i},isClockWise:function(t){return st.area(t)<0},triangulateShape:function(t,n){var i=[],e=[],r=[];ht(t),gt(i,t);var u=t.length;n.forEach(ht);for(var s=0;s<n.length;s++)e.push(u),u+=n[s].length,gt(i,n[s]);for(var h=Z(i,e),g=0;g<h.length;g+=3)r.push(h.slice(g,g+3));return r},triangulate:function(t){(r=[]).push.apply(r,rt(t[0]));for(var n=[],i=1;i<t.length;i++){var e=[];e.push.apply(e,rt(t[i])),n.push(e)}if(!st.isClockWise(r))for(var r=r.reverse(),u=0,s=n.length;u<s;u++){var h=n[u];st.isClockWise(h)&&(n[u]=h.reverse())}return st.triangulateShape(r,n)}};function ht(t){var n,i=t.length;2<i&&(n=t[i-1],i=t[0],n.x===i.x&&n.y===i.y)&&t.pop()}function gt(t,n){for(var i=0;i<n.length;i++)t.push(n[i].x),t.push(n[i].y)}var ot=Math.PI/180,at=180/Math.PI,C=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(C.prototype,{Vg:function(){return 1e-5},Yg:function(){return ot},Ug:function(){return at},Wg:function(t){return t<1e-5&&-1e-5<t},Xg:function(t){return 1e-5<t},zg:function(t){return t<-1e-5},Qg:function(t,n,i){return(t.x-i.x)*(n.y-i.y)-(n.x-i.x)*(t.y-i.y)},distanceOfTwoPoints:function(t,n){return t&&n?Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y)):Number.NaN},distance:function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},isPolygonContainPoint:function(t,n){for(var i=0,e=0;e<t.length;e++){var r=t[e].x,u=t[e].y,s=0,h=0,h=e<t.length-1?(s=t[e+1].x,t[e+1].y):(s=t[0].x,t[0].y);if(r===n.x&&u===n.y||s===n.x&&h===n.y)return!0;if(h!==u){var g=r+(n.y-u)*(s-r)/(h-u);if(g===n.x)return!0;r!==s?g<=Math.max(r,s)&&g>=Math.min(r,s)&&g>n.x&&g!==r&&(g===s&&0<(u-n.y)*(h-n.y)?i+=2:i++):g<=Math.max(r,s)&&g>=Math.min(r,s)&&g>n.x&&(g===s&&0<(u-n.y)*(h-n.y)?i+=2:i++)}}return 0<i%2},Kg:function(t,n,i,e){return!(Math.max(t.x,n.x)<Math.min(i.x,e.x))&&(!(Math.max(t.y,n.y)<Math.min(i.y,e.y))&&(!(Math.max(i.x,e.x)<Math.min(t.x,n.x))&&!(Math.max(i.y,e.y)<Math.min(t.y,n.y))))},Hg:function(t,n,i,e){return!(Math.max(t.x,n.x)<Math.min(i.x,e.x))&&(!(Math.max(t.y,n.y)<Math.min(i.y,e.y))&&(!(Math.max(i.x,e.x)<Math.min(t.x,n.x))&&(!(Math.max(i.y,e.y)<Math.min(t.y,n.y))&&(!(this.Qg(i,n,t)*this.Qg(n,e,t)<0)&&!(this.Qg(t,e,i)*this.Qg(e,n,i)<0)))))},Jg:function(t,n,i){return!(t.x<n.x)&&(!(t.y<n.y)&&(!(t.x>i.x)&&!(t.y>i.y)))},qg:function(t,n,i){var e=Math.min(i.x,n.x),r=Math.max(i.x,n.x),u=Math.min(i.y,n.y),n=Math.max(i.y,n.y);return!(t.x<e||t.x>r||t.y<u||t.y>n)},$g:function(t,n,i){for(var e,r,u=!1,s=0;s<i;s++)e=n[s],r=n[(s+1)%i],(e.y<t.y&&r.y>=t.y||r.y<t.y&&e.y>=t.y)&&(e.x<=t.x||r.x<=t.x)&&e.x+(t.y-e.y)/(r.y-e.y)*(r.x-e.x)<t.x&&(u=!u);return u},Ft:function(t,n,i){return(t.x-n.x)*(i.y-n.y)==(i.x-n.x)*(t.y-n.y)&&Math.min(n.x,i.x)<=t.x&&t.x<=Math.max(n.x,i.x)&&Math.min(n.y,i.y)<=t.y&&t.y<=Math.max(n.y,i.y)},ft:function(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))},no:function(t,n){return(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y)},eo:function(t,n,i){var e=n.x,r=n.y,u=i.x,s=i.y,h=t.x,g=t.y,o=u-e,a=s-r,A=o*o+a*a,n=h-e,i=g-r,t=n*n+i*i;if(this.Wg(A))return this.Wg(t)?0:t;A=Math.sqrt(A),o/=A,a/=A,i=o*n+a*i;if(!this.Xg(i))return t;if(!this.zg(i-A)){u=h-u,s=g-s;return u*u+s*s}o=h-(e+i*o),a=g-(r+i*a);return o*o+a*a},ro:function(t,n,i,e){var r=n.x,u=n.y,s=i.x,h=i.y,g=t.x,o=t.y,a=s-r,A=h-u,C=Math.sqrt(a*a+A*A),I=g-r,l=o-u,t=Math.sqrt(I*I+l*l);if(this.Wg(C))return e.x=n.x,e.y=n.y,this.Wg(t)?0:t;a/=C,A/=C,l=a*I+A*l;if(!this.Xg(l))return e.x=n.x,e.y=n.y,t;if(!this.zg(l-C)){s=g-s,h=o-h,h=Math.sqrt(s*s+h*h);return e.x=i.x,e.y=i.y,h}a=r+l*a,A=u+l*A,g-=a,o-=A,o=Math.sqrt(g*g+o*o);return e.x=a,e.y=A,o},uo:function(t,n){for(var i=0,e=0,r=0,u=0;u<n;u++){var s=t[u],h=t[(u+1)%n],g=(s.x*h.y-s.y*h.x)/2;i+=g,e+=g*(s.x+h.x)/3,r+=g*(s.y+h.y)/3}return{x:e/=i,y:r/=i}},so:function(t){for(var n=st.triangulate([t]),i=0,e=0,r=0,u=0;u<n.length;u++){var s=t[n[u][0]],h=t[n[u][1]],g=t[n[u][2]],o=h.x-s.x,a=h.y-s.y,A=g.x-s.x,a=(o*(g.y-s.y)-A*a)/2;i+=a,e+=(s.x+h.x+g.x)/3*a,r+=(s.y+h.y+g.y)/3*a}return{x:e/i,y:r/i}},ho:function(t,n){if(n<3)return 0;for(var i=0,e=0;e<n;++e){var r=t[e],u=t[(e+1)%n];i+=r.x*u.y-r.y*u.x}return Math.abs(i/2)},go:function(t,n,i,e,r){if(this.Hg(t,n,i,e)){var u=(e.x-i.x)*(t.y-n.y)-(n.x-t.x)*(i.y-e.y),s=(t.y-i.y)*(n.x-t.x)*(e.x-i.x)+i.x*(e.y-i.y)*(n.x-t.x)-t.x*(n.y-t.y)*(e.x-i.x);return r.x=s/u,u=(t.x-n.x)*(e.y-i.y)-(n.y-t.y)*(i.x-e.x),s=n.y*(t.x-n.x)*(e.y-i.y)+(e.x-n.x)*(e.y-i.y)*(t.y-n.y)-e.y*(i.x-e.x)*(n.y-t.y),r.y=s/u,1}return 0},oo:function(t,n,i,e,r){var u=Math.min(i.x,e.x),s=Math.max(i.x,e.x),h=Math.min(i.y,e.y),g=Math.max(i.y,e.y),o=t.x,a=t.y,A=i.x,C=i.y,I=e.x,l=e.y;if(90==n){if(t.x<u||t.x>s)return!1;var f=(l-C)/(I-A)*(o-A)+C;return r.y=f,r.x=o,f<a?!1:!!this.qg(r,i,e)}if(270==n){if(t.x<u||t.x>s)return!1;t=(l-C)/(I-A)*(o-A)+C;return r.y=t,r.x=o,a<t?!1:!!this.qg(r,i,e)}if(270!=n&&90!=n&&s-u<.001){s=u,u=Math.tan(n/180*Math.PI)*(s-o)+a;if(r.y=u,r.x=s,this.qg(r,i,e)){s=s-o,u=u-a;return 0<s/Math.sqrt(s*s+u*u)*Math.cos(n/180*Math.PI)}}if(g-h<=1e-6){g=h,h=1/Math.tan(n/180*Math.PI)*(g-a)+o;if(r.x=h,r.y=g,this.qg(r,i,e)){var h=h-o,c=g-a;return 0<h/Math.sqrt(h*h+c*c)*Math.cos(n/180*Math.PI)}return!1}c=Math.tan(n/180*Math.PI),I=(l-C)/(I-A),I=(C-a-(I*A-c*o))/(c-I),c=a+c*(I-o);if(r.x=I,r.y=c,this.qg(r,i,e)){o=I-o,a=c-a;return 0<o/Math.sqrt(o*o+a*a)*Math.cos(n/180*Math.PI)}return!1},ao:function(t,n,i,e){var r=Math.min(n.x,i.x),u=Math.max(n.x,i.x),s=Math.min(n.y,i.y),h=Math.max(n.y,i.y),g=t.x,o=t.y,a=n.x,A=n.y,C=i.x,t=i.y;if(Math.abs(a-C)<1e-5)return e.x=a,s<=(e.y=o)&&o<=h;if(Math.abs(A-t)<1e-5)return e.x=g,e.y=A,r<=g&&g<=u;u=-1/((t-A)/(C-a)),C=(t-A)/(C-a),C=(A-o-(C*a-u*g))/(u-C),g=o+u*(C-g);return e.x=C,e.y=g,!!this.qg(e,n,i)},Ao:function(t,n){return{x:t.y*n.z-t.z*n.y,y:t.z*n.x-t.x*n.z,z:t.x*n.y-t.y*n.x}},Co:function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},Io:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},lo:function(t,n){return t.x*n.x+t.y*n.y},fo:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},co:function(t,n){if(0==t.x&&0==t.y||0==n.x&&0==n.y)return 0;var i={x:t.x,y:t.y,z:0},e={x:n.x,y:n.y,z:0},i=this.Ao(i,e),e=this.lo(t,n),n=Math.acos(e/(this.fo(t)*this.fo(n)));return 0<i.z?n/Math.PI*180:360-n/Math.PI*180},vo:function(t,n,i,e){for(var r=0;r<i.length;r++){var u=i[r],s=i[(r+1)%i.length];if(1==this.go(t,n,u,s,e))return!0}return!1}});var At=new C;function Ct(t){return function(t){if(Array.isArray(t))return It(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return It(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?It(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}function lt(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}e=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.yo=180/Math.PI,this.ko=[295829355.45,147914677.73,73957338.86,36978669.43,18489334.72,9244667.36,4622333.68,2311166.84,1155583.42,577791.71,288895.85,144447.93,72223.96,36111.98,18056,9028,4514,2257,1128,564,282,141,70,35,17,8,4,2,1],this.Hh=null,this.do=null,this.wo=new E,this.mo=5,this.po=.2,this.Mo=!0,this.bo=!1,this.Eo=!0,this.So=!1,this.xo=1.2,this.Ro=80,this.To=30,this.No=21,this.Po=!0,this.Oo=22,this.Lo=1.3,this.Do="",this._o=100,this.Fo=3,this.Go=1,this.jo=6,this.Bo=10,this.Zo=5,this.Vo=0,this.Yo=fengmap.FMLanguageType.ZH,this.Uo=fengmap.FMNaviMode.MODULE_SHORTEST,this.Wo=fengmap.FMNaviPriority.PRIORITY_DEFAULT,this.Xo=!1,this.zo=!0,this.Qo={radius:.5,dash:{size:4,gap:2}},this.Ko=!0,this.Ho(t),this.tg()}var t,i,e;return t=n,(i=[{key:"locationMarker",get:function(){return this.Jo},set:function(t){this.Jo=t}},{key:"naviResult",get:function(){return this.qo}},{key:"on",value:function(t,n){this.wo.xg(t,n)}},{key:"off",value:function(t,n){this.wo.Ng(t,n)}},{key:"dispose",value:function(){this.stop(),this.Hh=null,this.do&&(this.do.dispose(),this.do=null)}},{key:"setLanguage",value:function(t){this.Yo!=t&&(this.Yo=t,this.$o())}},{key:"setObstructions",value:function(t){this.do.setObstructions(t)}},{key:"setStartPoint",value:function(t,n){this.ta=Object.assign({},this.ta,t,{x:t.x,y:t.y,level:t.level,height:"number"==typeof t.height?t.height:this.jo});var i=null;return i=t.url&&!n?this.na(this.ta,!0):i}},{key:"setDestPoint",value:function(t,n){this.ia=Object.assign({},this.ia,t,{x:t.x,y:t.y,level:t.level,height:"number"==typeof t.height?t.height:this.jo});var i=null;return i=t.url&&!n?this.na(t,!1):i}},{key:"route",value:function(t,n,i){this.Ho(t),this.ea({mode:this.Uo,priority:this.Wo,toDoors:this.Xo,obstruct:this.zo},n,i)}},{key:"naviConstraint",value:function(t){if(this.ta&&this.ia){var n={index:-1,coords:{level:t.level},angle:null,distance:Number.MAX_VALUE,distanceToNext:Number.MAX_VALUE,remain:this.ra},i=this.ua(),e=i.map(function(t){return{x:t.x,y:t.z,z:0,level:t.level,index:t.jt}}),r=this.sa(i).map(function(t){return{x:t.x,y:t.z,z:0,level:t.level,index:t.jt}}),u=-1,s=null;if(this.ha){if(!(s=this.do.getNaviGraph(t.level)))return;u=s.queryContainExtentID(t)}for(var h={},g=1;g<r.length;g++){var o,a=r[g-1],A=r[g],C=this.ga[a.index].endPoint;a.level===t.level&&A.level===t.level&&(s&&u!=s.queryContainExtentID(a)||(o=At.ro(t,a,A,h))<n.distance&&(n.distance=o,Object.assign(n.coords,h),n.angle=this.oa(a,A),n.index=a.index,n.distanceToNext=At.ft(h,C)))}if(-1==n.index)for(var I=0;I<r.length;I++){var l,f=r[I];f.level!=t.level||u!=s.queryContainExtentId(f)||(l=At.ft(t,f))<n.distance&&(n.distance=l,Object.assign(n.coords,f),n.index=f.index,n.distanceToNext=0,e[f.index+1]&&r[f.index+1].level==t.level&&(n.distanceToNext=At.ft(t,e[f.index+1])))}if(-1!=n.index){for(var c,v,y=0,k=e.length-1;k>n.index;k--)k-1>n.index&&(c=e[k],v=e[k-1],c.level==v.level&&(y+=At.ft(c,v)));e[n.index+1]&&e[n.index+1].level==n.coords.level&&(y+=At.ft(e[n.index+1],n.coords)),n.remain=y}return n}}},{key:"pathConstraint",value:function(t,n){return this.do?this.do.pathConstraint(t,n):null}},{key:"locate",value:function(t,n){this.aa&&this.stop(),t.level!=this.Aa&&(this.Aa=t.level),this.Ca(t,n)}},{key:"locateNoConstraint",value:function(t,n){this.aa&&this.stop(),t.level!==this.Aa&&(this.Aa=t.level),this.Ia(t,n)}},{key:"clearLocationMarker",value:function(){this.Jo&&(this.Jo.remove(),this.Jo=null)}},{key:"clearMarkers",value:function(){this.la&&(this.la.remove(),this.la=null,this.ta=null),this.fa&&(this.fa.remove(),this.fa=null,this.ia=null)}},{key:"drawNaviLine",value:function(t){if(this.ta&&this.ia)return this.ca=this.va(this.ya,t),this.ca}},{key:"clearNaviLine",value:function(){this.ca&&(this.ca.remove(),this.ca=null)}},{key:"clearAll",value:function(){this.clearMarkers(),this.clearNaviLine(),this.clearLocationMarker()}},{key:"overview",value:function(t,n){var i,e;0!=this.ya.length&&(i=new B,e=[Number.MAX_VALUE,-Number.MAX_VALUE],this.ya.forEach(function(t){t.level<e[0]&&(e[0]=t.level),t.level>e[1]&&(e[1]=t.level),i.Zg(t.pointList)}),this.ka(t,i,e,n))}},{key:"focusNaviLineSegment",value:function(t,n,i){var e;0==this.ga.length||(e=this.ga[t])&&((t=new B).Zg([e.startPoint,e.endPoint]),e=[Math.min(e.startLevel,e.endLevel),Math.max(e.startLevel,e.endLevel)],this.ka(Object.assign({center:t.center},n),t,e,i))}},{key:"simulate",value:function(t){var n,i,e=this;this.ta&&this.ia&&0!=this.ya.length&&(this.Ho(t),this.da=!(n={}),this.wa=this.Hh.getRotation(),i=n.xo||this.xo,n.No=n.No||this.No||0,this.Jo||this.ma(),this.Jo.rotateTo({heading:-this.wa}),this.Mo?this.pa=this.Ma(this.ta.level,i,function(){e.ba=e.Ea(e.ta,i,function(){var t=n.No>e.Oo?e.Oo:n.No;e.Po?e.Sa=e.xa(e.Ro,i,function(){e.Ra=e.Ta(t,i,function(){e.Na()})}):e.Ra=e.Ta(t,i,function(){e.Na()})})}):this.Na())}},{key:"pause",value:function(){this.Sa&&this.Sa.pause(),this.Ra&&this.Ra.pause(),this.ba&&this.ba.pause(),this.pa&&this.pa.pause(),this.Pa=!0}},{key:"resume",value:function(){this.Sa&&this.Sa.resume(),this.Ra&&this.Ra.resume(),this.ba&&this.ba.resume(),this.pa&&this.pa.resume(),this.Pa=!1}},{key:"stop",value:function(){this.Oa=!0,this.La.stop(),this.Sa&&(this.Hh.removeAnimater(this.Sa),this.Sa=null),this.Ra&&(this.Hh.removeAnimater(this.Ra),this.Ra=null),this.ba&&(this.Hh.removeAnimater(this.ba),this.ba=null),this.pa&&(this.Hh.removeAnimater(this.pa),this.pa=null),this.Da&&this.Hh.off("update",this.Da),this.Pa=!1,this._a=null,this.Fa=null,this.Ga=0,this.da=!1,this.ja=0,this.Ba=!1,this.Da=null,this.aa=!1,this.Za=!1,this.Va=0,this.Ya=null}}])&&lt(t.prototype,i),e&&lt(t,e),n}();Object.assign(e.prototype,{Ho:function(t){t&&(void 0!==t.map&&(this.Hh=t.map),void 0!==t.analyser&&(this.do=t.analyser),void 0!==t.speed&&(this.mo=t.speed),void 0!==t.followSpeed&&(this.po=t.followSpeed),void 0!==t.followPosition&&(this.Mo=t.followPosition),void 0!==t.followAngle&&(this.bo=t.followAngle),void 0!==t.locationMarkerFollowAngle&&(this.Eo=t.locationMarkerFollowAngle),void 0!==t.isMultiLevels&&(this.So=t.isMultiLevels),void 0!==t.inTime&&(this.xo=t.inTime),void 0!==t.tiltAngle&&(this.Ro=t.tiltAngle),void 0!==t.changeFloorTiltAngle&&(this.To=t.changeFloorTiltAngle),void 0!==t.changeTiltAngle&&(this.Po=t.changeTiltAngle),void 0!==t.zoom&&(this.No=t.zoom),void 0!==t.maxZoom&&(this.Oo=t.maxZoom),void 0!==t.extendScale&&(this.Lo=t.extendScale),void 0!==t.locationMarkerUrl&&(this.Do=t.locationMarkerUrl),void 0!==t.locationMarkerSize&&(this._o=t.locationMarkerSize),void 0!==t.locationMarkerHeight&&(this.Fo=t.locationMarkerHeight),void 0!==t.lineMarkerHeight&&(this.Go=t.lineMarkerHeight),void 0!==t.imageMarkerHeight&&(this.jo=t.imageMarkerHeight),void 0!==t.directionAssert&&(this.Bo=t.directionAssert),void 0!==t.combineAsset&&(this.Zo=t.combineAsset),void 0!==t.completeDistance&&(this.Vo=t.completeDistance),void 0!==t.Yo&&(this.Bo=t.directionAssert),void 0!==t.mode&&(this.Uo=t.mode),void 0!==t.priority&&(this.Wo=t.priority),void 0!==t.toDoors&&(this.Xo=t.toDoors),void 0!==t.obstruct&&(this.zo=t.obstruct),void 0!==t.lineStyle&&Object.assign(this.Qo,t.lineStyle),void 0!==t.linePassed&&(this.Ko=t.linePassed))},tg:function(){this.wo=new E,this.ha=void 0!==fengmap.FMNaviAnalyser&&this.do instanceof fengmap.FMNaviAnalyser,this.ta=null,this.ia=null,this.la=null,this.fa=null,this.Jo=null,this.qo=null,this.ya=[],this.Ua=[],this.ga=[],this.ra=0,this.Wa=[],this.Xa=0,this.La=new x,this.Pa=!1,this._a=null,this.Fa=null,this.wa=null,this.Ga=0,this.da=!1,this.ja=0,this.Aa=null,this.Ba=!1,this.Da=null,this.aa=!1,this.Za=!1,this.Va=0,this.Ya=null,this.Sa=null,this.Ra=null,this.ba=null,this.pa=null},ma:function(){this.Jo||(this.Jo=new fengmap.FMLocationMarker({id:"location",level:this.ta.level,x:this.ta.x,y:this.ta.y,url:this.Do||"",size:this._o}),this.Jo.addTo(this.Hh))},za:function(t){for(var n,i=arguments.length<=1?0:arguments.length-1,e=0;e<i;e++){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(t[r])return t[r]}return(n=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=n?void 0:arguments[n]},Qa:function(t){if(this.ta&&this.ia)return t==this.ta.level||t==this.Ka.level},na:function(t,n){if(t.level){var i=t.url||(n?"image/small/marker/nav_location_start.png":"image/small/marker/nav_location_dest.png"),e=n?this.la:this.fa;e&&e.remove();var r=this.Hh.getFloor(t.level);if(r)return(e=new fengmap.FMImageMarker(Object.assign({map:this.Hh,url:i,callback:function(){t.callback&&t.callback(e)},anchor:fengmap.FMMarkerAnchor.BOTTOM,depth:!1,collision:!1},t))).addTo(r),n?this.la=e:this.fa=e,e}},Ha:function(){for(var t=this.ya,n=[],i=null,e=null,r=0;r<t.length;r++){var u=t[r],s=i==u.level;0==u.length&&0!=r&&r!=t.length-1||(s||(i=u.level,e&&n.push(e),e={level:u.level,pointList:[]}),e.pointList=e.pointList.concat(u.pointList))}return e&&n.push(e),this.Ja=n},qa:function(t){for(var n=0;n<t.length-1;n++){var i,e,r=t[n];r.length&&(i=r.pointList[r.pointList.length-1],e=t[n+1].pointList[0],.2<At.ft(i,e)&&r.pointList.push(Object.assign({},e)))}},ea:function(t,n,i){var e=this;this.ta&&this.ia&&(t=Object.assign({start:this.ta,dest:this.ia},t),this.$a(t,function(t){e.qo=t,e.tA(),e.qa(e.ya),e.Ha(),e.$o(),n&&n(t)},function(t){i&&i(t)}))},tA:function(){if(this.qo){this.ya=[];for(var t=Number.NaN,n=null,i=0;i<this.qo.subs.length;i++){var e,r=this.qo.subs[i];t!=r.levels[0]&&((n={length:0,level:r.levels[0],pointList:[]}).pointList.push(r.waypoint.points[0]),this.ya.push(n),t=r.levels[0]),r.levels[0]==r.levels[1]?((e=n.pointList).push.apply(e,Ct(r.waypoint.points.slice(1))),n.length+=r.distance):(n={length:0,level:r.levels[0],pointList:[r.waypoint.points[0]]},this.ya.push(n),n={length:0,level:r.levels[1],pointList:[r.waypoint.points[1]]},this.ya.push(n))}}},$o:function(){if(this.qo){this.Ua=[],this.ga=[],this.Wa=[],this.ra=0;for(var t=this.Yo,n=this.qo.subs,i=0,e=null,r=0;r<n.length;r++){var u=n[r],s=u.waypoint.points,h=u.waypoint.direction[t];this.Ua.push(u.instruction[t]);h={startDirection:h[0],startIndex:void 0,startLevel:u.levels[0],startPoint:s[0],endDirection:h[1],endIndex:void 0,endLevel:u.levels[1],endPoint:s.slice(-1)[0],distance:u.distance};u.levels[0]==u.levels[1]?(h.startIndex=i,i+=s.length-1,h.endIndex=i):i=0,this.ga.push(h),null!=e&&u.levels[0]==u.levels[1]||(e={level:u.levels[1],distance:0},this.Wa.push(e)),e.distance+=u.distance}this.ra=this.qo.distance}},va:function(u,t){if(0===u.length)return null;var n=Object.assign({},this.Qo);t&&t.style&&Object.assign(n,t.style);for(var s=t&&t.height?t.height:this.Go,h=[],i=0;i<u.length;i++)(function(t){var n=u[t],i=n.pointList;if(0===i.length)return;var t=n.level,e=[];i.forEach(function(t){var n=parseFloat(""+t.x),t=parseFloat(""+t.y);e.push({x:n,y:t,z:s})}),i.length<2&&(n=parseFloat(""+i[0].x),r=parseFloat(""+i[0].y),e.push({x:n,y:r,z:s}));var r=new fengmap.FMSegment;r.level=t,r.points=e,h.push(r)})(i);n=new fengmap.FMLineMarker(Object.assign({segments:h},n));return n.passed=t&&t.passed?t.passed:this.Ko,n.addTo(this.Hh),n},$a:function(t,n,i){var e=this;this.do.route(t,function(t){e.Xo&&(e.ia.x=e.do.nA.x,e.ia.y=e.do.nA.y),n&&n(t)},function(t){i&&i(t)})},Ea:function(t,n,i){return this.Hh.setCenter({x:t.x,y:t.y,animate:"number"==typeof n,duration:"number"==typeof n?n:0,finish:i})},xa:function(t,n,i){return this.Hh.setTilt({tilt:t,animate:"number"==typeof n,duration:"number"==typeof n?n:0,finish:i})},iA:function(t,n,i){return this.Hh.setRotation({rotation:t,animate:"number"==typeof n,duration:"number"==typeof n?n:0,finish:i})},Ta:function(t,n,i){return this.Hh.setZoom({zoom:t,animate:"number"==typeof n,duration:"number"==typeof n?n:0,finish:i},!0)},Ma:function(t,n,i){return this.Hh.setVisibleLevels([t]),this.Hh.getLevel()==t?(i&&i(),null):this.Hh.setLevel({level:t,animate:"number"==typeof n,duration:"number"==typeof n?n:0,finish:i})},sa:function(t){var n=this.ya;if(0==n.length)return[];for(var i=[],e=0,r=0;r<n.length;r++){var u=n[r];if(!(u.pointList.length<=1))for(var s=u.level,h=0;h<u.pointList.length;h++){var g=u.pointList[h],g=new _(g.x,0,g.y);g.level=s;for(var o=-1,a=1;a<t.length;a++)if(e<t[a].eA){o=t[a-1].jt;break}g.jt=-1!=o?o:t[t.length-1].jt,i.push(g),e++}}return i},rA:function(t,n){if(0==n)return t[0];for(var i,e=0,r=0,u=t[0],s=1;s<t.length;s++)if((i=t[s]).level==u.level){if(n<=(e+=(h=i.clone().sub(u)).length())){h.normalize();var h=u.clone().add(h.clone().multiplyScalar(n-r));return h.level=i.level,h.index=i.jt,h}(u=i.clone()).level=i.level,u.index=i.jt,r=e}else u=i;var g=t[t.length-1];return g.index=g.jt,g},ua:function(){if(!this.ta||!this.ia||!this.ga||0==this.ga.length)return[];var e=-1,r=0,u=-1,t=this.ga.map(function(t,n){var i=new _(t.startPoint.x,0,t.startPoint.y);return i.level=t.startLevel,i.jt=n,e=n,t.startLevel!=t.endLevel?(r+=u,i.eA=r,r++):i.eA=t.startIndex+r,u=t.endIndex,i}),n=this.ga[this.ga.length-1],i=new _(n.endPoint.x,0,n.endPoint.y);return i.level=n.endLevel,i.jt=e+1,i.eA=n.endIndex+r,t.push(i),t},uA:function(t,n){var i=this,e={},r=e.xo||this.xo;e.No=e.No||this.No||0;var u=e.No>this.Oo?this.Oo:e.No;this.So||(e={x:this.Jo.x,y:this.Jo.y,height:this.Jo.height,level:t.level},(t=this.Ja[this.Va])&&t.pointList&&0<t.pointList.length&&(e=Object.assign(e,t.pointList[0])),this.Jo.moveTo(e),this.Jo.visible=!0),this.Po&&(this.Sa=this.xa(this.Ro,r,null)),this.ba=this.Ea(n,r,function(){i.Ra=i.Ta(u,r,function(){i.Ba=!1})})},oa:function(t,n){var i=new _(0,0,1),t=new _(t.x,0,t.y),n=new _(n.x,0,n.y).clone().sub(t).normalize(),t=n.angleTo(i)*At.Ug();return 0<n.clone().cross(i).y?360-t:t},sA:function(t,n,i){return t==n?t:(180<Math.abs(n-t)&&(t<n?t+=360:n+=360),(t*(1-i)+n*i)%360)},hA:function(t,n,i){var e=this.ko,r=Math.floor(n),u=e[r-1]*(1-n%1)+e[r]*(n%1);for(u*=i,r=0;u<e[r];)r++;return r+1-(u-e[r])/(e[r-1]-e[r])},gA:function(t,n,i){for(var e=new B,r=0;r<i.length;r++)for(var u=i[r],s=0;s<n.length;s++){var h=fengmap.FMUtil.coordsMapToScreen(t,{x:n[s].x,y:n[s].y,level:u,height:0});e.Zg([h])}var g=e.size,o=t.getContainer().clientHeight,a=t.getContainer().clientWidth;return a/o>g.x/g.y?g.y/o:g.x/a},oA:function(t){var n,i,e,r,u,s,h=this;this.Oa||requestAnimationFrame(this.oA.bind(this,t)),this.Za||(t.cnt++,t.cnt==t.step&&(t.cnt=0,e=this.La.getDelta(),this.Ba||this.Pa||(this.Ga+=this.mo*e,this.Ga<=0||(n=Object.assign({},this.rA(t.ps,this.Ga)),i=this.ra-this.Ga,e=n.y,n.y=n.z,n.z=e,this.Ya={distance:0,remain:i<this.Xa?this.Xa:i,walk:this.Ga,point:n,level:n.level,index:n.index-1},null!=this._a&&(this.Fa=this.oa(this._a,n)),this._a=Object.assign({},n),!n||i<this.Xa&&this.da?this.Za=!0:(i<this.Xa&&!this.da&&(this.da=!0),this.ja||(this.ja=t.ps[0].level),this.aa&&this.ja!=n.level&&(this.ja=n.level,this.Va++,r={x:n.x,y:n.y,level:n.level},this.Mo&&(u=(t={}).xo||this.xo,t.No=t.No||this.No||0,s=t.No>this.Oo?this.Oo:t.No,this.Ba=!0,this.Po&&(this.Sa=this.xa(this.To,u,null)),this.So||(this.Jo.visible=!1),this.pa=this.Ma(r.level,u,function(){h.Ra=h.Ta(s,u,function(){h.locationMarker.moveTo({x:r.x,y:r.y,height:h.Fo,level:r.level}),h.Ea(r,u,function(){h.Po?h.Sa=h.xa(h.Ro,u,function(){h.uA(n,r)}):h.uA(n,r)})})})),this.wo.Pg({type:"transit",level:n.level})))))))},aA:function(){this.Oa=!1;var t=this.sa(this.ua());this.La.start(),this.aa=!0,this.Za=!1,this.Va=0,this.oA({step:2,cnt:0,ps:t})},AA:function(){if(!this.Ba&&!this.Pa){if(this._a){var t=new _(this.Jo.x,this.Jo.y,0).lerp(this._a,this.da?1:this.po);t.level=this._a.level,this.Jo.moveTo({x:t.x,y:t.y,height:this.Fo,level:t.level});var n=this.naviConstraint(t);if(this.ca&&(this.ca.passed?this.ca.moveProportion(1-n.remain/this.ra):this.ca.moveProportion(0)),this.wo.Pg(Object.assign({},this.Ya,{type:"walking",distance:n.distance,remain:n.remain,walk:this.ra-n.remain,distanceToNext:n.distanceToNext,angle:n.angle,point:n.coords,level:t.level,index:n.index,isReal:!1})),this.Mo?this.ba=this.Ea(t):this.Hh.updateCountDown_=0,this.Za)return this.stop(),void this.wo.Pg({type:"complete"})}null!=this.Fa&&(t=this.sA(this.wa,this.Fa,this.po),this.wa=t,this.Jo.rotateTo({heading:-t}),this.bo&&this.iA(t))}},Na:function(){this.aA(),this.Da=this.AA.bind(this),this.Hh.on("update",this.Da)},Ca:function(t,n){var i=this.naviConstraint(t);i&&(this.ca&&(this.ca.passed?this.ca.moveProportion(1-i.remain/this.ra):this.ca.moveProportion(0)),t={type:"walking",distance:i.distance,remain:i.remain,walk:this.ra-i.remain,distanceToNext:i.distanceToNext,angle:i.angle,point:i.coords,level:t.level,index:i.index,isReal:!0},this.wo.Pg(t),this.Jo&&(i.coords.height=this.Fo,this.Jo.moveTo(i.coords),n?this.Jo.rotateTo({heading:n}):this.Jo.rotateTo({heading:i.angle})))},Ia:function(t,n){var i=this.naviConstraint(t);i&&(this.wo.Pg({type:"walking",distance:i.distance,remain:i.remain,walk:this.ra-i.remain,distanceToNext:i.distanceToNext,angle:i.angle,point:i.coords,level:t.level,index:i.index,isReal:!0}),this.Jo&&(t.height=this.Fo,this.Jo.moveTo(t),n&&this.Jo.rotateTo({heading:n})))},ka:function(t,n,i,e){for(var r=this,u=t&&void 0!==t.ratio?t.ratio:1,s=!t||void 0===t.animate||t.animate,h=t&&void 0!==t.rotation?t.rotation:0,g=t&&void 0!==t.tilt?t.tilt:30,t=t&&void 0!==t.center?t.center:{x:this.Hh.getX(),y:this.Hh.getY()},o=[],a=i[0];a<=i[1];)o.push(a),a++;var A=o[Math.floor((o.length-1)/2)];this.Hh.setCenter({x:t.x,y:t.y,animate:s,finish:function(){r.Hh.setVisibleLevels(o),r.Hh.getInteracations().getControls().panAdd({x:0,y:o.length%2==0?r.Hh.getFloorSpace()/2:0,z:0}),r.Hh.setLevel({level:A,animate:s,finish:function(){r.Hh.setTilt({tilt:g,animate:s,finish:function(){r.Hh.setRotation({rotation:h,animate:s,finish:function(){var t=[];t.push({x:n.bt.x,y:n.bt.y}),t.push({x:n.bt.x,y:n.Et.y}),t.push({x:n.Et.x,y:n.bt.y}),t.push({x:n.Et.x,y:n.Et.y});t=r.gA(r.Hh,t,i),t=r.hA(r.Hh,r.Hh.getZoom(),t*(u||1));r.Hh.setZoom({zoom:t,animate:s,finish:function(){e&&e()}})}})}})}})}})}});C=e;function ft(t,n,i,e){this.Og=t||0,this.Lg=n||0,this.Dg=i||0,this._g=void 0!==e?e:1}Object.assign(ft,{slerp:function(t,n,i,e){return i.copy(t).slerp(n,e)},slerpFlat:function(t,n,i,e,r,u,s){var h=i[e+0],g=i[e+1],o=i[e+2],a=i[e+3],A=r[u+0],C=r[u+1],I=r[u+2],l=r[u+3];a===l&&h===A&&g===C&&o===I||(i=1-s,r=0<=(e=h*A+g*C+o*I+a*l)?1:-1,(u=1-e*e)>Number.EPSILON&&(u=Math.sqrt(u),e=Math.atan2(u,e*r),i=Math.sin(i*e)/u,s=Math.sin(s*e)/u),h=h*i+A*(r=s*r),g=g*i+C*r,o=o*i+I*r,a=a*i+l*r,i===1-s&&(h*=s=1/Math.sqrt(h*h+g*g+o*o+a*a),g*=s,o*=s,a*=s)),t[n]=h,t[n+1]=g,t[n+2]=o,t[n+3]=a}}),Object.defineProperties(ft.prototype,{x:{get:function(){return this.Og},set:function(t){this.Og=t,this.Fg()}},y:{get:function(){return this.Lg},set:function(t){this.Lg=t,this.Fg()}},z:{get:function(){return this.Dg},set:function(t){this.Dg=t,this.Fg()}},w:{get:function(){return this._g},set:function(t){this._g=t,this.Fg()}}}),Object.assign(ft.prototype,{isQuaternion:!0,set:function(t,n,i,e){return this.Og=t,this.Lg=n,this.Dg=i,this._g=e,this.Fg(),this},clone:function(){return new this.constructor(this.Og,this.Lg,this.Dg,this._g)},copy:function(t){return this.Og=t.x,this.Lg=t.y,this.Dg=t.z,this._g=t.w,this.Fg(),this},setFromEuler:function(t,n){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t.Og,e=t.Lg,r=t.Dg,u=t.order,s=Math.cos,h=Math.sin,g=s(i/2),t=s(e/2),s=s(r/2),i=h(i/2),e=h(e/2),r=h(r/2);return"XYZ"===u?(this.Og=i*t*s+g*e*r,this.Lg=g*e*s-i*t*r,this.Dg=g*t*r+i*e*s,this._g=g*t*s-i*e*r):"YXZ"===u?(this.Og=i*t*s+g*e*r,this.Lg=g*e*s-i*t*r,this.Dg=g*t*r-i*e*s,this._g=g*t*s+i*e*r):"ZXY"===u?(this.Og=i*t*s-g*e*r,this.Lg=g*e*s+i*t*r,this.Dg=g*t*r+i*e*s,this._g=g*t*s-i*e*r):"ZYX"===u?(this.Og=i*t*s-g*e*r,this.Lg=g*e*s+i*t*r,this.Dg=g*t*r-i*e*s,this._g=g*t*s+i*e*r):"YZX"===u?(this.Og=i*t*s+g*e*r,this.Lg=g*e*s+i*t*r,this.Dg=g*t*r-i*e*s,this._g=g*t*s-i*e*r):"XZY"===u&&(this.Og=i*t*s-g*e*r,this.Lg=g*e*s-i*t*r,this.Dg=g*t*r+i*e*s,this._g=g*t*s+i*e*r),!1!==n&&this.Fg(),this},setFromAxisAngle:function(t,n){var i=n/2,n=Math.sin(i);return this.Og=t.x*n,this.Lg=t.y*n,this.Dg=t.z*n,this._g=Math.cos(i),this.Fg(),this},setFromRotationMatrix:function(t){var n,i=t.elements,e=i[0],r=i[4],u=i[8],s=i[1],h=i[5],g=i[9],o=i[2],a=i[6],t=i[10],i=e+h+t;return 0<i?(n=.5/Math.sqrt(i+1),this._g=.25/n,this.Og=(a-g)*n,this.Lg=(u-o)*n,this.Dg=(s-r)*n):h<e&&t<e?(n=2*Math.sqrt(1+e-h-t),this._g=(a-g)/n,this.Og=.25*n,this.Lg=(r+s)/n,this.Dg=(u+o)/n):t<h?(n=2*Math.sqrt(1+h-e-t),this._g=(u-o)/n,this.Og=(r+s)/n,this.Lg=.25*n,this.Dg=(g+a)/n):(n=2*Math.sqrt(1+t-e-h),this._g=(s-r)/n,this.Og=(u+o)/n,this.Lg=(g+a)/n,this.Dg=.25*n),this.Fg(),this},setFromUnitVectors:function(t,n){var i=t.dot(n)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.Og=-t.y,this.Lg=t.x,this.Dg=0):(this.Og=0,this.Lg=-t.z,this.Dg=t.y)):(this.Og=t.y*n.z-t.z*n.y,this.Lg=t.z*n.x-t.x*n.z,this.Dg=t.x*n.y-t.y*n.x),this._g=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(d.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,n){var i=this.angleTo(t);if(0===i)return this;i=Math.min(1,n/i);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this.Og*=-1,this.Lg*=-1,this.Dg*=-1,this.Fg(),this},dot:function(t){return this.Og*t.Og+this.Lg*t.Lg+this.Dg*t.Dg+this._g*t._g},lengthSq:function(){return this.Og*this.Og+this.Lg*this.Lg+this.Dg*this.Dg+this._g*this._g},length:function(){return Math.sqrt(this.Og*this.Og+this.Lg*this.Lg+this.Dg*this.Dg+this._g*this._g)},normalize:function(){var t=this.length();return 0===t?(this.Og=0,this.Lg=0,this.Dg=0,this._g=1):(this.Og=this.Og*(t=1/t),this.Lg=this.Lg*t,this.Dg=this.Dg*t,this._g=this._g*t),this.Fg(),this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,n){var i=t.Og,e=t.Lg,r=t.Dg,u=t._g,s=n.Og,h=n.Lg,t=n.Dg,n=n._g;return this.Og=i*n+u*s+e*t-r*h,this.Lg=e*n+u*h+r*s-i*t,this.Dg=r*n+u*t+i*h-e*s,this._g=u*n-i*s-e*h-r*t,this.Fg(),this},slerp:function(t,n){if(0===n)return this;if(1===n)return this.copy(t);var i=this.Og,e=this.Lg,r=this.Dg,u=this._g,s=u*t._g+i*t.Og+e*t.Lg+r*t.Dg;if(s<0?(this._g=-t._g,this.Og=-t.Og,this.Lg=-t.Lg,this.Dg=-t.Dg,s=-s):this.copy(t),1<=s)return this._g=u,this.Og=i,this.Lg=e,this.Dg=r,this;t=1-s*s;if(t<=Number.EPSILON){var h=1-n;return this._g=h*u+n*this._g,this.Og=h*i+n*this.Og,this.Lg=h*e+n*this.Lg,this.Dg=h*r+n*this.Dg,this.normalize(),this.Fg(),this}h=Math.sqrt(t),t=Math.atan2(h,s),s=Math.sin((1-n)*t)/h,h=Math.sin(n*t)/h;return this._g=u*s+this._g*h,this.Og=i*s+this.Og*h,this.Lg=e*s+this.Lg*h,this.Dg=r*s+this.Dg*h,this.Fg(),this},equals:function(t){return t.Og===this.Og&&t.Lg===this.Lg&&t.Dg===this.Dg&&t._g===this._g},fromArray:function(t,n){return this.Og=t[n=void 0===n?0:n],this.Lg=t[n+1],this.Dg=t[n+2],this._g=t[n+3],this.Fg(),this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this.Og,t[n+1]=this.Lg,t[n+2]=this.Dg,t[n+3]=this._g,t},fromBufferAttribute:function(t,n){return this.Og=t.getX(n),this.Lg=t.getY(n),this.Dg=t.getZ(n),this._g=t.getW(n),this},CA:function(t){return this.Fg=t,this},Fg:function(){}});var ct=new yt,vt=new ft;function yt(t,n,i){this.x=t||0,this.y=n||0,this.z=i||0}Object.assign(yt.prototype,{isVector3:!0,set:function(t,n,i){return this.x=t,this.y=n,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this},sub:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(vt.setFromEuler(t))},applyAxisAngle:function(t,n){return this.applyQuaternion(vt.setFromAxisAngle(t,n))},applyMatrix3:function(t){var n=this.x,i=this.y,e=this.z,t=t.elements;return this.x=t[0]*n+t[3]*i+t[6]*e,this.y=t[1]*n+t[4]*i+t[7]*e,this.z=t[2]*n+t[5]*i+t[8]*e,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var n=this.x,i=this.y,e=this.z,r=t.elements,t=1/(r[3]*n+r[7]*i+r[11]*e+r[15]);return this.x=(r[0]*n+r[4]*i+r[8]*e+r[12])*t,this.y=(r[1]*n+r[5]*i+r[9]*e+r[13])*t,this.z=(r[2]*n+r[6]*i+r[10]*e+r[14])*t,this},applyQuaternion:function(t){var n=this.x,i=this.y,e=this.z,r=t.x,u=t.y,s=t.z,h=t.w,g=h*n+u*e-s*i,o=h*i+s*n-r*e,t=h*e+r*i-u*n,e=-r*n-u*i-s*e;return this.x=g*h+e*-r+o*-s-t*-u,this.y=o*h+e*-u+t*-r-g*-s,this.z=t*h+e*-s+g*-u-o*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var n=this.x,i=this.y,e=this.z,t=t.elements;return this.x=t[0]*n+t[4]*i+t[8]*e,this.y=t[1]*n+t[5]*i+t[9]*e,this.z=t[2]*n+t[6]*i+t[10]*e,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this},clampLength:function(t,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},lerpVectors:function(t,n,i){return this.subVectors(n,t).multiplyScalar(i).add(t)},cross:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)},crossVectors:function(t,n){var i=t.x,e=t.y,r=t.z,u=n.x,t=n.y,n=n.z;return this.x=e*n-r*t,this.y=r*u-i*n,this.z=i*t-e*u,this},projectOnVector:function(t){var n=t.lengthSq();if(0===n)return this.set(0,0,0);n=t.dot(this)/n;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return ct.copy(this).projectOnVector(t),this.sub(ct)},reflect:function(t){return this.sub(ct.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;n=this.dot(t)/n;return Math.acos(d.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,i=this.y-t.y,t=this.z-t.z;return n*n+i*i+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,n,i){var e=Math.sin(n)*t;return this.x=e*Math.sin(i),this.y=Math.cos(n)*t,this.z=e*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this},setFromMatrixPosition:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,n){return this.fromArray(t.elements,4*n)},setFromMatrix3Column:function(t,n){return this.fromArray(t.elements,3*n)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,n){return this.x=t[n=void 0===n?0:n],this.y=t[n+1],this.z=t[n+2],this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t},fromBufferAttribute:function(t,n,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}});var kt=new yt,dt=new Et,wt=new yt(0,0,0),mt=new yt(1,1,1),pt=new yt,Mt=new yt,bt=new yt;function Et(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function St(){}Object.assign(Et.prototype,{isMatrix4:!0,set:function(t,n,i,e,r,u,s,h,g,o,a,A,C,I,l,f){var c=this.elements;return c[0]=t,c[4]=n,c[8]=i,c[12]=e,c[1]=r,c[5]=u,c[9]=s,c[13]=h,c[2]=g,c[6]=o,c[10]=a,c[14]=A,c[3]=C,c[7]=I,c[11]=l,c[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Et).fromArray(this.elements)},copy:function(t){var n=this.elements,t=t.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],this},copyPosition:function(t){var n=this.elements,t=t.elements;return n[12]=t[12],n[13]=t[13],n[14]=t[14],this},extractBasis:function(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var n=this.elements,i=t.elements,e=1/kt.setFromMatrixColumn(t,0).length(),r=1/kt.setFromMatrixColumn(t,1).length(),t=1/kt.setFromMatrixColumn(t,2).length();return n[0]=i[0]*e,n[1]=i[1]*e,n[2]=i[2]*e,n[3]=0,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[7]=0,n[8]=i[8]*t,n[9]=i[9]*t,n[10]=i[10]*t,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n,i,e,r,u,s,h,g,o,a,A,C,I=this.elements,l=t.x,f=t.y,c=t.z,v=Math.cos(l),y=Math.sin(l),k=Math.cos(f),l=Math.sin(f),f=Math.cos(c),c=Math.sin(c);return"XYZ"===t.order?(u=v*f,s=v*c,h=y*f,g=y*c,I[0]=k*f,I[4]=-k*c,I[8]=l,I[1]=s+h*l,I[5]=u-g*l,I[9]=-y*k,I[2]=g-u*l,I[6]=h+s*l,I[10]=v*k):"YXZ"===t.order?(i=k*c,e=l*f,I[0]=(n=k*f)+(r=l*c)*y,I[4]=e*y-i,I[8]=v*l,I[1]=v*c,I[5]=v*f,I[9]=-y,I[2]=i*y-e,I[6]=r+n*y,I[10]=v*k):"ZXY"===t.order?(i=k*c,e=l*f,I[0]=(n=k*f)-(r=l*c)*y,I[4]=-v*c,I[8]=e+i*y,I[1]=i+e*y,I[5]=v*f,I[9]=r-n*y,I[2]=-v*l,I[6]=y,I[10]=v*k):"ZYX"===t.order?(u=v*f,s=v*c,h=y*f,g=y*c,I[0]=k*f,I[4]=h*l-s,I[8]=u*l+g,I[1]=k*c,I[5]=g*l+u,I[9]=s*l-h,I[2]=-l,I[6]=y*k,I[10]=v*k):"YZX"===t.order?(o=v*k,a=v*l,A=y*k,C=y*l,I[0]=k*f,I[4]=C-o*c,I[8]=A*c+a,I[1]=c,I[5]=v*f,I[9]=-y*f,I[2]=-l*f,I[6]=a*c+A,I[10]=o-C*c):"XZY"===t.order&&(o=v*k,a=v*l,A=y*k,C=y*l,I[0]=k*f,I[4]=-c,I[8]=l*f,I[1]=o*c+C,I[5]=v*f,I[9]=a*c-A,I[2]=A*c-a,I[6]=y*f,I[10]=C*c+o),I[3]=0,I[7]=0,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(wt,t,mt)},lookAt:function(t,n,i){var e=this.elements;return bt.subVectors(t,n),0===bt.lengthSq()&&(bt.z=1),bt.normalize(),pt.crossVectors(i,bt),0===pt.lengthSq()&&(1===Math.abs(i.z)?bt.x+=1e-4:bt.z+=1e-4,bt.normalize(),pt.crossVectors(i,bt)),pt.normalize(),Mt.crossVectors(bt,pt),e[0]=pt.x,e[4]=Mt.x,e[8]=bt.x,e[1]=pt.y,e[5]=Mt.y,e[9]=bt.y,e[2]=pt.z,e[6]=Mt.z,e[10]=bt.z,this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var i=t.elements,e=n.elements,r=this.elements,u=i[0],s=i[4],h=i[8],g=i[12],o=i[1],a=i[5],A=i[9],C=i[13],I=i[2],l=i[6],f=i[10],c=i[14],v=i[3],y=i[7],k=i[11],d=i[15],w=e[0],m=e[4],p=e[8],M=e[12],b=e[1],E=e[5],S=e[9],x=e[13],R=e[2],T=e[6],N=e[10],P=e[14],t=e[3],n=e[7],i=e[11],e=e[15];return r[0]=u*w+s*b+h*R+g*t,r[4]=u*m+s*E+h*T+g*n,r[8]=u*p+s*S+h*N+g*i,r[12]=u*M+s*x+h*P+g*e,r[1]=o*w+a*b+A*R+C*t,r[5]=o*m+a*E+A*T+C*n,r[9]=o*p+a*S+A*N+C*i,r[13]=o*M+a*x+A*P+C*e,r[2]=I*w+l*b+f*R+c*t,r[6]=I*m+l*E+f*T+c*n,r[10]=I*p+l*S+f*N+c*i,r[14]=I*M+l*x+f*P+c*e,r[3]=v*w+y*b+k*R+d*t,r[7]=v*m+y*E+k*T+d*n,r[11]=v*p+y*S+k*N+d*i,r[15]=v*M+y*x+k*P+d*e,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this},determinant:function(){var t=this.elements,n=t[0],i=t[4],e=t[8],r=t[12],u=t[1],s=t[5],h=t[9],g=t[13],o=t[2],a=t[6],A=t[10],C=t[14];return t[3]*(+r*h*a-e*g*a-r*s*A+i*g*A+e*s*C-i*h*C)+t[7]*(+n*h*C-n*g*A+r*u*A-e*u*C+e*g*o-r*h*o)+t[11]*(+n*g*a-n*s*C-r*u*a+i*u*C+r*s*o-i*g*o)+t[15]*(-e*s*o-n*h*a+n*s*A+e*u*a-i*u*A+i*h*o)},transpose:function(){var t=this.elements,n=t[1];return t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this},setPosition:function(t,n,i){var e=this.elements;return t.isVector3?(e[12]=t.x,e[13]=t.y,e[14]=t.z):(e[12]=t,e[13]=n,e[14]=i),this},getInverse:function(t,n){void 0!==n&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var i=this.elements,e=t.elements,r=e[0],u=e[1],s=e[2],h=e[3],g=e[4],o=e[5],a=e[6],A=e[7],C=e[8],I=e[9],l=e[10],f=e[11],c=e[12],v=e[13],y=e[14],k=e[15],d=I*y*A-v*l*A+v*a*f-o*y*f-I*a*k+o*l*k,w=c*l*A-C*y*A-c*a*f+g*y*f+C*a*k-g*l*k,n=C*v*A-c*I*A+c*o*f-g*v*f-C*o*k+g*I*k,t=c*I*a-C*v*a-c*o*l+g*v*l+C*o*y-g*I*y,e=r*d+u*w+s*n+h*t;if(0==e)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e=1/e;return i[0]=d*e,i[1]=(v*l*h-I*y*h-v*s*f+u*y*f+I*s*k-u*l*k)*e,i[2]=(o*y*h-v*a*h+v*s*A-u*y*A-o*s*k+u*a*k)*e,i[3]=(I*a*h-o*l*h-I*s*A+u*l*A+o*s*f-u*a*f)*e,i[4]=w*e,i[5]=(C*y*h-c*l*h+c*s*f-r*y*f-C*s*k+r*l*k)*e,i[6]=(c*a*h-g*y*h-c*s*A+r*y*A+g*s*k-r*a*k)*e,i[7]=(g*l*h-C*a*h+C*s*A-r*l*A-g*s*f+r*a*f)*e,i[8]=n*e,i[9]=(c*I*h-C*v*h-c*u*f+r*v*f+C*u*k-r*I*k)*e,i[10]=(g*v*h-c*o*h+c*u*A-r*v*A-g*u*k+r*o*k)*e,i[11]=(C*o*h-g*I*h-C*u*A+r*I*A+g*u*f-r*o*f)*e,i[12]=t*e,i[13]=(C*v*s-c*I*s+c*u*l-r*v*l-C*u*y+r*I*y)*e,i[14]=(c*o*s-g*v*s-c*u*a+r*v*a+g*u*y-r*o*y)*e,i[15]=(g*I*s-C*o*s+C*u*a-r*I*a-g*u*l+r*o*l)*e,this},scale:function(t){var n=this.elements,i=t.x,e=t.y,t=t.z;return n[0]*=i,n[4]*=e,n[8]*=t,n[1]*=i,n[5]*=e,n[9]*=t,n[2]*=i,n[6]*=e,n[10]*=t,n[3]*=i,n[7]*=e,n[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,i,t))},makeTranslation:function(t,n,i){return this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var n=Math.cos(t),t=Math.sin(t);return this.set(1,0,0,0,0,n,-t,0,0,t,n,0,0,0,0,1),this},makeRotationY:function(t){var n=Math.cos(t),t=Math.sin(t);return this.set(n,0,t,0,0,1,0,0,-t,0,n,0,0,0,0,1),this},makeRotationZ:function(t){var n=Math.cos(t),t=Math.sin(t);return this.set(n,-t,0,0,t,n,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,n){var i=Math.cos(n),e=Math.sin(n),r=1-i,u=t.x,s=t.y,h=t.z,n=r*u,t=r*s;return this.set(n*u+i,n*s-e*h,n*h+e*s,0,n*s+e*h,t*s+i,t*h-e*u,0,n*h-e*s,t*h+e*u,r*h*h+i,0,0,0,0,1),this},makeScale:function(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,n,i){return this.set(1,n,i,0,t,1,i,0,t,n,1,0,0,0,0,1),this},compose:function(t,n,i){var e=this.elements,r=n.Og,u=n.Lg,s=n.Dg,h=n._g,g=r+r,o=u+u,a=s+s,A=r*g,C=r*o,I=r*a,n=u*o,r=u*a,u=s*a,s=h*g,g=h*o,o=h*a,h=i.x,a=i.y,i=i.z;return e[0]=(1-(n+u))*h,e[1]=(C+o)*h,e[2]=(I-g)*h,e[3]=0,e[4]=(C-o)*a,e[5]=(1-(A+u))*a,e[6]=(r+s)*a,e[7]=0,e[8]=(I+g)*i,e[9]=(r-s)*i,e[10]=(1-(A+n))*i,e[11]=0,e[12]=t.x,e[13]=t.y,e[14]=t.z,e[15]=1,this},decompose:function(t,n,i){var e=this.elements,r=kt.set(e[0],e[1],e[2]).length(),u=kt.set(e[4],e[5],e[6]).length(),s=kt.set(e[8],e[9],e[10]).length();this.determinant()<0&&(r=-r),t.x=e[12],t.y=e[13],t.z=e[14],dt.copy(this);var h=1/r,t=1/u,e=1/s;return dt.elements[0]*=h,dt.elements[1]*=h,dt.elements[2]*=h,dt.elements[4]*=t,dt.elements[5]*=t,dt.elements[6]*=t,dt.elements[8]*=e,dt.elements[9]*=e,dt.elements[10]*=e,n.setFromRotationMatrix(dt),i.x=r,i.y=u,i.z=s,this},makePerspective:function(t,n,i,e,r,u){void 0===u&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,h=2*r/(i-e),g=(n+t)/(n-t),i=(i+e)/(i-e),e=-(u+r)/(u-r),u=-2*u*r/(u-r);return s[0]=2*r/(n-t),s[4]=0,s[8]=g,s[12]=0,s[1]=0,s[5]=h,s[9]=i,s[13]=0,s[2]=0,s[6]=0,s[10]=e,s[14]=u,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,n,i,e,r,u){var s=this.elements,h=1/(n-t),g=1/(i-e),o=1/(u-r),t=(n+t)*h,e=(i+e)*g,r=(u+r)*o;return s[0]=2*h,s[4]=0,s[8]=0,s[12]=-t,s[1]=0,s[5]=2*g,s[9]=0,s[13]=-e,s[2]=0,s[6]=0,s[10]=-2*o,s[14]=-r,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var n=this.elements,i=t.elements,e=0;e<16;e++)if(n[e]!==i[e])return!1;return!0},fromArray:function(t,n){void 0===n&&(n=0);for(var i=0;i<16;i++)this.elements[i]=t[i+n];return this},toArray:function(t,n){var i=this.elements;return(t=void 0===t?[]:t)[n=void 0===n?0:n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}}),Object.assign(St.prototype,{addEventListener:function(t,n){void 0===this.Rg&&(this.Rg={});var i=this.Rg;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(n)&&i[t].push(n)},hasEventListener:function(t,n){if(void 0===this.Rg)return!1;var i=this.Rg;return void 0!==i[t]&&-1!==i[t].indexOf(n)},removeEventListener:function(t,n){void 0!==this.Rg&&(void 0===(t=this.Rg[t])||-1!==(n=t.indexOf(n))&&t.splice(n,1))},dispatchEvent:function(t){if(void 0!==this.Rg){var n=this.Rg[t.type];if(void 0!==n){t.target=this;for(var i=n.slice(0),e=0,r=i.length;e<r;e++)i[e].call(this,t)}}}});var xt=new Et,Rt=new ft;function Tt(t,n,i,e){this.Og=t||0,this.Lg=n||0,this.Dg=i||0,this.Gg=e||Tt.DefaultOrder}function Nt(){this.mask=1}function Pt(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Tt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Tt.DefaultOrder="XYZ",Object.defineProperties(Tt.prototype,{x:{get:function(){return this.Og},set:function(t){this.Og=t,this.Fg()}},y:{get:function(){return this.Lg},set:function(t){this.Lg=t,this.Fg()}},z:{get:function(){return this.Dg},set:function(t){this.Dg=t,this.Fg()}},order:{get:function(){return this.Gg},set:function(t){this.Gg=t,this.Fg()}}}),Object.assign(Tt.prototype,{isEuler:!0,set:function(t,n,i,e){return this.Og=t,this.Lg=n,this.Dg=i,this.Gg=e||this.Gg,this.Fg(),this},clone:function(){return new this.constructor(this.Og,this.Lg,this.Dg,this.Gg)},copy:function(t){return this.Og=t.Og,this.Lg=t.Lg,this.Dg=t.Dg,this.Gg=t.Gg,this.Fg(),this},setFromRotationMatrix:function(t,n,i){var e=d.clamp,r=t.elements,u=r[0],s=r[4],h=r[8],g=r[1],o=r[5],a=r[9],A=r[2],t=r[6],r=r[10];return"XYZ"===(n=n||this.Gg)?(this.Lg=Math.asin(e(h,-1,1)),Math.abs(h)<.9999999?(this.Og=Math.atan2(-a,r),this.Dg=Math.atan2(-s,u)):(this.Og=Math.atan2(t,o),this.Dg=0)):"YXZ"===n?(this.Og=Math.asin(-e(a,-1,1)),Math.abs(a)<.9999999?(this.Lg=Math.atan2(h,r),this.Dg=Math.atan2(g,o)):(this.Lg=Math.atan2(-A,u),this.Dg=0)):"ZXY"===n?(this.Og=Math.asin(e(t,-1,1)),Math.abs(t)<.9999999?(this.Lg=Math.atan2(-A,r),this.Dg=Math.atan2(-s,o)):(this.Lg=0,this.Dg=Math.atan2(g,u))):"ZYX"===n?(this.Lg=Math.asin(-e(A,-1,1)),Math.abs(A)<.9999999?(this.Og=Math.atan2(t,r),this.Dg=Math.atan2(g,u)):(this.Og=0,this.Dg=Math.atan2(-s,o))):"YZX"===n?(this.Dg=Math.asin(e(g,-1,1)),Math.abs(g)<.9999999?(this.Og=Math.atan2(-a,o),this.Lg=Math.atan2(-A,u)):(this.Og=0,this.Lg=Math.atan2(h,r))):"XZY"===n?(this.Dg=Math.asin(-e(s,-1,1)),Math.abs(s)<.9999999?(this.Og=Math.atan2(t,o),this.Lg=Math.atan2(h,u)):(this.Og=Math.atan2(-a,r),this.Lg=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+n),this.Gg=n,!1!==i&&this.Fg(),this},setFromQuaternion:function(t,n,i){return xt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(xt,n,i)},setFromVector3:function(t,n){return this.set(t.x,t.y,t.z,n||this.Gg)},reorder:function(t){return Rt.setFromEuler(this),this.setFromQuaternion(Rt,t)},equals:function(t){return t.Og===this.Og&&t.Lg===this.Lg&&t.Dg===this.Dg&&t.Gg===this.Gg},fromArray:function(t){return this.Og=t[0],this.Lg=t[1],this.Dg=t[2],void 0!==t[3]&&(this.Gg=t[3]),this.Fg(),this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this.Og,t[n+1]=this.Lg,t[n+2]=this.Dg,t[n+3]=this.Gg,t},toVector3:function(t){return t?t.set(this.Og,this.Lg,this.Dg):new yt(this.Og,this.Lg,this.Dg)},CA:function(t){return this.Fg=t,this},Fg:function(){}}),Object.assign(Nt.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}}),Object.assign(Pt.prototype,{isMatrix3:!0,set:function(t,n,i,e,r,u,s,h,g){var o=this.elements;return o[0]=t,o[1]=e,o[2]=s,o[3]=n,o[4]=r,o[5]=h,o[6]=i,o[7]=u,o[8]=g,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var n=this.elements,t=t.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this},extractBasis:function(t,n,i){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){t=t.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var i=t.elements,e=n.elements,r=this.elements,u=i[0],s=i[3],h=i[6],g=i[1],o=i[4],a=i[7],A=i[2],C=i[5],I=i[8],l=e[0],f=e[3],c=e[6],v=e[1],y=e[4],t=e[7],n=e[2],i=e[5],e=e[8];return r[0]=u*l+s*v+h*n,r[3]=u*f+s*y+h*i,r[6]=u*c+s*t+h*e,r[1]=g*l+o*v+a*n,r[4]=g*f+o*y+a*i,r[7]=g*c+o*t+a*e,r[2]=A*l+C*v+I*n,r[5]=A*f+C*y+I*i,r[8]=A*c+C*t+I*e,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this},determinant:function(){var t=this.elements,n=t[0],i=t[1],e=t[2],r=t[3],u=t[4],s=t[5],h=t[6],g=t[7],t=t[8];return n*u*t-n*s*g-i*r*t+i*s*h+e*r*g-e*u*h},getInverse:function(t,n){void 0!==n&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var i=t.elements,e=this.elements,r=i[0],u=i[1],s=i[2],h=i[3],g=i[4],o=i[5],a=i[6],A=i[7],C=i[8],I=C*g-o*A,n=o*a-C*h,t=A*h-g*a,i=r*I+u*n+s*t;if(0==i)return this.set(0,0,0,0,0,0,0,0,0);i=1/i;return e[0]=I*i,e[1]=(s*A-C*u)*i,e[2]=(o*u-s*g)*i,e[3]=n*i,e[4]=(C*r-s*a)*i,e[5]=(s*h-o*r)*i,e[6]=t*i,e[7]=(u*a-A*r)*i,e[8]=(g*r-u*h)*i,this},transpose:function(){var t=this.elements,n=t[1];return t[1]=t[3],t[3]=n,n=t[2],t[2]=t[6],t[6]=n,n=t[5],t[5]=t[7],t[7]=n,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this},setUvTransform:function(t,n,i,e,r,u,s){var h=Math.cos(r),r=Math.sin(r);this.set(i*h,i*r,-i*(h*u+r*s)+u+t,-e*r,e*h,-e*(-r*u+h*s)+s+n,0,0,1)},scale:function(t,n){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=n,i[4]*=n,i[7]*=n,this},rotate:function(t){var n=Math.cos(t),i=Math.sin(t),e=this.elements,r=e[0],u=e[3],s=e[6],h=e[1],g=e[4],t=e[7];return e[0]=n*r+i*h,e[3]=n*u+i*g,e[6]=n*s+i*t,e[1]=-i*r+n*h,e[4]=-i*u+n*g,e[7]=-i*s+n*t,this},translate:function(t,n){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this},equals:function(t){for(var n=this.elements,i=t.elements,e=0;e<9;e++)if(n[e]!==i[e])return!1;return!0},fromArray:function(t,n){void 0===n&&(n=0);for(var i=0;i<9;i++)this.elements[i]=t[i+n];return this},toArray:function(t,n){var i=this.elements;return(t=void 0===t?[]:t)[n=void 0===n?0:n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t}});var Ot=0,Lt=new yt,Dt=new ft,_t=new Et,Ft=new yt,Gt=new yt,jt=new yt,Bt=new ft,Zt=new yt(1,0,0),Vt=new yt(0,1,0),Yt=new yt(0,0,1),Ut={type:"added"},Wt={type:"removed"};function Xt(){Object.defineProperty(this,"id",{value:Ot++}),this.uuid=d.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xt.DefaultUp.clone();var t=new yt,n=new Tt,i=new ft,e=new yt(1,1,1);n.CA(function(){i.setFromEuler(n,!1)}),i.CA(function(){n.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:e},modelViewMatrix:{value:new Et},normalMatrix:{value:new Pt}}),this.matrix=new Et,this.matrixWorld=new Et,this.matrixAutoUpdate=Xt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Nt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function zt(){Xt.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Xt.DefaultUp=new yt(0,1,0),Xt.DefaultMatrixAutoUpdate=!0,Xt.prototype=Object.assign(Object.create(St.prototype),{constructor:Xt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,n){this.quaternion.setFromAxisAngle(t,n)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,n){return Dt.setFromAxisAngle(t,n),this.quaternion.multiply(Dt),this},rotateOnWorldAxis:function(t,n){return Dt.setFromAxisAngle(t,n),this.quaternion.premultiply(Dt),this},rotateX:function(t){return this.rotateOnAxis(Zt,t)},rotateY:function(t){return this.rotateOnAxis(Vt,t)},rotateZ:function(t){return this.rotateOnAxis(Yt,t)},translateOnAxis:function(t,n){return Lt.copy(t).applyQuaternion(this.quaternion),this.position.add(Lt.multiplyScalar(n)),this},translateX:function(t){return this.translateOnAxis(Zt,t)},translateY:function(t){return this.translateOnAxis(Vt,t)},translateZ:function(t){return this.translateOnAxis(Yt,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(_t.getInverse(this.matrixWorld))},lookAt:function(t,n,i){t.isVector3?Ft.copy(t):Ft.set(t,n,i);i=this.parent;this.updateWorldMatrix(!0,!1),Gt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_t.lookAt(Gt,Ft,this.up):_t.lookAt(Ft,Gt,this.up),this.quaternion.setFromRotationMatrix(_t),i&&(_t.extractRotation(i.matrixWorld),Dt.setFromRotationMatrix(_t),this.quaternion.premultiply(Dt.inverse()))},add:function(t){if(1<arguments.length){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(Ut)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this},remove:function(t){if(1<arguments.length){for(var n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Wt)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),_t.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),_t.multiply(t.parent.matrixWorld)),t.applyMatrix4(_t),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,n){if(this[t]===n)return this;for(var i=0,e=this.children.length;i<e;i++){var r=this.children[i].getObjectByProperty(t,n);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new yt),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new ft),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Gt,t,jt),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new yt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Gt,Bt,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new yt),this.updateMatrixWorld(!0);var n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var n=this.children,i=0,e=n.length;i<e;i++)n[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var n=this.children,i=0,e=n.length;i<e;i++)n[i].traverseVisible(t)}},traverseAncestors:function(t){var n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var n=this.children,i=0,e=n.length;i<e;i++)n[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,n){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n)for(var e=this.children,r=0,u=e.length;r<u;r++)e[r].updateWorldMatrix(!1,!0)},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,n){if(void 0===n&&(n=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(var i=0;i<t.children.length;i++){var e=t.children[i];this.add(e.clone())}return this}}),zt.prototype=Object.assign(Object.create(Xt.prototype),{constructor:zt,isScene:!0,copy:function(t,n){return Xt.prototype.copy.call(this,t,n),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Qt(t){Xt.call(this),this.element=t||document.createElement("div"),this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)})})}Qt.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Qt,copy:function(t,n){return Xt.prototype.copy.call(this,t,n),this.element=t.element.cloneNode(!0),this}});function Kt(t){Qt.call(this,t)}(Kt.prototype=Object.create(Qt.prototype)).constructor=Kt;function Ht(){var i,e,u,s,a=this,A=new Et,C={camera:{fov:0,style:""},objects:new WeakMap},h=document.createElement("div");h.style.overflow="hidden",this.domElement=h;var I=document.createElement("div");I.style.WebkitTransformStyle="preserve-3d",I.style.transformStyle="preserve-3d",I.style.pointerEvents="none",h.appendChild(I);var l=/Trident/i.test(navigator.userAgent);function g(t){return Math.abs(t)<1e-10?0:t}function o(t){t=t.elements;return"matrix3d("+g(t[0])+","+g(-t[1])+","+g(t[2])+","+g(t[3])+","+g(t[4])+","+g(-t[5])+","+g(t[6])+","+g(t[7])+","+g(t[8])+","+g(-t[9])+","+g(t[10])+","+g(t[11])+","+g(t[12])+","+g(-t[13])+","+g(t[14])+","+g(t[15])+")"}function f(t,n){t=t.elements,t="matrix3d("+g(t[0])+","+g(t[1])+","+g(t[2])+","+g(t[3])+","+g(-t[4])+","+g(-t[5])+","+g(-t[6])+","+g(-t[7])+","+g(t[8])+","+g(t[9])+","+g(t[10])+","+g(t[11])+","+g(t[12])+","+g(t[13])+","+g(t[14])+","+g(t[15])+")";return l?"translate(-50%,-50%)translate("+u+"px,"+s+"px)"+n+t:"translate(-50%,-50%)"+t}this.getSize=function(){return{width:i,height:e}},this.setSize=function(t,n){u=(i=t)/2,s=(e=n)/2,h.style.width=t+"px",h.style.height=n+"px",I.style.width=t+"px",I.style.height=n+"px"};var r,c,v=(r=new yt,c=new yt,function(t,n){return r.setFromMatrixPosition(t.matrixWorld),c.setFromMatrixPosition(n.matrixWorld),r.distanceToSquared(c)});function y(t){for(var n,i=(n=[],t.traverse(function(t){t instanceof Qt&&n.push(t)}),n.sort(function(t,n){return C.objects.get(t).distanceToCameraSquared-C.objects.get(n).distanceToCameraSquared})),e=i.length,r=0,u=i.length;r<u;r++)i[r].element.style.zIndex=e-r}this.render=function(t,n){var i,e=n.projectionMatrix.elements[5]*s;C.camera.fov!==e&&(n.isPerspectiveCamera?(h.style.WebkitPerspective=e+"px",h.style.perspective=e+"px"):(h.style.WebkitPerspective="",h.style.perspective=""),C.camera.fov=e),!0===t.autoUpdate&&t.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),n.isOrthographicCamera&&(i=-(n.right+n.left)/2,r=(n.top+n.bottom)/2);var r=n.isOrthographicCamera?"scale("+e+")translate("+g(i)+"px,"+g(r)+"px)"+o(n.matrixWorldInverse):"translateZ("+e+"px)"+o(n.matrixWorldInverse),e=r+"translate("+u+"px,"+s+"px)";C.camera.style===e||l||(I.style.WebkitTransform=e,I.style.transform=e,C.camera.style=e),function t(n,i,e,r){var u,s,h;n instanceof Qt&&(n.onBeforeRender(a,i,e),h=n instanceof Kt?(A.copy(e.matrixWorldInverse),A.transpose(),A.copyPosition(n.matrixWorld),A.scale(n.scale),A.elements[3]=0,A.elements[7]=0,A.elements[11]=0,A.elements[15]=1,f(A,r)):f(n.matrixWorld,r),u=n.element,void 0!==(s=C.objects.get(n))&&s.style===h||(u.style.WebkitTransform=h,h={style:u.style.transform=h},l&&(h.distanceToCameraSquared=v(e,n)),C.objects.set(n,h)),u.style.display=n.visible?"":"none",u.parentNode!==I&&I.appendChild(u),n.onAfterRender(a,i,e));for(var g=0,o=n.children.length;g<o;g++)t(n.children[g],i,e,r)}(t,t,n,r),l&&y(t)}}var Jt=new yt,qt=new yt,$t=new Pt;function tn(t,n){this.normal=void 0!==t?t:new yt(1,0,0),this.constant=void 0!==n?n:0}Object.assign(tn.prototype,{isPlane:!0,set:function(t,n){return this.normal.copy(t),this.constant=n,this},setComponents:function(t,n,i,e){return this.normal.set(t,n,i),this.constant=e,this},setFromNormalAndCoplanarPoint:function(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(t,n,i){n=Jt.subVectors(i,n).cross(qt.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,n){return void 0===n&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new yt),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new yt);var i=t.delta(Jt),e=this.normal.dot(i);if(0===e)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;e=-(t.start.dot(this.normal)+this.constant)/e;return e<0||1<e?void 0:n.copy(i).multiplyScalar(e).add(t.start)},intersectsLine:function(t){var n=this.distanceToPoint(t.start),t=this.distanceToPoint(t.end);return n<0&&0<t||t<0&&0<n},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new yt),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,n){n=n||$t.getNormalMatrix(t),t=this.coplanarPoint(Jt).applyMatrix4(t),n=this.normal.applyMatrix3(n).normalize();return this.constant=-t.dot(n),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var nn=new yt,en=new yt,rn=new yt,un=new yt,sn=new yt,hn=new yt,gn=new yt;function on(t,n){this.origin=void 0!==t?t:new yt,this.direction=void 0!==n?n:new yt(0,0,-1)}function an(t,n,i,e){this.ray=new on(t,n),this.near=i||0,this.far=e||1/0,this.camera=null,this.layers=new Nt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function An(t,n){return t.distance-n.distance}function Cn(t,n,i,e){if(t.layers.test(n.layers)&&t.raycast(n,i),!0===e)for(var r=t.children,u=0,s=r.length;u<s;u++)Cn(r[u],n,i,!0)}Object.assign(on.prototype,{set:function(t,n){return this.origin.copy(t),this.direction.copy(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,n){return void 0===n&&(console.warn("THREE.Ray: .at() target is now required"),n=new yt),n.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,nn)),this},closestPointToPoint:function(t,n){void 0===n&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new yt),n.subVectors(t,this.origin);t=n.dot(this.direction);return t<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var n=nn.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(nn.copy(this.direction).multiplyScalar(n).add(this.origin),nn.distanceToSquared(t))},distanceSqToSegment:function(t,n,i,e){en.copy(t).add(n).multiplyScalar(.5),rn.copy(n).sub(t).normalize(),un.copy(this.origin).sub(en);var r,u,s=.5*t.distanceTo(n),h=-this.direction.dot(rn),g=un.dot(this.direction),o=-un.dot(rn),a=un.lengthSq(),t=Math.abs(1-h*h);return a=0<t?(u=h*g-o,n=s*t,0<=(r=h*o-g)?-n<=u?u<=n?(r*=t=1/t)*(r+h*(u*=t)+2*g)+u*(h*r+u+2*o)+a:(u=s,-(r=Math.max(0,-(h*u+g)))*r+u*(u+2*o)+a):(u=-s,-(r=Math.max(0,-(h*u+g)))*r+u*(u+2*o)+a):u<=-n?-(r=Math.max(0,-(-h*s+g)))*r+(u=0<r?-s:Math.min(Math.max(-s,-o),s))*(u+2*o)+a:u<=n?(r=0,(u=Math.min(Math.max(-s,-o),s))*(u+2*o)+a):-(r=Math.max(0,-(h*s+g)))*r+(u=0<r?s:Math.min(Math.max(-s,-o),s))*(u+2*o)+a):(u=0<h?-s:s,-(r=Math.max(0,-(h*u+g)))*r+u*(u+2*o)+a),i&&i.copy(this.direction).multiplyScalar(r).add(this.origin),e&&e.copy(rn).multiplyScalar(u).add(en),a},intersectSphere:function(t,n){nn.subVectors(t.center,this.origin);var i=nn.dot(this.direction),e=nn.dot(nn)-i*i,t=t.radius*t.radius;if(t<e)return null;t=Math.sqrt(t-e),e=i-t,t=i+t;return e<0&&t<0?null:e<0?this.at(t,n):this.at(e,n)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var n=t.normal.dot(this.direction);if(0===n)return 0===t.distanceToPoint(this.origin)?0:null;n=-(this.origin.dot(t.normal)+t.constant)/n;return 0<=n?n:null},intersectPlane:function(t,n){t=this.distanceToPlane(t);return null===t?null:this.at(t,n)},intersectsPlane:function(t){var n=t.distanceToPoint(this.origin);return 0===n||t.normal.dot(this.direction)*n<0},intersectBox:function(t,n){var i,e,r,u=1/this.direction.x,s=1/this.direction.y,h=1/this.direction.z,g=this.origin,u=0<=u?(i=(t.min.x-g.x)*u,(t.max.x-g.x)*u):(i=(t.max.x-g.x)*u,(t.min.x-g.x)*u),s=0<=s?(e=(t.min.y-g.y)*s,(t.max.y-g.y)*s):(e=(t.max.y-g.y)*s,(t.min.y-g.y)*s);return s<i||u<e?null:((i<e||i!=i)&&(i=e),(s<u||u!=u)&&(u=s),(h=0<=h?(r=(t.min.z-g.z)*h,(t.max.z-g.z)*h):(r=(t.max.z-g.z)*h,(t.min.z-g.z)*h))<i||u<r?null:((i<r||i!=i)&&(i=r),(u=h<u||u!=u?h:u)<0?null:this.at(0<=i?i:u,n)))},intersectsBox:function(t){return null!==this.intersectBox(t,nn)},intersectTriangle:function(t,n,i,e,r){sn.subVectors(n,t),hn.subVectors(i,t),gn.crossVectors(sn,hn);i=this.direction.dot(gn);if(0<i){if(e)return null;u=1}else{if(!(i<0))return null;u=-1,i=-i}un.subVectors(this.origin,t);e=u*this.direction.dot(hn.crossVectors(un,hn));if(e<0)return null;t=u*this.direction.dot(sn.cross(un));if(t<0)return null;if(i<e+t)return null;var u=-u*un.dot(gn);return u<0?null:this.at(u/i,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(an.prototype,{set:function(t,n){this.ray.set(t,n)},setFromCamera:function(t,n){n&&n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n&&n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,n,i){i=i||[];return Cn(t,this,i,n),i.sort(An),i},intersectObjects:function(t,n,i){var e=i||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),e;for(var r=0,u=t.length;r<u;r++)Cn(t[r],this,e,n);return e.sort(An),e}});var In={AMAP_SATELLITE:1,AMAP_VECTOR:2,BAIDU_VECTOR:4,BAIDU_SATELLITE:8};function ln(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}e=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.IA=void 0!==(t=t||{}).width?t.width:1e3,this.lA=void 0!==t.length?t.length:1e3,this.fA=void 0!==t.offset?t.offset:1,this.cA=void 0===t.visible||t.visible,this.Uo=void 0!==t.mode?t.mode:In.AMAP_VECTOR,this.vA=500,this.q=.5,this.yA=t.container,void 0===this.yA&&(this.yA=document.createElement("div"),document.getElementsByTagName("body")[0].appendChild(this.yA)),this.yA.style.width=this.IA/this.q+"px",this.yA.style.height=this.lA/this.q+"px",this.yA.style.opacity=1,this.kA=new zt,this.dA=new an,this.Vt=null,this.wA=this.fA,this.mA=null,this.pA=new tn(new yt(0,1,0),0),this.MA=new yt,this.bA=new yt,this.EA=!1,this.SA=this.SA.bind(this),this.xA=this.xA.bind(this),this.RA=this.RA.bind(this),this.TA=this.TA.bind(this),this.NA=null}var t,i,e;return t=n,(i=[{key:"visible",get:function(){return this.cA},set:function(t){this.cA=t,this.NA&&(this.NA.visible=this.cA)}},{key:"addTo",value:function(t){this.Vt=t,this.wA=this.Vt.getFloor(this.Vt.getVisibleLevels()[0]).height-this.fA,this.tg()}},{key:"remove",value:function(){this.dispose(),this.Vt.off("resize",this.SA),this.Vt.off("update",this.xA),this.Vt.off("viewChanged",this.RA),this.Vt.off("visibleLevelsLoaded",this.TA),this.Vt=null,this.EA=!1}},{key:"dispose",value:function(){this.mA&&this.mA.dispose(),this.mA=null,this.yA.style.display="",this.NA=null,this.PA=null}}])&&ln(t.prototype,i),e&&ln(t,e),n}();Object.assign(e.prototype,{tg:function(){this.EA||(this.PA=this.OA(),this.NA=this.LA(),this.mA=this.DA(),this._A(),this.Vt.on("resize",this.SA),this.Vt.on("update",this.xA),this.Vt.on("viewChanged",this.RA),this.Vt.on("visibleLevelsLoaded",this.TA),this.EA=!0)},OA:function(){var t=new Ht;return t.setSize(this.Vt.getContainer().clientWidth,this.Vt.getContainer().clientHeight),t.domElement.style.position="absolute",t.domElement.style.top=0,t.domElement.style.zIndex=-1,this.Vt.getContainer().appendChild(t.domElement),t},LA:function(){var t=new Qt(this.yA);return t.position.x=0,t.position.y=this.wA,t.position.z=0,t.rotation.x=-Math.PI/2,t.scale.set(this.q,this.q,this.q),t.visible=this.cA,this.kA.add(t),t},DA:function(){for(var e=this,t=ol.proj.get("EPSG:3857"),n=[],i=0;i<19;i++)n[i]=Math.pow(2,18-i);r=this.Uo===In.AMAP_SATELLITE||this.Uo===In.AMAP_VECTOR?new ol.source.XYZ({url:this.FA()}):(r=new ol.tilegrid.TileGrid({origin:[0,0],resolutions:n}),new ol.source.TileImage({projection:t,tileGrid:r,tileUrlFunction:function(t){if(!t)return"";var n=t[0],i=t[1],t=-t[2]-1;return e.GA(i=i<0?"M"+-i:i,t=t<0?"M"+-t:t,n)}}));t=new ol.Map({view:new ol.View({center:[this.Vt.getX(),this.Vt.getY()],zoom:16,projection:t}),layers:[new ol.layer.Tile({source:r})]});t.setTarget(this.yA);var r=ol.geom.Polygon.fromExtent([this.Vt.getX()-this.IA/2,(this.Vt.getY()-this.wA)/2,this.Vt.getX()+this.IA/2,this.Vt.getY()+this.wA/2]);return t.getView().fit(r),t},FA:function(){var t=this.Uo===In.AMAP_SATELLITE?"http://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=6&x={x}&y={y}&z={z}":"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=2&scale=1&style=7&x={x}&y={y}&z={z}";return t},GA:function(t,n,i){i=this.Uo===In.BAIDU_SATELLITE?"https://gss0.bdstatic.com/5bwHcj7lABFY8t_jkk_Z1zRvfdw6buu/it/u=x="+t+";y="+n+";z="+i+";v=009;type=sate&fm=46&udt=20210415&scaler=2":"http://online3.map.bdimg.com/tile/?qt=tile&x="+t+"&y="+n+"&z="+i+"&styles=pl&udt=20200630&scaler=1";return i},SA:function(){this.PA.setSize(this.Vt.getContainer().clientWidth,this.Vt.getContainer().clientHeight)},xA:function(){this.PA.render(this.kA,this.Vt.getCamera())},RA:function(){this._A()},_A:function(){var t=new yt(0,0,.5);this.dA.setFromCamera(t,this.Vt.getCamera());var n=new yt;this.dA.ray.intersectPlane(this.pA,n);var i=this.dA.ray.distanceToPlane(this.pA)/this.vA,e=n.x+this.Vt.getX(),r=-n.z+this.Vt.getY(),t=this.IA*i;this.NA.position.x=n.x,this.NA.position.z=n.z,this.NA.scale.set(i*this.q,i*this.q,i*this.q);t=ol.geom.Polygon.fromExtent([e-t/2,r-t/2,e+t/2,r+t/2]);this.mA.getView().fit(t),this.mA.getView().setCenter([e,r])},TA:function(){this.wA=this.Vt.getFloor(this.Vt.getVisibleLevels()[0]).height-this.fA,this.NA.position.y=this.wA}});var e=e,fn=i(0);i=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(i.prototype,{jA:function(t,n){for(var i=[],e=0,r=0;r<t.length;r++){var u=t[r].idxs;if("number"==typeof(u=u||t[r]))for(;e<u;)i.push({x:n[e],y:n[e+1]}),e+=2;else for(var s=0;s<u.length;s++)for(var h=u[s];e<h;)i.push({x:n[e],y:n[e+1]}),e+=2}return i},BA:function(t,n){for(var i=[],e=0,r=0;r<t.length;r++){var u=t[r].idxs;if("number"==typeof(u=u||t[r])){for(var s=[];e<u;)s.push({x:n[e],y:n[e+1]}),e+=2;i.push(s)}else for(var h=0;h<u.length;h++){for(var g=u[h],o=[];e<g;)o.push({x:n[e],y:n[e+1]}),e+=2;i.push(o)}}return i},ZA:function(t,n){for(var i=[],e=[],r=0,u=0;u<t.length;u++){var s=t[u].idxs;if("number"==typeof(s=s||t[u]))for(;r<s;)i.push({x:n[r],y:n[r+1]}),r+=2;else for(var h=0;h<s.length;h++)if(0===h)for(var g=s[h];r<g;)i.push({x:n[r],y:n[r+1]}),r+=2;else{for(var o=[],a=s[h];r<a;)o.push({x:n[r],y:n[r+1]}),r+=2;e.push(o)}}var A=[];return A.push(i),A.push.apply(A,e),A},VA:function(t){for(var n=[],i=t.length,e=0;e<i;e++){for(var r=t[e],u={x:this.YA(r.x),y:this.YA(r.y)},s=n.length,h=!1,g=0;g<s;g++){var o=n[g];if(o.x==u.x&&o.y==u.y){h=!0;break}}h||n.push(u)}return n},YA:function(t){return+t.toFixed(2)}});var cn=new i;function vn(t){return function(t){if(Array.isArray(t))return yn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return yn(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?yn(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}function kn(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}i=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.UA=t,this.Bi=new Map,this.WA=new fn.io.WKTReader,this.XA=new fn.io.WKTWriter,this.Ue=new fn.geom.GeometryFactory}var t,i,e;return t=n,(i=[{key:"add",value:function(t){var n=this.Bi.get(t.level);n||this.Bi.set(t.level,n=[]),n.push(t)}},{key:"merge",value:function(t,n,i,e){t=this.Bi.get(t);t&&this.zA(t,n,i,e)}}])&&kn(t.prototype,i),e&&kn(t,e),n}();Object.assign(i.prototype,{zA:function(t,n,i,e){for(var r=[n.modelLayer,i.modelLayer],u=[n.labelLayer,i.labelLayer],s=[[],[]],h=[[],[]],g=0;g<t.length;g++){for(var o,a=t[g].FIDs,A=[[],[]],C=[[],[]],I=0;I<r[1].length;){var l=r[1][I];-1!=a.indexOf(l.fid)?(A[0].push(r[0].splice(I,1)[0]),A[1].push(r[1].splice(I,1)[0]),C[0].push(u[0].splice(I,1)[0]),C[1].push(u[1].splice(I,1)[0])):I++}this.QA(t[g],A,C,e),(o=s[0]).push.apply(o,vn(A[0])),(o=s[1]).push.apply(o,vn(A[1])),(o=h[0]).push.apply(o,vn(C[0])),(o=h[1]).push.apply(o,vn(C[1]))}(i=r[0]).unshift.apply(i,vn(s[0])),(i=r[1]).unshift.apply(i,vn(s[1])),(i=u[0]).unshift.apply(i,vn(h[0])),(i=u[1]).unshift.apply(i,vn(h[1]))},QA:function(t,n,i,e){if(0!=n[0].length)if(n[0].length<2)n[1][0].FIDs=t.FIDs,n[1][0].name=t.name,n[1][0].ename=t.ename,i[1][0].FIDs=t.FIDs,i[1][0].name=t.name,i[1][0].ename=t.ename;else{for(var r=[],u=0;u<n[0].length;u++){var s=this.KA(n[0][u],e);s.indices=[],s.indices.push(u),r.push(s)}for(var h=0;h<r.length-1;){for(var g=r[h],o=!1,a=h+1;a<r.length;){var A=r[a];if(!(g.intersection(A).getNumPoints()<=1)){var C=[];C.push.apply(C,vn(g.indices)),C.push.apply(C,vn(A.indices)),r[h]=g.union(A),r[h].indices=C,r.splice(a,1),o=!(h=0);break}a++}o||h++}for(var I=0;I<r.length;I++)this.HA(t,n,r[I],e),this.JA(t,i,r[I],e);for(var l=0;l<n[1].length;)n[1][l].FIDs?l++:(n[0].splice(l,1),n[1].splice(l,1),i[0].splice(l,1),i[1].splice(l,1))}},KA:function(t,n){var i=null;if(1==n)i=this.WA.read(t.geo);else if(2==n){for(var e=cn.ZA(t.idxs,t.pts),r=null,u=[],s=0;s<e.length;s++){var h=e[s].map(function(t){return new fn.geom.Coordinate(t.x,t.y)}),h=this.Ue.createLinearRing(h);0==s?r=h:u.push(h)}t=this.Ue.createPolygon(r,u),i=this.Ue.createMultiPolygon([t])}return i},HA:function(t,n,o,i){var e=[];o.indices.forEach(function(t){e.push(n[1][t].fid)});var r=o.indices[0],a=n[0][r],r=n[1][r];1==i?("MultiPolygon"!=o.getGeometryType()&&(o=this.Ue.createMultiPolygon([o])),a.geo=this.XA.write(o)):2==i&&function(){var t=null,n=[];if("MultiPolygon"==o.getGeometryType())for(var i=0;i<o.getNumGeometries();i++)0==i?t=o.getGeometryN(i):n.push(o.getGeometryN(i));else t=o;var e=[],r=[],u=0,s=t.getExteriorRing().getCoordinates();u+=2*s.length,e.push(u),s.forEach(function(t){r.push(t.x),r.push(t.y)});for(var h=0;h<t.getNumInteriorRing();h++)u+=2*(s=t.getInteriorRingN(h).getCoordinates()).length,e.push(u),s.forEach(function(t){r.push(t.x),r.push(t.y)});for(var g=0;g<n.length;g++)u+=2*(s=n[g].getExteriorRing().getCoordinates()).length,e.push(u),s.forEach(function(t){r.push(t.x),r.push(t.y)});a.idxs=[{idxs:e}],a.pts=r}(),r.fid=e.toString(),r.FIDs=t.FIDs,r.name=t.name,r.ename=t.ename},JA:function(t,n,i,e){var r=[];i.indices.forEach(function(t){r.push(n[1][t].fid)});var u=i.indices[0],s=n[0][u],u=n[1][u],i=new fn.algorithm.Centroid(i).getCentroid();1==e?s.geo="POINT("+i.x+" "+i.y+")":2==e&&(s.pts=[i.x,i.y]),u.fid=r.toString(),u.FIDs=t.FIDs,u.name=t.name,u.ename=t.ename}});var dn,i=i,wn=window.fengmap||{},mn={FMCompass:u,FMControlPosition:l,FMZoomControl:A,FMToolbar:m};for(dn in mn)wn[dn]=mn[dn];var pn,Mn={FMNaviMode:p,FMNaviPriority:M,FMLanguageType:b,FMNavigation:C};for(pn in Mn)wn[pn]=Mn[pn];var bn,En={FMMerge:i};for(bn in En)wn[bn]=En[bn];wn.FMTileLayer=e,wn.FMTileProvider=In,window.fengmap=wn;n.default=wn}],e={},r.m=i,r.c=e,r.d=function(t,n,i){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"Kh",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.Kh)return n;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)r.d(i,e,function(t){return n[t]}.bind(null,e));return i},r.n=function(t){var n=t&&t.Kh?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=1).default;function r(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return i[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var i,e});