/*! Released Version 3.0.5,BUILD 2942. Fengmap Javascript SDK, see: https://www.fengmap.com for details */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("fs")):"function"==typeof define&&define.amd?define(["fs"],n):"object"==typeof exports?exports.fengmap=n(require("fs")):t.fengmap=n(t.fs)}(this,function(__WEBPACK_EXTERNAL_MODULE__47__){return d=[function(t,n,i){"use strict";var r,e,s=t.exports=i(1),o=i(16);s.codegen=i(40),s.fetch=i(41),s.path=i(42),s.fs=s.inquire("fs"),s.toArray=function(t){if(t){for(var n=Object.keys(t),i=new Array(n.length),r=0;r<n.length;)i[r]=t[n[r++]];return i}return[]},s.toObject=function(t){for(var n={},i=0;i<t.length;){var r=t[i++],e=t[i++];void 0!==e&&(n[r]=e)}return n};var u=/\\/g,h=/"/g;s.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},s.safeProp=function(t){return!/^[$\w_]+$/.test(t)||s.isReserved(t)?'["'+t.replace(u,"\\\\").replace(h,'\\"')+'"]':"."+t},s.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var f=/_([a-z])/g;s.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(f,function(t,n){return n.toUpperCase()})},s.compareFieldsById=function(t,n){return t.id-n.id},s.decorateType=function(t,n){if(t.$type)return n&&t.$type.name!==n&&(s.decorateRoot.remove(t.$type),t.$type.name=n,s.decorateRoot.add(t.$type)),t.$type;n=new(r=r||i(18))(n||t.name);return s.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var a=0;s.decorateEnum=function(t){if(t.$type)return t.$type;var n=new(e=e||i(2))("Enum"+a++,t);return s.decorateRoot.add(n),Object.defineProperty(t,"$type",{value:n,enumerable:!1}),n},s.setProperty=function(t,n,i){if("object"!=typeof t)throw TypeError("dst must be an object");if(!n)throw TypeError("path must be specified");return function t(n,i,r){var e=i.shift();return 0<i.length?n[e]=t(n[e]||{},i,r):((i=n[e])&&(r=[].concat(i).concat(r)),n[e]=r),n}(t,n=n.split("."),i)},Object.defineProperty(s,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(i(26)))}})},function(t,i,s){"use strict";!function(t){var r=i;function e(t,n,i){for(var r=Object.keys(n),e=0;e<r.length;++e)void 0!==t[r[e]]&&i||(t[r[e]]=n[r[e]]);return t}function n(t){function i(t,n){if(!(this instanceof i))return new i(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&e(this,n)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}r.asPromise=s(13),r.base64=s(31),r.EventEmitter=s(32),r.float=s(33),r.inquire=s(14),r.utf8=s(34),r.pool=s(35),r.LongBits=s(36),r.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),r.global=r.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,n){var i=t[n];return!(null==i||!t.hasOwnProperty(n))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r.u=null,r.h=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r.h(t):new r.Array(t):r.Buffer?r.u(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,n){t=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(t.lo,t.hi,n):t.toNumber(Boolean(n))},r.merge=e,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=n,r.ProtocolError=n("ProtocolError"),r.oneOfGetter=function(t){for(var i={},n=0;n<t.length;++n)i[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;-1<n;--n)if(1===i[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(i){return function(t){for(var n=0;n<i.length;++n)i[n]!==t&&delete this[i[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r.v=function(){var i=r.Buffer;i?(r.u=i.from!==Uint8Array.from&&i.from||function(t,n){return new i(t,n)},r.h=i.allocUnsafe||function(t){return new i(t)}):r.u=r.h=null}}.call(this,s(10))},function(t,n,i){"use strict";t.exports=s;var u=i(3);((s.prototype=Object.create(u.prototype)).constructor=s).className="Enum";var r=i(5),e=i(0);function s(t,n,i,r,e){if(u.call(this,t,i),n&&"object"!=typeof n)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=e||{},this.reserved=void 0,n)for(var s=Object.keys(n),o=0;o<s.length;++o)"number"==typeof n[s[o]]&&(this.valuesById[this.values[s[o]]=n[s[o]]]=s[o])}s.fromJSON=function(t,n){t=new s(t,n.values,n.options,n.comment,n.comments);return t.reserved=n.reserved,t},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return e.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(t,n,i){if(!e.isString(t))throw TypeError("name must be a string");if(!e.isInteger(n))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(n))throw Error("id "+n+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[n]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+n+" in "+this);this.values[t]=n}else this.valuesById[this.values[t]=n]=t;return this.comments[t]=i||null,this},s.prototype.remove=function(t){if(!e.isString(t))throw TypeError("name must be a string");var n=this.values[t];if(null==n)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[n],delete this.values[t],delete this.comments[t],this},s.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},s.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)}},function(t,n,i){"use strict";(t.exports=e).className="ReflectionObject";var r,o=i(0);function e(t,n){if(!o.isString(t))throw TypeError("name must be a string");if(n&&!o.isObject(n))throw TypeError("options must be an object");this.options=n,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(e.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],n=this.parent;n;)t.unshift(n.name),n=n.parent;return t.join(".")}}}),e.prototype.toJSON=function(){throw Error()},e.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;t=t.root;t instanceof r&&t.b(this)},e.prototype.onRemove=function(t){t=t.root;t instanceof r&&t._(this),this.parent=null,this.resolved=!1},e.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},e.prototype.getOption=function(t){if(this.options)return this.options[t]},e.prototype.setOption=function(t,n,i){return i&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=n),this},e.prototype.setParsedOption=function(n,t,i){this.parsedOptions||(this.parsedOptions=[]);var r,e,s=this.parsedOptions;return i?(e=s.find(function(t){return Object.prototype.hasOwnProperty.call(t,n)}))?(r=e[n],o.setProperty(r,i,t)):((e={})[n]=o.setProperty({},i,t),s.push(e)):((e={})[n]=t,s.push(e)),this},e.prototype.setOptions=function(t,n){if(t)for(var i=Object.keys(t),r=0;r<i.length;++r)this.setOption(i[r],t[i[r]],n);return this},e.prototype.toString=function(){var t=this.constructor.className,n=this.fullName;return n.length?t+" "+n:t},e.v=function(t){r=t}},function(t,n,i){"use strict";t.exports=o;var u=i(3);((o.prototype=Object.create(u.prototype)).constructor=o).className="Field";var r,e=i(2),h=i(6),f=i(0),a=/^required|optional|repeated$/;function o(t,n,i,r,e,s,o){if(f.isObject(r)?(o=e,s=r,r=e=void 0):f.isObject(e)&&(o=s,s=e,e=void 0),u.call(this,t,s),!f.isInteger(n)||n<0)throw TypeError("id must be a non-negative integer");if(!f.isString(i))throw TypeError("type must be a string");if(void 0!==r&&!a.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==e&&!f.isString(e))throw TypeError("extend must be a string");this.rule=(r="proto3_optional"===r?"optional":r)&&"optional"!==r?r:void 0,this.type=i,this.id=n,this.extend=e||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!f.Long&&void 0!==h.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.g=null,this.comment=o}o.fromJSON=function(t,n){return new o(t,n.id,n.type,n.rule,n.extend,n.options,n.comment)},Object.defineProperty(o.prototype,"packed",{get:function(){return null===this.g&&(this.g=!1!==this.getOption("packed")),this.g}}),o.prototype.setOption=function(t,n,i){return"packed"===t&&(this.g=null),u.prototype.setOption.call(this,t,n,i)},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return f.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){return this.resolved?this:(void 0===(this.typeDefault=h.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof e&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof e)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=f.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(f.base64.test(this.typeDefault)?f.base64.decode(this.typeDefault,t=f.newBuffer(f.base64.length(this.typeDefault)),0):f.utf8.write(this.typeDefault,t=f.newBuffer(f.utf8.length(this.typeDefault)),0),this.typeDefault=t),this.map?this.defaultValue=f.emptyObject:this.repeated?this.defaultValue=f.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),u.prototype.resolve.call(this));var t},o.d=function(i,r,e,s){return"function"==typeof r?r=f.decorateType(r).name:r&&"object"==typeof r&&(r=f.decorateEnum(r).name),function(t,n){f.decorateType(t.constructor).add(new o(n,i,r,e,{default:s}))}},o.v=function(t){r=t}},function(t,n,i){"use strict";t.exports=c;var r=i(3);((c.prototype=Object.create(r.prototype)).constructor=c).className="Namespace";var e,s,o,u=i(4),h=i(7),f=i(0);function a(t,n){if(t&&t.length){for(var i={},r=0;r<t.length;++r)i[t[r].name]=t[r].toJSON(n);return i}}function c(t,n){r.call(this,t,n),this.nested=void 0,this.O=null}function l(t){return t.O=null,t}c.fromJSON=function(t,n){return new c(t,n.options).addJSON(n.nested)},c.arrayToJSON=a,c.isReservedId=function(t,n){if(t)for(var i=0;i<t.length;++i)if("string"!=typeof t[i]&&t[i][0]<=n&&t[i][1]>n)return!0;return!1},c.isReservedName=function(t,n){if(t)for(var i=0;i<t.length;++i)if(t[i]===n)return!0;return!1},Object.defineProperty(c.prototype,"nestedArray",{get:function(){return this.O||(this.O=f.toArray(this.nested))}}),c.prototype.toJSON=function(t){return f.toObject(["options",this.options,"nested",a(this.nestedArray,t)])},c.prototype.addJSON=function(t){if(t)for(var n,i=Object.keys(t),r=0;r<i.length;++r)n=t[i[r]],this.add((void 0!==n.fields?e:void 0!==n.values?o:void 0!==n.methods?s:void 0!==n.id?u:c).fromJSON(i[r],n));return this},c.prototype.get=function(t){return this.nested&&this.nested[t]||null},c.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},c.prototype.add=function(t){if(!(t instanceof u&&void 0!==t.extend||t instanceof e||t instanceof o||t instanceof s||t instanceof c||t instanceof h))throw TypeError("object must be a valid nested object");if(this.nested){var n=this.get(t.name);if(n){if(!(n instanceof c&&t instanceof c)||n instanceof e||n instanceof s)throw Error("duplicate name '"+t.name+"' in "+this);for(var i=n.nestedArray,r=0;r<i.length;++r)t.add(i[r]);this.remove(n),this.nested||(this.nested={}),t.setOptions(n.options,!0)}}else this.nested={};return(this.nested[t.name]=t).onAdd(this),l(this)},c.prototype.remove=function(t){if(!(t instanceof r))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),l(this)},c.prototype.define=function(t,n){if(f.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var i=this;0<t.length;){var r=t.shift();if(i.nested&&i.nested[r]){if(!((i=i.nested[r])instanceof c))throw Error("path conflicts with non-namespace objects")}else i.add(i=new c(r))}return n&&i.addJSON(n),i},c.prototype.resolveAll=function(){for(var t=this.nestedArray,n=0;n<t.length;)t[n]instanceof c?t[n++].resolveAll():t[n++].resolve();return this.resolve()},c.prototype.lookup=function(t,n,i){if("boolean"==typeof n?(i=n,n=void 0):n&&!Array.isArray(n)&&(n=[n]),f.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),n);var r=this.get(t[0]);if(r){if(1===t.length){if(!n||-1<n.indexOf(r.constructor))return r}else if(r instanceof c&&(r=r.lookup(t.slice(1),n,!0)))return r}else for(var e=0;e<this.nestedArray.length;++e)if(this.O[e]instanceof c&&(r=this.O[e].lookup(t,n,!0)))return r;return null===this.parent||i?null:this.parent.lookup(t,n)},c.prototype.lookupType=function(t){var n=this.lookup(t,[e]);if(!n)throw Error("no such type: "+t);return n},c.prototype.lookupEnum=function(t){var n=this.lookup(t,[o]);if(!n)throw Error("no such Enum '"+t+"' in "+this);return n},c.prototype.lookupTypeOrEnum=function(t){var n=this.lookup(t,[e,o]);if(!n)throw Error("no such Type or Enum '"+t+"' in "+this);return n},c.prototype.lookupService=function(t){var n=this.lookup(t,[s]);if(!n)throw Error("no such Service '"+t+"' in "+this);return n},c.v=function(t,n,i){e=t,s=n,o=i}},function(t,n,i){"use strict";var n=n,i=i(0),e=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function r(t,n){var i=0,r={};for(n|=0;i<t.length;)r[e[i+n]]=t[i++];return r}n.basic=r([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=r([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=r([0,0,0,1,1],7),n.mapKey=r([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=r([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(t,n,i){"use strict";t.exports=o;var e=i(3);((o.prototype=Object.create(e.prototype)).constructor=o).className="OneOf";var r=i(4),s=i(0);function o(t,n,i,r){if(Array.isArray(n)||(i=n,n=void 0),e.call(this,t,i),void 0!==n&&!Array.isArray(n))throw TypeError("fieldNames must be an Array");this.oneof=n||[],this.fieldsArray=[],this.comment=r}function u(t){if(t.parent)for(var n=0;n<t.fieldsArray.length;++n)t.fieldsArray[n].parent||t.parent.add(t.fieldsArray[n])}o.fromJSON=function(t,n){return new o(t,n.oneof,n.options,n.comment)},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof r))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),u(t.partOf=this),this},o.prototype.remove=function(t){if(!(t instanceof r))throw TypeError("field must be a Field");var n=this.fieldsArray.indexOf(t);if(n<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(n,1),-1<(n=this.oneof.indexOf(t.name))&&this.oneof.splice(n,1),t.partOf=null,this},o.prototype.onAdd=function(t){e.prototype.onAdd.call(this,t);for(var n=0;n<this.oneof.length;++n){var i=t.get(this.oneof[n]);i&&!i.partOf&&(i.partOf=this).fieldsArray.push(i)}u(this)},o.prototype.onRemove=function(t){for(var n,i=0;i<this.fieldsArray.length;++i)(n=this.fieldsArray[i]).parent&&n.parent.remove(n);e.prototype.onRemove.call(this,t)},o.d=function(){for(var i=new Array(arguments.length),t=0;t<arguments.length;)i[t]=arguments[t++];return function(t,n){s.decorateType(t.constructor).add(new o(n,i)),Object.defineProperty(t,n,{get:s.oneOfGetter(i),set:s.oneOfSetter(i)})}}},function(t,n,i){"use strict";!function(o){function u(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.a=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,r,e;function s(){return e.apply(this,arguments)}return n=t,i=null,r=[{key:"global",value:(e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")},s.toString=function(){return e.toString()},s)}],i&&u(n.prototype,i),r&&u(n,r),t}()}.call(this,i(10))},function(t,n,i){"use strict";t.exports=c;var r,e=i(1),s=e.LongBits,o=e.base64,u=e.utf8;function h(t,n,i){this.fn=t,this.len=n,this.next=void 0,this.val=i}function f(){}function a(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function c(){this.len=0,this.head=new h(f,0,0),this.tail=this.head,this.states=null}function l(){return e.Buffer?function(){return(c.create=function(){return new r})()}:function(){return new c}}function v(t,n,i){n[i]=255&t}function d(t,n){this.len=t,this.next=void 0,this.val=n}function y(t,n,i){for(;t.hi;)n[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)n[i++]=127&t.lo|128,t.lo=t.lo>>>7;n[i++]=t.lo}function b(t,n,i){n[i]=255&t,n[i+1]=t>>>8&255,n[i+2]=t>>>16&255,n[i+3]=t>>>24}c.create=l(),c.alloc=function(t){return new e.Array(t)},e.Array!==Array&&(c.alloc=e.pool(c.alloc,e.Array.prototype.subarray)),c.prototype.j=function(t,n,i){return this.tail=this.tail.next=new h(t,n,i),this.len+=n,this},(d.prototype=Object.create(h.prototype)).fn=function(t,n,i){for(;127<t;)n[i++]=127&t|128,t>>>=7;n[i]=t},c.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new d((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},c.prototype.int32=function(t){return t<0?this.j(y,10,s.fromNumber(t)):this.uint32(t)},c.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},c.prototype.int64=c.prototype.uint64=function(t){t=s.from(t);return this.j(y,t.length(),t)},c.prototype.sint64=function(t){t=s.from(t).zzEncode();return this.j(y,t.length(),t)},c.prototype.bool=function(t){return this.j(v,1,t?1:0)},c.prototype.sfixed32=c.prototype.fixed32=function(t){return this.j(b,4,t>>>0)},c.prototype.sfixed64=c.prototype.fixed64=function(t){t=s.from(t);return this.j(b,4,t.lo).j(b,4,t.hi)},c.prototype.float=function(t){return this.j(e.float.writeFloatLE,4,t)},c.prototype.double=function(t){return this.j(e.float.writeDoubleLE,8,t)};var p=e.Array.prototype.set?function(t,n,i){n.set(t,i)}:function(t,n,i){for(var r=0;r<t.length;++r)n[i+r]=t[r]};c.prototype.bytes=function(t){var n,i=t.length>>>0;return i?(e.isString(t)&&(n=c.alloc(i=o.length(t)),o.decode(t,n,0),t=n),this.uint32(i).j(p,i,t)):this.j(v,1,0)},c.prototype.string=function(t){var n=u.length(t);return n?this.uint32(n).j(u.write,n,t):this.j(v,1,0)},c.prototype.fork=function(){return this.states=new a(this),this.head=this.tail=new h(f,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new h(f,0,0),this.len=0),this},c.prototype.ldelim=function(){var t=this.head,n=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=n,this.len+=i),this},c.prototype.finish=function(){for(var t=this.head.next,n=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,n,i),i+=t.len,t=t.next;return n},c.v=function(t){r=t,c.create=l(),r.v()}},function(t,n){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,n,i){"use strict";t.exports=h;var r,e=i(1),s=e.LongBits,o=e.utf8;function u(t,n){return RangeError("index out of range: "+t.pos+" + "+(n||1)+" > "+t.len)}function h(t){this.buf=t,this.pos=0,this.len=t.length}function f(){return e.Buffer?function(t){return(h.create=function(t){return e.Buffer.isBuffer(t)?new r(t):c(t)})(t)}:c}var a,c="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new h(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new h(t);throw Error("illegal buffer")};function l(){var t=new s(0,0),n=0;if(!(4<this.len-this.pos)){for(;n<3;++n){if(this.pos>=this.len)throw u(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*n)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*n)>>>0,t}for(;n<4;++n)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*n)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(n=0,4<this.len-this.pos){for(;n<5;++n)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,this.buf[this.pos++]<128)return t}else for(;n<5;++n){if(this.pos>=this.len)throw u(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function v(t,n){return(t[n-4]|t[n-3]<<8|t[n-2]<<16|t[n-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw u(this,8);return new s(v(this.buf,this.pos+=4),v(this.buf,this.pos+=4))}h.create=f(),h.prototype.T=e.Array.prototype.subarray||e.Array.prototype.slice,h.prototype.uint32=(a=4294967295,function(){if(a=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return a;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return a}),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},h.prototype.bool=function(){return 0!==this.uint32()},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return v(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return 0|v(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var t=e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},h.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var t=e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},h.prototype.bytes=function(){var t=this.uint32(),n=this.pos,i=this.pos+t;if(i>this.len)throw u(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(n,i):n===i?new this.buf.constructor(0):this.T.call(this.buf,n,i)},h.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},h.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw u(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw u(this)}while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},h.v=function(t){r=t,h.create=f(),r.v();var n=e.Long?"toLong":"toNumber";e.merge(h.prototype,{int64:function(){return l.call(this)[n](!1)},uint64:function(){return l.call(this)[n](!0)},sint64:function(){return l.call(this).zzDecode()[n](!1)},fixed64:function(){return d.call(this)[n](!0)},sfixed64:function(){return d.call(this)[n](!1)}})}},function(t,n,i){"use strict";t.exports=e;var r=i(1);function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)this[n[i]]=t[n[i]]}e.create=function(t){return this.$type.create(t)},e.encode=function(t,n){return this.$type.encode(t,n)},e.encodeDelimited=function(t,n){return this.$type.encodeDelimited(t,n)},e.decode=function(t){return this.$type.decode(t)},e.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},e.verify=function(t){return this.$type.verify(t)},e.fromObject=function(t){return this.$type.fromObject(t)},e.toObject=function(t,n){return this.$type.toObject(t,n)},e.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(t,n,i){"use strict";t.exports=function(t,n){var i=new Array(arguments.length-1),s=0,r=2,o=!0;for(;r<arguments.length;)i[s++]=arguments[r++];return new Promise(function(r,e){i[s]=function(t){if(o)if(o=!1,t)e(t);else{for(var n=new Array(arguments.length-1),i=0;i<n.length;)n[i++]=arguments[i];r.apply(null,n)}};try{t.apply(n||null,i)}catch(t){o&&(o=!1,e(t))}})}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(t,n,i){"use strict";n.Service=i(39)},function(t,n,i){"use strict";t.exports={}},function(t,n,i){"use strict";t.exports=function(t){for(var n,i=c.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r=t.fieldsArray.slice().sort(c.compareFieldsById),e=0;e<r.length;++e){var s=r[e].resolve(),o=t.k.indexOf(s),u=s.resolvedType instanceof f?"int32":s.type,h=a.basic[u];n="m"+c.safeProp(s.name),s.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|a.mapKey[s.keyType],s.keyType),void 0===h?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,n):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,u,n),i("}")("}")):s.repeated?(i("if(%s!=null&&%s.length){",n,n),s.packed&&void 0!==a.packed[u]?i("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",u,n)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",n),void 0===h?l(i,s,o,n+"[i]"):i("w.uint32(%i).%s(%s[i])",(s.id<<3|h)>>>0,u,n)),i("}")):(s.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,s.name),void 0===h?l(i,s,o,n):i("w.uint32(%i).%s(%s)",(s.id<<3|h)>>>0,u,n))}return i("return w")};var f=i(2),a=i(6),c=i(0);function l(t,n,i,r){return n.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,r,(n.id<<3|3)>>>0,(n.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,r,(n.id<<3|2)>>>0)}},function(t,n,i){"use strict";t.exports=m;var o=i(5);((m.prototype=Object.create(o.prototype)).constructor=m).className="Type";var u=i(2),h=i(7),f=i(4),a=i(19),c=i(20),e=i(12),s=i(11),l=i(9),v=i(0),d=i(17),y=i(22),b=i(23),p=i(24),w=i(25);function m(t,n){o.call(this,t,n),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.M=null,this.k=null,this.R=null,this.A=null}function r(t){return t.M=t.k=t.R=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(m.prototype,{fieldsById:{get:function(){if(this.M)return this.M;this.M={};for(var t=Object.keys(this.fields),n=0;n<t.length;++n){var i=this.fields[t[n]],r=i.id;if(this.M[r])throw Error("duplicate id "+r+" in "+this);this.M[r]=i}return this.M}},fieldsArray:{get:function(){return this.k||(this.k=v.toArray(this.fields))}},oneofsArray:{get:function(){return this.R||(this.R=v.toArray(this.oneofs))}},ctor:{get:function(){return this.A||(this.ctor=m.generateConstructor(this)())},set:function(t){var n=t.prototype;n instanceof e||((t.prototype=new e).constructor=t,v.merge(t.prototype,n)),t.$type=t.prototype.$type=this,v.merge(t,e,!0),this.A=t;for(var i=0;i<this.fieldsArray.length;++i)this.k[i].resolve();for(var r={},i=0;i<this.oneofsArray.length;++i)r[this.R[i].resolve().name]={get:v.oneOfGetter(this.R[i].oneof),set:v.oneOfSetter(this.R[i].oneof)};i&&Object.defineProperties(t.prototype,r)}}}),m.generateConstructor=function(t){for(var n,i=v.codegen(["p"],t.name),r=0;r<t.fieldsArray.length;++r)(n=t.k[r]).map?i("this%s={}",v.safeProp(n.name)):n.repeated&&i("this%s=[]",v.safeProp(n.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},m.fromJSON=function(t,n){var i=new m(t,n.options);i.extensions=n.extensions,i.reserved=n.reserved;for(var r=Object.keys(n.fields),e=0;e<r.length;++e)i.add((void 0!==n.fields[r[e]].keyType?a:f).fromJSON(r[e],n.fields[r[e]]));if(n.oneofs)for(r=Object.keys(n.oneofs),e=0;e<r.length;++e)i.add(h.fromJSON(r[e],n.oneofs[r[e]]));if(n.nested)for(r=Object.keys(n.nested),e=0;e<r.length;++e){var s=n.nested[r[e]];i.add((void 0!==s.id?f:void 0!==s.fields?m:void 0!==s.values?u:void 0!==s.methods?c:o).fromJSON(r[e],s))}return n.extensions&&n.extensions.length&&(i.extensions=n.extensions),n.reserved&&n.reserved.length&&(i.reserved=n.reserved),n.group&&(i.group=!0),n.comment&&(i.comment=n.comment),i},m.prototype.toJSON=function(t){var n=o.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return v.toObject(["options",n&&n.options||void 0,"oneofs",o.arrayToJSON(this.oneofsArray,t),"fields",o.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",n&&n.nested||void 0,"comment",i?this.comment:void 0])},m.prototype.resolveAll=function(){for(var t=this.fieldsArray,n=0;n<t.length;)t[n++].resolve();for(var i=this.oneofsArray,n=0;n<i.length;)i[n++].resolve();return o.prototype.resolveAll.call(this)},m.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},m.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof f&&void 0===t.extend){if((this.M||this.fieldsById)[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),(this.fields[t.name]=t).message=this,t.onAdd(this),r(this)}return t instanceof h?(this.oneofs||(this.oneofs={}),(this.oneofs[t.name]=t).onAdd(this),r(this)):o.prototype.add.call(this,t)},m.prototype.remove=function(t){if(t instanceof f&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),r(this)}if(t instanceof h){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),r(this)}return o.prototype.remove.call(this,t)},m.prototype.isReservedId=function(t){return o.isReservedId(this.reserved,t)},m.prototype.isReservedName=function(t){return o.isReservedName(this.reserved,t)},m.prototype.create=function(t){return new this.ctor(t)},m.prototype.setup=function(){for(var t=this.fullName,n=[],i=0;i<this.fieldsArray.length;++i)n.push(this.k[i].resolve().resolvedType);this.encode=d(this)({Writer:l,types:n,util:v}),this.decode=y(this)({Reader:s,types:n,util:v}),this.verify=b(this)({types:n,util:v}),this.fromObject=p.fromObject(this)({types:n,util:v}),this.toObject=p.toObject(this)({types:n,util:v});var r=w[t];return r&&((t=Object.create(this)).fromObject=this.fromObject,this.fromObject=r.fromObject.bind(t),t.toObject=this.toObject,this.toObject=r.toObject.bind(t)),this},m.prototype.encode=function(t,n){return this.setup().encode(t,n)},m.prototype.encodeDelimited=function(t,n){return this.encode(t,n&&n.len?n.fork():n).ldelim()},m.prototype.decode=function(t,n){return this.setup().decode(t,n)},m.prototype.decodeDelimited=function(t){return t instanceof s||(t=s.create(t)),this.decode(t,t.uint32())},m.prototype.verify=function(t){return this.setup().verify(t)},m.prototype.fromObject=function(t){return this.setup().fromObject(t)},m.prototype.toObject=function(t,n){return this.setup().toObject(t,n)},m.d=function(n){return function(t){v.decorateType(t,n)}}},function(t,n,i){"use strict";t.exports=s;var o=i(4);((s.prototype=Object.create(o.prototype)).constructor=s).className="MapField";var r=i(6),u=i(0);function s(t,n,i,r,e,s){if(o.call(this,t,n,r,void 0,void 0,e,s),!u.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(t,n){return new s(t,n.id,n.keyType,n.type,n.options,n.comment)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return u.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===r.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},s.d=function(i,r,e){return"function"==typeof e?e=u.decorateType(e).name:e&&"object"==typeof e&&(e=u.decorateEnum(e).name),function(t,n){u.decorateType(t.constructor).add(new s(n,i,r,e))}}},function(t,n,i){"use strict";t.exports=o;var r=i(5);((o.prototype=Object.create(r.prototype)).constructor=o).className="Service";var s=i(21),u=i(0),h=i(15);function o(t,n){r.call(this,t,n),this.methods={},this.S=null}function e(t){return t.S=null,t}o.fromJSON=function(t,n){var i=new o(t,n.options);if(n.methods)for(var r=Object.keys(n.methods),e=0;e<r.length;++e)i.add(s.fromJSON(r[e],n.methods[r[e]]));return n.nested&&i.addJSON(n.nested),i.comment=n.comment,i},o.prototype.toJSON=function(t){var n=r.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return u.toObject(["options",n&&n.options||void 0,"methods",r.arrayToJSON(this.methodsArray,t)||{},"nested",n&&n.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this.S||(this.S=u.toArray(this.methods))}}),o.prototype.get=function(t){return this.methods[t]||r.prototype.get.call(this,t)},o.prototype.resolveAll=function(){for(var t=this.methodsArray,n=0;n<t.length;++n)t[n].resolve();return r.prototype.resolve.call(this)},o.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof s?e((this.methods[t.name]=t).parent=this):r.prototype.add.call(this,t)},o.prototype.remove=function(t){if(t instanceof s){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,e(this)}return r.prototype.remove.call(this,t)},o.prototype.create=function(t,n,i){for(var r,e=new h.Service(t,n,i),s=0;s<this.methodsArray.length;++s){var o=u.lcFirst((r=this.S[s]).resolve().name).replace(/[^$\w_]/g,"");e[o]=u.codegen(["r","c"],u.isReserved(o)?o+"_":o)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return e}},function(t,n,i){"use strict";t.exports=r;var f=i(3);((r.prototype=Object.create(f.prototype)).constructor=r).className="Method";var a=i(0);function r(t,n,i,r,e,s,o,u,h){if(a.isObject(e)?(o=e,e=s=void 0):a.isObject(s)&&(o=s,s=void 0),void 0!==n&&!a.isString(n))throw TypeError("type must be a string");if(!a.isString(i))throw TypeError("requestType must be a string");if(!a.isString(r))throw TypeError("responseType must be a string");f.call(this,t,o),this.type=n||"rpc",this.requestType=i,this.requestStream=!!e||void 0,this.responseType=r,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=h}r.fromJSON=function(t,n){return new r(t,n.type,n.requestType,n.responseType,n.requestStream,n.responseStream,n.options,n.comment,n.parsedOptions)},r.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return a.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),f.prototype.resolve.call(this))}},function(t,n,i){"use strict";t.exports=function(t){var n=f.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&n("if((t&7)===4)")("break");n("switch(t>>>3){");for(var i=0;i<t.fieldsArray.length;++i){var r=t.k[i].resolve(),e=r.resolvedType instanceof u?"int32":r.type,s="m"+f.safeProp(r.name);n("case %i:",r.id),r.map?(n("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),void 0!==h.defaults[r.keyType]?n("k=%j",h.defaults[r.keyType]):n("k=null"),void 0!==h.defaults[e]?n("value=%j",h.defaults[e]):n("value=null"),n("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),void 0===h.basic[e]?n("value=types[%i].decode(r,r.uint32())",i):n("value=r.%s()",e),n("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==h.long[r.keyType]?n('%s[typeof k==="object"?util.longToHash(k):k]=value',s):n("%s[k]=value",s)):r.repeated?(n("if(!(%s&&%s.length))",s,s)("%s=[]",s),void 0!==h.packed[e]&&n("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,e)("}else"),void 0===h.basic[e]?n(r.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,i):n("%s.push(r.%s())",s,e)):void 0===h.basic[e]?n(r.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,i):n("%s=r.%s()",s,e),n("break")}for(n("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<t.k.length;++i){var o=t.k[i];o.required&&n("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+o.name+"'")}return n("return m")};var u=i(2),h=i(6),f=i(0)},function(t,n,i){"use strict";t.exports=function(t){var n=h.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i=t.oneofsArray,r={};i.length&&n("var p={}");for(var e=0;e<t.fieldsArray.length;++e){var s,o=t.k[e].resolve(),u="m"+h.safeProp(o.name);o.optional&&n("if(%s!=null&&m.hasOwnProperty(%j)){",u,o.name),o.map?(n("if(!util.isObject(%s))",u)("return%j",f(o,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),function(t,n,i){switch(n.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",i)("return%j",f(n,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",i)("return%j",f(n,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",i)("return%j",f(n,"boolean key"))}}(n,o,"k[i]"),a(n,o,e,u+"[k[i]]")("}")):o.repeated?(n("if(!Array.isArray(%s))",u)("return%j",f(o,"array"))("for(var i=0;i<%s.length;++i){",u),a(n,o,e,u+"[i]")("}")):(o.partOf&&(s=h.safeProp(o.partOf.name),1===r[o.partOf.name]&&n("if(p%s===1)",s)("return%j",o.partOf.name+": multiple values"),r[o.partOf.name]=1,n("p%s=1",s)),a(n,o,e,u)),o.optional&&n("}")}return n("return null")};var o=i(2),h=i(0);function f(t,n){return t.name+": "+n+(t.repeated&&"array"!==n?"[]":t.map&&"object"!==n?"{k:"+t.keyType+"}":"")+" expected"}function a(t,n,i,r){if(n.resolvedType)if(n.resolvedType instanceof o){t("switch(%s){",r)("default:")("return%j",f(n,"enum value"));for(var e=Object.keys(n.resolvedType.values),s=0;s<e.length;++s)t("case %i:",n.resolvedType.values[e[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",i,r)("if(e)")("return%j+e",n.name+".")("}");else switch(n.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",r)("return%j",f(n,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",f(n,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',r)("return%j",f(n,"number"));break;case"bool":t('if(typeof %s!=="boolean")',r)("return%j",f(n,"boolean"));break;case"string":t("if(!util.isString(%s))",r)("return%j",f(n,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",f(n,"buffer"))}return t}},function(t,n,i){"use strict";var n=n,l=i(2),v=i(0);function o(t,n,i,r){if(n.resolvedType)if(n.resolvedType instanceof l){t("switch(d%s){",r);for(var e=n.resolvedType.values,s=Object.keys(e),o=0;o<s.length;++o)n.repeated&&e[s[o]]===n.typeDefault&&t("default:"),t("case%j:",s[o])("case %i:",e[s[o]])("m%s=%j",r,e[s[o]])("break");t("}")}else t('if(typeof d%s!=="object")',r)("throw TypeError(%j)",n.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,i,r);else{var u=!1;switch(n.type){case"double":case"float":t("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",r,r);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,u)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,u?"true":"");break;case"bytes":t('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":t("m%s=String(d%s)",r,r);break;case"bool":t("m%s=Boolean(d%s)",r,r)}}return t}function d(t,n,i,r){if(n.resolvedType)n.resolvedType instanceof l?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,i,r,r):t("d%s=types[%i].toObject(m%s,o)",r,i,r);else{var e=!1;switch(n.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":e=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,e?"true":"",r);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:t("d%s=m%s",r,r)}}return t}n.fromObject=function(t){var n=t.fieldsArray,i=v.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!n.length)return i("return new this.ctor");i("var m=new this.ctor");for(var r=0;r<n.length;++r){var e=n[r].resolve(),s=v.safeProp(e.name);e.map?(i("if(d%s){",s)('if(typeof d%s!=="object")',s)("throw TypeError(%j)",e.fullName+": object expected")("m%s={}",s)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",s),o(i,e,r,s+"[ks[i]]")("}")("}")):e.repeated?(i("if(d%s){",s)("if(!Array.isArray(d%s))",s)("throw TypeError(%j)",e.fullName+": array expected")("m%s=[]",s)("for(var i=0;i<d%s.length;++i){",s),o(i,e,r,s+"[i]")("}")("}")):(e.resolvedType instanceof l||i("if(d%s!=null){",s),o(i,e,r,s),e.resolvedType instanceof l||i("}"))}return i("return m")},n.toObject=function(t){var n=t.fieldsArray.slice().sort(v.compareFieldsById);if(!n.length)return v.codegen()("return {}");for(var i=v.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],e=[],s=[],o=0;o<n.length;++o)n[o].partOf||(n[o].resolve().repeated?r:n[o].map?e:s).push(n[o]);if(r.length){for(i("if(o.arrays||o.defaults){"),o=0;o<r.length;++o)i("d%s=[]",v.safeProp(r[o].name));i("}")}if(e.length){for(i("if(o.objects||o.defaults){"),o=0;o<e.length;++o)i("d%s={}",v.safeProp(e[o].name));i("}")}if(s.length){for(i("if(o.defaults){"),o=0;o<s.length;++o){var u,h=s[o],f=v.safeProp(h.name);h.resolvedType instanceof l?i("d%s=o.enums===String?%j:%j",f,h.resolvedType.valuesById[h.typeDefault],h.typeDefault):h.long?i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,h.typeDefault.toString(),h.typeDefault.toNumber()):h.bytes?(u="["+Array.prototype.slice.call(h.typeDefault).join(",")+"]",i("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,h.typeDefault))("else{")("d%s=%s",f,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")):i("d%s=%j",f,h.typeDefault)}i("}")}for(var a=!1,o=0;o<n.length;++o){var h=n[o],c=t.k.indexOf(h),f=v.safeProp(h.name);h.map?(a||(a=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),d(i,h,c,f+"[ks2[j]]")("}")):h.repeated?(i("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),d(i,h,c,f+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",f,h.name),d(i,h,c,f),h.partOf&&i("if(o.oneofs)")("d%s=%j",v.safeProp(h.partOf.name),h.name)),i("}")}return i("return d")}},function(t,n,i){"use strict";var n=n,s=i(12);n[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var n=t["@type"].substring(t["@type"].lastIndexOf("/")+1),i=this.lookup(n);if(i){n="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:i.encode(i.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,n){var i,r="",e="";if(n&&n.json&&t.type_url&&t.value&&(e=t.type_url.substring(t.type_url.lastIndexOf("/")+1),r=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1),(i=this.lookup(e))&&(t=i.decode(t.value))),t instanceof this.ctor||!(t instanceof s))return this.toObject(t,n);n=t.$type.toObject(t,n),t="."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName;return n["@type"]=e=(r=""===r?"type.googleapis.com/":r)+t,n}}},function(t,n,i){"use strict";t.exports=h;var r=i(5);((h.prototype=Object.create(r.prototype)).constructor=h).className="Root";var e,v,d,s=i(4),o=i(2),u=i(7),y=i(0);function h(t){r.call(this,"",t),this.deferred=[],this.files=[]}function b(){}h.fromJSON=function(t,n){return n=n||new h,t.options&&n.setOptions(t.options),n.addJSON(t.nested)},h.prototype.resolvePath=y.path.resolve,h.prototype.fetch=y.fetch,h.prototype.load=function t(n,s,e){"function"==typeof s&&(e=s,s=void 0);var o=this;if(!e)return y.asPromise(t,o,n,s);var u=e===b;function h(t,n){if(e){var i=e;if(e=null,u)throw t;i(t,n)}}function f(t){var n=t.lastIndexOf("google/protobuf/");if(-1<n){n=t.substring(n);if(n in d)return n}return null}function a(t,n){try{if(y.isString(n)&&"{"===n.charAt(0)&&(n=JSON.parse(n)),y.isString(n)){v.filename=t;var i,r=v(n,o,s),e=0;if(r.imports)for(;e<r.imports.length;++e)(i=f(r.imports[e])||o.resolvePath(t,r.imports[e]))&&c(i);if(r.weakImports)for(e=0;e<r.weakImports.length;++e)(i=f(r.weakImports[e])||o.resolvePath(t,r.weakImports[e]))&&c(i,!0)}else o.setOptions(n.options).addJSON(n.nested)}catch(t){h(t)}u||l||h(null,o)}function c(i,r){if(!(-1<o.files.indexOf(i)))if(o.files.push(i),i in d)u?a(i,d[i]):(++l,setTimeout(function(){--l,a(i,d[i])}));else if(u){var t;try{t=y.fs.readFileSync(i).toString("utf8")}catch(t){return void(r||h(t))}a(i,t)}else++l,o.fetch(i,function(t,n){--l,e&&(t?r?l||h(null,o):h(t):a(i,n))})}var l=0;y.isString(n)&&(n=[n]);for(var i,r=0;r<n.length;++r)(i=o.resolvePath("",n[r]))&&c(i);if(u)return o;l||h(null,o)},h.prototype.loadSync=function(t,n){if(!y.isNode)throw Error("not supported");return this.load(t,n,b)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return r.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function a(t,n){var i=n.parent.lookup(n.extend);if(i){var r=new s(n.fullName,n.id,n.type,n.rule,void 0,n.options);return(r.declaringField=n).extensionField=r,i.add(r),1}}h.prototype.b=function(t){if(t instanceof s)void 0===t.extend||t.extensionField||a(0,t)||this.deferred.push(t);else if(t instanceof o)f.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof u)){if(t instanceof e)for(var n=0;n<this.deferred.length;)a(0,this.deferred[n])?this.deferred.splice(n,1):++n;for(var i=0;i<t.nestedArray.length;++i)this.b(t.O[i]);f.test(t.name)&&(t.parent[t.name]=t)}},h.prototype._=function(t){var n;if(t instanceof s)void 0!==t.extend&&(t.extensionField?(t.extensionField.parent.remove(t.extensionField),t.extensionField=null):-1<(n=this.deferred.indexOf(t))&&this.deferred.splice(n,1));else if(t instanceof o)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof r){for(var i=0;i<t.nestedArray.length;++i)this._(t.O[i]);f.test(t.name)&&delete t.parent[t.name]}},h.v=function(t,n,i){e=t,v=n,d=i}},function(t,n,i){"use strict";t.exports=i(29)},function(t,n,i){"use strict";!function(s){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=i(47),t=(i(48),function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.N=null,this.I=400,this.L=null,this.P=null,this.D=new Map}var n,i,r;return n=t,(i=[{key:"url",get:function(){return this.N}},{key:"status",get:function(){return this.I}},{key:"responseType",get:function(){return this.L},set:function(t){this.L=t}},{key:"response",get:function(){return this.P}},{key:"open",value:function(t,n){"GET"==t&&(this.N=n)}},{key:"addEventListener",value:function(t,n){var i=this.D.get(t);i||this.D.set(t,i=[]),i.push(n)}},{key:"send",value:function(){var n=this,t=this.N,i=o.createReadStream(t),r=[],e=0;this.P=null,i.on("readable",function(){var t=i.read();null!=t&&(r.push(t),e+=t.length,n.P?n.P=s.concat([n.P,new s(t)],e):n.P=new s(t))}),i.on("end",function(){n.I=200,n.F("load")}),i.on("error",function(t){n.I=400,n.F("error",t)})}}])&&e(n.prototype,i),r&&e(n,r),t}());Object.assign(t.prototype,{F:function(t,n){if(0!=this.D.size){var i=this.D.get(t);if(i)for(var r=0;r<i.length;r++)i[r]&&i[r](n)}}}),n.a=t}.call(this,i(43).Buffer)},function(t,n,i){"use strict";var r=t.exports=i(30);r.build="light",r.load=function(t,n,i){return(n="function"==typeof n?(i=n,new r.Root):n||new r.Root).load(t,i)},r.loadSync=function(t,n){return(n=n||new r.Root).loadSync(t)},r.encoder=i(17),r.decoder=i(22),r.verifier=i(23),r.converter=i(24),r.ReflectionObject=i(3),r.Namespace=i(5),r.Root=i(26),r.Enum=i(2),r.Type=i(18),r.Field=i(4),r.OneOf=i(7),r.MapField=i(19),r.Service=i(20),r.Method=i(21),r.Message=i(12),r.wrappers=i(25),r.types=i(6),r.util=i(0),r.ReflectionObject.v(r.Root),r.Namespace.v(r.Type,r.Service,r.Enum),r.Root.v(r.Type),r.Field.v(r.Type)},function(t,n,i){"use strict";var r=n;function e(){r.util.v(),r.Writer.v(r.BufferWriter),r.Reader.v(r.BufferReader)}r.build="minimal",r.Writer=i(9),r.BufferWriter=i(37),r.Reader=i(11),r.BufferReader=i(38),r.util=i(1),r.rpc=i(15),r.roots=i(16),r.configure=e,e()},function(t,n,i){"use strict";n.length=function(t){var n=t.length;if(!n)return 0;for(var i=0;1<--n%4&&"="===t.charAt(n);)++i;return Math.ceil(3*t.length)/4-i};for(var f=new Array(64),h=new Array(123),r=0;r<64;)h[f[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;n.encode=function(t,n,i){for(var r,e=null,s=[],o=0,u=0;n<i;){var h=t[n++];switch(u){case 0:s[o++]=f[h>>2],r=(3&h)<<4,u=1;break;case 1:s[o++]=f[r|h>>4],r=(15&h)<<2,u=2;break;case 2:s[o++]=f[r|h>>6],s[o++]=f[63&h],u=0}8191<o&&((e=e||[]).push(String.fromCharCode.apply(String,s)),o=0)}return u&&(s[o++]=f[r],s[o++]=61,1===u&&(s[o++]=61)),e?(o&&e.push(String.fromCharCode.apply(String,s.slice(0,o))),e.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var a="invalid encoding";n.decode=function(t,n,i){for(var r,e=i,s=0,o=0;o<t.length;){var u=t.charCodeAt(o++);if(61===u&&1<s)break;if(void 0===(u=h[u]))throw Error(a);switch(s){case 0:r=u,s=1;break;case 1:n[i++]=r<<2|(48&u)>>4,r=u,s=2;break;case 2:n[i++]=(15&r)<<4|(60&u)>>2,r=u,s=3;break;case 3:n[i++]=(3&r)<<6|u,s=0}}if(1===s)throw Error(a);return i-e},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,n,i){"use strict";function r(){this.D={}}(t.exports=r).prototype.on=function(t,n,i){return(this.D[t]||(this.D[t]=[])).push({fn:n,ctx:i||this}),this},r.prototype.off=function(t,n){if(void 0===t)this.D={};else if(void 0===n)this.D[t]=[];else for(var i=this.D[t],r=0;r<i.length;)i[r].fn===n?i.splice(r,1):++r;return this},r.prototype.emit=function(t){var n=this.D[t];if(n){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<n.length;)n[r].fn.apply(n[r++].ctx,i)}return this}},function(t,n,i){"use strict";function r(t){function n(t,n,i,r){var e=n<0?1:0;0===(n=e?-n:n)?t(0<1/n?0:2147483648,i,r):isNaN(n)?t(2143289344,i,r):t(34028234663852886e22<n?(e<<31|2139095040)>>>0:n<11754943508222875e-54?(e<<31|Math.round(n/1401298464324817e-60))>>>0:(e<<31|(e=Math.floor(Math.log(n)/Math.LN2))+127<<23|8388607&Math.round(n*Math.pow(2,-e)*8388608))>>>0,i,r)}function i(t,n,i){t=t(n,i),n=2*(t>>31)+1,i=t>>>23&255,t&=8388607;return 255==i?t?NaN:1/0*n:0==i?1401298464324817e-60*n*t:n*Math.pow(2,i-150)*(8388608+t)}function r(t,n,i){u[0]=t,n[i]=h[0],n[i+1]=h[1],n[i+2]=h[2],n[i+3]=h[3]}function e(t,n,i){u[0]=t,n[i]=h[3],n[i+1]=h[2],n[i+2]=h[1],n[i+3]=h[0]}function s(t,n){return h[0]=t[n],h[1]=t[n+1],h[2]=t[n+2],h[3]=t[n+3],u[0]}function o(t,n){return h[3]=t[n],h[2]=t[n+1],h[1]=t[n+2],h[0]=t[n+3],u[0]}var u,h,f,a,c;function l(t,n,i,r,e,s){var o,u,h=r<0?1:0;0===(r=h?-r:r)?(t(0,e,s+n),t(0<1/r?0:2147483648,e,s+i)):isNaN(r)?(t(0,e,s+n),t(2146959360,e,s+i)):17976931348623157e292<r?(t(0,e,s+n),t((h<<31|2146435072)>>>0,e,s+i)):r<22250738585072014e-324?(t((o=r/5e-324)>>>0,e,s+n),t((h<<31|o/4294967296)>>>0,e,s+i)):(1024===(u=Math.floor(Math.log(r)/Math.LN2))&&(u=1023),t(4503599627370496*(o=r*Math.pow(2,-u))>>>0,e,s+n),t((h<<31|u+1023<<20|1048576*o&1048575)>>>0,e,s+i))}function v(t,n,i,r,e){n=t(r,e+n),r=t(r,e+i),e=2*(r>>31)+1,i=r>>>20&2047,n=4294967296*(1048575&r)+n;return 2047==i?n?NaN:1/0*e:0==i?5e-324*e*n:e*Math.pow(2,i-1075)*(n+4503599627370496)}function d(t,n,i){f[0]=t,n[i]=a[0],n[i+1]=a[1],n[i+2]=a[2],n[i+3]=a[3],n[i+4]=a[4],n[i+5]=a[5],n[i+6]=a[6],n[i+7]=a[7]}function y(t,n,i){f[0]=t,n[i]=a[7],n[i+1]=a[6],n[i+2]=a[5],n[i+3]=a[4],n[i+4]=a[3],n[i+5]=a[2],n[i+6]=a[1],n[i+7]=a[0]}function b(t,n){return a[0]=t[n],a[1]=t[n+1],a[2]=t[n+2],a[3]=t[n+3],a[4]=t[n+4],a[5]=t[n+5],a[6]=t[n+6],a[7]=t[n+7],f[0]}function p(t,n){return a[7]=t[n],a[6]=t[n+1],a[5]=t[n+2],a[4]=t[n+3],a[3]=t[n+4],a[2]=t[n+5],a[1]=t[n+6],a[0]=t[n+7],f[0]}return"undefined"!=typeof Float32Array?(u=new Float32Array([-0]),h=new Uint8Array(u.buffer),c=128===h[3],t.writeFloatLE=c?r:e,t.writeFloatBE=c?e:r,t.readFloatLE=c?s:o,t.readFloatBE=c?o:s):(t.writeFloatLE=n.bind(null,w),t.writeFloatBE=n.bind(null,m),t.readFloatLE=i.bind(null,_),t.readFloatBE=i.bind(null,g)),"undefined"!=typeof Float64Array?(f=new Float64Array([-0]),a=new Uint8Array(f.buffer),c=128===a[7],t.writeDoubleLE=c?d:y,t.writeDoubleBE=c?y:d,t.readDoubleLE=c?b:p,t.readDoubleBE=c?p:b):(t.writeDoubleLE=l.bind(null,w,0,4),t.writeDoubleBE=l.bind(null,m,4,0),t.readDoubleLE=v.bind(null,_,0,4),t.readDoubleBE=v.bind(null,g,4,0)),t}function w(t,n,i){n[i]=255&t,n[i+1]=t>>>8&255,n[i+2]=t>>>16&255,n[i+3]=t>>>24}function m(t,n,i){n[i]=t>>>24,n[i+1]=t>>>16&255,n[i+2]=t>>>8&255,n[i+3]=255&t}function _(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]<<24)>>>0}function g(t,n){return(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0}t.exports=r(r)},function(t,n,i){"use strict";n.length=function(t){for(var n,i=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?i+=1:n<2048?i+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,i+=4):i+=3;return i},n.read=function(t,n,i){if(i-n<1)return"";for(var r,e=null,s=[],o=0;n<i;)(r=t[n++])<128?s[o++]=r:191<r&&r<224?s[o++]=(31&r)<<6|63&t[n++]:239<r&&r<365?(r=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,s[o++]=55296+(r>>10),s[o++]=56320+(1023&r)):s[o++]=(15&r)<<12|(63&t[n++])<<6|63&t[n++],8191<o&&((e=e||[]).push(String.fromCharCode.apply(String,s)),o=0);return e?(o&&e.push(String.fromCharCode.apply(String,s.slice(0,o))),e.join("")):String.fromCharCode.apply(String,s.slice(0,o))},n.write=function(t,n,i){for(var r,e,s=i,o=0;o<t.length;++o)(r=t.charCodeAt(o))<128?n[i++]=r:(r<2048?n[i++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(e=t.charCodeAt(o+1)))?(++o,n[i++]=(r=65536+((1023&r)<<10)+(1023&e))>>18|240,n[i++]=r>>12&63|128):n[i++]=r>>12|224,n[i++]=r>>6&63|128),n[i++]=63&r|128);return i-s}},function(t,n,i){"use strict";t.exports=function(n,i,t){var r=t||8192,e=r>>>1,s=null,o=r;return function(t){if(t<1||e<t)return n(t);r<o+t&&(s=n(r),o=0);t=i.call(s,o,o+=t);return 7&o&&(o=1+(7|o)),t}}},function(t,n,i){"use strict";t.exports=e;var r=i(1);function e(t,n){this.lo=t>>>0,this.hi=n>>>0}var s=e.zero=new e(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(t){if(0===t)return s;var n=t<0,i=(t=n?-t:t)>>>0,t=(t-i)/4294967296>>>0;return n&&(t=~t>>>0,i=~i>>>0,4294967295<++i&&(i=0,4294967295<++t&&(t=0))),new e(i,t)},e.from=function(t){if("number"==typeof t)return e.fromNumber(t);if(r.isString(t)){if(!r.Long)return e.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new e(t.low>>>0,t.high>>>0):s},e.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var n=1+~this.lo>>>0,t=~this.hi>>>0;return-(n+4294967296*(t=!n?t+1>>>0:t))}return this.lo+4294967296*this.hi},e.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var o=String.prototype.charCodeAt;e.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?s:new e((o.call(t,0)|o.call(t,1)<<8|o.call(t,2)<<16|o.call(t,3)<<24)>>>0,(o.call(t,4)|o.call(t,5)<<8|o.call(t,6)<<16|o.call(t,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},e.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},e.prototype.length=function(){var t=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==n?t<16384?t<128?1:2:t<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:i<128?9:10}},function(t,n,i){"use strict";t.exports=s;var r=i(9);(s.prototype=Object.create(r.prototype)).constructor=s;var e=i(1);function s(){r.call(this)}function o(t,n,i){t.length<40?e.utf8.write(t,n,i):n.utf8Write?n.utf8Write(t,i):n.write(t,i)}s.v=function(){s.alloc=e.h,s.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&"set"===e.Buffer.prototype.set.name?function(t,n,i){n.set(t,i)}:function(t,n,i){if(t.copy)t.copy(n,i,0,t.length);else for(var r=0;r<t.length;)n[i++]=t[r++]}},s.prototype.bytes=function(t){var n=(t=e.isString(t)?e.u(t,"base64"):t).length>>>0;return this.uint32(n),n&&this.j(s.writeBytesBuffer,n,t),this},s.prototype.string=function(t){var n=e.Buffer.byteLength(t);return this.uint32(n),n&&this.j(o,n,t),this},s.v()},function(t,n,i){"use strict";t.exports=s;var r=i(11);(s.prototype=Object.create(r.prototype)).constructor=s;var e=i(1);function s(t){r.call(this,t)}s.v=function(){e.Buffer&&(s.prototype.T=e.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s.v()},function(t,n,i){"use strict";t.exports=r;var u=i(1);function r(t,n,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(n),this.responseDelimited=Boolean(i)}((r.prototype=Object.create(u.EventEmitter.prototype)).constructor=r).prototype.rpcCall=function t(i,n,r,e,s){if(!e)throw TypeError("request must be specified");var o=this;if(!s)return u.asPromise(t,o,i,n,r,e);if(o.rpcImpl)try{return o.rpcImpl(i,n[o.requestDelimited?"encodeDelimited":"encode"](e).finish(),function(t,n){if(t)return o.emit("error",t,i),s(t);if(null!==n){if(!(n instanceof r))try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return o.emit("error",t,i),s(t)}return o.emit("data",n,i),s(null,n)}o.end(!0)})}catch(t){return o.emit("error",t,i),void setTimeout(function(){s(t)},0)}else setTimeout(function(){s(Error("already ended"))},0)},r.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,n,i){"use strict";function r(n,i){"string"==typeof n&&(i=n,n=void 0);var h=[];function f(t){if("string"!=typeof t){var n="return "+(n=a());if(t){for(var i=Object.keys(t),r=new Array(i.length+1),e=new Array(i.length),s=0;s<i.length;)r[s]=i[s],e[s]=t[i[s++]];return r[s]=n,Function.apply(null,r).apply(null,e)}return Function(n)()}for(var o=new Array(arguments.length-1),u=0;u<o.length;)o[u]=arguments[++u];if(u=0,t=t.replace(/%([%dfijs])/g,function(t,n){var i=o[u++];switch(n){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"}),u!==o.length)throw Error("parameter count mismatch");return h.push(t),f}function a(t){return"function "+(t||i||"")+"("+(n&&n.join(",")||"")+"){\n  "+h.join("\n  ")+"\n}"}return f.toString=a,f}(t.exports=r).verbose=!1},function(t,n,i){"use strict";t.exports=u;var s=i(13),o=i(14)("fs");function u(i,r,e){return r="function"==typeof r?(e=r,{}):r||{},e?!r.xhr&&o&&o.readFile?o.readFile(i,function(t,n){return t&&"undefined"!=typeof XMLHttpRequest?u.xhr(i,r,e):t?e(t):e(null,r.binary?n:n.toString("utf8"))}):u.xhr(i,r,e):s(u,this,i,r)}u.xhr=function(t,i,r){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){if(0!==e.status&&200!==e.status)return r(Error("status "+e.status));if(i.binary){if(!(t=e.response))for(var t=[],n=0;n<e.responseText.length;++n)t.push(255&e.responseText.charCodeAt(n));return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return r(null,e.responseText)}},i.binary&&("overrideMimeType"in e&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.responseType="arraybuffer"),e.open("GET",t),e.send()}},function(t,n,i){"use strict";var n=n,e=n.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},r=n.normalize=function(t){var n=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=e(t),t="";i&&(t=n.shift()+"/");for(var r=0;r<n.length;)".."===n[r]?0<r&&".."!==n[r-1]?n.splice(--r,2):i?n.splice(r,1):++r:"."===n[r]?n.splice(r,1):++r;return t+n.join("/")};n.resolve=function(t,n,i){return i||(n=r(n)),!e(n)&&(t=(t=!i?r(t):t).replace(/(?:\/|^)[^/]+$/,"")).length?r(t+"/"+n):n}},function(t,N,I){"use strict";!function(t){var u=I(44),s=I(45),o=I(46);function i(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t,n){if(i()<n)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n)).__proto__=c.prototype:(t=null===t?new c(n):t).length=n,t}function c(t,n,i){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,n,i);if("number"!=typeof t)return r(this,t,n,i);if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}function r(t,n,i,r){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer?function(t,n,i,r){if(n.byteLength,i<0||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r);c.TYPED_ARRAY_SUPPORT?(t=n).__proto__=c.prototype:t=a(t,n);return t}(t,n,i,r):"string"==typeof n?function(t,n,i){"string"==typeof i&&""!==i||(i="utf8");if(!c.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(n,i),i=(t=e(t,r)).write(n,i);i!==r&&(t=t.slice(0,i));return t}(t,n,i):function(t,n){if(c.isBuffer(n)){var i=0|l(n.length);return 0===(t=e(t,i)).length?t:(n.copy(t,0,0,i),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||function(t){return t!=t}(n.length)?e(t,0):a(t,n);if("Buffer"===n.type&&o(n.data))return a(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,n)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,n){if(h(n),t=e(t,n<0?0:0|l(n)),!c.TYPED_ARRAY_SUPPORT)for(var i=0;i<n;++i)t[i]=0;return t}function a(t,n){var i=n.length<0?0:0|l(n.length);t=e(t,i);for(var r=0;r<i;r+=1)t[r]=255&n[r];return t}function l(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(t,n){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var i=(t="string"!=typeof t?""+t:t).length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return R(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return A(t).length;default:if(r)return R(t).length;n=(""+n).toLowerCase(),r=!0}}function n(t,n,i){var r,e,s,o=!1;if((n=void 0===n||n<0?0:n)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(n>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,n,i){var r=t.length;(!n||n<0)&&(n=0);(!i||i<0||r<i)&&(i=r);for(var e="",s=n;s<i;++s)e+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[s]);return e}(this,n,i);case"utf8":case"utf-8":return m(this,n,i);case"ascii":return function(t,n,i){var r="";i=Math.min(t.length,i);for(var e=n;e<i;++e)r+=String.fromCharCode(127&t[e]);return r}(this,n,i);case"latin1":case"binary":return function(t,n,i){var r="";i=Math.min(t.length,i);for(var e=n;e<i;++e)r+=String.fromCharCode(t[e]);return r}(this,n,i);case"base64":return r=this,s=i,0===(e=n)&&s===r.length?u.fromByteArray(r):u.fromByteArray(r.slice(e,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,n,i){for(var r=t.slice(n,i),e="",s=0;s<r.length;s+=2)e+=String.fromCharCode(r[s]+256*r[s+1]);return e}(this,n,i);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function d(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function y(t,n,i,r,e){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,(i=(i=isNaN(i)?e?0:t.length-1:i)<0?t.length+i:i)>=t.length){if(e)return-1;i=t.length-1}else if(i<0){if(!e)return-1;i=0}if("string"==typeof n&&(n=c.from(n,r)),c.isBuffer(n))return 0===n.length?-1:b(t,n,i,r,e);if("number"==typeof n)return n&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(e?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,n,i):b(t,[n],i,r,e);throw new TypeError("val must be string, number or Buffer")}function b(t,n,i,r,e){var s=1,o=t.length,u=n.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||n.length<2)return-1;o/=s=2,u/=2,i/=2}function h(t,n){return 1===s?t[n]:t.readUInt16BE(n*s)}if(e)for(var f=-1,a=i;a<o;a++)if(h(t,a)===h(n,-1===f?0:a-f)){if(a-(f=-1===f?a:f)+1===u)return f*s}else-1!==f&&(a-=a-f),f=-1;else for(a=i=o<i+u?o-u:i;0<=a;a--){for(var c=!0,l=0;l<u;l++)if(h(t,a+l)!==h(n,l)){c=!1;break}if(c)return a}return-1}function p(t,n,i,r){return S(function(t){for(var n=[],i=0;i<t.length;++i)n.push(255&t.charCodeAt(i));return n}(n),t,i,r)}function w(t,n,i,r){return S(function(t,n){for(var i,r,e=[],s=0;s<t.length&&!((n-=2)<0);++s)r=t.charCodeAt(s),i=r>>8,r=r%256,e.push(r),e.push(i);return e}(n,t.length-i),t,i,r)}function m(t,n,i){i=Math.min(t.length,i);for(var r=[],e=n;e<i;){var s,o,u,h,f=t[e],a=null,c=239<f?4:223<f?3:191<f?2:1;if(e+c<=i)switch(c){case 1:f<128&&(a=f);break;case 2:128==(192&(s=t[e+1]))&&127<(h=(31&f)<<6|63&s)&&(a=h);break;case 3:s=t[e+1],o=t[e+2],128==(192&s)&&128==(192&o)&&2047<(h=(15&f)<<12|(63&s)<<6|63&o)&&(h<55296||57343<h)&&(a=h);break;case 4:s=t[e+1],o=t[e+2],u=t[e+3],128==(192&s)&&128==(192&o)&&128==(192&u)&&65535<(h=(15&f)<<18|(63&s)<<12|(63&o)<<6|63&u)&&h<1114112&&(a=h)}null===a?(a=65533,c=1):65535<a&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),e+=c}return function(t){var n=t.length;if(n<=_)return String.fromCharCode.apply(String,t);var i="",r=0;for(;r<n;)i+=String.fromCharCode.apply(String,t.slice(r,r+=_));return i}(r)}N.Buffer=c,N.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},N.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),N.kMaxLength=i(),c.poolSize=8192,c.C=function(t){return t.__proto__=c.prototype,t},c.from=function(t,n,i){return r(null,t,n,i)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,n,i){return r=null,n=n,i=i,h(t=t),!(t<=0)&&void 0!==n?"string"==typeof i?e(r,t).fill(n,i):e(r,t).fill(n):e(r,t);var r},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t.U)},c.compare=function(t,n){if(!c.isBuffer(t)||!c.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,e=0,s=Math.min(i,r);e<s;++e)if(t[e]!==n[e]){i=t[e],r=n[e];break}return i<r?-1:r<i?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,n){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);if(void 0===n)for(e=n=0;e<t.length;++e)n+=t[e].length;for(var i=c.allocUnsafe(n),r=0,e=0;e<t.length;++e){var s=t[e];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},c.byteLength=v,c.prototype.U=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)d(this,n,n+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)d(this,n,n+3),d(this,n+1,n+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)d(this,n,n+7),d(this,n+1,n+6),d(this,n+2,n+5),d(this,n+3,n+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?m(this,0,t):n.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=N.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,n,i,r,e){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===e&&(e=this.length),(n=void 0===n?0:n)<0||i>t.length||r<0||e>this.length)throw new RangeError("out of range index");if(e<=r&&i<=n)return 0;if(e<=r)return-1;if(i<=n)return 1;if(this===t)return 0;for(var s=(e>>>=0)-(r>>>=0),o=(i>>>=0)-(n>>>=0),u=Math.min(s,o),h=this.slice(r,e),f=t.slice(n,i),a=0;a<u;++a)if(h[a]!==f[a]){s=h[a],o=f[a];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,n,i){return-1!==this.indexOf(t,n,i)},c.prototype.indexOf=function(t,n,i){return y(this,t,n,i,!0)},c.prototype.lastIndexOf=function(t,n,i){return y(this,t,n,i,!1)},c.prototype.write=function(t,n,i,r){if(void 0===n)r="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)r=n,i=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var e=this.length-n;if((void 0===i||e<i)&&(i=e),0<t.length&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var s,o,u,h=!1;;)switch(r){case"hex":return function(t,n,i,r){i=Number(i)||0;var e=t.length-i;if((!r||e<(r=Number(r)))&&(r=e),(e=n.length)%2!=0)throw new TypeError("Invalid hex string");e/2<r&&(r=e/2);for(var s=0;s<r;++s){var o=parseInt(n.substr(2*s,2),16);if(isNaN(o))return s;t[i+s]=o}return s}(this,t,n,i);case"utf8":case"utf-8":return o=n,u=i,S(R(t,(s=this).length-o),s,o,u);case"ascii":return p(this,t,n,i);case"latin1":case"binary":return p(this,t,n,i);case"base64":return s=this,o=n,u=i,S(A(t),s,o,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,n,i);default:if(h)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.B||this,0)}};var _=4096;function g(t,n,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+n)throw new RangeError("Trying to access beyond buffer length")}function x(t,n,i,r,e,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e<n||n<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function O(t,n,i,r){n<0&&(n=65535+n+1);for(var e=0,s=Math.min(t.length-i,2);e<s;++e)t[i+e]=(n&255<<8*(r?e:1-e))>>>8*(r?e:1-e)}function E(t,n,i,r){n<0&&(n=4294967295+n+1);for(var e=0,s=Math.min(t.length-i,4);e<s;++e)t[i+e]=n>>>8*(r?e:3-e)&255}function j(t,n,i,r){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function T(t,n,i,r,e){return e||j(t,0,i,4),s.write(t,n,i,r,23,4),i+4}function k(t,n,i,r,e){return e||j(t,0,i,8),s.write(t,n,i,r,52,8),i+8}c.prototype.slice=function(t,n){var i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(n=void 0===n?i:~~n)<0?(n+=i)<0&&(n=0):i<n&&(n=i),n<t&&(n=t),c.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,n)).__proto__=c.prototype;else for(var r=n-t,e=new c(r,void 0),s=0;s<r;++s)e[s]=this[s+t];return e},c.prototype.readUIntLE=function(t,n,i){t|=0,n|=0,i||g(t,n,this.length);for(var r=this[t],e=1,s=0;++s<n&&(e*=256);)r+=this[t+s]*e;return r},c.prototype.readUIntBE=function(t,n,i){t|=0,n|=0,i||g(t,n,this.length);for(var r=this[t+--n],e=1;0<n&&(e*=256);)r+=this[t+--n]*e;return r},c.prototype.readUInt8=function(t,n){return n||g(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,n){return n||g(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,n){return n||g(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,n){return n||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,n){return n||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,n,i){t|=0,n|=0,i||g(t,n,this.length);for(var r=this[t],e=1,s=0;++s<n&&(e*=256);)r+=this[t+s]*e;return(e*=128)<=r&&(r-=Math.pow(2,8*n)),r},c.prototype.readIntBE=function(t,n,i){t|=0,n|=0,i||g(t,n,this.length);for(var r=n,e=1,s=this[t+--r];0<r&&(e*=256);)s+=this[t+--r]*e;return(e*=128)<=s&&(s-=Math.pow(2,8*n)),s},c.prototype.readInt8=function(t,n){return n||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,n){n||g(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt16BE=function(t,n){n||g(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt32LE=function(t,n){return n||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,n){return n||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,n){return n||g(t,4,this.length),s.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,n){return n||g(t,4,this.length),s.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,n){return n||g(t,8,this.length),s.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,n){return n||g(t,8,this.length),s.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,n,i,r){t=+t,n|=0,i|=0,r||x(this,t,n,i,Math.pow(2,8*i)-1,0);var e=1,s=0;for(this[n]=255&t;++s<i&&(e*=256);)this[n+s]=t/e&255;return n+i},c.prototype.writeUIntBE=function(t,n,i,r){t=+t,n|=0,i|=0,r||x(this,t,n,i,Math.pow(2,8*i)-1,0);var e=i-1,s=1;for(this[n+e]=255&t;0<=--e&&(s*=256);)this[n+e]=t/s&255;return n+i},c.prototype.writeUInt8=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},c.prototype.writeUInt16LE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):O(this,t,n,!0),n+2},c.prototype.writeUInt16BE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):O(this,t,n,!1),n+2},c.prototype.writeUInt32LE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):E(this,t,n,!0),n+4},c.prototype.writeUInt32BE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):E(this,t,n,!1),n+4},c.prototype.writeIntLE=function(t,n,i,r){t=+t,n|=0,r||x(this,t,n,i,(r=Math.pow(2,8*i-1))-1,-r);var e=0,s=1,o=0;for(this[n]=255&t;++e<i&&(s*=256);)t<0&&0===o&&0!==this[n+e-1]&&(o=1),this[n+e]=(t/s>>0)-o&255;return n+i},c.prototype.writeIntBE=function(t,n,i,r){t=+t,n|=0,r||x(this,t,n,i,(r=Math.pow(2,8*i-1))-1,-r);var e=i-1,s=1,o=0;for(this[n+e]=255&t;0<=--e&&(s*=256);)t<0&&0===o&&0!==this[n+e+1]&&(o=1),this[n+e]=(t/s>>0)-o&255;return n+i},c.prototype.writeInt8=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&(t=t<0?255+t+1:t),n+1},c.prototype.writeInt16LE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):O(this,t,n,!0),n+2},c.prototype.writeInt16BE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):O(this,t,n,!1),n+2},c.prototype.writeInt32LE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):E(this,t,n,!0),n+4},c.prototype.writeInt32BE=function(t,n,i){return t=+t,n|=0,i||x(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):E(this,t,n,!1),n+4},c.prototype.writeFloatLE=function(t,n,i){return T(this,t,n,!0,i)},c.prototype.writeFloatBE=function(t,n,i){return T(this,t,n,!1,i)},c.prototype.writeDoubleLE=function(t,n,i){return k(this,t,n,!0,i)},c.prototype.writeDoubleBE=function(t,n,i){return k(this,t,n,!1,i)},c.prototype.copy=function(t,n,i,r){if(i=i||0,r||0===r||(r=this.length),n>=t.length&&(n=t.length),(r=0<r&&r<i?i:r)===i)return 0;if(0===t.length||0===this.length)return 0;if((n=n||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var e,s=(r=t.length-n<r-i?t.length-n+i:r)-i;if(this===t&&i<n&&n<r)for(e=s-1;0<=e;--e)t[e+n]=this[e+i];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(e=0;e<s;++e)t[e+n]=this[e+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),n);return s},c.prototype.fill=function(t,n,i,r){if("string"==typeof t){var e;if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1!==t.length||(e=t.charCodeAt(0))<256&&(t=e),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(t=t||0))for(u=n;u<i;++u)this[u]=t;else for(var s=c.isBuffer(t)?t:R(new c(t,r).toString()),o=s.length,u=0;u<i-n;++u)this[u+n]=s[u%o];return this};var M=/[^+\/0-9A-Za-z-_]/g;function R(t,n){var i;n=n||1/0;for(var r=t.length,e=null,s=[],o=0;o<r;++o){if(55295<(i=t.charCodeAt(o))&&i<57344){if(!e){if(56319<i){-1<(n-=3)&&s.push(239,191,189);continue}if(o+1===r){-1<(n-=3)&&s.push(239,191,189);continue}e=i;continue}if(i<56320){-1<(n-=3)&&s.push(239,191,189),e=i;continue}i=65536+(e-55296<<10|i-56320)}else e&&-1<(n-=3)&&s.push(239,191,189);if(e=null,i<128){if(--n<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function A(t){return u.toByteArray(function(t){var n;if((t=((n=t).trim?n.trim():n.replace(/^\s+|\s+$/g,"")).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function S(t,n,i,r){for(var e=0;e<r&&!(e+i>=n.length||e>=t.length);++e)n[e+i]=t[e];return e}}.call(this,I(10))},function(t,n,i){"use strict";n.byteLength=function(t){var n=a(t),t=n[0],n=n[1];return 3*(t+n)/4-n},n.toByteArray=function(t){var n,i,r=a(t),e=r[0],r=r[1],s=new f(function(t,n){return 3*(t+n)/4-n}(e,r)),o=0,u=0<r?e-4:e;for(i=0;i<u;i+=4)n=h[t.charCodeAt(i)]<<18|h[t.charCodeAt(i+1)]<<12|h[t.charCodeAt(i+2)]<<6|h[t.charCodeAt(i+3)],s[o++]=n>>16&255,s[o++]=n>>8&255,s[o++]=255&n;2===r&&(n=h[t.charCodeAt(i)]<<2|h[t.charCodeAt(i+1)]>>4,s[o++]=255&n);1===r&&(n=h[t.charCodeAt(i)]<<10|h[t.charCodeAt(i+1)]<<4|h[t.charCodeAt(i+2)]>>2,s[o++]=n>>8&255,s[o++]=255&n);return s},n.fromByteArray=function(t){for(var n,i=t.length,r=i%3,e=[],s=0,o=i-r;s<o;s+=16383)e.push(function(t,n,i){for(var r,e=[],s=n;s<i;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),e.push(function(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}(r));return e.join("")}(t,s,o<s+16383?o:s+16383));1==r?(n=t[i-1],e.push(u[n>>2]+u[n<<4&63]+"==")):2==r&&(n=(t[i-2]<<8)+t[i-1],e.push(u[n>>10]+u[n>>4&63]+u[n<<2&63]+"="));return e.join("")};for(var u=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,s=r.length;e<s;++e)u[e]=r[e],h[r.charCodeAt(e)]=e;function a(t){var n=t.length;if(0<n%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("=");return[t=-1===t?n:t,t===n?0:4-t%4]}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(t,n){n.read=function(t,n,i,r,e){var s,o,u=8*e-r-1,h=(1<<u)-1,f=h>>1,a=-7,c=i?e-1:0,l=i?-1:1,i=t[n+c];for(c+=l,s=i&(1<<-a)-1,i>>=-a,a+=u;0<a;s=256*s+t[n+c],c+=l,a-=8);for(o=s&(1<<-a)-1,s>>=-a,a+=r;0<a;o=256*o+t[n+c],c+=l,a-=8);if(0===s)s=1-f;else{if(s===h)return o?NaN:1/0*(i?-1:1);o+=Math.pow(2,r),s-=f}return(i?-1:1)*o*Math.pow(2,s-r)},n.write=function(t,n,i,r,e,s){var o,u,h=8*s-e-1,f=(1<<h)-1,a=f>>1,c=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:s-1,v=r?1:-1,s=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,o=f):(o=Math.floor(Math.log(n)/Math.LN2),n*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(n+=1<=o+a?c/r:c*Math.pow(2,1-a))*r&&(o++,r/=2),f<=o+a?(u=0,o=f):1<=o+a?(u=(n*r-1)*Math.pow(2,e),o+=a):(u=n*Math.pow(2,a-1)*Math.pow(2,e),o=0));8<=e;t[i+l]=255&u,l+=v,u/=256,e-=8);for(o=o<<e|u,h+=e;0<h;t[i+l]=255&o,l+=v,o/=256,h-=8);t[i+l-v]|=128*s}},function(t,n){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,n){t.exports=__WEBPACK_EXTERNAL_MODULE__47__},function(t,f,n){!function(e){function s(t,n){for(var i=0,r=t.length-1;0<=r;r--){var e=t[r];"."===e?t.splice(r,1):".."===e?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(n)for(;i--;)t.unshift("..");return t}function o(t,n){if(t.filter)return t.filter(n);for(var i=[],r=0;r<t.length;r++)n(t[r],r,t)&&i.push(t[r]);return i}f.resolve=function(){for(var t="",n=!1,i=arguments.length-1;-1<=i&&!n;i--){var r=0<=i?arguments[i]:e.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,n="/"===r.charAt(0))}return(n?"/":"")+(t=s(o(t.split("/"),function(t){return!!t}),!n).join("/"))||"."},f.normalize=function(t){var n=f.isAbsolute(t),i="/"===r(t,-1);return(t=!(t=s(o(t.split("/"),function(t){return!!t}),!n).join("/"))&&!n?".":t)&&i&&(t+="/"),(n?"/":"")+t},f.isAbsolute=function(t){return"/"===t.charAt(0)},f.join=function(){var t=Array.prototype.slice.call(arguments,0);return f.normalize(o(t,function(t,n){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},f.relative=function(t,n){function i(t){for(var n=0;n<t.length&&""===t[n];n++);for(var i=t.length-1;0<=i&&""===t[i];i--);return i<n?[]:t.slice(n,i-n+1)}t=f.resolve(t).substr(1),n=f.resolve(n).substr(1);for(var r=i(t.split("/")),e=i(n.split("/")),s=Math.min(r.length,e.length),o=s,u=0;u<s;u++)if(r[u]!==e[u]){o=u;break}for(var h=[],u=o;u<r.length;u++)h.push("..");return(h=h.concat(e.slice(o))).join("/")},f.sep="/",f.delimiter=":",f.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var n=47===t.charCodeAt(0),i=-1,r=!0,e=t.length-1;1<=e;--e)if(47===t.charCodeAt(e)){if(!r){i=e;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},f.basename=function(t,n){t=function(t){"string"!=typeof t&&(t+="");for(var n=0,i=-1,r=!0,e=t.length-1;0<=e;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?"":t.slice(n,i)}(t);return t=n&&t.substr(-1*n.length)===n?t.substr(0,t.length-n.length):t},f.extname=function(t){"string"!=typeof t&&(t+="");for(var n=-1,i=0,r=-1,e=!0,s=0,o=t.length-1;0<=o;--o){var u=t.charCodeAt(o);if(47===u){if(e)continue;i=o+1;break}-1===r&&(e=!1,r=o+1),46===u?-1===n?n=o:1!==s&&(s=1):-1!==n&&(s=-1)}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===i+1?"":t.slice(n,r)};var r="b"==="ab".substr(-1)?function(t,n,i){return t.substr(n,i)}:function(t,n,i){return n<0&&(n=t.length+n),t.substr(n,i)}}.call(this,n(49))},function(t,n){var i,r,t=t.exports={};function e(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(n){if(i===setTimeout)return setTimeout(n,0);if((i===e||!i)&&setTimeout)return i=setTimeout,setTimeout(n,0);try{return i(n,0)}catch(t){try{return i.call(null,n,0)}catch(t){return i.call(this,n,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:e}catch(t){i=e}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,h=[],f=!1,a=-1;function c(){f&&u&&(f=!1,u.length?h=u.concat(h):a=-1,h.length&&l())}function l(){if(!f){var t=o(c);f=!0;for(var n=h.length;n;){for(u=h,h=[];++a<n;)u&&u[a].run();a=-1,n=h.length}u=null,f=!1,function(n){if(r===clearTimeout)return clearTimeout(n);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{r(n)}catch(t){try{return r.call(null,n)}catch(t){return r.call(this,n)}}}(t)}}function v(t,n){this.fun=t,this.array=n}function d(){}t.nextTick=function(t){var n=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];h.push(new v(t,n)),1!==h.length||f||o(l)},v.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,n,i){"use strict";i.r(n);var u="3.0.5",h=2942,r={NONE:0,EXTRUDE_MARKER:2,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25};Object.freeze(r);var e=r,s={MODULE_SHORTEST:1,MODULE_BEST:2},p={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},k={ROUTE_SUCCESS:1,ROUTE_FAILED_NO_FMDBDATA:2,ROUTE_FAILED_TOO_CLOSE:3,ROUTE_FAILED_NO_DATA_START:4,ROUTE_FAILED_NO_DATA_DEST:5,ROUTE_FAILED_NO_STAIR:6,ROUTE_FAILED_NOTSUPPORT:7,ROUTE_FAILED_CANNOT_CALCULATE:8,ROUTE_FAILED_CANNOT_ARRIVE:9,ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR:10,ROUTE_FAILED_NO_START_ARRIVAL:11,ROUTE_FAILED_NO_DEST_ARRIVAL:12,ROUTE_FAILED_OUTLINE:13,ROUTE_FAILED_NO_DOOR_START:14,ROUTE_FAILED_NO_DOOR_DEST:15},o={ZH:"zh",EN:"en"};var f=function t(n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.G=n,this.Z=i};Object.assign(f.prototype,{W:function(t){return!1},V:function(t,n){}});var a=f;function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,n){return(l=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function v(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=d(i);return function(t,n){{if(n&&("object"===c(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=d(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&l(t,n)}(r,a);var i=v(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),i.call(this,t,n)}return r}();Object.assign(y.prototype,{W:function(t){return this.Z==t.fid}});var b=y;function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,n){return(m=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=g(i);return function(t,n){{if(n&&("object"===w(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=g(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&m(t,n)}(r,a);var i=_(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),"object"==w((n=i.call(this,t,n)).Z)?(n.Y=n.Z.text,n.X=n.Z.fuzzy):n.Y=n.Z,n}return r}();Object.assign(x.prototype,{W:function(t){if(t.name){if(this.X&&-1!=t.name.indexOf(this.Y))return!0;if(this.Y==t.name)return!0}return!1}});var O=x;function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,n){return(j=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function T(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=M(i);return function(t,n){{if(n&&("object"===E(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=M(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&j(t,n)}(r,a);var i=T(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),"object"==E((n=i.call(this,t,n)).Z)?(n.Y=n.Z.text,n.X=n.Z.fuzzy):n.Y=n.Z,n}return r}();Object.assign(R.prototype,{W:function(t){if(t.ename){if(this.X&&-1!=t.ename.indexOf(this.Y))return!0;if(this.Y==t.ename)return!0}return!1}});var A=R;function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,n){return(N=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function I(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=L(i);return function(t,n){{if(n&&("object"===S(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=L(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&N(t,n)}(r,a);var i=I(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),(t=i.call(this,t)).Z=Array.isArray(n)?n:[n],t}return r}();Object.assign(P.prototype,{W:function(t){return-1!=this.Z.indexOf(t.type)}});var D=P;function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,n){return(C=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function U(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=B(i);return function(t,n){{if(n&&("object"===F(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=B(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&C(t,n)}(r,a);var i=U(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),"object"==F((n=i.call(this,t,n)).Z)?(n.Y=n.Z.text,n.X=void 0===n.Z.fuzzy||n.Z.fuzzy):(n.Y=n.Z,n.X=!0),n}return r}();Object.assign(G.prototype,{W:function(t){if(this.X){if(t.name&&-1!=t.name.indexOf(this.Y)||t.ename&&-1!=t.ename.indexOf(this.Y))return!0}else if(t.name&&t.name==this.Y||t.ename&&t.ename==this.Y)return!0;return!1}});var Z=G,W={NONE:0,POINT:1,LINE:2,POLYGON:4,MULTIPOINT:8,MULTILINE:16,MULTIPOLYGON:32,GROUP:64,EXTENT:1024,EXTERNALMODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,EXTENTGROUP:1<<20,EXTERNALMODELGROUP:1<<21,MODELGROUP:1<<22,FACILITYGROUP:1<<23,LABELGROUP:1<<24};Object.freeze(W);var V=W,Y=function(t,n,i){i=i||2;var r,e,s,o,u,h=n&&n.length,f=h?n[0]*i:t.length,a=X(t,0,f,i,!0),c=[];if(!a||a.next===a.prev)return c;if(h&&(a=function(t,n,i,r){var e,s,o,u,h=[];for(e=0,s=n.length;e<s;e++)o=n[e]*r,u=e<s-1?n[e+1]*r:t.length,(u=X(t,o,u,r,!1))===u.next&&(u.steiner=!0),h.push(function(t){var n=t,i=t;for(;(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next,n!==t;);return i}(u));for(h.sort(H),e=0;e<h.length;e++)!function(t,n){(n=function(t,n){var i,r=n,e=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var u=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=e&&o<u){if((o=u)===e){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}}while(r=r.next,r!==n);if(!i)return null;if(e===o)return i;var h,f=i,a=i.x,c=i.y,l=1/0;r=i;for(;e>=r.x&&r.x>=a&&e!==r.x&&J(s<c?e:o,s,a,c,s<c?o:e,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(e-r.x),rt(r,t)&&(h<l||h===l&&(r.x>i.x||r.x===i.x&&function(t,n){return $(t.prev,t,n.prev)<0&&$(n.next,t,t.next)<0}(i,r)))&&(i=r,l=h)),r=r.next,r!==f;);return i}(t,n))&&(t=et(n,t),q(n,n.next),q(t,t.next))}(h[e],i),i=q(i,i.next);return i}(t,n,a,i)),t.length>80*i){for(var l=r=t[0],v=e=t[1],d=i;d<f;d+=i)(s=t[d])<l&&(l=s),(o=t[d+1])<v&&(v=o),r<s&&(r=s),e<o&&(e=o);u=0!==(u=Math.max(r-l,e-v))?1/u:0}return z(a,c,i,l,v,u),c};function X(t,n,i,r,e){var s,o;if(e===0<function(t,n,i,r){for(var e=0,s=n,o=i-r;s<i;s+=r)e+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return e}(t,n,i,r))for(s=n;s<i;s+=r)o=st(s,t[s],t[s+1],o);else for(s=i-r;n<=s;s-=r)o=st(s,t[s],t[s+1],o);return o&&K(o,o.next)&&(ot(o),o=o.next),o}function q(t,n){if(!t)return t;n=n||t;var i,r=t;do{if(i=!1,r.steiner||!K(r,r.next)&&0!==$(r.prev,r,r.next))r=r.next;else{if(ot(r),(r=n=r.prev)===r.next)break;i=!0}}while(i||r!==n);return n}function z(t,n,i,r,e,s,o){if(t){!o&&s&&function(t,n,i,r){var e=t;for(;null===e.z&&(e.z=Q(e.x,e.y,n,i,r)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next,e!==t;);e.prevZ.nextZ=null,e.prevZ=null,function(t){var n,i,r,e,s,o,u,h,f=1;do{for(i=t,s=t=null,o=0;i;){for(o++,r=i,n=u=0;n<f&&(u++,r=r.nextZ);n++);for(h=f;0<u||0<h&&r;)0!==u&&(0===h||!r||i.z<=r.z)?(i=(e=i).nextZ,u--):(r=(e=r).nextZ,h--),s?s.nextZ=e:t=e,e.prevZ=s,s=e;i=r}}while(s.nextZ=null,f*=2,1<o)}(e)}(t,r,e,s);for(var u,h,f=t;t.prev!==t.next;)if(u=t.prev,h=t.next,s?function(t,n,i,r){var e=t.prev,s=t,o=t.next;if(0<=$(e,s,o))return!1;var u=(e.x<s.x?e.x<o.x?e:o:s.x<o.x?s:o).x,h=(e.y<s.y?e.y<o.y?e:o:s.y<o.y?s:o).y,f=(e.x>s.x?e.x>o.x?e:o:s.x>o.x?s:o).x,a=(e.y>s.y?e.y>o.y?e:o:s.y>o.y?s:o).y,c=Q(u,h,n,i,r),l=Q(f,a,n,i,r),v=t.prevZ,d=t.nextZ;for(;v&&v.z>=c&&d&&d.z<=l;){if(v!==t.prev&&v!==t.next&&J(e.x,e.y,s.x,s.y,o.x,o.y,v.x,v.y)&&0<=$(v.prev,v,v.next))return!1;if(v=v.prevZ,d!==t.prev&&d!==t.next&&J(e.x,e.y,s.x,s.y,o.x,o.y,d.x,d.y)&&0<=$(d.prev,d,d.next))return!1;d=d.nextZ}for(;v&&v.z>=c;){if(v!==t.prev&&v!==t.next&&J(e.x,e.y,s.x,s.y,o.x,o.y,v.x,v.y)&&0<=$(v.prev,v,v.next))return!1;v=v.prevZ}for(;d&&d.z<=l;){if(d!==t.prev&&d!==t.next&&J(e.x,e.y,s.x,s.y,o.x,o.y,d.x,d.y)&&0<=$(d.prev,d,d.next))return!1;d=d.nextZ}return!0}(t,r,e,s):function(t){var n=t.prev,i=t,r=t.next;if(0<=$(n,i,r))return!1;var e=t.next.next;for(;e!==t.prev;){if(J(n.x,n.y,i.x,i.y,r.x,r.y,e.x,e.y)&&0<=$(e.prev,e,e.next))return!1;e=e.next}return!0}(t))n.push(u.i/i),n.push(t.i/i),n.push(h.i/i),ot(t),t=h.next,f=h.next;else if((t=h)===f){o?1===o?z(t=function(t,n,i){var r=t;do{var e=r.prev,s=r.next.next}while(!K(e,s)&&tt(e,r,r.next,s)&&rt(e,s)&&rt(s,e)&&(n.push(e.i/i),n.push(r.i/i),n.push(s.i/i),ot(r),ot(r.next),r=t=s),r=r.next,r!==t);return q(r)}(q(t),n,i),n,i,r,e,s,2):2===o&&function(t,n,i,r,e,s){var o=t;do{for(var u=o.next.next;u!==o.prev;){if(o.i!==u.i&&function(t,n){return t.next.i!==n.i&&t.prev.i!==n.i&&!function(t,n){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==n.i&&i.next.i!==n.i&&tt(i,i.next,t,n))return!0}while(i=i.next,i!==t);return!1}(t,n)&&(rt(t,n)&&rt(n,t)&&function(t,n){var i=t,r=!1,e=(t.x+n.x)/2,s=(t.y+n.y)/2;for(;i.y>s!=i.next.y>s&&i.next.y!==i.y&&e<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next,i!==t;);return r}(t,n)&&($(t.prev,t,n.prev)||$(t,n.prev,n))||K(t,n)&&0<$(t.prev,t,t.next)&&0<$(n.prev,n,n.next))}(o,u)){var h=et(o,u);return o=q(o,o.next),h=q(h,h.next),z(o,n,i,r,e,s),z(h,n,i,r,e,s)}u=u.next}}while(o=o.next,o!==t)}(t,n,i,r,e,s):z(q(t),n,i,r,e,s,1);break}}}function H(t,n){return t.x-n.x}function Q(t,n,i,r,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*e)|t<<8))|t<<4))|t<<2))|t<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*e)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function J(t,n,i,r,e,s,o,u){return 0<=(e-o)*(n-u)-(t-o)*(s-u)&&0<=(t-o)*(r-u)-(i-o)*(n-u)&&0<=(i-o)*(s-u)-(e-o)*(r-u)}function $(t,n,i){return(n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y)}function K(t,n){return t.x===n.x&&t.y===n.y}function tt(t,n,i,r){var e=it($(t,n,i)),s=it($(t,n,r)),o=it($(i,r,t)),u=it($(i,r,n));return e!==s&&o!==u||(0===e&&nt(t,i,n)||(0===s&&nt(t,r,n)||(0===o&&nt(i,t,r)||!(0!==u||!nt(i,n,r)))))}function nt(t,n,i){return n.x<=Math.max(t.x,i.x)&&n.x>=Math.min(t.x,i.x)&&n.y<=Math.max(t.y,i.y)&&n.y>=Math.min(t.y,i.y)}function it(t){return 0<t?1:t<0?-1:0}function rt(t,n){return $(t.prev,t,t.next)<0?0<=$(t,n,t.next)&&0<=$(t,t.prev,n):$(t,n,t.prev)<0||$(t,t.next,n)<0}function et(t,n){var i=new ut(t.i,t.x,t.y),r=new ut(n.i,n.x,n.y),e=t.next,s=n.prev;return(t.next=n).prev=t,(i.next=e).prev=i,(r.next=i).prev=r,(s.next=r).prev=s,r}function st(t,n,i,r){i=new ut(t,n,i);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function ot(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ut(t,n,i){this.i=t,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ht(t){return function(t){if(Array.isArray(t))return ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return ft(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ft(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}var at={area:function(t){for(var n=t.length,i=0,r=n-1,e=0;e<n;r=e++)i+=t[r].x*t[e].y-t[e].x*t[r].y;return.5*i},isClockWise:function(t){return at.area(t)<0},triangulateShape:function(t,n){var i=[],r=[],e=[];ct(t),lt(i,t);var s=t.length;n.forEach(ct);for(var o=0;o<n.length;o++)r.push(s),s+=n[o].length,lt(i,n[o]);for(var u=Y(i,r),h=0;h<u.length;h+=3)e.push(u.slice(h,h+3));return e},triangulate:function(t){(e=[]).push.apply(e,ht(t[0]));for(var n=[],i=1;i<t.length;i++){var r=[];r.push.apply(r,ht(t[i])),n.push(r)}if(!at.isClockWise(e))for(var e=e.reverse(),s=0,o=n.length;s<o;s++){var u=n[s];at.isClockWise(u)&&(n[s]=u.reverse())}return at.triangulateShape(e,n)}};function ct(t){var n,i=t.length;2<i&&(n=t[i-1],i=t[0],n.x===i.x&&n.y===i.y)&&t.pop()}function lt(t,n){for(var i=0;i<n.length;i++)t.push(n[i].x),t.push(n[i].y)}var vt=1e-5,dt=Math.PI/180,yt=180/Math.PI,bt=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(bt.prototype,{H:function(){return vt},Q:function(){return dt},J:function(){return yt},$:function(t){return t<vt&&-vt<t},K:function(t){return vt<t},tt:function(t){return t<-vt},nt:function(t,n,i){return(t.x-i.x)*(n.y-i.y)-(n.x-i.x)*(t.y-i.y)},distanceOfTwoPoints:function(t,n){return t&&n?Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y)):Number.NaN},distance:function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},isPolygonContainPoint:function(t,n){for(var i=0,r=0;r<t.length;r++){var e=t[r].x,s=t[r].y,o=0,u=0,u=r<t.length-1?(o=t[r+1].x,t[r+1].y):(o=t[0].x,t[0].y);if(e===n.x&&s===n.y||o===n.x&&u===n.y)return!0;if(u!==s){var h=e+(n.y-s)*(o-e)/(u-s);if(h===n.x)return!0;e!==o?h<=Math.max(e,o)&&h>=Math.min(e,o)&&h>n.x&&h!==e&&(h===o&&0<(s-n.y)*(u-n.y)?i+=2:i++):h<=Math.max(e,o)&&h>=Math.min(e,o)&&h>n.x&&(h===o&&0<(s-n.y)*(u-n.y)?i+=2:i++)}}return 0<i%2},isRectCross:function(t,n,i,r){return!(Math.max(t.x,n.x)<Math.min(i.x,r.x))&&(!(Math.max(t.y,n.y)<Math.min(i.y,r.y))&&(!(Math.max(i.x,r.x)<Math.min(t.x,n.x))&&!(Math.max(i.y,r.y)<Math.min(t.y,n.y))))},it:function(t,n,i,r){return!(Math.max(t.x,n.x)<Math.min(i.x,r.x))&&(!(Math.max(t.y,n.y)<Math.min(i.y,r.y))&&(!(Math.max(i.x,r.x)<Math.min(t.x,n.x))&&(!(Math.max(i.y,r.y)<Math.min(t.y,n.y))&&(!(this.nt(i,n,t)*this.nt(n,r,t)<0)&&!(this.nt(t,r,i)*this.nt(r,n,i)<0)))))},rt:function(t,n,i){return!(t.x<n.x)&&(!(t.y<n.y)&&(!(t.x>i.x)&&!(t.y>i.y)))},et:function(t,n,i){var r=Math.min(i.x,n.x),e=Math.max(i.x,n.x),s=Math.min(i.y,n.y),n=Math.max(i.y,n.y);return!(t.x<r||t.x>e||t.y<s||t.y>n)},st:function(t,n,i){for(var r,e,s=!1,o=0;o<i;o++)r=n[o],e=n[(o+1)%i],(r.y<t.y&&e.y>=t.y||e.y<t.y&&r.y>=t.y)&&(r.x<=t.x||e.x<=t.x)&&r.x+(t.y-r.y)/(e.y-r.y)*(e.x-r.x)<t.x&&(s=!s);return s},ot:function(t,n,i){return(t.x-n.x)*(i.y-n.y)==(i.x-n.x)*(t.y-n.y)&&Math.min(n.x,i.x)<=t.x&&t.x<=Math.max(n.x,i.x)&&Math.min(n.y,i.y)<=t.y&&t.y<=Math.max(n.y,i.y)},ut:function(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))},ht:function(t,n){return(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y)},ft:function(t,n,i){var r=n.x,e=n.y,s=i.x,o=i.y,u=t.x,h=t.y,f=s-r,a=o-e,c=f*f+a*a,n=u-r,i=h-e,t=n*n+i*i;if(this.$(c))return this.$(t)?0:t;c=Math.sqrt(c),f/=c,a/=c,i=f*n+a*i;if(!this.K(i))return t;if(!this.tt(i-c)){s=u-s,o=h-o;return s*s+o*o}f=u-(r+i*f),a=h-(e+i*a);return f*f+a*a},at:function(t,n,i,r){var e=n.x,s=n.y,o=i.x,u=i.y,h=t.x,f=t.y,a=o-e,c=u-s,l=Math.sqrt(a*a+c*c),v=h-e,d=f-s,t=Math.sqrt(v*v+d*d);if(this.$(l))return r.x=n.x,r.y=n.y,this.$(t)?0:t;a/=l,c/=l,d=a*v+c*d;if(!this.K(d))return r.x=n.x,r.y=n.y,t;if(!this.tt(d-l)){o=h-o,u=f-u,u=Math.sqrt(o*o+u*u);return r.x=i.x,r.y=i.y,u}a=e+d*a,c=s+d*c,h-=a,f-=c,f=Math.sqrt(h*h+f*f);return r.x=a,r.y=c,f},ct:function(t,n){for(var i=0,r=0,e=0,s=0;s<n;s++){var o=t[s],u=t[(s+1)%n],h=(o.x*u.y-o.y*u.x)/2;i+=h,r+=h*(o.x+u.x)/3,e+=h*(o.y+u.y)/3}return{x:r/=i,y:e/=i}},lt:function(t){for(var n=at.triangulate([t]),i=0,r=0,e=0,s=0;s<n.length;s++){var o=t[n[s][0]],u=t[n[s][1]],h=t[n[s][2]],f=u.x-o.x,a=u.y-o.y,c=h.x-o.x,a=(f*(h.y-o.y)-c*a)/2;i+=a,r+=(o.x+u.x+h.x)/3*a,e+=(o.y+u.y+h.y)/3*a}return{x:r/i,y:e/i}},vt:function(t,n){if(n<3)return 0;for(var i=0,r=0;r<n;++r){var e=t[r],s=t[(r+1)%n];i+=e.x*s.y-e.y*s.x}return Math.abs(i/2)},dt:function(t,n,i,r,e){if(this.it(t,n,i,r)){var s=(r.x-i.x)*(t.y-n.y)-(n.x-t.x)*(i.y-r.y),o=(t.y-i.y)*(n.x-t.x)*(r.x-i.x)+i.x*(r.y-i.y)*(n.x-t.x)-t.x*(n.y-t.y)*(r.x-i.x);return e.x=o/s,s=(t.x-n.x)*(r.y-i.y)-(n.y-t.y)*(i.x-r.x),o=n.y*(t.x-n.x)*(r.y-i.y)+(r.x-n.x)*(r.y-i.y)*(t.y-n.y)-r.y*(i.x-r.x)*(n.y-t.y),e.y=o/s,1}return 0},yt:function(t,n,i,r,e){var s=Math.min(i.x,r.x),o=Math.max(i.x,r.x),u=Math.min(i.y,r.y),h=Math.max(i.y,r.y),f=t.x,a=t.y,c=i.x,l=i.y,v=r.x,d=r.y;if(90==n){if(t.x<s||t.x>o)return!1;var y=(d-l)/(v-c)*(f-c)+l;return e.y=y,e.x=f,y<a?!1:!!this.et(e,i,r)}if(270==n){if(t.x<s||t.x>o)return!1;t=(d-l)/(v-c)*(f-c)+l;return e.y=t,e.x=f,a<t?!1:!!this.et(e,i,r)}if(270!=n&&90!=n&&o-s<.001){o=s,s=Math.tan(n/180*Math.PI)*(o-f)+a;if(e.y=s,e.x=o,this.et(e,i,r)){o=o-f,s=s-a;return 0<o/Math.sqrt(o*o+s*s)*Math.cos(n/180*Math.PI)}}if(h-u<=1e-6){h=u,u=1/Math.tan(n/180*Math.PI)*(h-a)+f;if(e.x=u,e.y=h,this.et(e,i,r)){var u=u-f,b=h-a;return 0<u/Math.sqrt(u*u+b*b)*Math.cos(n/180*Math.PI)}return!1}b=Math.tan(n/180*Math.PI),v=(d-l)/(v-c),v=(l-a-(v*c-b*f))/(b-v),b=a+b*(v-f);if(e.x=v,e.y=b,this.et(e,i,r)){f=v-f,a=b-a;return 0<f/Math.sqrt(f*f+a*a)*Math.cos(n/180*Math.PI)}return!1},bt:function(t,n,i,r){var e=Math.min(n.x,i.x),s=Math.max(n.x,i.x),o=Math.min(n.y,i.y),u=Math.max(n.y,i.y),h=t.x,f=t.y,a=n.x,c=n.y,l=i.x,t=i.y;if(Math.abs(a-l)<1e-5)return r.x=a,o<=(r.y=f)&&f<=u;if(Math.abs(c-t)<1e-5)return r.x=h,r.y=c,e<=h&&h<=s;s=-1/((t-c)/(l-a)),l=(t-c)/(l-a),l=(c-f-(l*a-s*h))/(s-l),h=f+s*(l-h);return r.x=l,r.y=h,!!this.et(r,n,i)},pt:function(t,n){return{x:t.y*n.z-t.z*n.y,y:t.z*n.x-t.x*n.z,z:t.x*n.y-t.y*n.x}},wt:function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},mt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},_t:function(t,n){return t.x*n.x+t.y*n.y},gt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},xt:function(t,n){if(0==t.x&&0==t.y||0==n.x&&0==n.y)return 0;var i={x:t.x,y:t.y,z:0},r={x:n.x,y:n.y,z:0},i=this.pt(i,r),r=this._t(t,n),n=Math.acos(r/(this.gt(t)*this.gt(n)));return 0<i.z?n/Math.PI*180:360-n/Math.PI*180}});var pt=new bt;function wt(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mt=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.Ot={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.Et={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var n,i,r;return n=t,(i=[{key:"min",get:function(){return this.Ot}},{key:"max",get:function(){return this.Et}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.jt()&&(t.x=(this.Ot.x+this.Et.x)/2,t.y=(this.Ot.y+this.Et.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.jt()&&(t.x=this.Et.x-this.Ot.x,t.y=this.Et.y-this.Ot.y),t}},{key:"toObject",value:function(){return{min:this.Ot,max:this.Et,center:this.center,size:this.size}}}])&&wt(n.prototype,i),r&&wt(n,r),t}();Object.assign(mt.prototype,{jt:function(){return!(this.Ot.x>this.Et.x||this.Ot.y>this.Et.y)},Tt:function(t){t&&t.jt()&&(t.Ot.x<this.Ot.x&&(this.Ot.x=t.Ot.x),t.Ot.y<this.Ot.y&&(this.Ot.y=t.Ot.y),t.Et.x>this.Et.x&&(this.Et.x=t.Et.x),t.Et.y>this.Et.y&&(this.Et.y=t.Et.y))},kt:function(t){var n=this;t&&0!=t.length&&t.forEach(function(t){t.x<n.Ot.x&&(n.Ot.x=t.x),t.y<n.Ot.y&&(n.Ot.y=t.y),t.x>n.Et.x&&(n.Et.x=t.x),t.y>n.Et.y&&(n.Et.y=t.y)})}});var _t=mt;function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,n){return(xt=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Ot(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=Et(i);return function(t,n){{if(n&&("object"===gt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=Et(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jt=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&xt(t,n)}(r,a);var i=Ot(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),(n=i.call(this,t,n)).Mt=n.Z.center,n.Rt=n.Z.radius,n.At=n.Z.radius*n.Z.radius,n.St=new _t,n.St.kt([{x:n.Mt.x-n.Rt,y:n.Mt.y-n.Rt},{x:n.Mt.x+n.Rt,y:n.Mt.y+n.Rt}]),n}return r}();Object.assign(jt.prototype,{W:function(t){return t.getType()!=V.MODEL?this.Nt(t):this.It(t)},It:function(t){var n=t.getBound();if(!pt.isRectCross(this.St.Ot,this.St.Et,n.min,n.max))return!1;for(var i=t.getCoordinates(),r=0,e=i.length;r<e;r++)for(var s=1,o=i[r].length;s<o;s++){var u=i[r][s];if(pt.ht(u,this.Mt)<this.At)return!0;var h=i[r][s-1];if(1==s&&pt.ht(h,this.Mt)<this.At)return!0;if(pt.ft(this.Mt,h,u)<this.At)return!0}return!1},Nt:function(t){t=t.getCoordinates()[0];return!!pt.rt(t,this.St.Ot,this.St.Et)&&pt.ht(t,this.Mt)<this.At},V:function(t,n){var i=t.getCoordinates();if(t.getType()==V.MODEL){for(var r=Number.MAX_VALUE,e=0,s=i.length;e<s;e++)for(var o=1,u=i[e].length;o<u;o++){var h=i[e][o-1],f=i[e][o],f=pt.ft(this.Mt,h,f);f<r&&(r=f)}n.ut=Math.sqrt(r)}else n.ut=Math.sqrt(pt.ht(i[0],this.Mt))}});var Tt=jt;function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,n){return(Mt=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Rt(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=At(i);return function(t,n){{if(n&&("object"===kt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=At(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var St=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Mt(t,n)}(r,a);var i=Rt(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),(n=i.call(this,t,n)).Lt=n.Z,n.Pt=n.Lt.length-1,n.Mt=pt.lt(n.Lt),n.St=new _t,n.St.kt(n.Lt),n}return r}();Object.assign(St.prototype,{W:function(t){return t.getType()!=V.MODEL?this.Nt(t):this.It(t)},It:function(t){var n=t.getBound();if(!pt.isRectCross(this.St.Ot,this.St.Et,n.min,n.max))return!1;for(var i=t.getCoordinates(),r=0,e=i.length;r<e;r++)for(var s=0,o=i[r].length-1;s<o;s++)if(pt.st(i[r][s],this.Lt,this.Pt))return!0;for(var u=0;u<this.Pt;u++){for(var h=!1,f=0,a=i.length;f<a;f++)pt.st(this.Lt[u],i[f],i[f].length-1)&&(h=0==f);if(h)return!0}for(var c=0;c<this.Pt;c++)for(var l=this.Lt[c],v=this.Lt[c+1],d=0,y=i.length;d<y;d++)for(var b=0,p=i[d].length-1;b<p;b++){var w=i[d][b],m=i[d][b+1];if(pt.it(l,v,w,m))return!0}return!1},Nt:function(t){t=t.getCoordinates()[0];return!!pt.rt(t,this.St.Ot,this.St.Et)&&pt.st(t,this.Lt)},V:function(t,n){var i=t.getCoordinates();if(t.getType()==V.MODEL){for(var r=Number.MAX_VALUE,e=0,s=i.length;e<s;e++)for(var o=1,u=i[e].length;o<u;o++){var h=i[e][o-1],f=i[e][o],f=pt.ft(this.Mt,h,f);f<r&&(r=f)}n.ut=Math.sqrt(r)}else n.ut=Math.sqrt(pt.ht(i[0],this.Mt))}});var Nt=St;function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,n){return(Lt=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Pt(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=Dt(i);return function(t,n){{if(n&&("object"===It(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=Dt(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ft=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Lt(t,n)}(r,a);var i=Pt(r);function r(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),i.call(this,t,n)}return r}();Object.assign(Ft.prototype,{W:function(t){return!1}});var Ct=Ft;function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Gt=new(function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,r;return n=t,(i=[{key:"create",value:function(t){if(!t||"object"!=Ut(t))return null;var n,i=[];for(n in t)switch(n){case"FID":i.push(new b(n,t[n]));break;case"name":i.push(new O(n,t[n]));break;case"ename":i.push(new A(n,t[n]));break;case"keyword":i.push(new Z(n,t[n]));break;case"typeID":i.push(new D(n,t[n]));break;case"circle":i.push(new Tt(n,t[n]));break;case"polygon":i.push(new Nt(n,t[n]));break;case"buffer":i.push(new Ct(n,t[n]))}return i}}])&&Bt(n.prototype,i),r&&Bt(n,r),t}());function Zt(t){return function(t){if(Array.isArray(t))return Wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return Wt(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Wt(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function Vt(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Yt=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.Dt=null,this.Ft=e.MODEL,this.Ct=[],this.Ut=[]}var n,i,r;return n=t,(i=[{key:"levels",get:function(){return this.Dt},set:function(t){this.Dt=t}},{key:"type",get:function(){return this.Ft},set:function(t){this.Ft=t}},{key:"addCondition",value:function(t){var n,i=Gt.create(t);(n=this.Ut).push.apply(n,Zt(i)),this.Ct.push(t)}}])&&Vt(n.prototype,i),r&&Vt(n,r),t}();function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(n,t){var i,r=Object.keys(n);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function zt(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(e),!0).forEach(function(t){var n,i;n=r,t=e[i=t],i in n?Object.defineProperty(n,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[i]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):qt(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}var Ht=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.Bt=zt({data:null,method:"GET",responseType:"json"},n)};Object.assign(Ht.prototype,{Gt:function(t,n,i){var r=this.Bt,e=r.data,s=r.method,o=r.url,u=r.responseType,h=r.header,f=new("undefined"!=typeof XMLHttpRequest?XMLHttpRequest:fengmap.XMLHttpRequest);if(f.responseType=u,f.open(s,o),"object"==Xt(h))for(var a in h)f.setRequestHeader(a,h[a]);f.addEventListener("load",function(){200===f.status||0===f.status||201===f.status?t&&t(f.response):n&&n(f.response)}),f.addEventListener("timeout",function(t){i&&i(t)}),f.addEventListener("error",function(t){n&&n(t)}),f.send(JSON.stringify(e))}});var Qt,Jt=Ht,$t=i(27),Kt=i.n($t),tn=["UG9seWdvbkxhYg==","bGlk","ZWxCaXpJbmZv","ZG91Ymxl","bGlua1NlZw==","dmFsdWVz","UE9JQml6SW5mbw==","aXNTZWxlY3RhYg==","bWluWA==","R0VPUE9MWUdPTg==","bmF2aVNlZ21lbg==","TmF2aU1vZGVs","TWFw","bGF5ZXJz","bWlk","U3RhaXJCaXpJbg==","QVZJTk9ERQ==","bGFiZWxMYXllcg==","c25vZGU=","VHlwZQ==","bmF2aU5vZGVz","QnVmZmVy","cnVsZQ==","ZGF0YQ==","ZW50cmFuY2VGbA==","bmF2aVpvbmVz","Zmlk","YWxpYXM=","bmFtZQ==","ZmllbGRz","Ynl0ZXM=","ZW50cnk=","ZGVmR2lk","aW50MzI=","cG9pTGF5ZXI=","ZGF0ZVZlcg==","YnR5cGU=","Rmxvb3JDb25maQ==","Z2Vv","ZmxhZw==","QU5PUkFNQQ==","LnByb3RvYnVm","UkFTVEVSQVRB","ZGVmQ2VuWA==","cmVxdWlyZWQ=","bmZv","bW9kZWxMYXllcg==","bGlmdEVudHJ5","bGVu","cmFuaw==","YXllcg==","Zmxvb3JJZA==","R0VPUE9JTlQ=","YXJlYQ==","YnVmZmVycw==","T0RFTA==","ZmxvYXQ=","bm9kZVR5cGU=","bWluWQ==","cG9seWdvbkxhYg==","bW9kZWxpZA==","X0xBQkVM","X0VYVEVOVA==","b3B0aW9ucw==","R2VuZXJhbEdlbw==","aXNWaXNpYmxl","ZmlsZURhdGU=","TmF2aU5vZGU=","c3RyaW5n","ZW50cnl0eXBlcw==","ZmlsZVZlcg==","TGFiZWxCaXpJbg==","SW5kZXhJbmZv","bGlmdFR5cGU=","RXh0ZXJuYWxNbw==","cGFja2Vk","ZGVmYXVsdA==","c3RhaXJMYXllcg==","bW5hbWU=","dWludDY0","RXh0ZW50Qml6SQ==","bWF4bGV2ZWw=","bmVzdGVk","SW5mbw==","c2NhbGU=","cmVwZWF0ZWQ=","aGVpZ2h0","TGlmdEJpekluZg==","Ym9vbA==","a2V5","ZW5vZGU=","ZGVzYw==","ZGVsQml6SW5mbw==","bGVuZ3Ro","R0VPUE9JTlRfRQ==","cHJvdG9idWY=","ZGVsTGF5ZXI=","dHlwZQ==","dmVs","c2VnbWVudElk","aWR4cw==","aGFzaENvZGU=","U2NlbmU=","c2NhbGVMZXZlbA==","R0VPTElORQ==","d2lkdGg=","Rmxvb3JCaXo=","cm90YXRlQW5nbA==","ZGVmQ2VuWQ==","bGlmdEZsYWc=","R0VPUE9JTlRfUw==","bGlmdExheWVy","ZW5hbWU=","Rmxvb3JHZW8=","TmF2aVNlZ21lbg==","SUZU","ZWxMYXllcg==","VklTRUdNRU5U","X2NsYXNzbmFtZQ==","TmF2aVpvbmU=","ZWlk","cHRz","UG9seWdvbkJpeg==","Z2lk"];Qt=tn,function(t){for(;--t;)Qt.push(Qt.shift())}(326);function nn(t,n){var i=tn[t=+t];void 0===nn.cTFvol&&(function(){try{var n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}n.atob||(n.atob=function(t){for(var n,i,r=String(t).replace(/=+$/,""),e="",s=0,o=0;i=r.charAt(o++);~i&&(n=s%4?64*n+i:i,s++%4)&&(e+=String.fromCharCode(255&n>>(-2*s&6))))i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return e})}(),nn.uxrRhm=function(t){for(var n=atob(t),i=[],r=0,e=n.length;r<e;r++)i+="%"+("00"+n.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(i)},nn.Yrhnbl={},nn.cTFvol=!0);var r=nn.Yrhnbl[t];return void 0===r?(i=nn.uxrRhm(i),nn.Yrhnbl[t]=i):i=r,i}var rn={};rn.java_package="com.fengmap.platform"+nn("0x58"),rn["java_outer"+nn("0x29")]=nn("0x54")+"gProtoBuf";var en={};en[nn("0x45")]="required",en.type=nn("0x73"),en.id=1;var sn={rule:"required"};sn[nn("0x14")]=nn("0x50"),sn.id=2;var on={rule:"required"};on[nn("0x14")]="uint64",on.id=3;var un={};un.rule=nn("0x5b"),un[nn("0x14")]=nn("0x73"),un.id=4;var hn={};hn.rule=nn("0x5b"),hn[nn("0x14")]=nn("0x73"),hn.id=5;var fn={};fn.type=nn("0x73"),fn.id=6;var an={};an.type=nn("0x73"),an.id=7;var cn={};cn[nn("0x14")]="string";var ln={default:!(cn.id=8)},vn={};vn[nn("0x14")]="bool",vn.id=9,vn.options=ln;var dn={rule:"repeated"};dn[nn("0x14")]=nn("0x44"),dn.id=10;var yn={};yn[nn("0x45")]=nn("0x8"),yn[nn("0x14")]=nn("0x73"),yn.id=11;var bn={};bn.mid=en,bn[nn("0x75")]=sn,bn[nn("0x52")]=on,bn.mname=un,bn[nn("0x18")]=hn,bn.key=fn,bn[nn("0x71")]=an,bn.desc=cn,bn.readOnly=vn,bn[nn("0x65")]=dn,bn.keys=yn;r={};r[nn("0x45")]=nn("0x5b"),r[nn("0x14")]=nn("0x50"),r.id=1;f={};f[nn("0x45")]="required",f[nn("0x14")]=nn("0x50"),f.id=2;y={};y[nn("0x45")]="required",y[nn("0x14")]="int32",y.id=3;x={};x.rule=nn("0x5b"),x[nn("0x14")]=nn("0x2"),x.id=4;R={rule:"required"};R.type=nn("0x4d"),R.id=5;P={};P.gid=r,P.fileVer=f,P[nn("0x53")]=y,P[nn("0x5f")]=x,P[nn("0x46")]=R;G={};G[nn("0x4c")]=P;W={};W.Buffer=G;bt={};bt[nn("0x4c")]=bn,bt.nested=W;mt={};mt[nn("0x45")]="required",mt.type=nn("0x73"),mt.id=19;jt={};jt.rule=nn("0x5b"),jt.type="int32",jt.id=20;St={};St[nn("0x45")]=nn("0x5b"),St.type=nn("0x2"),St.id=21;Ft={};Ft[nn("0x45")]="required",Ft.type=nn("0x73"),Ft.id=22;Ht={};Ht[nn("0x45")]="required",Ht.type="string",Ht.id=23;$t={};$t[nn("0x14")]="string",$t.id=24;ln={};ln.type=nn("0x73"),ln.id=25;en={};en[nn("0x7b")]=!1;sn={type:"bool",id:26};sn[nn("0x6e")]=en;on={};on[nn("0x14")]=nn("0x67"),on.id=1;un={type:"float",id:2},hn={};hn.type=nn("0x67"),hn.id=3;fn={};fn[nn("0x14")]=nn("0x67"),fn.id=4;an={type:"float",id:5},cn={type:"float",id:6},vn={type:"float",id:7},dn={};dn[nn("0x14")]=nn("0x73"),dn.id=8;yn={};yn[nn("0x14")]=nn("0x67"),yn.id=9;r={type:"float",id:10},f={};f[nn("0x14")]=nn("0x67"),f.id=11;y={};y[nn("0x14")]="float",y.id=12;x={};x[nn("0x14")]="float",x.id=13;R={};R[nn("0x14")]=nn("0x67"),R.id=14;P={};P[nn("0x14")]="float",P.id=15;G={};G[nn("0x14")]=nn("0x67"),G.id=16;bn={};bn.type=nn("0x73"),bn.id=17;W={rule:"repeated",type:"LayerGroup",id:18},en={};en[nn("0x3d")]=mt,en[nn("0x75")]=jt,en[nn("0x52")]=St,en[nn("0x1")]=Ft,en[nn("0x18")]=Ht,en[nn("0xc")]=$t,en.desc=ln,en.readOnly=sn,en.x=on,en.y=un,en.z=hn,en[nn("0x37")]=fn,en[nn("0x69")]=an,en.maxX=cn,en.maxY=vn,en[nn("0x4f")]=dn,en[nn("0x5a")]=yn,en[nn("0x1f")]=r,en.defCenZ=f,en[nn("0x9")]=y,en.rotateAngleX=x,en[nn("0x1e")+"eY"]=R,en.rotateAngleZ=P,en[nn("0x7")]=G,en[nn("0x1a")]=bn,en.layerGroups=W;on={};on[nn("0x14")]=nn("0x50"),on.id=1;un={};un[nn("0x14")]="string",un.id=2;hn={};hn[nn("0x14")]=nn("0x73"),hn.id=3;fn={};fn[nn("0x14")]=nn("0x42"),fn.id=4;an={};an.type=nn("0x67"),an.id=5;cn={};cn.type=nn("0x67"),cn.id=6;vn={};vn[nn("0x14")]="float",vn.id=7;dn={};dn.type=nn("0x67"),dn.id=8;yn={};yn.type=nn("0x67"),yn.id=9;r={type:"float",id:10},f={};f[nn("0x14")]=nn("0x67"),f.id=11;y={};y[nn("0x14")]="float",y.id=12;x={type:"bool",id:13},R={};R[nn("0x14")]=nn("0xb"),R.id=14;P={type:"bool",id:15},G={};G.type=nn("0x73"),G.id=16;bn={};bn[nn("0x30")]=on,bn.lname=un,bn[nn("0x4a")]=hn,bn.ltype=fn,bn.offsetX=an,bn.offsetY=cn,bn[nn("0x9")]=vn,bn.rotateAngleX=dn,bn.rotateAngleY=yn,bn.rotateAngleZ=r,bn["minScaleLe"+nn("0x15")]=f,bn["maxScaleLe"+nn("0x15")]=y,bn[nn("0x70")]=x,bn[nn("0x36")+"le"]=R,bn.isEditable=P,bn[nn("0xe")]=G;W={};W[nn("0x63")]=1,W[nn("0x11")+"SCALATOR"]=2,W["GEOPOINT_L"+nn("0x26")]=3,W[nn("0x21")+"TAIR"]=4,W["GEOPOINT_P"+nn("0x57")]=5,W.GEOPOINT_POI=6,W[nn("0x21")+"TORELABEL"]=7,W["GEOPOINT_N"+nn("0x3f")]=8,W["GEOPOINT_M"+nn("0x66")]=9,W[nn("0x1b")]=20,W["GEOLINE_NA"+nn("0x28")]=21,W.GEOLINE_BORDER=22,W[nn("0x38")]=30,W[nn("0x38")+nn("0x6d")]=31,W.GEOPOLYGON_STORE=32,W["GEOPOLYGON"+nn("0x6c")]=33,W[nn("0x59")]=40,W.OVERLAYDATA=50;on={};on[nn("0x34")]=W;un={};un.Type=on;hn={};hn[nn("0x4c")]=bn,hn.nested=un;fn={};fn[nn("0x14")]=nn("0x50"),fn.id=1;an={};an.type=nn("0x73"),an.id=2;cn={};cn.type=nn("0x73"),cn.id=3;vn={};vn.type=nn("0x67"),vn.id=4;dn={};dn[nn("0x14")]="string",dn.id=5;yn={};yn[nn("0x45")]="repeated",yn.type="Layer",yn.id=6;r={type:"string",id:7},f={};f.gid=fn,f.gname=an,f.alias=cn,f[nn("0x9")]=vn,f.desc=dn,f[nn("0x3c")]=yn,f[nn("0x62")]=r;y={};y[nn("0x4c")]=f;x={};x.Layer=hn,x.LayerGroup=y;R={};R.fields=en,R.nested=x;P={rule:"required"};P.type=nn("0x73"),P.id=1;G={};G[nn("0x45")]="required",G[nn("0x14")]="int32",G.id=2;W={};W.type=nn("0x67"),W.id=3;on={rule:"repeated",type:"GeneralGeoInfo",id:4},bn={};bn.rule=nn("0x8"),bn.type=nn("0x6f")+"Info",bn.id=5;un={};un[nn("0x45")]=nn("0x8"),un[nn("0x14")]=nn("0x6f")+"Info",un.id=6;fn={};fn[nn("0x45")]=nn("0x8"),fn.type=nn("0x6f")+nn("0x6"),fn.id=7;an={};an.rule=nn("0x8"),an[nn("0x14")]="GeneralGeoInfo",an.id=8;cn={};cn.rule=nn("0x8"),cn[nn("0x14")]="GeneralGeo"+nn("0x6"),cn.id=9;vn={rule:"repeated"};vn[nn("0x14")]=nn("0x6f")+nn("0x6"),vn.id=10;dn={};dn[nn("0x45")]=nn("0x8"),dn[nn("0x14")]=nn("0x6f")+"Info",dn.id=11;yn={};yn.rule=nn("0x8"),yn[nn("0x14")]="GeneralGeoInfo",yn.id=12;r={};r.rule=nn("0x8"),r.type=nn("0x6f")+nn("0x6"),r.id=13;f={};f.mid=P,f[nn("0x2e")]=G,f[nn("0x9")]=W,f.extentLayer=on,f[nn("0x5d")]=bn,f[nn("0x40")]=un,f[nn("0x51")]=fn,f.polygonLayer=an,f[nn("0x6a")+nn("0x27")]=cn,f[nn("0x22")]=vn,f[nn("0x0")]=dn,f["escalatorL"+nn("0x61")]=yn,f["externalMo"+nn("0x13")]=r;hn={};hn[nn("0x45")]="required",hn.type="int32",hn.id=1;y={};y[nn("0x14")]="string",y.id=2;en={type:"float",id:3},x={};x[nn("0x14")]=nn("0x67"),x.id=4;P={};P[nn("0x45")]=nn("0x8"),P.type=nn("0x77");G={packed:!(P.id=5)},W={};W.rule=nn("0x8"),W[nn("0x14")]=nn("0x32"),W.id=6,W[nn("0x6e")]=G;on={};on.eid=hn,on.geo=y,on.height=en,on[nn("0x64")]=x,on[nn("0x17")]=P,on[nn("0x2c")]=W;bn={packed:!1},un={};un[nn("0x45")]=nn("0x8"),un[nn("0x14")]="int32",un.id=1,un[nn("0x6e")]=bn;fn={};fn[nn("0x17")]=un;an={};an[nn("0x4c")]=fn;cn={};cn.IndexInfo=an;vn={};vn[nn("0x4c")]=on,vn[nn("0x5")]=cn;dn={};dn[nn("0x6f")+"Info"]=vn;yn={};yn[nn("0x4c")]=f,yn.nested=dn;r={};r[nn("0x45")]=nn("0x5b"),r.type=nn("0x73"),r.id=1;G={};G[nn("0x45")]="required",G.type=nn("0x50"),G.id=2;hn={};hn.rule=nn("0x8"),hn[nn("0x14")]=nn("0x3")+nn("0x5c"),hn.id=3;y={};y[nn("0x45")]="repeated",y[nn("0x14")]="ModelBizInfo",y.id=4;en={};en.rule=nn("0x8"),en[nn("0x14")]=nn("0x76")+"fo",en.id=5;x={};x[nn("0x45")]="repeated",x[nn("0x14")]="POIBizInfo",x.id=6;P={};P[nn("0x45")]="repeated",P[nn("0x14")]="PolygonBizInfo",P.id=7;W={rule:"repeated",type:"LiftBizInfo",id:8},bn={};bn.rule=nn("0x8"),bn.type=nn("0x3e")+"fo",bn.id=9;un={rule:"repeated"};un.type="PolygonLab"+nn("0x31"),un.id=10;fn={};fn[nn("0x45")]=nn("0x8"),fn.type=nn("0x79")+nn("0xf"),fn.id=11;an={};an.mid=r,an[nn("0x2e")]=G,an.extentLayer=hn,an[nn("0x5d")]=y,an[nn("0x40")]=en,an[nn("0x51")]=x,an.polygonLayer=P,an.liftLayer=W,an[nn("0x0")]=bn,an[nn("0x6a")+nn("0x27")]=un,an["externalMo"+nn("0x13")]=fn;on={};on.rule=nn("0x5b"),on.type=nn("0x50"),on.id=1;cn={};cn[nn("0x14")]=nn("0x73"),cn.id=2;vn={type:"int32",id:3},f={};f[nn("0x14")]=nn("0x73"),f.id=4;dn={};dn[nn("0x14")]="string",dn.id=5;r={};r[nn("0x14")]=nn("0x50"),r.id=6;G={};G[nn("0x14")]=nn("0x50"),G.id=7;hn={};hn[nn("0x2b")]=on,hn.fid=cn,hn[nn("0x14")]=vn,hn.name=f,hn[nn("0x23")]=dn,hn.minlevel=r,hn[nn("0x4")]=G;y={};y.fields=hn;en={};en[nn("0x45")]="required",en.type=nn("0x50"),en.id=1;x={};x[nn("0x14")]=nn("0x73"),x.id=2;P={type:"int32",id:3},W={};W[nn("0x14")]="string",W.id=4;bn={};bn[nn("0x14")]=nn("0x73"),bn.id=5;un={};un[nn("0x14")]=nn("0x50"),un.id=6;fn={};fn[nn("0x14")]="int32",fn.id=7;on={type:"int32",id:8},cn={};cn[nn("0x2b")]=en,cn[nn("0x49")]=x,cn.type=P,cn.name=W,cn.ename=bn,cn.minlevel=un,cn[nn("0x4")]=fn,cn.pass=on;vn={};vn.fields=cn;f={};f[nn("0x45")]="required",f.type=nn("0x50"),f.id=1;dn={};dn[nn("0x14")]="string",dn.id=2;r={};r[nn("0x14")]="int32",r.id=3;G={};G[nn("0x14")]="string",G.id=4;hn={type:"string",id:5},en={type:"int32",id:6},x={type:"int32",id:7},P={};P.eid=f,P.fid=dn,P[nn("0x14")]=r,P[nn("0x4b")]=G,P[nn("0x23")]=hn,P.minlevel=en,P.maxlevel=x;W={};W[nn("0x4c")]=P;bn={};bn[nn("0x45")]=nn("0x5b"),bn[nn("0x14")]="int32",bn.id=1;un={};un[nn("0x14")]="string",un.id=2;fn={};fn[nn("0x14")]="int32",fn.id=3;on={};on[nn("0x14")]=nn("0x73"),on.id=4;cn={};cn[nn("0x14")]="string",cn.id=5;f={};f[nn("0x14")]=nn("0x50"),f.id=6;dn={};dn[nn("0x14")]=nn("0x50"),dn.id=7;r={};r[nn("0x2b")]=bn,r.fid=un,r[nn("0x14")]=fn,r[nn("0x4b")]=on,r.ename=cn,r.minlevel=f,r.maxlevel=dn;G={};G[nn("0x4c")]=r;hn={rule:"required",type:"int32",id:1},en={};en.type=nn("0x73"),en.id=2;x={};x[nn("0x14")]="int32",x.id=3;P={};P[nn("0x14")]="string",P.id=4;bn={type:"string",id:5},un={};un[nn("0x14")]=nn("0x50"),un.id=6;fn={};fn[nn("0x14")]="int32",fn.id=7;on={};on.eid=hn,on[nn("0x49")]=en,on.type=x,on.name=P,on.ename=bn,on.minlevel=un,on[nn("0x4")]=fn;cn={};cn.fields=on;f={rule:"required"};f.type=nn("0x50"),f.id=1;dn={};dn[nn("0x14")]=nn("0x73"),dn.id=2;r={};r[nn("0x14")]=nn("0x50"),r.id=3;hn={};hn.type=nn("0x50"),hn.id=4;en={};en[nn("0x14")]=nn("0x73"),en.id=5;x={type:"int32",id:6},P={};P[nn("0x14")]=nn("0x50"),P.id=7;bn={};bn[nn("0x2b")]=f,bn[nn("0x49")]=dn,bn[nn("0x14")]=r,bn[nn("0x56")]=hn,bn.floor=en,bn.minlevel=x,bn.maxlevel=P;un={};un.fields=bn;fn={};fn[nn("0x45")]=nn("0x5b"),fn[nn("0x14")]=nn("0x50"),fn.id=1;on={type:"string",id:2},f={};f[nn("0x14")]="int32",f.id=3;dn={};dn[nn("0x14")]=nn("0x50"),dn.id=4;r={};r.type=nn("0x50"),r.id=5;hn={};hn.type=nn("0x50"),hn.id=6;en={};en.eid=fn,en[nn("0x49")]=on,en[nn("0x14")]=f,en[nn("0x56")]=dn,en.minlevel=r,en.maxlevel=hn;x={};x[nn("0x4c")]=en;P={rule:"required"};P.type=nn("0x50"),P.id=1;bn={};bn.type=nn("0x73"),bn.id=2;fn={type:"int32",id:3},on={};on[nn("0x14")]=nn("0x67"),on.id=4;f={type:"string",id:5},dn={};dn[nn("0x14")]=nn("0x73"),dn.id=6;r={};r[nn("0x14")]="float",r.id=7;hn={};hn[nn("0x2b")]=P,hn[nn("0x49")]=bn,hn[nn("0x14")]=fn,hn[nn("0x1c")]=on,hn.name=f,hn.ename=dn,hn.angle=r;en={};en.fields=hn;P={};P.rule=nn("0x5b"),P.type="int32",P.id=1;bn={};bn[nn("0x14")]="string",bn.id=2;fn={};fn[nn("0x14")]="int32",fn.id=3;on={};on[nn("0x14")]="string",on.id=4;f={};f[nn("0x14")]=nn("0x73"),f.id=5;dn={};dn.type=nn("0x50"),dn.id=6;r={};r.type=nn("0x50"),r.id=7;hn={};hn.eid=P,hn[nn("0x49")]=bn,hn.type=fn,hn.name=on,hn[nn("0x23")]=f,hn.minlevel=dn,hn.maxlevel=r;bn={};bn[nn("0x4c")]=hn;fn={};fn.ExtentBizInfo=y,fn.ModelBizInfo=vn,fn[nn("0x76")+"fo"]=W,fn[nn("0x2d")+nn("0x6")]=G,fn[nn("0x35")]=cn,fn[nn("0xa")+"o"]=un,fn.StairBizInfo=x,fn[nn("0x2f")+nn("0x31")]=en,fn["ExternalMo"+nn("0xf")]=bn;on={};on[nn("0x4c")]=an,on.nested=fn;f={};f.rule=nn("0x5b"),f[nn("0x14")]="string",f.id=1;dn={};dn.rule=nn("0x5b"),dn[nn("0x14")]=nn("0x50"),dn.id=2;r={};r.rule=nn("0x8"),r[nn("0x14")]=nn("0x72"),r.id=3;hn={};hn[nn("0x45")]="repeated",hn.type="NaviSegment",hn.id=4;y={};y.rule=nn("0x8"),y[nn("0x14")]="NaviZone",y.id=5;vn={};vn.rule=nn("0x8"),vn[nn("0x14")]="NaviModel",vn.id=6;W={};W[nn("0x7a")]=!1;G={rule:"repeated",type:"int32",id:7};G.options=W;cn={};cn[nn("0x3d")]=f,cn.gid=dn,cn[nn("0x43")]=r,cn[nn("0x39")+"ts"]=hn,cn[nn("0x48")]=y,cn.naviModels=vn,cn.nextFloors=G;un={type:"int32",id:1},x={};x.type=nn("0x50"),x.id=2;en={type:"int32",id:3},bn={};bn[nn("0x14")]=nn("0x50"),bn.id=4;an={};an[nn("0x14")]=nn("0x50"),an.id=5;fn={};fn.type=nn("0x73"),fn.id=6;W={};W[nn("0x14")]=nn("0x73"),W.id=7;f={};f[nn("0x14")]=nn("0x73"),f.id=8;dn={},r={type:"string",id:10},hn={type:dn[nn("0x14")]="int32",id:11},y={packed:!(dn.id=9)},vn={};vn.rule=nn("0x8"),vn.type="int32",vn.id=12,vn[nn("0x6e")]=y;G={packed:!1},y={};y[nn("0x45")]=nn("0x8"),y[nn("0x14")]="double",y.id=13,y.options=G;G={};G.nodeId=un,G[nn("0x68")]=x,G[nn("0x78")]=en,G[nn("0x20")]=bn,G[nn("0x5e")]=an,G.liftFloor=fn,G[nn("0x33")]=W,G.geo=f,G.entranceType=dn,G[nn("0x47")+"oor"]=r,G.doortype=hn,G[nn("0x17")]=vn,G[nn("0x2c")]=y;un={};un[nn("0x4c")]=G;x={};x.type=nn("0x50"),x.id=1;en={};en.type=nn("0x50"),en.id=2;bn={};bn.type=nn("0x50"),bn.id=3;an={};an[nn("0x14")]="double",an.id=4;fn={};fn.type=nn("0x50"),fn.id=5;W={type:"string",id:6},f={type:"int32",id:7},dn={};dn[nn("0x14")]=nn("0x73"),dn.id=8;r={};r[nn("0x14")]=nn("0x73"),r.id=9;hn={type:"int32",id:10},vn={};vn[nn("0x7a")]=!1;y={};y[nn("0x45")]=nn("0x8"),y.type=nn("0x50"),y.id=11,y[nn("0x6e")]=vn;G={packed:!1},vn={};vn[nn("0x45")]=nn("0x8"),vn[nn("0x14")]=nn("0x32"),vn.id=12,vn[nn("0x6e")]=G;G={};G[nn("0x16")]=x,G[nn("0x41")]=en,G[nn("0xd")]=bn,G[nn("0x10")]=an,G[nn("0x60")]=fn,G.name=W,G[nn("0x4e")]=f,G.desc=dn,G.geo=r,G.through=hn,G.idxs=y,G.pts=vn;W={};W.fields=G;f={};f[nn("0x45")]=nn("0x5b"),f[nn("0x14")]="int32",f.id=1;dn={default:0},r={rule:"required"};r.type=nn("0x50"),r.id=2,r.options=dn;hn={};hn.type=nn("0x73"),hn.id=3;y={rule:"repeated"};y[nn("0x14")]="string";vn={packed:!(y.id=4)},G={};G[nn("0x45")]=nn("0x8"),G.type=nn("0x50"),G.id=5,G.options=vn;dn={packed:!1},vn={rule:"repeated"};vn[nn("0x14")]=nn("0x32"),vn.id=6,vn.options=dn;dn={};dn.id=f,dn[nn("0x14")]=r,dn[nn("0x55")]=hn,dn.rejects=y,dn[nn("0x17")]=G,dn.pts=vn;r={};r.fields=dn;hn={};hn[nn("0x45")]="required",hn.type=nn("0x50");y={packed:!(hn.id=1)},G={rule:"repeated"};G[nn("0x14")]="int32",G.id=2,G[nn("0x6e")]=y;vn={packed:!1},dn={};dn.rule=nn("0x8"),dn.type="int32",dn.id=3,dn.options=vn;y={};y[nn("0x7a")]=!1;vn={};vn.rule=nn("0x8"),vn[nn("0x14")]=nn("0x50"),vn.id=4,vn[nn("0x6e")]=y;y={};y[nn("0x6b")]=hn,y.doorids=G,y.nodetypes=dn,y[nn("0x74")]=vn;vn={};vn[nn("0x4c")]=y;y={};y.NaviNode=un,y[nn("0x25")+"t"]=W,y[nn("0x2a")]=r,y[nn("0x3a")]=vn;vn={};vn[nn("0x4c")]=cn,vn[nn("0x5")]=y;y={};y[nn("0x3b")]=bt,y[nn("0x19")]=R,y[nn("0x24")]=yn,y[nn("0x1d")]=on,y.FloorNavi=vn;vn={};vn.options=rn,vn.nested=y;y={};y[nn("0x12")]=vn;vn={};vn[nn("0x5")]=y;var pn=vn;y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.Zt=null};Object.assign(y.prototype,{Wt:function(){this.Zt||(this.Zt=Kt.a.Root.fromJSON("undefined"!=typeof KjWzhWlSj&&KjWzhWlSj.ProtoDef?KjWzhWlSj.ProtoDef:pn))},Vt:function(t){return this.Wt(),this.Zt.lookup("Map").decode(t)},Yt:function(t){for(var n=0;n<t.buffers.length;n++){var i=t.buffers[n];if(1==i.btype)return this.Xt(i.data)}return null},qt:function(t,n){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(2==r.btype&&r.gid==n)return this.zt(r.data)}return null},Ht:function(t,n){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(3==r.btype&&r.gid==n)return this.Qt(r.data)}return null},Jt:function(t,n){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(4==r.btype&&r.gid==n)return this.$t(r.data)}return null},Xt:function(t){this.Wt();var n=this.Zt.lookup("Scene").decode(t);return n.levels=[],n.layerGroups.forEach(function(t){n.levels.push(t.gid)}),n},zt:function(t){return this.Wt(),this.Zt.lookup("FloorGeo").decode(t)},Qt:function(t){return this.Wt(),this.Zt.lookup("FloorBiz").decode(t)},$t:function(t){return this.Wt(),this.Zt.lookup("FloorNavi").decode(t)}});var wn,mn,_n,gn,xn,On=new y,vn="https://console.fengmap.com/api-s/",En={domain:vn,online:vn+"sdk/check",check:vn+"sdk/auth/web",download:vn+"sdk/auth/obtainMapRoute",downloadTile:vn+"sdk/authLayered/obtainMapRoute",collect:vn+"sdk/collect",themeUrl:vn+"webtheme/",externalModelUrl:vn+"webmodel/"},jn=i(8);function Tn(t,n){for(var i,r=0,e=0,e=0;e<8;e++)1&n&&(r^=t),i=128&t,t<<=1,i&&(t^=27),n>>=1;return r}function kn(t,n,i){for(var r=0;r<4;r++)t[0+r]^=n[16*i+4*r],t[4+r]^=n[16*i+4*r+1],t[8+r]^=n[16*i+4*r+2],t[12+r]^=n[16*i+4*r+3]}function Mn(t){for(var n,i,r,e=1;e<4;e++)for(i=0;i<e;){for(r=t[4*e+4-1],n=3;0<n;n--)t[4*e+n]=t[4*e+n-1];t[4*e+0]=r,i++}}function Rn(t){for(var n,i,r,e=0;e<4;e++)for(n=0;n<4;n++)i=(240&t[4*e+n])>>4,r=15&t[4*e+n],t[4*e+n]=mn[16*i+r]}function An(t){for(var n=0;n<4;n++)t[n]=wn[16*((240&t[n])>>4)+(15&t[n])]}function Sn(t){return parseInt(t,16)}var Nn=(wn=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],mn=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],xn=[2,gn=_n=0,0,0],{decryption:function(t,n){for(var i=Array(16),r=0;r<16;r++)i[r]=16*Sn(n.substr(2*r,1))+Sn(n.substr(2*r+1,1));var e=Array(16);for(r=0;r<16;r++)e[r]=16*Sn(t.substr(2*r,1))+Sn(t.substr(2*r+1,1));var s=Array(16);switch(r=[],i.length){default:case 16:_n=4,gn=10;break;case 24:_n=6,gn=12;break;case 32:_n=8,gn=14}for(var o=r=Array(16*(gn+1)),u=Array(4),h=4*(gn+1),f=0;f<_n;f++)o[4*f+0]=i[4*f+0],o[4*f+1]=i[4*f+1],o[4*f+2]=i[4*f+2],o[4*f+3]=i[4*f+3];for(f=_n;f<h;f++){if(u[0]=o[4*(f-1)+0],u[1]=o[4*(f-1)+1],u[2]=o[4*(f-1)+2],u[3]=o[4*(f-1)+3],0==f%_n){for(var a=void 0,c=void 0,a=(i=u)[0],c=0;c<3;c++)i[c]=i[c+1];if(i[3]=a,An(u),1==(i=f/_n))xn[0]=1;else if(1<i)for(xn[0]=2,i--;0<i-1;)xn[0]=Tn(xn[0],2),i--;(c=i=u)[0]=i[0]^(a=xn)[0],c[1]=i[1]^a[1],c[2]=i[2]^a[2],c[3]=i[3]^a[3]}else 6<_n&&4==f%_n&&An(u);o[4*f+0]=o[4*(f-_n)+0]^u[0],o[4*f+1]=o[4*(f-_n)+1]^u[1],o[4*f+2]=o[4*(f-_n)+2]^u[2],o[4*f+3]=o[4*(f-_n)+3]^u[3]}for(o=Array(16),u=0;u<4;u++)for(f=0;f<4;f++)o[4*u+f]=e[u+4*f];for(kn(o,r,gn),e=gn-1;1<=e;e--)for(Mn(o),Rn(o),kn(o,r,e),u=o,f=[14,9,13,11],h=c=void 0,i=Array(4),a=Array(4),h=0;h<4;h++){for(c=0;c<4;c++)i[c]=u[4*c+h];var c=f,l=i,v=a;for(v[0]=Tn(c[0],l[0])^Tn(c[3],l[1])^Tn(c[2],l[2])^Tn(c[1],l[3]),v[1]=Tn(c[1],l[0])^Tn(c[0],l[1])^Tn(c[3],l[2])^Tn(c[2],l[3]),v[2]=Tn(c[2],l[0])^Tn(c[1],l[1])^Tn(c[0],l[2])^Tn(c[3],l[3]),v[3]=Tn(c[3],l[0])^Tn(c[2],l[1])^Tn(c[1],l[2])^Tn(c[0],l[3]),c=0;c<4;c++)u[4*c+h]=a[c]}for(Mn(o),Rn(o),kn(o,r,0),u=0;u<4;u++)for(f=0;f<4;f++)s[u+4*f]=o[4*u+f];for(e="",r=0;r<16;++r)e+=o=(o=s[r].toString(16)).length<2?"0"+o:o;return e}});function In(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i}function Ln(t,n,i,r,e,s){return In((s=In(In(n,t),In(r,s)))<<e|s>>>32-e,i)}function Pn(t,n,i,r,e,s,o){return Ln(n&i|~n&r,t,n,e,s,o)}function Dn(t,n,i,r,e,s,o){return Ln(n&r|i&~r,t,n,e,s,o)}function Fn(t,n,i,r,e,s,o){return Ln(n^i^r,t,n,e,s,o)}function Cn(t,n,i,r,e,s,o){return Ln(i^(n|~r),t,n,e,s,o)}function Un(t,n){var i,r,e,s;t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;for(var o=1732584193,u=-271733879,h=-1732584194,f=271733878,a=0;a<t.length;a+=16)o=Pn(i=o,r=u,e=h,s=f,t[a],7,-680876936),f=Pn(f,o,u,h,t[a+1],12,-389564586),h=Pn(h,f,o,u,t[a+2],17,606105819),u=Pn(u,h,f,o,t[a+3],22,-1044525330),o=Pn(o,u,h,f,t[a+4],7,-176418897),f=Pn(f,o,u,h,t[a+5],12,1200080426),h=Pn(h,f,o,u,t[a+6],17,-1473231341),u=Pn(u,h,f,o,t[a+7],22,-45705983),o=Pn(o,u,h,f,t[a+8],7,1770035416),f=Pn(f,o,u,h,t[a+9],12,-1958414417),h=Pn(h,f,o,u,t[a+10],17,-42063),u=Pn(u,h,f,o,t[a+11],22,-1990404162),o=Pn(o,u,h,f,t[a+12],7,1804603682),f=Pn(f,o,u,h,t[a+13],12,-40341101),h=Pn(h,f,o,u,t[a+14],17,-1502002290),o=Dn(o,u=Pn(u,h,f,o,t[a+15],22,1236535329),h,f,t[a+1],5,-165796510),f=Dn(f,o,u,h,t[a+6],9,-1069501632),h=Dn(h,f,o,u,t[a+11],14,643717713),u=Dn(u,h,f,o,t[a],20,-373897302),o=Dn(o,u,h,f,t[a+5],5,-701558691),f=Dn(f,o,u,h,t[a+10],9,38016083),h=Dn(h,f,o,u,t[a+15],14,-660478335),u=Dn(u,h,f,o,t[a+4],20,-405537848),o=Dn(o,u,h,f,t[a+9],5,568446438),f=Dn(f,o,u,h,t[a+14],9,-1019803690),h=Dn(h,f,o,u,t[a+3],14,-187363961),u=Dn(u,h,f,o,t[a+8],20,1163531501),o=Dn(o,u,h,f,t[a+13],5,-1444681467),f=Dn(f,o,u,h,t[a+2],9,-51403784),h=Dn(h,f,o,u,t[a+7],14,1735328473),o=Fn(o,u=Dn(u,h,f,o,t[a+12],20,-1926607734),h,f,t[a+5],4,-378558),f=Fn(f,o,u,h,t[a+8],11,-2022574463),h=Fn(h,f,o,u,t[a+11],16,1839030562),u=Fn(u,h,f,o,t[a+14],23,-35309556),o=Fn(o,u,h,f,t[a+1],4,-1530992060),f=Fn(f,o,u,h,t[a+4],11,1272893353),h=Fn(h,f,o,u,t[a+7],16,-155497632),u=Fn(u,h,f,o,t[a+10],23,-1094730640),o=Fn(o,u,h,f,t[a+13],4,681279174),f=Fn(f,o,u,h,t[a],11,-358537222),h=Fn(h,f,o,u,t[a+3],16,-722521979),u=Fn(u,h,f,o,t[a+6],23,76029189),o=Fn(o,u,h,f,t[a+9],4,-640364487),f=Fn(f,o,u,h,t[a+12],11,-421815835),h=Fn(h,f,o,u,t[a+15],16,530742520),o=Cn(o,u=Fn(u,h,f,o,t[a+2],23,-995338651),h,f,t[a],6,-198630844),f=Cn(f,o,u,h,t[a+7],10,1126891415),h=Cn(h,f,o,u,t[a+14],15,-1416354905),u=Cn(u,h,f,o,t[a+5],21,-57434055),o=Cn(o,u,h,f,t[a+12],6,1700485571),f=Cn(f,o,u,h,t[a+3],10,-1894986606),h=Cn(h,f,o,u,t[a+10],15,-1051523),u=Cn(u,h,f,o,t[a+1],21,-2054922799),o=Cn(o,u,h,f,t[a+8],6,1873313359),f=Cn(f,o,u,h,t[a+15],10,-30611744),h=Cn(h,f,o,u,t[a+6],15,-1560198380),u=Cn(u,h,f,o,t[a+13],21,1309151649),o=Cn(o,u,h,f,t[a+4],6,-145523070),f=Cn(f,o,u,h,t[a+11],10,-1120210379),h=Cn(h,f,o,u,t[a+2],15,718787259),u=Cn(u,h,f,o,t[a+9],21,-343485551),o=In(o,i),u=In(u,r),h=In(h,e),f=In(f,s);return[o,u,h,f]}function Bn(t){for(var n="",i=32*t.length,r=0;r<i;r+=8)n+=String.fromCharCode(t[r>>5]>>>r%32&255);return n}function Gn(t){var n=[];for(n[(t.length>>2)-1]=void 0,r=0;r<n.length;r+=1)n[r]=0;for(var i=8*t.length,r=0;r<i;r+=8)n[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return n}function Zn(t){for(var n,i="0123456789abcdef",r="",e=0;e<t.length;e+=1)n=t.charCodeAt(e),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r}function Wn(t){return unescape(encodeURIComponent(t))}function Vn(t){return Bn(Un(Gn(t=Wn(t)),8*t.length))}function Yn(t,n){return function(t,n){var i,r=Gn(t),e=[],s=[];for(e[15]=s[15]=void 0,16<r.length&&(r=Un(r,8*t.length)),i=0;i<16;i+=1)e[i]=909522486^r[i],s[i]=1549556828^r[i];return n=Un(e.concat(Gn(n)),512+8*n.length),Bn(Un(s.concat(n),640))}(Wn(t),Wn(n))}function Xn(t,n,i){return n?i?Yn(n,t):Zn(Yn(n,t)):i?Vn(t):Zn(Vn(t))}var qn={encryption:function(t){return Xn(t)}};var zn="0.0.0.0",y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(y.prototype,{Kt:function(t,n,i,r,e){"undefined"==typeof KjWzhWlSj||!KjWzhWlSj.license||!KjWzhWlSj.license?r&&r():"string"==typeof n&&0!=n.length?(n=Nn.decryption(n,"026685bf295f587b5dffc1f18d5dc27c"),i=qn.encryption(i),n=Nn.decryption(n,i),-1!==t.indexOf(n)?r&&r():e&&e()):e&&e()},tn:function(t,n,i,r){var e;-1===n.indexOf("")&&-1===n.indexOf("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")?(e=qn.encryption("fengmap.localhost:"+t.appName),e=Nn.decryption(t.key,e),-1!==n.indexOf(e)?this.Kt(n,t.license,t.buildingID,function(){i&&i()},function(){r&&r()}):r&&r()):i&&i()},nn:function(t,n,i){var r=this;void 0===t.mapURL?(this.in(t),this.rn(function(){new Jt({method:"POST",url:En.check,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:r.sn(t)}).Gt(function(){n&&n()},function(t){i&&i(t)},function(){n&&n()})},function(){n&&n()})):n&&n()},rn:function(t,n){new Jt({method:"GET",url:En.online}).Gt(function(){t&&t()},function(){n&&n()},function(){n&&n()})},sn:function(t,n){var i=jn.a.global().location.host,r=i.indexOf(":");-1!=r&&(i=i.slice(0,r));r={mapId:t.buildingID,appName:t.appName};return n?r.keyValue=t.key:r.appKey=t.key,n?r.webUrl=i||zn:r.webURL=i||zn,r},in:function(t){if("undefined"!=typeof navigator&&"undefined"!=typeof document){var n={};-1!=navigator.userAgent.indexOf("Opera")?n.userAgent="Opera":-1!=navigator.userAgent.indexOf("Firefox")?n.userAgent="FF":-1!=navigator.userAgent.indexOf("Chrome")?n.userAgent="Chrome":-1!=navigator.userAgent.indexOf("Safari")&&0===navigator.userAgent.indexOf("Chrome")?n.userAgent="Safari":-1!=navigator.userAgent.indexOf("compatible")&&-1!=navigator.userAgent.indexOf("MSIE")?n.userAgent="IE":-1!=navigator.userAgent.indexOf("Trident")&&(n.userAgent="Edge"),n.product="JS",n.sdkVersion=u+"."+h,n.appName=t.appName,n.appkey=t.key;var i=document.createElement("canvas").getContext("experimental-webgl"),t=i.getExtension("WEBGL_debug_renderer_info");n.gpu=t?i.getParameter(t.UNMASKED_RENDERER_WEBGL):null,n.os=navigator.platform;for(var r=!0,e=navigator.userAgent,s=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),o=0;o<s.length;o++)if(0<e.indexOf(s[o])){r=!1;break}n.device=r?"pc":"mobile",new Jt({method:"POST",url:En.collect,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:n}).Gt()}}});var Hn=new y;function Qn(t){return function(t){if(Array.isArray(t))return Jn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return Jn(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Jn(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}vn=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(vn.prototype,{un:function(){},hn:function(t,n,i,r){var e;t.mapURL?(e=t.isPreview||t.mapURLAbsolute?t.mapURL+t.buildingID+n+".fmap":t.mapURL+t.buildingID+"/"+t.buildingID+n+".fmap",i&&i(e)):new Jt({method:"POST",url:""==n?En.download:En.downloadTile+"/"+t.buildingID+n+".fmap",header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:Object.assign({newFlag:"2",keyType:3,isSeparate:!1},Hn.sn(t,!0))}).Gt(function(t){i&&i(t.replace('"',"").replace('"',""))},function(t){r&&r(t)},function(t){r&&r(t)})},an:function(i,r,e){var t=this;Hn.nn(i,function(){t.hn(i,"",function(t){new Jt({method:"GET",responseType:"arraybuffer",url:t}).Gt(function(t){var t=new Uint8Array(t),n=On.Vt(t),t=[];n.keys&&0!=n.keys.length?t.push.apply(t,Qn(n.keys)):t.push(n.key),i.isPreview?r&&r(n):Hn.tn(i,t,function(){r&&r(n)},function(t){e&&e(t)})},function(t){e&&e(t)},function(t){e&&e(t)})},function(t){e&&e(t)})},function(t){e&&e(t)})},cn:function(i,r,e){var t=this;Hn.nn(i,function(){t.hn(i,".scene",function(t){new Jt({method:"GET",responseType:"arraybuffer",url:t}).Gt(function(t){var t=new Uint8Array(t),n=On.Xt(t),t=[];n.keys&&0!=n.keys.length?t.push.apply(t,Qn(n.keys)):t.push(n.key),i.isPreview?r&&r(n):Hn.tn(i,t,function(){r&&r(n)},function(t){e&&e(t)})},function(t){e&&e(t)},function(t){e&&e(t)})},function(t){e&&e(t)})},function(t){e&&e(t)})},ln:function(t,n,i,r){this.hn(t,".floor."+n+".geo",function(t){new Jt({method:"GET",responseType:"arraybuffer",url:t}).Gt(function(t){t=new Uint8Array(t),t=On.zt(t);i&&i(t)},function(t){r&&r(t)},function(t){r&&r(t)})},function(t){r&&r(t)})},vn:function(t,n,i,r){this.hn(t,".floor."+n+".biz",function(t){new Jt({method:"GET",responseType:"arraybuffer",url:t}).Gt(function(t){t=new Uint8Array(t),t=On.Qt(t);i&&i(t)},function(t){r&&r(t)},function(t){r&&r(t)})},function(t){r&&r(t)})},dn:function(t,n,i,r){this.hn(t,".floor."+n+".navi",function(t){new Jt({method:"GET",responseType:"arraybuffer",url:t}).Gt(function(t){t=new Uint8Array(t),t=On.$t(t);i&&i(t)},function(t){r&&r(t)})},function(t){r&&r(t)},function(t){r&&r(t)})}});var $n=new vn;y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(y.prototype,{yn:function(t,n){for(var i=[],r=0,e=0;e<t.length;e++){var s=t[e].idxs;if("number"==typeof(s=s||t[e]))for(;r<s;)i.push({x:n[r],y:n[r+1]}),r+=2;else for(var o=0;o<s.length;o++)for(var u=s[o];r<u;)i.push({x:n[r],y:n[r+1]}),r+=2}return i},bn:function(t,n){for(var i=[],r=0,e=0;e<t.length;e++){var s=t[e].idxs;if("number"==typeof(s=s||t[e])){for(var o=[];r<s;)o.push({x:n[r],y:n[r+1]}),r+=2;i.push(o)}else for(var u=0;u<s.length;u++){for(var h=s[u],f=[];r<h;)f.push({x:n[r],y:n[r+1]}),r+=2;i.push(f)}}return i},pn:function(t,n){for(var i=[],r=[],e=0,s=0;s<t.length;s++){var o=t[s].idxs;if("number"==typeof(o=o||t[s]))for(;e<o;)i.push({x:n[e],y:n[e+1]}),e+=2;else for(var u=0;u<o.length;u++)if(0===u)for(var h=o[u];e<h;)i.push({x:n[e],y:n[e+1]}),e+=2;else{for(var f=[],a=o[u];e<a;)f.push({x:n[e],y:n[e+1]}),e+=2;r.push(f)}}var c=[];return c.push(i),c.push.apply(c,r),c},wn:function(t){for(var n=[],i=t.length,r=0;r<i;r++){for(var e=t[r],s={x:this.mn(e.x),y:this.mn(e.y)},o=n.length,u=!1,h=0;h<o;h++){var f=n[h];if(f.x==s.x&&f.y==s.y){u=!0;break}}u||n.push(s)}return n},mn:function(t){return+t.toFixed(2)}});var Kn=new y;var ti=ti||{};ti.G1="MULTIPOLYGON(((",ti.G2="POINT(",ti.G3="MULTILINESTRING((",ti.GLEN1="MULTIPOLYGON(((".length,ti.GLEN2="POINT(".length,ti.GLEN3="MULTILINESTRING((".length;vn=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(vn.prototype,{yn:function(t){var n=[];if(0!=t.indexOf(ti.G2))return[];t=t.substring(ti.GLEN2,t.length-1).split(" ");return n.push({x:parseFloat(t[0]),y:parseFloat(t[1])}),n},bn:function(t){if(0!=t.indexOf(ti.G3))return[];for(var n=t.substring(ti.GLEN3,t.length-2).split(","),i=[],r=0;r<n.length;r++){var e=n[r].split(" ");i.push({x:parseFloat(e[0]),y:parseFloat(e[1])})}return[i]},pn:function(t){var n=[],i=[];if(0!=t.indexOf(ti.G1))return[];for(var r=t.substring(ti.GLEN1,t.length-3).split(/\),\(/),e=0;e<r.length;e++){var s=r[e].split(/,/);if(0==e)for(var o=0;o<s.length;o++){var u=s[o].split(" ");n.push({x:parseFloat(u[0]),y:parseFloat(u[1])})}else{for(var h=[],f=0;f<s.length;f++){var a=s[f].split(" ");h.push({x:parseFloat(a[0]),y:parseFloat(a[1])})}i.push(h)}}t=[];return t.push(n),t.push.apply(t,i),t},wn:function(t){for(var n=[],i=t.length,r=0;r<i;r++){for(var e=t[r],s={x:this.mn(e.x),y:this.mn(e.y)},o=n.length,u=!1,h=0;h<o;h++){var f=n[h];if(f.x==s.x&&f.y==s.y){u=!0;break}}u||n.push(s)}return n},mn:function(t){return+t.toFixed(2)}});var ni=new vn,y={STOP:0,PASS:1,PUSH:2};Object.freeze(y);var ii=y;function ri(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return ei(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ei(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw e}}}}function ei(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function si(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}vn=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.Ft=V.GROUP,this._n=new Map,this.gn=-1,this.xn=null,this.St=null,Object.assign(this,t)}var t,i,r;return t=n,(i=[{key:"getType",value:function(){return this.Ft}},{key:"getCoordinates",value:function(){return this.xn}},{key:"getBound",value:function(){return this.St||this.On(),this.St}},{key:"getChildren",value:function(){return this._n}}])&&si(t.prototype,i),r&&si(t,r),n}();Object.assign(vn.prototype,{un:function(){var t,n=ri(this._n.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;i.un&&i.un()}}catch(t){n.e(t)}finally{n.f()}this._n.clear()},En:function(n){var t=n.jn(this);t==ii.PASS?this._n.forEach(function(t){t.En(n)}):t==ii.PUSH&&n.Tn.push(this)},On:function(){var n=this;this.St=new _t,0!=this._n.size&&this._n.forEach(function(t){n.St.Tt(t.getBound())})}});var oi=vn;function ui(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.gn=t.eid,this.Ft=V.POINT,this.xn=null,this.St=null,Object.assign(this,t)}var t,i,r;return t=n,(i=[{key:"getType",value:function(){return this.Ft}},{key:"getCoordinates",value:function(){return this.xn}},{key:"getBound",value:function(){return this.St||this.On(),this.St}}])&&ui(t.prototype,i),r&&ui(t,r),n}();Object.assign(y.prototype,{On:function(){this.St=new _t,this.xn&&this.St.kt(this.xn)},En:function(t){t.jn(this)==ii.PUSH&&t.Tn.push(this)}});var hi=y;function fi(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}vn=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.gn=t.eid,this.Ft=V.POLYGON,this.Mt=null,this.xn=null,this.St=null,Object.assign(this,t)}var t,i,r;return t=n,(i=[{key:"getType",value:function(){return this.Ft}},{key:"getCenter",value:function(){return this.Mt}},{key:"getCoordinates",value:function(){return this.xn}},{key:"getBound",value:function(){return this.St||this.On(),this.St}}])&&fi(t.prototype,i),r&&fi(t,r),n}();Object.assign(vn.prototype,{On:function(){var n=this;this.St=new _t,this.xn&&this.xn.forEach(function(t){n.St.kt(t)})},En:function(t){t.jn(this)==ii.PUSH&&t.Tn.push(this)}});var ai=vn,ci=["layerGroups"],li=["layers"];function vi(t,n){if(null==t)return{};var i,r=function(t,n){if(null==t)return{};var i,r,e={},s=Object.keys(t);for(r=0;r<s.length;r++)i=s[r],0<=n.indexOf(i)||(e[i]=t[i]);return e}(t,n);if(Object.getOwnPropertySymbols)for(var e=Object.getOwnPropertySymbols(t),s=0;s<e.length;s++)i=e[s],0<=n.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i]);return r}y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.kn=[1,2,3,4],this.Mn=[6,7,9],this.Rn=[31,32],this.An=new Map,this.An.set(31,V.EXTENTGROUP),this.An.set(32,V.MODELGROUP),this.An.set(6,V.FACILITYGROUP),this.An.set(7,V.LABELGROUP),this.An.set(9,V.EXTERNALMODELGROUP),this.Sn=new Map,this.Sn.set(31,["extentLayer",null]),this.Sn.set(32,["modelLayer","labelLayer"]),this.Sn.set(6,["poiLayer",null]),this.Sn.set(7,["labelLayer",null]),this.Sn.set(9,["externalModelLayer",null])};Object.assign(y.prototype,{Nn:function(t){if(!t.buffers||0===t.buffers.length)return null;var n=On.Yt(t);return this.In(n,t)},In:function(i,r){var e=this,t=i.layerGroups,n=vi(i,ci),s=new oi(n);return t.forEach(function(t){var n=e.Ln(t,r,i.fileVer);s._n.set(t.gid,n)}),s},Ln:function(t,n,i){var r=this,e=t.layers,s=vi(t,li),o=new oi(s),u=n?On.qt(n,t.gid):null,h=n?On.Ht(n,t.gid):null;return e.forEach(function(t){6==t.ltype&&-1!=t.lname.indexOf("storelabel")&&(t.ltype=7);var n=r.Pn(t,u,h,i);null!=n&&o._n.set(r.An.get(t.ltype),n)}),this.Dn(o),o},Dn:function(t){var n=Array.from(t._n);n.sort(function(t,n){return t[0]-n[0]}),t._n=new Map(n)},Pn:function(t,n,i,r){if(-1!=this.kn.indexOf(t.ltype))return null;if(!this.Sn.get(t.ltype))return null;var e=new oi(t);return this.Fn(e,n,i,r),e&&(e.Ft=this.An.get(t.ltype)),e},Fn:function(t,n,i,r){if(t){var e=this.Sn.get(t.ltype);if(e){var s=n?n[e[0]]:[],o=i?i[e[0]]:[];switch(t.ltype){case 6:this.Cn(t,s,o,r,V.FACILITY);break;case 7:this.Cn(t,s,o,r,V.LABEL);break;case 9:this.Cn(t,s,o,r,V.EXTERNALMODEL);break;case 31:this.Un(t,s,o,r,V.EXTENT,null);break;case 32:this.Un(t,s,o,r,V.MODEL,n?n[e[1]]:null)}}}},Cn:function(t,n,i,r,e){for(var s=0;s<n.length;s++){var o=this.Bn(n[s],i[s],r);o.Ft=e,t._n.set(n[s].eid,o)}},Bn:function(t,n,i){n=Object.assign({},n,{area:t.area,eid:t.eid,height:t.height}),n=new hi(n);return t.coordinates?n.xn=t.coordinates:(n.xn=1==i?ni.yn(t.geo):Kn.yn(t.idxs,t.pts),t.coordinates=n.xn),n},Un:function(t,n,i,r,e,s){for(var o=0;o<n.length;o++){var u=this.Gn(n[o],i[o],r,s?s[o]:null);u.Ft=e,t._n.set(n[o].eid,u)}},Gn:function(t,n,i,r){n=Object.assign({},n,{area:t.area,eid:t.eid,height:t.height}),n=new ai(n);return n.xn=1==i?ni.pn(t.geo):Kn.pn(t.idxs,t.pts),r&&(r.coordinates||(r.coordinates=1==i?ni.yn(r.geo):Kn.yn(r.idxs,r.pts)),n.Mt=r.coordinates[0]),n}});var di=new y;function yi(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}vn=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.Zn=new Map,this.Wn=new Map,this.Bt=new Map,this.Vn=new Map,this.Yn=new Map,this.Xn=new Map,this.qn=[2,3],this.zn=!1}var n,i,r;return n=t,(i=[{key:"load",value:function(t,n){this.Hn(t,n)}},{key:"loadWhole",value:function(t,n){this.Qn(t,n)}},{key:"getDecode",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.Jn({buildingID:t})}},{key:"getData",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.Zn.get(t)}}])&&yi(n.prototype,i),r&&yi(n,r),t}();Object.assign(vn.prototype,{un:function(){this.Zn.clear(),this.Zn=null,this.Wn.clear(),this.Wn=null,this.Bt.clear(),this.Bt=null,this.Vn.clear(),this.Vn=null,this.Yn.clear(),this.Yn=null,this.Xn.clear(),this.Xn=null},$n:function(t){this.Vn.set(t.buildingID,null),this.Yn.set(t.buildingID,null),this.Xn.set(t.buildingID,0)},Hn:function(u,h){var f=this;this.$n(u),this.cn(u,function(t,n){h&&h(t,n);var i=f.Kn(u),r=u.level||parseInt(i.defGid);f.ti(u,r,h);for(var e=u.visibleLevels||i.levels,s=0;s<e.length;s++)e[s]!=r&&f.ti(u,e[s],h);if(u.preLoad)for(var o=0;o<i.levels.length;o++)i.levels[o]!=r&&-1==e.indexOf(i.levels[o])&&f.ti(u,i.levels[o],h)},function(t,n){h&&h(t,n)})},cn:function(n,i,r){var e=this,t=this.Kn(n);t?(i&&i("scene",t),n.justDecode||(t=this.Zn.get(n.buildingID),i&&i("building",t))):$n.cn(n,function(t){e.Wn.set(n.buildingID,{scene:t}),i&&i("scene",t),n.justDecode||(t=di.In(t),e.Zn.set(n.buildingID,t),i&&i("building",t))},function(t){r&&r("error",t)})},ti:function(t,n,i,r){var e=this.Vn.get(t.buildingID);e||this.Vn.set(t.buildingID,e=[]),r?e.unshift(n):e.push(n),this.zn&&1!=e.length||this.ni(t,i)},ni:function(r,e){var s=this,o=this.Kn(r);if(o){var u=this.Vn.get(r.buildingID),t=this.Yn.get(r.buildingID);if(u&&0!=u.length){var h=u[0];if(t||this.Yn.set(r.buildingID,t=[]),-1!=t.indexOf(h))return u.splice(u.indexOf(h),1),void this.ni(r,e);t.push(h),this.ii(r,h,function(t,n){var i=s.Xn.get(r.buildingID);"layerGroup"==t&&(e&&e(t,n),s.Xn.set(r.buildingID,++i),i==o.layerGroups.length&&e&&e("decode",s.Jn(r)),u.splice(u.indexOf(h),1),s.ni(r,e)),"layer"==t&&e&&e(t,n),"floor"==t&&(e&&e(t,n),i==o.layerGroups.length&&e&&e("complete",s.ri(r)))},function(t,n){e&&e(t,n)})}}},ii:function(r,e,s,n){function i(t){var n,i;h==++f&&(n=a.get("geo"),i=a.get("biz"),c&&c.merge(e,n,i,u.fileVer),s&&s("layerGroup",a),r.justDecode||((t=t.ei(r,e))._n.forEach(function(t){di.Fn(t,n,i,u.fileVer),s&&s("layer",t)}),s&&s("floor",t)))}var o=this,u=this.Kn(r),t=this.si(u,e).gname,h=r.loadNavi?this.qn[1]:this.qn[0],f=0,a=new Map,c=r.merge;this.ln(r,e,t,function(t,n){a.set(t,n),s&&s(t,n),i(o)},function(t){n&&n(t)}),this.vn(r,e,t,function(t,n){a.set(t,n),s&&s(t,n),i(o)},function(t){n&&n(t)}),r.loadNavi&&this.dn(r,e,t,function(t,n){a.set(t,n),s&&s(t,n),i(o)},function(t){n&&n(t)})},ln:function(n,i,t,r,e){var s=this,o=this.oi(n,i,"geo");o?r&&r("geo",o):$n.ln(n,t,function(t){s.ui(n,i,"geo",t),r&&r("geo",t)},function(t){e&&e("error",t)})},vn:function(n,i,t,r,e){var s=this,o=this.oi(n,i,"biz");o?r&&r("biz",o):$n.vn(n,t,function(t){s.ui(n,i,"biz",t),r&&r("biz",t)},function(t){e&&e("error",t)})},dn:function(n,i,t,r,e){var s=this,o=this.oi(n,i,"navi");o?r&&r("navi",o):$n.dn(n,t,function(t){s.ui(n,i,"navi",t),r&&r("navi",t)},function(t){e&&e("error",t)})},Qn:function(t,i){this.an(t,function(t,n){i&&i(t,n)},function(t,n){i&&i(t,n)})},an:function(n,i,r){var e=this,t=this.Jn(n);t?i&&i("decode",t):$n.an(n,function(t){e.fi(n,t),i&&i("decode",e.Jn(n)),n.justDecode||(t=di.Nn(t),e.Zn.set(n.buildingID,t),i&&i("complete",t))},function(t){r&&r("error",t)})},ri:function(t){if(this.Zn){t=this.Zn.get(t.buildingID);return t||null}},ei:function(t,n){t=this.Zn.get(t.buildingID);return t?t._n.get(n):null},fi:function(t,n){var i={scene:null,floors:new Map},r=On.Yt(n);i.scene=r;for(var e=0;e<r.layerGroups.length;e++){var s=r.layerGroups[e],o=On.qt(n,s.gid),u=On.Ht(n,s.gid),h=On.Jt(n,s.gid);t.merge&&t.merge(s.gid,o,u,r.fileVer);var f=new Map;f.set("geo",o),f.set("biz",u),f.set("navi",h),i.floors.set(s.gid,f)}this.Wn.set(t.buildingID,i)},Jn:function(t){var n=this.Wn.get(t.buildingID);if(!n)return null;for(var i=n.scene,r=new Map,n={scene:i,floors:r},e=0;e<i.layerGroups.length;e++){var s=i.layerGroups[e],o=s.gid,u={gid:o,gname:s.gname,level:o,geo:[],biz:[],navi:[]};u.geo.push(this.oi(t,o,"geo")),u.biz.push(this.oi(t,o,"biz")),u.navi.push(this.oi(t,o,"navi")),r.set(s.gid,u)}return n},Kn:function(t){t=this.Wn.get(t.buildingID);return t?t.scene:null},ui:function(t,n,i,r){var e=this.Wn.get(t.buildingID);e&&((t=e.floors)||(t=new Map,e.floors=t),(e=t.get(n))||(e=new Map,t.set(n,e)),e.set(i,r))},oi:function(t,n,i){t=this.Wn.get(t.buildingID);if(!t)return null;t=t.floors;if(!t)return null;n=t.get(n);return n?n.get(i):null},si:function(t,n){if(null==t)return null;for(var i=t.layerGroups,r=0;r<i.length;r++)if(i[r].gid==n)return i[r];return null}});var bi=vn;function pi(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return wi(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?wi(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw e}}}}function wi(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function mi(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function r(t,n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.Bt=Object.assign({tile:!0,isPreview:!1},t),this.ai=!!t.map,this.ci=t.map?t.map.getDataManager():new bi,this.li=n,this.vi=i,this.di()}var t,n,i;return t=r,(n=[{key:"dispose",value:function(){this.Bt=null,this.ai||this.ci.un(),this.ci=null,this.li=null,this.vi=null}},{key:"query",value:function(t,n,i){var r=this.ci.getData(this.Bt);r||i&&i();var e=this.yi(t),s=this.bi(t);s==V.NONE&&i&&i();var o,u=t.Ut,h=u.length,f=[],a=pi(r.getChildren());try{for(a.s();!(o=a.n()).done;){var c=o.value,l=c[0];if(-1!=e.indexOf(l)){var v,d=pi(c[1].getChildren());try{for(d.s();!(v=d.n()).done;){var y=v.value[1];if(0!=(y.getType()&s)){var b,p=pi(y.getChildren());try{for(p.s();!(b=p.n()).done;){var w=b.value[1],m={ut:void 0};this.pi(u,h,w,m)&&f.push(this.wi(l,w,m))}}catch(t){p.e(t)}finally{p.f()}}}}catch(t){d.e(t)}finally{d.f()}}}}catch(t){a.e(t)}finally{a.f()}this.mi(f),n&&n(f)}}])&&mi(t.prototype,n),i&&mi(t,i),r}();Object.assign(y.prototype,{di:function(){var t,i=this;this.ai&&(t=this.Bt.map.getMapOptions(),this.Bt.mapID=t.mapID,this.Bt.appName=t.appName,this.Bt.key=t.key,this.Bt.license=t.license,this.Bt.mapURL=t.mapURL,this.Bt.mapURLAbsolute=t.mapURLAbsolute,this.Bt.isPreview="undefined"!=typeof KjWzhWlSj);var n={buildingID:this.Bt.mapID,appName:this.Bt.appName,key:this.Bt.key,license:this.Bt.license,mapURL:this.Bt.mapURL,mapURLAbsolute:this.Bt.mapURLAbsolute,merge:this.Bt.merge,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj};setTimeout(function(){i.Bt.tile?i.ci.load(n,function(t,n){i._i(t,n)}):i.ci.loadWhole(n,function(t,n){i._i(t,n)})},0)},_i:function(t,n){"error"==t&&this.vi&&this.vi(n),"complete"==t&&this.li&&this.li()},bi:function(t){var n=V.NONE;return 0!=(t.Ft&V.MODEL)&&(n|=V.MODELGROUP),0!=(t.Ft&V.LABEL)&&(n|=V.LABELGROUP),0!=(t.Ft&V.FACILITY)&&(n|=V.FACILITYGROUP),0!=(t.Ft&V.EXTERNALMODEL)&&(n|=V.EXTERNALMODELGROUP),n},yi:function(t){if(Array.isArray(t.Dt))return t.Dt;t=this.ci.getData(this.Bt);if(!t)return[];var n,i=[],r=pi(t.getChildren());try{for(r.s();!(n=r.n()).done;){var e=n.value;i.push(e[1].gid)}}catch(t){r.e(t)}finally{r.f()}return i},pi:function(t,n,i,r){if(0==n)return!0;for(var e=0;e<n;e++){if(!t[e].W(i))return!1;t[e].V(i,r)}return!0},wi:function(t,n,i){return{level:t,type:n.getType(),FID:n.fid,name:n.name,ename:n.ename,eid:n.eid,typeID:n.type,center:void 0!==n.getCenter?Object.assign({z:n.height},n.getCenter()):Object.assign({z:n.height},n.getCoordinates()[0]),distance:i.ut}},mi:function(t){t.sort(function(t,n){return t.level==n.level&&t.type==n.type&&t.distance&&n.distance?t.distance-n.distance:0})}});vn=y;function _i(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function e(t,n,i,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.gi=t,this.xi=n,this.Oi=i||[],this.Ei=r||[]}var t,n,i;return t=e,(n=[{key:"level",get:function(){return this.gi}},{key:"length",get:function(){return this.xi}},{key:"pointList",get:function(){for(var t=[],n=0,i=this.Oi.length;n<i;n++)t.push({x:this.Oi[n].x,y:this.Oi[n].y,level:this.gi});return t}}])&&_i(t.prototype,n),i&&_i(t,i),e}();Object.assign(y.prototype,{un:function(){this.Oi=[],this.Ei=[]}});for(var gi=y,xi=[],Oi=0;Oi<256;Oi++)xi[Oi]=(Oi<16?"0":"")+Oi.toString(16);var Ei=1234567,ji={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(xi[255&t]+xi[t>>8&255]+xi[t>>16&255]+xi[t>>24&255]+"-"+xi[255&n]+xi[n>>8&255]+"-"+xi[n>>16&15|64]+xi[n>>24&255]+"-"+xi[63&i|128]+xi[i>>8&255]+"-"+xi[i>>16&255]+xi[i>>24&255]+xi[255&r]+xi[r>>8&255]+xi[r>>16&255]+xi[r>>24&255]).toUpperCase()},clamp:function(t,n,i){return Math.max(n,Math.min(i,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,i,r,e){return r+(t-n)*(e-r)/(i-n)},lerp:function(t,n,i){return(1-i)*t+i*n},smoothstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*(3-2*t)},smootherstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((Ei=16807*(Ei=void 0!==t?t%2147483647:Ei)%2147483647)-1)/2147483646},degToRad:function(t){return t*ji.DEG2RAD},radToDeg:function(t){return t*ji.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,n,i,r,e){var s=Math.cos,o=Math.sin,u=s(i/2),h=o(i/2),f=s((n+r)/2),a=o((n+r)/2),c=s((n-r)/2),l=o((n-r)/2),v=s((r-n)/2),d=o((r-n)/2);switch(e){case"XYX":t.set(u*a,h*c,h*l,u*f);break;case"YZY":t.set(h*l,u*a,h*c,u*f);break;case"ZXZ":t.set(h*c,h*l,u*a,u*f);break;case"XZX":t.set(u*a,h*d,h*v,u*f);break;case"YXY":t.set(h*v,u*a,h*d,u*f);break;case"ZYZ":t.set(h*d,h*v,u*a,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}}};function Ti(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"isQuaternion",{value:!0}),this.ji=t,this.Ti=n,this.ki=i,this.Mi=r}var t,n,i;return t=e,i=[{key:"slerp",value:function(t,n,i,r){return i.copy(t).slerp(n,r)}},{key:"slerpFlat",value:function(t,n,i,r,e,s,o){var u=i[r+0],h=i[r+1],f=i[r+2],a=i[r+3],c=e[s+0],l=e[s+1],v=e[s+2],d=e[s+3];a===d&&u===c&&h===l&&f===v||(i=1-o,e=0<=(r=u*c+h*l+f*v+a*d)?1:-1,(s=1-r*r)>Number.EPSILON&&(s=Math.sqrt(s),r=Math.atan2(s,r*e),i=Math.sin(i*r)/s,o=Math.sin(o*r)/s),u=u*i+c*(e=o*e),h=h*i+l*e,f=f*i+v*e,a=a*i+d*e,i===1-o&&(u*=o=1/Math.sqrt(u*u+h*h+f*f+a*a),h*=o,f*=o,a*=o)),t[n]=u,t[n+1]=h,t[n+2]=f,t[n+3]=a}},{key:"multiplyQuaternionsFlat",value:function(t,n,i,r,e,s){var o=i[r],u=i[r+1],h=i[r+2],f=i[r+3],a=e[s],i=e[s+1],r=e[s+2],s=e[s+3];return t[n]=o*s+f*a+u*r-h*i,t[n+1]=u*s+f*i+h*a-o*r,t[n+2]=h*s+f*r+o*i-u*a,t[n+3]=f*s-o*a-u*i-h*r,t}}],(n=[{key:"x",get:function(){return this.ji},set:function(t){this.ji=t,this.Ri()}},{key:"y",get:function(){return this.Ti},set:function(t){this.Ti=t,this.Ri()}},{key:"z",get:function(){return this.ki},set:function(t){this.ki=t,this.Ri()}},{key:"w",get:function(){return this.Mi},set:function(t){this.Mi=t,this.Ri()}},{key:"set",value:function(t,n,i,r){return this.ji=t,this.Ti=n,this.ki=i,this.Mi=r,this.Ri(),this}},{key:"clone",value:function(){return new this.constructor(this.ji,this.Ti,this.ki,this.Mi)}},{key:"copy",value:function(t){return this.ji=t.x,this.Ti=t.y,this.ki=t.z,this.Mi=t.w,this.Ri(),this}},{key:"setFromEuler",value:function(t,n){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t.ji,r=t.Ti,e=t.ki,s=t.Ai,o=Math.cos,t=Math.sin,u=o(i/2),h=o(r/2),f=o(e/2),a=t(i/2),c=t(r/2),l=t(e/2);switch(s){case"XYZ":this.ji=a*h*f+u*c*l,this.Ti=u*c*f-a*h*l,this.ki=u*h*l+a*c*f,this.Mi=u*h*f-a*c*l;break;case"YXZ":this.ji=a*h*f+u*c*l,this.Ti=u*c*f-a*h*l,this.ki=u*h*l-a*c*f,this.Mi=u*h*f+a*c*l;break;case"ZXY":this.ji=a*h*f-u*c*l,this.Ti=u*c*f+a*h*l,this.ki=u*h*l+a*c*f,this.Mi=u*h*f-a*c*l;break;case"ZYX":this.ji=a*h*f-u*c*l,this.Ti=u*c*f+a*h*l,this.ki=u*h*l-a*c*f,this.Mi=u*h*f+a*c*l;break;case"YZX":this.ji=a*h*f+u*c*l,this.Ti=u*c*f+a*h*l,this.ki=u*h*l-a*c*f,this.Mi=u*h*f-a*c*l;break;case"XZY":this.ji=a*h*f-u*c*l,this.Ti=u*c*f-a*h*l,this.ki=u*h*l+a*c*f,this.Mi=u*h*f+a*c*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==n&&this.Ri(),this}},{key:"setFromAxisAngle",value:function(t,n){var i=n/2,n=Math.sin(i);return this.ji=t.x*n,this.Ti=t.y*n,this.ki=t.z*n,this.Mi=Math.cos(i),this.Ri(),this}},{key:"setFromRotationMatrix",value:function(t){var n,i=t.elements,r=i[0],e=i[4],s=i[8],o=i[1],u=i[5],h=i[9],f=i[2],a=i[6],t=i[10],i=r+u+t;return 0<i?(i=.5/Math.sqrt(i+1),this.Mi=.25/i,this.ji=(a-h)*i,this.Ti=(s-f)*i,this.ki=(o-e)*i):u<r&&t<r?(n=2*Math.sqrt(1+r-u-t),this.Mi=(a-h)/n,this.ji=.25*n,this.Ti=(e+o)/n,this.ki=(s+f)/n):t<u?(n=2*Math.sqrt(1+u-r-t),this.Mi=(s-f)/n,this.ji=(e+o)/n,this.Ti=.25*n,this.ki=(h+a)/n):(u=2*Math.sqrt(1+t-r-u),this.Mi=(o-e)/u,this.ji=(s+f)/u,this.Ti=(h+a)/u,this.ki=.25*u),this.Ri(),this}},{key:"setFromUnitVectors",value:function(t,n){var i=t.dot(n)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.ji=-t.y,this.Ti=t.x,this.ki=0):(this.ji=0,this.Ti=-t.z,this.ki=t.y)):(this.ji=t.y*n.z-t.z*n.y,this.Ti=t.z*n.x-t.x*n.z,this.ki=t.x*n.y-t.y*n.x),this.Mi=i,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(ji.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,n){var i=this.angleTo(t);if(0===i)return this;i=Math.min(1,n/i);return this.slerp(t,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.ji*=-1,this.Ti*=-1,this.ki*=-1,this.Ri(),this}},{key:"dot",value:function(t){return this.ji*t.ji+this.Ti*t.Ti+this.ki*t.ki+this.Mi*t.Mi}},{key:"lengthSq",value:function(){return this.ji*this.ji+this.Ti*this.Ti+this.ki*this.ki+this.Mi*this.Mi}},{key:"length",value:function(){return Math.sqrt(this.ji*this.ji+this.Ti*this.Ti+this.ki*this.ki+this.Mi*this.Mi)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.ji=0,this.Ti=0,this.ki=0,this.Mi=1):(this.ji=this.ji*(t=1/t),this.Ti=this.Ti*t,this.ki=this.ki*t,this.Mi=this.Mi*t),this.Ri(),this}},{key:"multiply",value:function(t,n){return void 0!==n?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,n){var i=t.ji,r=t.Ti,e=t.ki,s=t.Mi,o=n.ji,u=n.Ti,t=n.ki,n=n.Mi;return this.ji=i*n+s*o+r*t-e*u,this.Ti=r*n+s*u+e*o-i*t,this.ki=e*n+s*t+i*u-r*o,this.Mi=s*n-i*o-r*u-e*t,this.Ri(),this}},{key:"slerp",value:function(t,n){if(0===n)return this;if(1===n)return this.copy(t);var i=this.ji,r=this.Ti,e=this.ki,s=this.Mi,o=s*t.Mi+i*t.ji+r*t.Ti+e*t.ki;if(o<0?(this.Mi=-t.Mi,this.ji=-t.ji,this.Ti=-t.Ti,this.ki=-t.ki,o=-o):this.copy(t),1<=o)return this.Mi=s,this.ji=i,this.Ti=r,this.ki=e,this;t=1-o*o;if(t<=Number.EPSILON){var u=1-n;return this.Mi=u*s+n*this.Mi,this.ji=u*i+n*this.ji,this.Ti=u*r+n*this.Ti,this.ki=u*e+n*this.ki,this.normalize(),this.Ri(),this}u=Math.sqrt(t),t=Math.atan2(u,o),o=Math.sin((1-n)*t)/u,u=Math.sin(n*t)/u;return this.Mi=s*o+this.Mi*u,this.ji=i*o+this.ji*u,this.Ti=r*o+this.Ti*u,this.ki=e*o+this.ki*u,this.Ri(),this}},{key:"equals",value:function(t){return t.ji===this.ji&&t.Ti===this.Ti&&t.ki===this.ki&&t.Mi===this.Mi}},{key:"fromArray",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.ji=t[n],this.Ti=t[n+1],this.ki=t[n+2],this.Mi=t[n+3],this.Ri(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[n]=this.ji,t[n+1]=this.Ti,t[n+2]=this.ki,t[n+3]=this.Mi,t}},{key:"fromBufferAttribute",value:function(t,n){return this.ji=t.getX(n),this.Ti=t.getY(n),this.ki=t.getZ(n),this.Mi=t.getW(n),this}}])&&Ti(t.prototype,n),i&&Ti(t,i),e}();function ki(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.assign(y.prototype,{Si:function(t){return this.Ri=t,this},Ri:function(){}});var Mi=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=n,this.z=i}var t,n,i;return t=r,(n=[{key:"set",value:function(t,n,i){return void 0===i&&(i=this.z),this.x=t,this.y=n,this.z=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}},{key:"addScaledVector",value:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}},{key:"sub",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}},{key:"multiply",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ai.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,n){return this.applyQuaternion(Ai.setFromAxisAngle(t,n))}},{key:"applyMatrix3",value:function(t){var n=this.x,i=this.y,r=this.z,t=t.elements;return this.x=t[0]*n+t[3]*i+t[6]*r,this.y=t[1]*n+t[4]*i+t[7]*r,this.z=t[2]*n+t[5]*i+t[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var n=this.x,i=this.y,r=this.z,e=t.elements,t=1/(e[3]*n+e[7]*i+e[11]*r+e[15]);return this.x=(e[0]*n+e[4]*i+e[8]*r+e[12])*t,this.y=(e[1]*n+e[5]*i+e[9]*r+e[13])*t,this.z=(e[2]*n+e[6]*i+e[10]*r+e[14])*t,this}},{key:"applyQuaternion",value:function(t){var n=this.x,i=this.y,r=this.z,e=t.x,s=t.y,o=t.z,u=t.w,h=u*n+s*r-o*i,f=u*i+o*n-e*r,t=u*r+e*i-s*n,r=-e*n-s*i-o*r;return this.x=h*u+r*-e+f*-o-t*-s,this.y=f*u+r*-s+t*-e-h*-o,this.z=t*u+r*-o+h*-s-f*-e,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var n=this.x,i=this.y,r=this.z,t=t.elements;return this.x=t[0]*n+t[4]*i+t[8]*r,this.y=t[1]*n+t[5]*i+t[9]*r,this.z=t[2]*n+t[6]*i+t[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}},{key:"clampScalar",value:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}},{key:"clampLength",value:function(t,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}},{key:"lerpVectors",value:function(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this}},{key:"cross",value:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,n){var i=t.x,r=t.y,e=t.z,s=n.x,t=n.y,n=n.z;return this.x=r*n-e*t,this.y=e*s-i*n,this.z=i*t-r*s,this}},{key:"projectOnVector",value:function(t){var n=t.lengthSq();if(0===n)return this.set(0,0,0);n=t.dot(this)/n;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return Ri.copy(this).projectOnVector(t),this.sub(Ri)}},{key:"reflect",value:function(t){return this.sub(Ri.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;n=this.dot(t)/n;return Math.acos(ji.clamp(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var n=this.x-t.x,i=this.y-t.y,t=this.z-t.z;return n*n+i*i+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,n,i){var r=Math.sin(n)*t;return this.x=r*Math.sin(i),this.y=Math.cos(n)*t,this.z=r*Math.cos(i),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,n){return this.fromArray(t.elements,4*n)}},{key:"setFromMatrix3Column",value:function(t,n){return this.fromArray(t.elements,3*n)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,n,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}])&&ki(t.prototype,n),i&&ki(t,i),r}(),Ri=new Mi,Ai=new y,Si={NaviNodeType_NULL:-1,NaviNodeType_COMMON:0,NaviNodeType_SIDE:1,NaviNodeType_FLOOR:2,NaviNodeType_EXTENT:3,NaviLiftType_NULL:0,NaviLiftType_Lift:1,NaviLiftType_Stair:2,NaviLiftType_Escalator:3,NaviLiftType_Accessible:4,NaviLiftEntry_BOTH:0,NaviLiftEntry_UP:1,NaviLiftEntry_DOWN:2,NaviLiftEntry_FORBID:3,NaviEntranceType_NULL:0,NaviEntranceType_EXIT:1,NaviEntranceType_ENTRANCE:2,NaviEntranceType_ACCESS:3,NaviRoadRank_MAIN:1,NaviRoadRank_MINOR:2,NaviRoadRank_NARROW:3,NaviRoadEntry_BOTH:0,NaviRoadEntry_FORWARD:1,NaviRoadEntry_BACK:2,NaviRoadEntry_FORBID:3,NaviRoadPass_NULL:-1,NaviRoadPass_NOT_THROUGH:0,NaviRoadPass_THROUGH:1,NaviZoneType_NULL:-1,NaviZoneType_PASS_UNRESTRAINT:0,NaviZoneType_PASS_THROUGH:1,NaviZoneType_PASS_NOT_THROUGH:2,NaviZoneType_NO_ENTRY:3,NaviZoneType_CORRIDOR:4,NaviModelPassType_PASS_THROUGH:0,NaviModelPassType_PASS_NOT_THROUGH:1,NaviModelPassType_NOT_PASS:2,NaviModelPassType_DECORATE:3,NaviRoadHinderType_HINDER_GENERAL:0,NaviRoadHinderType_HINDER_HIGH:1,NaviObstructType_MODEL:0,NaviObstructType_EXTENT:1};y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.gn=0,this.Ni={},this.Ft=0,this.Ii=[],this.Li=[],this.Pi=0,this.Di=[],this.Fi=!1,this.Ci=!1,this.Ui=0,this.Bi=!1,this.Gi=[]};Object.assign(y.prototype,{set Zi(t){-1!=t&&(this.Ft|=t)},get Zi(){return 3&this.Ft},set Wi(t){this.Ft|=t<<2},get Wi(){return this.Ft>>2&7},set Vi(t){this.Ft|=t<<5},get Vi(){return this.Ft>>5&3},set Yi(t){this.Ft|=t<<7},get Yi(){return this.Ft>>7&3},set Xi(t){this.Ft|=t<<9},get Xi(){return this.Ft>>9&3},di:function(t){this.gn=t,this.Ni={x:0,y:0},this.Ft=0,this.Pi=0,this.Fi=!1,this.Ci=!1},qi:function(t){return this.gn==t.gn},zi:function(t){this.gn=t.gn,this.Ni=Object.assign({},t.Ni),this.Ft=t.Ft,this.Ii=[];for(var n=0;n<t.Ii.length;n++)this.Ii[n]=t.Ii[n];this.Li=[];for(var i=0;i<t.Li.length;i++)this.Li[i]=t.Li[i];this.Pi=t.Pi,this.Di=[];for(var r=0;r<t.Di.length;r++)this.Di[r]=t.Di[r];this.Fi=t.Fi,this.Ci=t.Ci},Hi:function(){return this.Ii.length},Qi:function(){return this.Li.length},Ji:function(t){if(this.Wi==Si.NaviLiftType_Stair)return!0;for(var n=this.Ii.length-1;0<=n;n--)if(this.Ii[n]==t)return!0;return!1}});var Ni=y;function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Li(t,n){return(Li=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Pi(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=Di(i);return function(t,n){{if(n&&("object"===Ii(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=Di(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function Di(t){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fi=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Li(t,n)}(i,Ni);var n=Pi(i);function i(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this)).$i=0,t.gi=0,t.Ki=null,t.Ui=0,t.tr=null,t.Wi=null,t}return i}();y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.gn=0,this.nr=-1,this.ir={},this.rr=-1,this.er={},this.xi=0,this.Ft=0,this.sr=[],this.or=-1,this.ur=!1,this.hr=0};Object.assign(y.prototype,{set fr(t){this.Ft|=t},get fr(){return 3&this.Ft},set ar(t){this.Ft|=t<<2},get ar(){return this.Ft>>2&3},set Xi(t){this.Ft|=t<<4},get Xi(){return this.Ft>>4&3},set cr(t){t?this.Ft|=16:this.Ft&=-17},get cr(){return 16&this.Ft?1:0},lr:function(t){this.gn=t.gn,this.nr=t.nr,this.ir=Object.assign({},t.ir),this.rr=t.rr,this.er=Object.assign({},t.er),this.xi=t.xi,this.Ft=t.Ft,this.sr=[],this.or=t.or;for(var n=0;n<t.sr.xi;n++)this.sr[n]=t.sr[n]},vr:function(){this.xi=pt.distanceOfTwoPoints(this.ir,this.er)},dr:function(){var t=this.ir.x-this.er.x,n=this.ir.y-this.er.y;this.xi=Math.abs(t)+Math.abs(n)},yr:function(){var t={};return t.x=(this.ir.x+this.er.x)/2,t.y=(this.ir.y+this.er.y)/2,t}});var Ci=y;function Ui(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function e(t,n,i,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.gn=t,this.gi=n,this.Ft=i,this.br=r,this.pr=r&&r.length?r.length-1:0,this.gi=-1,this.wr=0,this.mr=null,this._r=null,this.gr=[],this.xr=[],this.Or=null,this.St=new _t,this.St.kt(this.br)}var t,n,i;return t=e,(n=[{key:"_pass",get:function(){return 3&this.Ft},set:function(t){this.Ft|=t}},{key:"_area",get:function(){return null==this.Or&&(this.Or=pt.vt(this.br,this.pr)),this.Or}}])&&Ui(t.prototype,n),i&&Ui(t,i),e}();Object.assign(y.prototype,{Er:function(t){return!!pt.rt(t,this.St.Ot,this.St.Et)&&pt.st(this.br,t,this.pr)},dt:function(t,n){for(var i={},r=0;r<this.pr;r++){var e=this.br[r],s=this.br[(r+1)%this.pr];if(1==pt.dt(e,s,t,n,i))break}return i}});var Bi=y;function Gi(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function o(t,n,i,r,e,s){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,o),this.gn=t,this.jr="",this.br=r,this.pr=r&&r.length?r.length-1:0,this.Mt=e,this.Tr=s,this.Ft=i,this.gi=n,this.kr=[],this.Mr=[],this.Rr=[],this.mr=null,this._r=null,this.gr=[],this.Ar=0,this.wr=0,this.Or=null,this.Sr=!1,this.St=new _t,this.St.kt(this.br)}var t,n,i;return t=o,(n=[{key:"pass",get:function(){return 3&this.Ft},set:function(t){this.Ft|=t}},{key:"area",get:function(){return null==this.Or&&(this.Or=pt.vt(this.br,this.pr)),this.Or}}])&&Gi(t.prototype,n),i&&Gi(t,i),o}();Object.assign(y.prototype,{Er:function(t){return pt.st(t,this.br,this.pr)},Nr:function(){var t=new Bi(this.Sr?-this.gn:this.gn,this.gi,this.Ft,this.br);return t.Ir=this.Ir,t.Ar=this.Ar,t.wr=this.wr,t}});var Zi=y;function Wi(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return Vi(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Vi(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw e}}}}function Vi(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function Yi(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xi=function(){function e(t,n,i,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.gi=0,this.Ft=r,this.Lr=t,this.Pr=n,this.Dr=[],this.Fr=[],this.Cr=[],this.Ur=[],this.Br=new Map,this.Gr=[],this.Zr=new Map,this.Wr=new Map,this.Vr=i,this.Yr=[],this.Xr=new Map,this.qr=new Map,this.zr=0,this.Hr=0,this.Qr(),this.di()}var t,n,i;return t=e,(n=[{key:"queryContainExtentID",value:function(t){return this.Jr(t)}}])&&Yi(t.prototype,n),i&&Yi(t,i),e}();Object.assign(Xi.prototype,{un:function(){this.Lr=null,this.Pr=null,this.Dr=null,this.Fr=null,this.Cr=null,(this.Ur=null)!=this.Br&&(this.Br.clear(),this.Br=null),null!=this.Zr&&(this.Zr.clear(),this.Zr=null),(this.Gr=null)!=this.Wr&&(this.Wr.clear(),this.Wr=null),(this.Yr=null)!=this.Xr&&(this.Xr.clear(),this.Xr=null),null!=this.qr&&(this.qr.clear(),this.qr=null)},$r:function(t){for(var n,i,r=Number.MAX_VALUE,e=0;e<this.Pr.length;e++)0!=this.needVertex&&(n=this.Pr[e],1==t?r=n.xi:2==t&&(r=n.xi*n.fr),(i=n.ar)!=Si.NaviRoadEntry_BOTH&&i!=Si.NaviRoadEntry_FORWARD||(this.Gr[n.nr][n.rr]=r),i!=Si.NaviRoadEntry_BOTH&&i!=Si.NaviRoadEntry_BACK||(this.Gr[n.rr][n.nr]=r))},Kr:function(){return 0==this.Lr.length||0==this.Pr.length},$n:function(){for(var t=0;t<this.Lr.length;t++)this.Lr[t].Fi=!1;if(1==this.Vr)for(var n=this.Lr.length+1,i=0;i<n;i++)for(var r=0;r<n;r++)void 0!==this.Gr[i]&&void 0!==this.Gr[i][r]&&(this.Gr[i][r]=Number.MAX_VALUE)},te:function(){this.Ur=[];for(var t=0;t<this.Fr.length;t++){var n=this.Fr[t].toZone();this.Ur.push(n)}for(var i=0;i<this.Dr.length;i++){var r=this.Fr[i].toZone();this.Ur.push(r)}},ne:function(t){for(var n=0;n<this.Ur.length;n++){var i=this.Ur[n];if(i&&i.gn==t)return i}return null},ie:function(t){for(var n=0;n<this.Ur.length;n++){var i=this.Ur[n];if(i&&1==i.contain(t))return i}return null},re:function(){},ee:function(t,n){var i=null;if(this.Lr.length<=0||this.Pr.length<=0)return i;for(var r=[],e=0,s=this.Lr.length;e<s;e++){var o=this.Lr[e],u=o.entranceType;u!=n&&u!=Si.NaviEntranceType_ACCESS||((u=new{}).node=o,u.distance=pt.ut(t,o.Ni),r.push(u))}return 0==r.length?i:i=(r=r.sort(this.se))[0].node.Ni},oe:function(t){var n=[];if(this.Lr.length<=0||this.Pr.length<=0)return n;for(var i=0,r=this.Lr.length;i<r;i++){var e=this.Lr[i],s=e.entranceType;s!=t&&s!=Si.NaviEntranceType_ACCESS||n.push(e.Ni)}return n},ue:function(t,n){if(this.Lr.length<=0||this.Pr.length<=0)return!1;if(t.gn==n.gn)return!0;this.he();var i=[];i.push(t.gn);var r,e;for(o=0;o!=i.length;)for(var s=o,o=i.length,u=s;u<i.length;u++)for(var h=0;h<this.Pr.length;h++)if(1!=this.Yr[h]){if(e=(r=this.Pr[h]).ar,r.nr==i[u]&&(e==Si.NaviRoadEntry_BOTH||e==Si.NaviRoadEntry_FORWARD)){if(r.rr==n.gn)return!0;i.push(r.rr),this.Yr[h]=!0}if(r.rr==i[u]&&(e==Si.NaviRoadEntry_BOTH||e==Si.NaviRoadEntry_BACK)){if(r.nr==n.gn)return!0;i.push(r.nr),this.Yr[h]=!0}}return!1},fe:function(t,n,i,r){if(this.Lr.length<=0||this.Pr.length<=0)return[];var e=this.Jr(t);if(0==e)return!1;for(var s=[],o=0;o<this.Lr.length;o++){var u=this.Lr[o],h=this.Jr(u.Ni);!u.contansFloor(n)||h!=e&&0!=e||((h={}).node=u,h.distance=pt.ut(t,u.Ni),h.distance=parseFloat(h.distance).toFixed(4),s.push(h))}if(!s||0==s.length)return[];for(var s=s.sort(this.se),f=0;f<s.length;f++)i[f]=new Ni,i[f].setNode(s[f].node),r[f]=parseFloat(s[f].distance);return i},ae:function(t,n){if(!this.Lr||this.Lr.length<=0||!this.Pr||this.Pr.length<=0)return!1;for(var i=0;i<this.Lr.length;i++){var r=this.Lr[i];if(r.Zi==Si.NaviNodeType_FLOOR)if(r.Pi==t)return n.setNode(r),!0}return!1},ce:function(t,n){if(!this.Lr||this.Lr.length<=0||!this.Pr||this.Pr.length<=0)return!1;for(var i=0;i<this.Lr.length;i++){var r=this.Lr[i];r.Wi==t&&(n[i]=r)}return 0!=n.length},Jr:function(t){if(0==this.Fr.length||!t)return 0;for(var n=0,i=this.Fr.length;n<i;n++){var r=this.Fr[n];if(r.Er(t))return r.gn}return 0},le:function(t,n){if(0==this.Cr.length||!t||!n)return!1;for(var i=0;i<this.Cr.length;i++)if(this.Cr[i].isCross(t,n))return!0;return!1},ve:function(t,n,i,r,e){var s=Number.MAX_VALUE,o={};new Ni;if(this.Lr.length<=0||this.Pr.length<=0)return!1;var u=this.Jr(t);if(0==u)return!1;for(var h=0,f=this.Pr.length;h<f;h++){var a,c=this.Pr[h];c&&u==this.Jr(c.ir)&&(a=pt.at(t,c.ir,c.er,o),this.le(o,t)||a<s&&(s=a,n.lr(c),r.x=o.x,r.y=o.y))}if(!n||n.ar==Si.NaviRoadEntry_FORBID)return!1;for(var l=n.ar==Si.NaviRoadEntry_BACK||n.ar!=Si.NaviRoadEntry_FORWARD&&pt.ut(n.ir,r)<=pt.ut(n.er,r)?n.nr:n.rr,v=0;v<this.Lr.length;v++){var d=this.Lr[v];if(d.gn==l){i.zi(d);break}}return!0},de:function(t,n,i,r){var e=Number.MAX_VALUE,s={};new Ni;if(this.Lr.length<=0||this.Pr.length<=0)return!1;var o=this.Jr(t);if(0==o)return!1;for(var u=0;u<this.Pr.length;u++){var h,f=this.Pr[u];Si.NaviRoadEntry_BOTH==f.ar&&(o!=this.Jr(f.ir)&&0!=o||(h=pt.at(t,f.ir,f.er,s),this.le(s,t)||h<e&&(e=h,n.setRoad(f),r.x=s.x,r.y=s.y)))}if(-1==n.gn)return!1;for(var a=pt.ut(n.ir,r)<=pt.ut(n.er,r)?n.nr:n.rr,c=0;c<this.Lr.length;c++){var l=this.Lr[c];if(l.gn==a){i.zi(l);break}}return-1!=i.gn},Qr:function(){this.zr=0;for(var t=this.Hr=0;t<this.Pr.length;)null==this.Pr[t]?this.Pr.splice(t,1):(this.Pr[t].gn>this.Hr&&(this.Hr=this.Pr[t].gn),t++);for(var n=0;n<this.Lr.length;)null==this.Lr[n]?this.Lr.splice(n,1):(this.Lr[n].gn>this.zr&&(this.zr=this.Lr[n].gn),n++)},ye:function(t){t=this.Xr.get(t);return void 0===t?null:t},be:function(t){t=this.qr.get(t);return void 0===t?null:t},pe:function(t){for(var n=Number.MAX_VALUE,i=null,r=0;r<this.Fr.length;++r){var e=this.Fr[r];e.contain(t)&&e.area<n&&(n=cur_area,i=e)}for(var s=0;s<this.Dr.size();++s){var o=this.Dr[s];o.contain(t)&&o.area<n&&(n=cur_area,i=o)}return i||null},we:function(t){for(var n=Number.MAX_VALUE,i=null,r=0;r<this.Dr.length;++r){var e=this.Dr[r];e.Er(t)&&e.area<n&&(n=e.area,i=e)}return i||null},me:function(){return++this.zr},_e:function(){return++this.Hr},ge:function(t){this.zr=t},xe:function(t){this.Hr=t},Oe:function(){for(var t=0;t<this.Lr.length;t++){var n=this.Lr[t];n&&this.Xr.set(n.gn,t)}},Ee:function(){for(var t=0;t<this.Pr.length;t++){var n=this.Pr[t];n&&this.qr.set(n.gn,t)}},je:function(){var t,n=Wi(this.Xr);try{for(n.s();!(t=n.n()).done;)t.value[1].Gi=[]}catch(t){n.e(t)}finally{n.f()}},Te:function(){var e=this;this.Zr.clear();for(var t=0;t<this.Pr.length;t++)(function(t){var n=e.Pr[t];if(null==n)return;var i,r=n.ar;Si.NaviRoadEntry_BOTH!=r&&Si.NaviRoadEntry_FORWARD!=r||(t=n.nr,(i=e.Zr.get(t))||e.Zr.set(t,i=[]),null==i.find(function(t){return t.ke==n.rr})&&i.push({ke:n.rr,xi:n.xi})),Si.NaviRoadEntry_BOTH!=r&&Si.NaviRoadEntry_BACK!=r||(i=n.rr,(r=e.Zr.get(i))||e.Zr.set(i,r=[]),null==r.find(function(t){return t.ke==n.nr})&&r.push({ke:n.nr,xi:n.xi}))})(t)},Me:function(t){for(var n=9;n<this.Lr.length;n++)if(this.Lr[n].gn==t)return n;return-1},Re:function(t){for(var n=9;n<this.Pr.length;n++)if(this.Pr[n].gn==t)return n;return-1},Ae:function(e){for(var s=[],o=this.Pr,t=0;t<o.length;t++)!function(t){var i=o[t].ir,n=o[t].er,r=[];pt.segCrossPolygon(i,n,e,r)?(r.sort(function(t,n){return pt.ut(i,t)-pt.ut(i,n)}),s.push({road:o[t],crss:r})):pt.st(i,e,e.length-1)&&s.push({road:o[t],crss:[]})}(t);return s},Se:function(t){for(var n=null,i=1/0,r=0;r<this.Dr.length;r++){var e=this.Dr[r];pt.st(t,e.br,e.pr)&&i>pt.vt(e.br)&&(i=pt.vt((n=e).br))}return n},Ne:function(t){for(var n=-1,i=0;i<this.Ur.length;i++){var r=this.Ur[i];if(pt.st(t,r.br,r.pr)){n=r.gn;break}}return n},Ie:function(){var t=this.Dr.length,t=parseInt(Math.random()*t);return this.Dr[t]},di:function(){if(1==this.Vr)for(var t,n=0;n<this.Pr.length;n++)t=this.Pr[n],void 0===this.Gr[t.nr]&&(this.Gr[t.nr]=new Array),this.Gr[t.nr][t.rr]=Number.MAX_VALUE,void 0===this.Gr[t.rr]&&(this.Gr[t.rr]=new Array),this.Gr[t.rr][t.nr]=Number.MAX_VALUE;for(var i=0;i<this.Pr.length;i++)this.Yr[i]=!1},he:function(){for(var t=0;t<this.Yr.length;t++)this.Yr[t]=!1},se:function(t,n){return parseFloat(t.distance)-parseFloat(n.distance)},Le:function(){for(var t=[],n=0;n<this.Lr.length;n++){var i=this.Lr[n];i.Wi==Si.NaviLiftType_Lift&&t.push(i)}return t},Pe:function(t){for(var n=0;n<this.Lr.length;n++)if(this.Lr[n].Pi==t)return this.Lr[n];return null},De:function(){for(var t=[],n=0;n<this.Lr.length;n++){var i=this.Lr[n];i.Wi!=Si.NaviLiftType_NULL&&t.push(i)}return t},Fe:function(t){for(var n=null,i=0;i<this.Fr.length;i++)if(t==this.Fr[i].gn){n=this.Fr[i];break}if(!n)return null;for(var r=[],e=0;e<this.Lr.length;e++){var s=this.Lr[e];pt.st(s.Ni,n.br,n.pr)&&r.push(s)}for(var o=[],u=0;u<this.Pr.length;u++){var h=this.Pr[u];pt.st(h.ir,n.br,n.pr)&&o.push(h)}for(var f=[],a=0;a<this.Dr.length;a++){var c=this.Dr[a];pt.st(c.Mt,n.br,n.pr)&&f.push(c)}var l=new Xi(r,o,!0,1);return l.Dr=f,l.Fr=[n],l}});var qi=Xi;function zi(t){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t){return function(t){if(Array.isArray(t))return Qi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return Qi(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qi(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qi(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function Ji(t,n){return(Ji=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function $i(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=Ki(i);return function(t,n){{if(n&&("object"===zi(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=Ki(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function Ki(t){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}y=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Ji(t,n)}(i,Ni);var n=$i(i);function i(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this)).gi=0,t.or=0,t.Ce=[],t.Ki=null,t.Ue=15,t.Be=8,t}return i}();Object.assign(y.prototype,{Ge:function(t,n){if(!t)return[];for(var i=[],r=0;r<this.Ce.length;r++){var e=this.Ce[r];t==e.Wi&&(n&&(e.Ui=e.Ui+n),i.push(e))}return i},Ze:function(t,n,i,r){this.Ki=t;var e=[];e.push.apply(e,Hi(this.Ce));for(var s=0;s<e.length;s++){var o=e[s];o.Ui=pt.distanceOfTwoPoints(i,o.Ni)+pt.distanceOfTwoPoints(o.Ni,n)}return this.We(e,r)},We:function(t,n){if(n==p.PRIORITY_LIFTFIRST1){var i=this.Ve.bind(this);t.sort(i)}else if(n==p.PRIORITY_ESCALATORFIRST1){var r=this.Ye.bind(this);t.sort(r)}else if(n!=p.PRIORITY_STAIRFIRST1){r=this.Xe.bind(this);t.sort(r)}else{this.qe(t,n);for(var e=[],s=0;s<t.length;s++)t[s].Ui&&e.push(t[s]);(t=[]).push.apply(t,e);n=this.ze.bind(this);t.sort(n)}return t},Ve:function(t,n){if(t.zone!=n.zone){if(this.Ki==t.zone)return-1;if(this.Ki==n.zone)return 1}return t.Wi!=Si.NaviLiftType_Lift&&t.Wi!=Si.NaviLiftType_Accessible||n.Wi!=Si.NaviLiftType_Lift&&n.Wi!=Si.NaviLiftType_Accessible?t.Wi==Si.NaviLiftType_Lift||t.Wi==Si.NaviLiftType_Accessible?-1:n.Wi==Si.NaviLiftType_Lift||n.Wi==Si.NaviLiftType_Accessible?1:t.Ui-n.Ui:t.Ui<n.Ui},Ye:function(t,n){if(t.zone!=n.zone){if(this.Ki==t.zone)return-1;if(this.Ki==n.zone)return 1}return t.Wi==Si.NaviLiftType_Escalator&&n.Wi==Si.NaviLiftType_Escalator?t.Ui<n.Ui:t.Wi==Si.NaviLiftType_Escalator?-1:n.Wi==Si.NaviLiftType_Escalator?1:t.Ui-n.Ui},Xe:function(t,n){if(t.zone!=n.zone){if(this.Ki==t.zone)return-1;if(this.Ki==n.zone)return 1}return t.Wi==Si.NaviLiftType_Stair&&n.Wi==Si.NaviLiftType_Stair?t.Ui<n.Ui:t.Wi==Si.NaviLiftType_Stair?-1:n.Wi==Si.NaviLiftType_Stair?1:t.Ui-n.Ui},ze:function(t,n){if(t.zone!=n.zone){if(this.Ki==t.zone)return-1;if(this.Ki==n.zone)return 1}return t.Ui-n.Ui},qe:function(t,n){if(n==p.PRIORITY_DEFAULT)for(var i=0;i<t.length;i++)t[i].Wi==Si.NaviLiftType_Escalator?t[i].Ui-=this.Ue:t[i].Wi!=Si.NaviLiftType_Lift&&t[i].Wi!=Si.NaviLiftType_Accessible||(t[i].Ui-=this.Be);else if(n==p.PRIORITY_STAIRFIRST)for(var r=0;r<t.length;r++)t[r].Wi==Si.NaviLiftType_Stair?t[r].Ui-=this.Ue:t[r].Wi==Si.NaviLiftType_Escalator&&(t[r].Ui-=this.Be);else if(n==p.PRIORITY_ESCALATORFIRST)for(var e=0;e<t.length;e++)t[e].Wi==Si.NaviLiftType_Escalator?t[e].Ui-=this.Ue:t[e].Wi!=Si.NaviLiftType_Lift&&t[e].Wi!=Si.NaviLiftType_Accessible||(t[e].Ui-=this.Be);else if(n==p.PRIORITY_LIFTFIRST)for(var s=0;s<t.length;s++)t[s].Wi==Si.NaviLiftType_Lift||t[s].Wi==Si.NaviLiftType_Accessible?t[s].Ui-=this.Ue:t[s].Wi==Si.NaviLiftType_Escalator&&(t[s].Ui-=this.Be);else if(n==p.PRIORITY_STAIRONLY)for(var o=0;o<t.length;o++)t[o].Wi!=Si.NaviLiftType_Stair&&(t[o].Ui=null);else if(n==p.PRIORITY_ESCALATORONLY)for(var u=0;u<t.length;u++)t[u].Wi!=Si.NaviLiftType_Escalator&&(t[u].Ui=null);else if(n==p.PRIORITY_LIFTONLY)for(var h=0;h<t.length;h++)t[h].Wi!=Si.NaviLiftType_Lift&&t[h].Wi!=Si.NaviLiftType_Accessible&&(t[h].Ui=null);else if(n==p.PRIORITY_ACCESSIBLEONLY)for(var f=0;f<t.length;f++)t[f].Wi!=Si.NaviLiftType_Accessible&&(t[f].Ui=null)}});var tr=y;y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.He=null};Object.assign(y.prototype,{un:function(){this.He=null},Qe:function(t){this.He=t},Je:function(t,n){var i=null;return 0==n?i=ni.yn(t):1==n?i=ni.bn(t):2==n&&(i=ni.pn(t)),{points:i[0],holes:i.slice(1)}},$e:function(t,n,i){var r=null;return 0==i?r=Kn.yn(t,n):1==i?r=Kn.bn(t,n):2==i&&(r=Kn.pn(t,n)),{points:r[0],holes:r.slice(1)}},Ke:function(t){if(t&&"string"!=typeof t)for(var n in t){var i=t[n];if("vertices"==n||"vertex"==n)for(var r in i)r%2==0&&(i[r]=-i[r]);else"scene_data"==n?(i.x=-i.x,i.defCenX=-i.defCenX):this.Ke(i)}},ts:function(t){if(""==t||!t)return[];var n=[],i=t,t=[];return 0<=i.indexOf("|")||0<=i.indexOf("-")||0<=i.indexOf(",")?(t=i.split(/[|,-]/),n.push.apply(n,t)):n.push(i),n},ns:function(t,n,i,r){for(var e={},s=[],o=[],u=[],h=[],f=[],a=this.He.fileVer,c=0,l=n.extentLayer.length;c<l;c++){var v=n.extentLayer[c],d=null,d=1===a?this.Je(v.geo,2):this.$e(v.idxs,v.pts,2);v.geoArr=d.points,v.holes=d.holes,o.push(v)}for(var y=0,b=n.labelLayer.length;y<b;y++)e[n.labelLayer[y].eid]=n.labelLayer[y];for(var p=0,w=n.modelLayer.length;p<w;p++){var m=n.modelLayer[p],_=i.modelLayer[p],g={};g.fid=_.fid,g.eid=m.eid,g.pass=_.pass,g.Mt=(1===a?this.Je(e[m.eid].geo,0):this.$e(e[m.eid].idxs,e[m.eid].pts,0)).points;_=null,_=1===a?this.Je(m.geo,2):this.$e(m.idxs,m.pts,2);g.geoArr=_.points,g.holes=_.holes,s.push(g)}for(var x=0,O=r.naviNodes.length;x<O;x++){var E=r.naviNodes[x];E.geoArr=(1===a?this.Je(E.geo,0):this.$e(E.idxs,E.pts,0)).points,E.linkSegArr=this.ts(E.linkSeg),E.liftFloorArr=this.ts(E.liftFloor),u.push(E)}for(var j=0,T=r.naviSegments.length;j<T;j++){var k=r.naviSegments[j];k.geoArr=(1===a?this.Je(k.geo,1):this.$e(k.idxs,k.pts,1)).points,k.m_Id=r.mid,h.push(k)}if(r.naviZones)for(var M=0,R=r.naviZones.length;M<R;M++){var A=r.naviZones[M],S=null,S=1===a?this.Je(A.geo,2):this.$e(A.idxs,A.pts,2);A.geoArr=S.points,A.holes=S.holes,A.m_Id=r.mid,f.push(A)}return{level:t,extentLayer:o,modelLayer:s,naviSegments:h,naviNodes:u,naviZones:f}}});var nr=y;y=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.rs=n,this.es=null,this.ss=null,this.us=-1,this.hs=-1,this.as=s.MODULE_SHORTEST,this.cs=[],this.rs.Oe(),this.rs.Ee(),this.rs.Te(),this.ls=5e-4};Object.assign(y.prototype,{vs:function(t,n,i){this.ds(i),this.ys=n;t=this.rs.ye(t);if(-1==t)return k.ROUTE_FAILED_CANNOT_CALCULATE;for(var r=0;r<n.length;r++){var e=this.rs.ye(n[r]);this.cs.push(e)}return!!this.bs(this.rs,t,this.cs)},ps:function(){for(var t=[],n=0;n<this.cs.length;n++){var i=[];this.ws(this.cs[n],i),i.reverse(),t.push(i)}return t},ws:function(t,n){t=this.rs.Lr[t];n.push(t);t=t.Gi[0];null!=t&&this.ws(t,n)},ms:function(t,n,i){this.ds(i),this.es=t,this.ss=n,this.us=t.gn,this.hs=n.gn;i=this.rs.ye(this.us);if(-1==i)return k.ROUTE_FAILED_CANNOT_CALCULATE;t=this.rs.ye(n.gn);if(-1==t)return k.ROUTE_FAILED_CANNOT_CALCULATE;n=[];return n.push(t),this.bs(this.rs,i,n)?k.ROUTE_SUCCESS:k.ROUTE_FAILED_CANNOT_ARRIVE},_s:function(){var t=[],n=this.rs.ye(this.hs),i=[];i.push(n);n=[];return this.gs(i,this.rs.Lr,n,[]),t.push.apply(t,n),t},un:function(){this.rs.un(),this.rs=null,this.es=null,this.ss=null},bs:function(t,n,i){if(null==t)return!1;var r=t.Lr.length;if(n<0||r<=n)return!1;this.xs(i,n);for(var e=0;e<r;++e)t.Lr[e].Ui=Number.MAX_VALUE,t.Lr[e].Bi=!1,t.Lr[e].Gi=[];t.Lr[n].Ui=0;var s=i.length,o=0,u=[];u.push(t.Lr[n]);for(var h=this.Os.bind(this);0<u.length;){var f=u[0].gn;u.splice(0,1);var a=t.ye(f);if(null!=a){var c=t.Lr[a];if(!c.Bi){c.Bi=!0;var l=i.indexOf(a);if(-1!=l&&++o==s)return!0;if(0!=t.Zr.size){var v=t.Zr.get(f);if(v)for(var d=0;d<v.length;d++){var y=v[d],b=y.ke,p=t.ye(b);null!=p&&(b=y.xi,(y=t.Lr[p]).Bi||(y.Ui>b+c.Ui?(y.Ui=b+c.Ui,y.Gi=[],y.Gi.push(a),u.push(t.Lr[p]),u.sort(h)):Math.abs(y.Ui-(b+c.Ui))<1e-12&&-1!=y.Gi.indexOf(a)&&y.Gi.push(a)))}}}}}return!(o<s)},Os:function(t,n){return t.Ui-(n.Ui+this.ls)},xs:function(t,n){for(var i=t.indexOf(n);-1!=i;)t.splice(i,1),i=t.indexOf(n)},ds:function(t){this.as!=t&&(s.MODULE_SHORTEST==t?this.rs.Pr.forEach(function(t){t.xi=t.xi/t.fr}):s.MODULE_BEST==t&&this.rs.Pr.forEach(function(t){t.xi=t.xi*t.fr}),this.rs.Te(),this.as=t)},Es:function(t,n,i,r){0!=n[t].Gi.length&&(t=n[t].Gi[0],i.push(n[t]),r.count++,this.Es(t,n,i,r))},gs:function(t,n,i,r){for(var e=0;e<t.length;e++){var s=t[e];i.push(n[s]);var o={count:1};this.Es(s,n,i,o),r.push(o.count)}}});var ir=y;function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t,n){return(er=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function sr(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=or(i);return function(t,n){{if(n&&("object"===rr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=or(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ur=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&er(t,n)}(i,Zi);var n=sr(i);function i(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this)).gn=-1,t.js=[],t}return i}();var hr=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.nt=null,this.Ts=null,this.ks=null,this.ut=0,this.Ms=0,this.Rs=!1,this.As=Si.Ss};function fr(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=cr(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw e}}}}function ar(t){return function(t){if(Array.isArray(t))return lr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||cr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(t,n){if(t){if("string"==typeof t)return lr(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?lr(t,n):void 0}}function lr(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function vr(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.Ns=null,this.Is=null,this.rs=t,this.Ls=new Map,this.Ps=new Map,this.Ds=null,this.Fs=new Map,this.Cs=[],this.Us=Number.INT_MIN,this.Bs=Number.INT_MIN,this.Gs=-1,this.es=null,this.ss=null,this.as=s.MODULE_SHORTEST,this.Zs=new Map,this.Ws=new Map,this.Vs=new Map,this.Ys=[],this.Xs=[],this.qs=[],this.zs=[],this.Hs=100,this.Qs=-1,this.Js=15,this.$s=.1,this.Ks=[],this.to=[],this.no=[],this.io=[],this.ro=[],this.eo(),this.so(),this.oo(),this.uo(),this.ho()}var t,i,r;return t=n,(i=[{key:"assignedPts",get:function(){return this.to},set:function(t){this.to=t}}])&&vr(t.prototype,i),r&&vr(t,r),n}();Object.assign(y.prototype,{ms:function(t,n,i){if(this.Us=t instanceof Ni?this.fo(t.Ni):this.fo(t),this.Bs=n instanceof Ni?this.fo(n.Ni):this.fo(n),i&&(this.as=i),t instanceof Ni)this.es=t;else if(k.ROUTE_FAILED_NO_DATA_START==this.ao(t,t))return k.ROUTE_FAILED_NO_DATA_START;if(n instanceof Ni)this.ss=n;else if(k.ROUTE_FAILED_NO_DATA_DEST==this.co(n,t instanceof Ni?t.Ni:t))return k.ROUTE_FAILED_NO_DATA_DEST;return null==this.es?k.ROUTE_FAILED_NO_DATA_START:null==this.ss?k.ROUTE_FAILED_NO_DATA_DEST:this.vo()},do:function(){var t;this.ro=[];for(var n=0;n<this.to.length;n++){var i={x:(i=this.to[n])[0],y:i[1]},r=this.fo(i),i=this.yo(r,i);this.ro.push(i)}(t=this.Cs).push.apply(t,ar(this.ro))},_s:function(){return this.Cs},un:function(){this.Ns=null,this.Is=null,this.rs.un(),this.rs=null,this.Ls.clear(),this.Ls=null;var t,n=fr(this.Ps);try{for(n.s();!(t=n.n()).done;)t.value[1].un()}catch(t){n.e(t)}finally{n.f()}this.Ps.clear(),(this.Ps=null)!=this.Ds&&(this.Ds.un(),this.Ds=null);var i,r=fr(this.Fs);try{for(r.s();!(i=r.n()).done;)i.value[1].un()}catch(t){r.e(t)}finally{r.f()}this.Fs.clear(),this.Fs=null,this.Cs=[],this.es=null,this.ss=null,this.Zs.clear(),this.Zs=null,this.Ws.clear(),this.Ws=null,this.Vs.clear(),this.Ys=[],this.Xs=[],this.qs=[],this.zs=[]},$n:function(){this.Cs=[],this.bo(-1),this.bo(this.Us),this.Us=Number.INT_MIN,this.bo(this.Bs),this.Bs=Number.INT_MIN,this.po(),this.Ks=[];var t=this.rs.Pr.length;this.Gs<-2*t&&(this.Gs=-1);for(var n=0;n<this.Ys.length;n++){var i=this.Ys[n];this.wo(i.mo,i.ks,Si.NaviRoadHinderType_HINDER_HIGH)}this.Ys=[],this.Xs=[],this.qs=[],this.zs=[]},_o:function(){this.no=[];for(var t=0;t<this.go.length;t++){var n=this.go[t];n.Ts.ar=n.originEntry}this.go=[],this.bo(-1),this.Fs.get(-1).rs.Te()},xo:function(t){this._o(),0!=t.length&&(this.io=t,this.Oo())},Eo:function(){},Oo:function(){for(var t=0;t<this.io.length;t++)this.jo(this.io[t])},To:function(t,n,i,r,e){var s,o;t instanceof Ni?s=t:((s=new Ni).gn=n,s.Ni=t,this.rs.Lr.push(s)),i instanceof Ni?o=i:((o=new Ni).gn=r,o.Ni=i,this.rs.Lr.push(o));i=new Ci;i.gn=this.Gs--,i.nr=s.gn,i.ir=s.Ni,i.rr=o.gn,i.er=o.Ni,i.ar=e,this.rs.Pr.push(i)},jo:function(t){for(var n=this.rs.Ae(t),i=0;i<n.length;i++){var r=n[i],e=r.Ts,s=e.ar;this.go.push({road:e,originEntry:s}),e.ar=Si.NaviRoadEntry_FORBID,1==r.crss.length&&(1==pt.st(e.ir,t,t.length)?this.To(r.crss[0],this.Gs--,e.er,this.Gs--,s):this.To(e.ir,this.Gs--,r.crss[0],this.Gs--,s)),2==r.crss.length&&(this.To(e.ir,this.ko(),r.crss[0],this.ko(),s),this.To(r.crss[1],this.ko(),e.er,this.ko(),s))}var o=new ur;o.gn=this.Gs--,o.br=t,o.br.push(t[0]),o.pass=Si.NaviModelPassType_NOT_PASS,this.rs.Dr.push(o)},ko:function(){return this.Gs--},Mo:function(t){var n=this.rs.Jr(t);if(-1==n)return null;var i=this.fo(t),r=this.Ps.get(i).we(t,-0);if(null==r)return{or:n,ks:null};if(r.pass==Si.NaviModelPassType_PASS_THROUGH||r.pass==Si.NaviModelPassType_PASS_NOT_THROUGH){if(0<r.kr.length)return{or:n,ks:r};for(var e={},s=[],o=[],u=this.Ps.get(i).Pr,h=!0,f=0;f<r.pr;f++)for(var a=r.br[f],c=r.br[f+1],l=0;l<u.length;l++){var v=u[l];1==pt.dt(a,c,v.ir,v.er,e)&&(h=!1,Si.NaviRoadEntry_FORBID!=v.ar&&((v=new Object).x=e.x,v.y=e.y,s.push(v),o.push(u[l])))}if(h)return{or:n,ks:r};if(0==s.length)return null;r.kr=[],r.Rr=[],r.Mr=[];for(var d=0;d<s.length;d++){var y=s[d],b=o[d],y=this.Ro(i,y,b);y.Zi=Si.NaviNodeType_COMMON,b.ar==Si.NaviRoadEntry_BOTH?y.entranceType=Si.NaviEntranceType_ACCESS:pt.st(b.ir,r.br,r.pr)?(b.ar==Si.NaviRoadEntry_FORWARD&&(y.entranceType=Si.NaviEntranceType_EXIT),b.ar==Si.NaviRoadEntry_BACK&&(y.entranceType=Si.NaviEntranceType_ENTRANCE)):(b.ar==Si.NaviRoadEntry_FORWARD&&(y.entranceType=Si.NaviEntranceType_ENTRANCE),b.ar==Si.NaviRoadEntry_BACK&&(y.entranceType=Si.NaviEntranceType_EXIT)),r.kr.push(y),r.Rr.push(y.entranceType),r.Mr.push(y.Zi)}}return r.pass!=Si.NaviModelPassType_NOT_PASS?{or:n,ks:r}:null},ao:function(t,n){var i=this;this.es=this.yo(this.Us,t);var r=null,e=!0,r=null!=this.Ns&&this.Ns.pass==Si.NaviModelPassType_PASS_THROUGH&&0==this.Ns.kr.length?this.Ao(this.Us,t,n,30,this.Ns):this.Ao(this.Us,t,n);if(null==this.Ns&&(e=!1),0<r.size){var s,e=!1,o=fr(r);try{for(o.s();!(s=o.n()).done;)for(var u=s.value[1],h=0;h<u.length;h++)0!=u[h].Ts.ar&&(e=!0)}catch(t){o.e(t)}finally{o.f()}var f,a=0,c=!1,l=[],v=fr(r);try{for(v.s();!(f=v.n()).done;){var d,y=f.value[1],b=y[0].Ts,p=this.So(this.Us,t,b,y,this.Ns);0==p.length?a++:Math.abs(p[0].No)>pt.H()?l.push.apply(l,ar(p)):(c=!0,d=this.Io(this.Us,p[0].nt,p[0].Ts),this.Lo(this.Us,this.es,d))}}catch(t){v.e(t)}finally{v.f()}if(c||l.forEach(function(t){t=i.Io(i.Us,t.nt,t.Ts);i.Lo(i.Us,i.es,t)}),a==r.size)return k.ROUTE_FAILED_NO_DATA_START}if(e&&null!=this.Ns&&0<this.Ns.kr.length){for(var w=!1,m=0;m<this.Ns.kr.length;m++){var _=this.Ns.kr[m],g=this.Ns.Rr[m];g!=Si.NaviEntranceType_EXIT&&g!=Si.NaviEntranceType_ACCESS||(this.Lo(this.Us,this.es,_),w=!0)}if(!w)return k.ROUTE_FAILED_NO_DATA_START}},co:function(t,n){var i=this;this.ss=this.yo(this.Bs,t);var r=null,e=!0,r=null!=this.Is&&this.Is.pass==Si.NaviModelPassType_PASS_THROUGH&&0==this.Is.kr.length?this.Ao(this.Bs,t,n,30,this.Is):this.Ao(this.Bs,t,n);if(null==this.Is&&(e=!1),0<r.size){var s,e=!1,o=fr(r);try{for(o.s();!(s=o.n()).done;)for(var u=s.value[1],h=0;h<u.length;h++)0!=u[h].Ts.ar&&(e=!0)}catch(t){o.e(t)}finally{o.f()}var f,a=0,c=!1,l=[],v=fr(r);try{for(v.s();!(f=v.n()).done;){var d,y=f.value[1],b=y[0].Ts,p=this.So(this.Bs,t,b,y,this.Is);0==p.length?a++:Math.abs(p[0].No)>pt.H()?l.push.apply(l,ar(p)):(c=!0,d=this.Io(this.Bs,p[0].nt,p[0].Ts),this.Lo(this.Bs,this.ss,d))}}catch(t){v.e(t)}finally{v.f()}if(c||l.forEach(function(t){t=i.Io(i.Bs,t.nt,t.Ts);i.Lo(i.Bs,i.ss,t)}),a==r.size)return k.ROUTE_FAILED_NO_DATA_DEST}if(e&&null!=this.Is&&0<this.Is.kr.length){for(var w=!1,m=0;m<this.Is.kr.length;m++){var _=this.Is.kr[m],g=this.Is.Rr[m];g!=Si.NaviEntranceType_ENTRANCE&&g!=Si.NaviEntranceType_ACCESS||(this.Lo(this.Bs,this.ss,_),w=!0)}if(!w)return k.ROUTE_FAILED_NO_DATA_DEST}},vo:function(){var t=this.Po(this.es.Ni);t&&(this.wo(this.Us,t,Si.NaviRoadHinderType_HINDER_GENERAL),this.Ys.push({mo:this.Us,ks:t}));t=this.Po(this.ss.Ni);if(t&&(this.wo(this.Bs,t,Si.NaviRoadHinderType_HINDER_GENERAL),this.Ys.push({mo:this.Bs,ks:t})),this.Cs=[],this.Us==this.Bs){var n=this.Fs.get(this.Us),i=n.ms(this.es,this.ss,this.as);if(i!=k.ROUTE_SUCCESS)return i;var r=n._s();this.Cs=[],r.reverse(),(i=this.Cs).push.apply(i,ar(r))}else{if(-1!=this.Us&&-1==this.Bs){var n=this.Do(this.es.Ni,this.Us,Si.NaviEntranceType_EXIT),i=this.Fs.get(this.Us),r=i.ms(this.es,n,this.as);if(r!=k.ROUTE_SUCCESS)return r;var e=i._s(e),i=this.Fs.get(-1);if((r=i.ms(n,this.ss,this.as))!=k.ROUTE_SUCCESS)return r;r=i._s();e.reverse(),r.reverse(),(i=this.Cs).push.apply(i,ar(e)),(e=this.Cs).push.apply(e,ar(r))}if(-1==this.Us&&-1!=this.Bs){var s=this.Do(this.ss.Ni,this.Bs,Si.NaviEntranceType_ENTRANCE),o=this.Fs.get(this.Bs),u=o.ms(s,this.ss,this.as);if(u!=k.ROUTE_SUCCESS)return u;var h=o._s(),o=this.Fs.get(-1);if((u=o.ms(this.es,s,this.as))!=k.ROUTE_SUCCESS)return u;s=o._s();s.reverse(),h.reverse(),(u=this.Cs).push.apply(u,ar(s)),(o=this.Cs).push.apply(o,ar(h))}if(-1!=this.Us&&-1!=this.Bs){var u=this.Do(this.es.Ni,this.Us,Si.NaviEntranceType_EXIT),s=this.Fs.get(this.Us),o=s.ms(this.es,u,this.as);if(o!=k.ROUTE_SUCCESS)return o;var f=s._s(f),h=this.Do(this.ss.Ni,this.Bs,Si.NaviEntranceType_ENTRANCE),s=this.Fs.get(this.Bs);if((o=s.ms(h,this.ss,this.as))!=k.ROUTE_SUCCESS)return o;var a=s._s(a),s=this.Fs.get(-1);if((o=s.ms(u,h,this.as))!=k.ROUTE_SUCCESS)return o;o=s._s();f.reverse(),o.reverse(),a.reverse(),(s=this.Cs).push.apply(s,ar(f)),(f=this.Cs).push.apply(f,ar(o)),(o=this.Cs).push.apply(o,ar(a))}}return k.ROUTE_SUCCESS},Fo:function(t,n,i){for(var r=0;r<n;r++)if(null!=t[r]&&t[r].gn==i)return r;return-1},fo:function(t){for(var n=this.rs.Ur,i=0;i<n.length;i++){var r=n[i];if(r.Er(t))return r.gn}return-1},eo:function(){for(var t=this.rs.Ur,n=0;n<t.length;n++){var i=t[n],r=this.Co(this.rs,i);this.Ps.set(i.gn,r)}this.Ps.set(-1,this.rs);var e,s=fr(this.Ps);try{for(s.s();!(e=s.n()).done;){var o=e.value;o[1].Qr(),this.Fs.set(o[0],new ir(o[1]))}}catch(t){s.e(t)}finally{s.f()}},Co:function(t,n){if(t&&n){for(var i,r=0,e=0,s=t.Pr.length,o=t.Lr.length,u=t.Pr,h=t.Lr,f=0,a=new Int8Array(s),c=0;c<s;c++)u[c]&&u[c].ar!=Si.NaviRoadEntry_FORBID&&(i=u[c],r=n.contain(i.ir),e=n.contain(i.er),0==r&&0==e||(f=!0),1==r&&1==e&&(a[c]=1),1==r&&0==e&&(a[c]=2),0==r&&1==e&&(a[c]=3),0==r&&0==e&&(a[c]=4),2==r&&0==e&&(a[c]=6),2==r&&1==e&&(a[c]=7),0==r&&2==e&&(a[c]=8),1==r&&2==e&&(a[c]=9));if(0==f)return null;for(var l,v,d,y,b,p,w=new Array(o),m=new Array(s),_=0,g=new Int8Array(o),x=a.length,O=0,E=x;O<E;O++)0!=a[O]&&6!=a[O]&&8!=a[O]&&1!=a[O]&&u[O]&&(v=(l=u[O]).ar,b=[l.gn],2==a[O]||9==a[O]?(d=null,d=2==a[O]?n.dt(l.ir,l.er):Object.assign({},l.er),(p=new Ni).gn=this.rs.me(),p.Zi=Si.NaviNodeType_COMMON,p.Wi=Si.NaviLiftType_NULL,p.entranceType=Si.NaviEntranceType_ACCESS,p.Ni=Object.assign({},d),(y=new Ci).setRoad(l),y.gn=this.rs._e(),b.push(y.gn),p.segLinks=b,(d=new Ni).setNode(p),v==Si.NaviRoadEntry_FORWARD?d.entranceType=Si.NaviEntranceType_EXIT:v==Si.NaviRoadEntry_BACK&&(d.entranceType=Si.NaviEntranceType_ENTRANCE),n.xr.push(d),_=this.Fo(h,o,y.rr),y.er=Object.assign({},d.Ni),y.sr[1]=Object.assign({},d.Ni),y.rr=d.gn,y.vr(),m[O]=y,w[_]=d,w[_=this.Fo(h,o,y.nr)]=h[_],w[_].segLinks.splice(w[_].segLinks.indexOf(l.gn),1,y.gn),(y=new Ni).setNode(p),l.nr=y.gn,l.ir=Object.assign({},y.Ni),l.sr[0]=Object.assign({},y.Ni),l.vr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.gn),1),h.push(y),g[_]=2):3!=a[O]&&7!=a[O]||(p=null,p=3==a[O]?n.dt(l.ir,l.er):Object.assign({},l.ir),(y=new Ni).gn=this.rs.me(),y.Zi=Si.NaviNodeType_COMMON,y.Wi=Si.NaviLiftType_NULL,y.entranceType=Si.NaviEntranceType_ACCESS,y.Ni=Object.assign({},p),(p=new Ci).setRoad(l),p.gn=this.rs._e(),b.push(p.gn),y.segLinks=b,(b=new Ni).setNode(y),v==Si.NaviRoadEntry_FORWARD?b.entranceType=Si.NaviEntranceType_ENTRANCE:v==Si.NaviRoadEntry_BACK&&(b.entranceType=Si.NaviEntranceType_EXIT),n.xr.push(b),_=this.Fo(h,o,p.nr),p.ir=Object.assign({},b.Ni),p.sr[0]=Object.assign({},b.Ni),p.nr=b.gn,p.vr(),m[O]=p,w[_]=b,w[_=this.Fo(h,o,p.rr)]=h[_],w[_].segLinks.splice(w[_].segLinks.indexOf(l.gn),1,p.gn),(p=new Ni).setNode(y),l.rr=p.gn,l.er=Object.assign({},p.Ni),l.sr[1]=Object.assign({},p.Ni),l.vr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.gn),1),h.push(p),g[_]=2));for(var j,T=0,k=x;T<k;T++)1==a[T]&&((j=u[T])&&(m[T]=j,2!=g[_=this.Fo(h,o,j.nr)]&&(w[_]=h[_],g[_]=1),2!=g[_=this.Fo(h,o,j.rr)]&&(w[_]=h[_],g[_]=1),u[T]=null));for(var M=0;M<o;M++)1==g[M]&&(h[M]=null);for(var x=new qi(w,m,!0,1),R=[],A=t.Dr,S=0;S<A.length;S++){var N=A[S];N&&this.Uo(N,n)&&R.push(N)}return(t=x.Dr).push.apply(t,R),x}},so:function(){var t,n=fr(this.Ps);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1].Dr,s=0;s<e.length;s++){var o,u=e[s];Si.NaviModelPassType_PASS_NOT_THROUGH==u.pass&&((o=this.Zs.get(r))||(o=[],this.Zs.set(r,o)),o.push(u))}}catch(t){n.e(t)}finally{n.f()}},oo:function(){var t,n=fr(this.Ps);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1].Dr,s=0;s<e.length;s++){var o,u=e[s];Si.NaviModelPassType_NOT_PASS==u.pass&&((o=this.Ws.get(r))||(o=[],this.Ws.set(r,o)),o.push(u))}}catch(t){n.e(t)}finally{n.f()}},uo:function(){var t,n=fr(this.Zs);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1],s=this.Ps.get(r).Pr,o=0;o<e.length;o++){for(var u=e[o],h=0;h<s.length;h++){var f,a=s[h].yr();pt.st(a,u.br,u.pr)&&(s[h].xi=s[h].xi*this.Hs,(f=this.Vs.get(u.gn))||(f=[],this.Vs.set(u.gn,f)),f.push(s[h]))}this.wo(r,u,Si.NaviRoadHinderType_HINDER_HIGH)}}catch(t){n.e(t)}finally{n.f()}},ho:function(){var t,n=fr(this.Ws);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1],s=this.Ps.get(r).Pr,o=0;o<e.length;o++)for(var u=e[o],h=0;h<s.length;h++){var f=s[h],a=f.ar,c=f.yr();if(pt.st(c,u.br,u.pr)){if(f.xi=Number.MAX_VALUE,a==Si.NaviRoadEntry_BOTH||a==Si.NaviRoadEntry_FORWARD){var l=this.Ps.get(r).Zr.get(f.nr);if(l)for(var v=0;v<l.length;v++)l[v].ke==f.rr&&(l[v].xi=f.xi)}if(f.ar==Si.NaviRoadEntry_BOTH||f.ar==Si.NaviRoadEntry_BACK){var d=this.Ps.get(r).Zr.get(f.rr);if(d)for(var y=0;y<d.length;y++)d[y].ke==f.nr&&(d[y].xi=f.xi)}}}}catch(t){n.e(t)}finally{n.f()}},wo:function(t,n,i){var r=this.Vs.get(n.gn);if(r){if(Si.NaviRoadHinderType_HINDER_HIGH==i)for(var e=0;e<r.length;e++){var s=r[e];if(s.vr(),s.xi=r.length*this.Hs,s.ar==Si.NaviRoadEntry_BOTH||s.ar==Si.NaviRoadEntry_FORWARD){var o=this.Ps.get(t).Zr.get(s.nr);if(o)for(var u=0;u<o.length;u++)o[u].ke==s.rr&&(o[u].xi=s.xi)}if(s.ar==Si.NaviRoadEntry_BOTH||s.ar==Si.NaviRoadEntry_BACK){var h=this.Ps.get(t).Zr.get(s.rr);if(h)for(var f=0;f<h.length;f++)h[f].ke==s.nr&&(h[f].xi=s.xi)}}if(Si.NaviRoadHinderType_HINDER_GENERAL==i)for(var a=0;a<r.length;a++){var c=r[a];if(c.vr(),c.ar==Si.NaviRoadEntry_BOTH||c.ar==Si.NaviRoadEntry_FORWARD){var l=this.Ps.get(t).Zr.get(c.nr);if(l)for(var v=0;v<l.length;v++)l[v].ke==c.rr&&(l[v].xi=c.xi)}if(c.ar==Si.NaviRoadEntry_BOTH||c.ar==Si.NaviRoadEntry_BACK){var d=this.Ps.get(t).Zr.get(c.rr);if(d)for(var y=0;y<d.length;y++)d[y].ke==c.nr&&(d[y].xi=c.xi)}}}},Do:function(t,n,i){var r=this.rs.ne(n);if(null==r)return null;for(var e=this.Ps.get(n).we(t,void 0),s=(e.area,Number.MAX_VALUE),o=null,u=0;u<r.xr.length;u++){var h,f=r.xr[u],a=pt.ut(f.Ni,t);f.entranceType!=Si.NaviEntranceType_ACCESS&&f.entranceType!=i||a<s&&((h=this.Bo(n,f.Ni))!=e&&h.pass==Si.NaviModelPassType_PASS_NOT_THROUGH||(s=a,o=f))}return o},Bo:function(t,n){for(var i=null,t=this.Ps.get(t),r=Number.MAX_VALUE,e=Number.MAX_VALUE,s=null,o=t.Dr,u=0;u<o.length;u++){var h,f=o[u];(h=pt.Go(f.br,n,f.br.length-1))<e&&(e=h,s=f),this.$s>h&&((h=f.area)<r&&(r=h,i=f))}return null==i?s:i},Uo:function(t,n){if(t.bb.isSeparate(n.bb))return!1;t=t.Mt;return!!pt.st(t,n.br,n.pr)},Io:function(t,n,i){var r=this.Ks.find(function(t){return t==i.nr}),e=this.Ks.find(function(t){return t==i.rr});null==r&&this.Ks.push(i.nr),null==e&&this.Ks.push(i.rr);for(var s=this.zs,o=null,u=0;u<s.length;u++)if(s[u].Zo==i){o=s[u];break}if(null==o)(o={}).Zo=i,s.push(o);else for(;null!=o.Wo;)var h=o.Wo.Zo,o=pt.Vo(n,h.ir,h.er)?o.Wo:o.Yo;i=o.Zo;var f=new Ni;f.gn=this.Xo(),f.Ni=n;var a=new Ci;a.gn=this.Xo(),a.nr=i.nr,a.ir=i.ir,a.rr=f.gn,a.er=f.Ni,a.sr=[i.ir,f.Ni],a.fr=i.fr;var c=new Ci;c.gn=this.Xo(),c.nr=f.gn,c.ir=f.Ni,c.rr=i.rr,c.er=i.er,c.sr=[f.Ni,i.er],c.fr=i.fr,this.Xs.push(a),this.Xs.push(c);r={};r.Zo=a;e={};e.Zo=c,o.Wo=r,o.Yo=e,f.tempType=1,a.tempType=1,c.tempType=1,a.vr(),c.vr(),a.ar=i.ar,c.ar=i.ar;e=this.Ps.get(t);e.Lr.push(f),e.Pr.push(a),e.Pr.push(c);var l,t=this.Fs.get(t).rs;return t.Xr.set(f.gn,e.Lr.length-1),i.ar==Si.NaviRoadEntry_BOTH&&((e=[]).push({ke:i.nr,xi:a.xi}),e.push({ke:i.rr,xi:c.xi}),t.Zr.set(f.gn,e),(e=t.Zr.get(i.nr))||t.Zr.set(i.nr,e=[]),e.push({ke:f.gn,xi:a.xi}),(e=t.Zr.get(i.rr))||t.Zr.set(i.rr,e=[]),e.push({ke:f.gn,xi:c.xi})),i.ar==Si.NaviRoadEntry_FORWARD&&((l=[]).push({ke:i.rr,xi:c.xi}),t.Zr.set(f.gn,l),(l=t.Zr.get(i.nr))||t.Zr.set(i.nr,l=[]),l.push({ke:f.gn,xi:a.xi})),i.ar==Si.NaviRoadEntry_BACK&&((l=[]).push({ke:i.nr,xi:a.xi}),t.Zr.set(f.gn,l),(l=t.Zr.get(i.rr))||t.Zr.set(i.rr,l=[]),l.push({ke:f.gn,xi:c.xi})),f},qo:function(t,n){for(var i=n.length-1;0<=i;i--)if(n[i].gn&&0<n[i].gn)return n.splice(i+1,0,t),i+1;return-1},Ro:function(t,n,i,r){if(r)return this.Io(t,n,i);var e=this.Ps.get(t),s=new Ni;s.gn=e.me(),s.Ni=n;var o=new Ci;o.gn=e._e(),o.nr=i.nr,o.ir=i.ir,o.rr=s.gn,o.er=s.Ni,o.sr=[i.ir,s.Ni];r=new Ci;r.gn=e._e(),r.nr=s.gn,r.ir=s.Ni,r.rr=i.rr,r.er=i.er,r.sr=[s.Ni,i.er];t=[];t.push(o.gn),t.push(r.gn),s.segLinks=t,o.vr(),r.vr(),o.ar=i.ar,r.ar=i.ar;var u,n=e.Lr,t=e.Pr,n=this.qo(s,n);return this.qo(o,t),this.qo(r,t),e.Xr.set(s.gn,n),i.ar==Si.NaviRoadEntry_BOTH&&((n=[]).push({ke:i.nr,xi:o.xi}),n.push({ke:i.rr,xi:r.xi}),e.Zr.set(s.gn,n),(n=e.Zr.get(i.nr))||e.Zr.set(i.nr,n=[]),n.push({ke:s.gn,xi:o.xi}),(n=e.Zr.get(i.rr))||e.Zr.set(i.rr,n=[]),n.push({ke:s.gn,xi:r.xi})),i.ar==Si.NaviRoadEntry_FORWARD&&((u=[]).push({ke:i.rr,xi:r.xi}),e.Zr.set(s.gn,u),(u=e.Zr.get(i.nr))||e.Zr.set(i.nr,u=[]),u.push({ke:s.gn,xi:o.xi})),i.ar==Si.NaviRoadEntry_BACK&&((u=[]).push({ke:i.nr,xi:o.xi}),e.Zr.set(s.gn,u),(u=e.Zr.get(i.rr))||e.Zr.set(i.rr,u=[]),u.push({ke:s.gn,xi:r.xi})),s},zo:function(t){if(null!=t){for(var n=this.Ps.get(t),i=n.Lr.length-1;0<=i;i--){var r=n.Lr[i];if(null==r||0<=r.gn)break;n.Lr.splice(i,1)}for(var e=n.Pr.length-1;0<=e;e--){var s=n.Pr[e];if(null==s||0<=s.gn)break;n.Pr.splice(e,1)}}},Ho:function(t,n){var i=t.get(n);if(i)for(var r=0;r<i.length;r++)i[r].ke<0&&(i.splice(r,1),r--)},Qo:function(t,n){for(var i=t.get(n),r=0;r<i.length;r++)this.Ho(t,i[r].ke);t.remove(n)},Jo:function(t,n,i,r,e,s){e.Ms=Number.MAX_VALUE,e.Rs=!1,e.No=0;for(var o=Number.MAX_VALUE,u={},h=this.Ps.get(t),f=0;f<h.Pr.length;f++){var a,c=h.Pr[f];null!=c&&c.ar!=Si.NaviRoadEntry_FORBID&&(!pt.yt(n,i,c.ir,c.er,u)||((a=pt.ut(n,u))<o||Math.abs(a-o)<.1&&c.gn<0)&&(o=a,e.nt=Object.assign({},u),e.ut=o,e.Ts=c,e.Rs=!0))}for(var h=this.Ps.get(-1),l={},v=0;v<h.Dr.length;v++){var d=h.Dr[v];if(null!=d&&d!=s&&(Si.NaviModelPassType_DECORATE!=d.pass&&(null==s||!pt.st(s.Mt,d.br,d.br.length-1))))for(var y=d.br.length,b=0;b<y-1;b++)if(pt.yt(n,i,d.br[b],d.br[b+1],l)){var p=pt.ut(n,l);if(p<o)return o=p,e.ks=d,e.ut=Number.MAX_VALUE,e.Rs=!1,e.As=Si.NaviObstructType_MODEL,!1}}for(var w={},m=h.Fr,_=0;_<m.length;_++){for(var g=m[_],x=m[_].Tr,O=0;O<x.length;O++)for(var E=x[O],j=0;j<E.length-1;j++)if(pt.yt(n,i,E[j],E[j+1],w)){var T=pt.ut(n,w);if(T<o)return o=T,e.ks=g,e.ut=Number.MAX_VALUE,e.Rs=!1,e.As=Si.NaviObstructType_EXTENT,!1}for(var k=m[_].br,M=0;M<k.length-1;M++)if(pt.yt(n,i,k[M],k[M+1],w)){var R=pt.ut(n,w);if(R<o)return o=R,e.ks=g,e.ut=Number.MAX_VALUE,e.Rs=!1,e.As=Si.NaviObstructType_EXTENT,!1}}return e.Ms=pt.ut(e.nt,r),!0},$o:function(t,n){return t.Ms-n.Ms},Ko:function(t,n){return n.No-t.No},bo:function(t){t=this.Ps.get(t);if(t){for(var n=t.Lr,i=n.length-1;0<=i;i--){var r=n[i];if(null==r||0<=r.gn)break;n.splice(i,1)}for(var e=t.Pr,s=e.length-1;0<=s;s--){var o=e[s];if(null==o||0<=o.gn)break;e.splice(s,1)}}},po:function(){var t,n=fr(this.Fs);try{for(n.s();!(t=n.n()).done;){for(var i=t.value[1],r=[],e=i.rs.Zr,s=0;s<e.keys.length;s++)e.keys[s]<0&&r.push(e.keys[s]);for(var o=0;o<r.length;o++)this.Qo(i.rs.Zr,r[o]);for(var u=0;u<this.Ks.length;u++)this.Ho(e,this.Ks[u])}}catch(t){n.e(t)}finally{n.f()}},So:function(t,n,i,r,e){for(var s=[],o=0;o<r.length;o++)if(r[o].ut<pt.H())return s.push(r[o]),s;var u={x:0,y:0};if(pt.bt(n,i.ir,i.er,u)&&this.tu(n,u,{},e)){e={};return e.nt=u,e.Rs=!0,e.Ts=i,e.No=0,e.ut=pt.ut(n,u),s.push(e),s}for(var h={x:u.x-n.x,y:u.y-n.y},f=0;f<r.length;f++){var a=r[f],c={x:a.nt.x-n.x,y:a.nt.y-n.y},c=270<(c=pt.xt(c,h))?c-360:c;a.No=c}r.sort(this.Ko);var l,v=null;if(r[r.length-1].No<0)return v=r[r.length-1],s.push(v),s;for(var d=0;d<r.length;d++)if(0<r[d].No)return v=r[d],0==d?s.push(v):(l=r[d-1],pt.ut(v.nt,i.ir)>pt.ut(l.nt,i.ir)?(s.push(l),s.push(v)):(s.push(v),s.push(l))),s;return s},nu:function(t,n,i,r,e,s){for(var o=e||30,u=0;u<360;u+=o){var h=new hr;this.Jo(t,n,u,i,h,s),1==h.Rs&&r.push(h)}r.sort(this.$o)},Ao:function(t,n,i,r,e){var s=new Map,o=[];for(this.nu(t,n,i,o,r,e);0!=o.length;){var u=o[0],h=s.get(u.Ts.gn);h?h.push(u):((h=[]).push(u),s.set(u.Ts.gn,h)),o.splice(0,1)}return s},yo:function(t,n){var i=new Ni;i.gn=this.Xo(),i.Ni=Object.assign({},n);n=this.Ps.get(t);return n.Lr.push(i),this.Fs.get(t).rs.Xr.set(i.gn,n.Lr.length-1),i},iu:function(t,n,i){if(i)return this.yo(t,n);i=new Ni;i.gn=this.rs.me(),i.Ni=Object.assign({},n);n=this.Ps.get(t),t=n.Lr,t=this.qo(i,t);return n.Xr.set(i.gn,t),i},tu:function(t,n,i,r){for(var e,s=this.Ps.get(-1),o=0;o<s.Dr.length;o++)if(null!=(e=s.Dr[o])&&e!=r&&Si.NaviModelPassType_DECORATE!=e.pass)for(var u=e.br,h=0;h<u.length-1;h++)if(pt.dt(t,n,u[h],u[h+1],i)){var f=pt.ut(t,i),a=pt.ut(n,i);if(!(f<=pt.H()||a<=pt.H()))return!1}for(var c=s.Fr,l=0;l<c.length;l++){for(var v=c[l],d=v.Tr,y=0;y<d.length;y++)for(var b=d[y],p=0;p<b.length-1;p++)if(pt.dt(t,n,b[p],b[p+1],i))return!1;for(var w=v.br,m=0;m<w.length-1;m++)if(pt.dt(t,n,w[m],w[m+1],i))return!1}return!0},Lo:function(t,n,i,r,e,s){for(var o=0;o<this.qs.length;o++){var u=this.qs[o],h={};if(1==pt.dt(u.ir,u.er,n.Ni,i.Ni,h)&&pt.ut(n.Ni,h)>pt.H()&&pt.ut(i.Ni,h)>pt.H())return null}void 0===r&&(r=Si.NaviRoadEntry_BOTH),void 0===e&&(e=!0),void 0===s&&(s=!0);var f=new Ci;f.nr=n.gn,f.ir=n.Ni,f.rr=i.gn,f.er=i.Ni,f.sr=[n.Ni,i.Ni],f.fr=1,this.Ks.push(n.gn),this.Ks.push(i.gn),f.gn=e?this.Xo():this.rs._e(),f.ar=r,f.vr(),s&&this.qs.push(f),this.Ps.get(t).Pr.push(f);var a,c,s=this.Fs.get(t);return Si.NaviRoadEntry_BOTH==r&&(t={ke:i.gn,xi:f.xi},(a=s.rs.Zr.get(n.gn))?a.push(t):((a=[]).push(t),s.rs.Zr.set(n.gn,a)),t={ke:n.gn,xi:f.xi},(a=s.rs.Zr.get(i.gn))?a.push(t):((a=[]).push(t),s.rs.Zr.set(i.gn,a))),Si.NaviRoadEntry_FORWARD==r&&(a={ke:i.gn,xi:f.xi},(c=s.rs.Zr.get(n.gn))?c.push(a):((c=[]).push(a),s.rs.Zr(n.gn,c))),Si.NaviRoadEntry_BACK==r&&(c={ke:n.gn,xi:f.xi},(r=s.rs.Zr.get(i.gn))?r.push(c):((r=[]).push(c),s.rs.Zr.set(i.gn,r))),f},Po:function(t){var n=this.fo(t),i=this.Zs.get(n);if(i)for(var r=0;r<i.length;r++){var e=i[r];if(pt.st(t,e.br,e.pr))return e}return null},Xo:function(){return this.Gs--}});var dr=y;function yr(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function br(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pr(t,n,i){return n&&br(t.prototype,n),i&&br(t,i),t}var wr=function(){function r(t){if(yr(this,r),t instanceof Number){this.ru=t,this.eu=[];for(var n=0;n<t;n++)this.eu.push(null)}if(t instanceof Array){this.su=t,this.eu=[];for(var i=0;i<t.length;i++)this.eu.push(null)}}return pr(r,[{key:"size",value:function(){return this.eu.length}},{key:"set",value:function(t,n){if(t<0||t>=this.size())throw"positon is out of bounder";this.eu[t]=n}},{key:"get",value:function(t){var n=t;return"string"==typeof t&&(n=this.su.indexOf(t)),this.eu[n]}},{key:"toArray",value:function(){for(var t=[],n=0;n<this.eu.length;n++)t.push(this.eu[n]);return t}},{key:"equals",value:function(t){if(this.eu.length!=t.eu.length)return!1;if(this.su.length!=t.su.length)return!1;for(var n=0;n<this.su.length;n++)if(this.su[n]!=t.su[n])return!1;return!0}},{key:"clone",value:function(){for(var t=0==this.su.length?new r(this.eu.length):new r(this.su),n=0;n<this.eu.length;n++)t.eu[n]=this.eu[n];return t}}]),r}(),mr=function(){function i(t){yr(this,i),this.su=t,this.ou=[]}return pr(i,[{key:"append",value:function(t){if(t instanceof wr){if(!new wr(t.su).equals(t))throw"the appended item is not compatible to the TupleTable";this.ou.push(t)}else{var n,i=new wr(this.su);for(n in t){var r=this.su.indexOf(n);0<=r&&i.set(r,t[n])}this.ou.push(i)}}},{key:"query",value:function(t,n){for(var i=0;i<this.ou.length;i++){var r=this.ou[i];if(r.get(t)==n)return r}return null}},{key:"foreach",value:function(t,n){n=n||-1;for(var i=0;i<this.ou.length;i++)t(n<0?this.ou[i]:this.ou[i].get(n))}},{key:"size",value:function(){return this.ou.length}},{key:"clone",value:function(){for(var t=new i(this.su),n=0;n<this.ou.length;n++)t.append(this.ou[n].clone());return t}},{key:"dropLines",value:function(t){for(var n=0;n<this.ou.length;n++){var i,r=!0;for(i in t)if(this.ou[n].get(i)!=t[i]){r=!1;break}r&&(this.ou.splice(n,1),n--)}}},{key:"clear",value:function(){this.ou=[]}}]),i}();function _r(){var n=[],i=0;this.getLength=function(){return n.length-i},this.isEmpty=function(){return 0==n.length},this.enqueue=function(t){n.push(t)},this.dequeue=function(){if(0!=n.length){var t=n[i];return 2*++i>=n.length&&(n=n.slice(i),i=0),t}},this.peek=function(){return 0<n.length?n[i]:void 0}}function gr(t){return function(t){if(Array.isArray(t))return Er(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Or(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Or(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw e}}}}function Or(t,n){if(t){if("string"==typeof t)return Er(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Er(t,n):void 0}}function Er(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function jr(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function i(t,n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),this.gn=t,this.Ns=null,this.Is=null,this.rs=n,this.Ls=new Map,this.Ps=new Map,this.Ds=null,this.uu=new Map,this.Cs=[],this.Us=Number.INT_MIN,this.Bs=Number.INT_MIN,this.Gs=-1,this.es=null,this.ss=null,this.as=s.MODULE_SHORTEST,this.Zs=new Map,this.Ws=new Map,this.Vs=new Map,this.Ys=[],this.Xs=[],this.qs=[],this.zs=[],this.Hs=100,this.Qs=-1,this.Js=15,this.$s=.1,this.hu=[],this.fu=[],this.au=[],this.eo(),this.so(),this.oo(),this.uo(),this.ho(),this.cu=new mr(["num","id","idx","node"]),this.lu=new Map,this.vu=new _r,this.Bi=!1,this.du=[]}var t,n,r;return t=i,(n=[{key:"level",get:function(){return this.gi},set:function(t){this.gi=t}}])&&jr(t.prototype,n),r&&jr(t,r),i}();Object.assign(y.prototype,{yu:function(t){this.bu=null==t?[]:t,this.pu()},wu:function(t){var n;t instanceof Ni?(this.es=t,this.cu.append({num:this.cu.size(),id:t.gn,idx:this.rs.Me(t.gn),node:t})):(n=new Ni,this.mu(t,n)||this.fu.push(t),this.es=n,this.cu.append({num:this.cu.size(),id:n.gn,idx:this.rs.Me(n.gn),node:n}))},_u:function(t){var n;t instanceof Ni?(this.ss=t,this.cu.append({num:this.cu.size(),id:t.gn,idx:this.rs.Me(t.gn),node:t})):(n=new Ni,this.mu(t,n)||this.fu.push(t),this.ss=n,this.cu.append({num:this.cu.size(),id:n.gn,idx:this.rs.Me(n.gn),node:n}))},gu:function(t,n){for(var i=0,r=0;r<n.length;r++){var e=(t.x-n[r][0])*(t.x-n[r][0])+(t.y-n[r][1])*(t.y-n[r][1]);i+=Math.sqrt(e)}return i},xu:function(){for(var t=this.rs.getAllLifts(),n=0;n<t.length;n++)t[n].dist=this.gu(t[n].Ni,this.Ou().bu),t[n].dist+=this.gu(t[n].Ni,this.bu),t[n].dist=t[n].dist/(0==this.Ou().bu.length?1:this.Ou().bu.length),t[n].Wi==Si.NaviLiftType_Escalator&&(t[n].dist-=25),t[n].Wi==Si.NaviLiftType_Lift&&(t[n].dist-=25);t.sort(function(t,n){return t.dist-n.dist});for(var i=0;i<t.length;i++){var r=t[i];if(-1!=r.Ii.indexOf(this.Ou().gid)&&this.Ou().Eu(r.Pi))return r}return null},ju:function(t){for(var n=this.rs.getAllLifts(),i=t.gid,r=this.gid,e=0;e<n.length;e++){var s=n[e];if((Si.NaviLiftType_Stair==s.Wi||-1!=s.Ii.indexOf(i))&&null!=t.Eu(s.Pi))if(s.Vi!=Si.NaviLiftEntry_UP){if(s.Vi!=Si.NaviLiftEntry_DOWN){if(s.Vi==Si.NaviLiftEntry_BOTH)return{related:!0,dist:Math.abs(r-i)}}else if(i<r)return{related:!0,dist:Math.abs(r-i)}}else if(r<i)return{related:!0,dist:Math.abs(r-i)}}return{related:!1,dist:1/0}},Eu:function(t){0==this.du.length&&(this.du=this.rs.getAllLifts());for(var n=0;n<this.du.length;n++)if(this.du[n].Pi==t)return this.du[n];return null},Tu:function(t){var n=this.rs.Fr[0].br;return!!pt.st(t,n,n.length-1)},_s:function(){return this.Cs},un:function(){this.Ns=null,this.Is=null,this.rs.un(),this.rs=null,this.Ls.clear(),this.Ls=null;var t,n=xr(this.Ps);try{for(n.s();!(t=n.n()).done;)t.value[1].un()}catch(t){n.e(t)}finally{n.f()}this.Ps.clear(),(this.Ps=null)!=this.Ds&&(this.Ds.un(),this.Ds=null),this.uu.each(function(t,n){n.un()}),this.uu.clear(),this.uu=null,this.Cs=[],this.es=null,this.ss=null,this.Zs.clear(),this.Zs=null,this.Ws.clear(),this.Ws=null,this.Vs.clear(),this.Ws=null,this.Ys=[],this.Xs=[],this.qs=[],this.zs=[]},$n:function(){this.Cs=[],this.ku(this.Us),this.Us=Number.INT_MIN,this.ku(this.Bs),this.Bs=Number.INT_MIN,this.po(),this.hu=[],this.Gs=-1;for(var t=0;t<this.Ys.length;t++){var n=this.Ys[t];this.wo(n.mo,n.ks,Si.NaviRoadHinderType_HINDER_HIGH)}this.Ys=[],this.Xs=[],this.qs=[],this.zs=[]},Mu:function(t){this.vu.enqueue(t)},Ou:function(){return this.vu.peek()},Ru:function(){return this.vu.dequeue()},Au:function(){this.keyGraph=[];var o=this;this.cu.foreach(function(t){var n=t.get("node"),t=o.cu.clone();t.dropLines({node:n});var i=[];t.foreach(function(t){i.push(t.get("id"))}),o.uu.get(-1).routeMultiDestinations(n.gn,i,o.as);var r=[];o.uu.get(-1).getMultiRoute(r);for(var e=0;e<r.length;e++){var s=r[e];o.keyGraph.push([n.gn,s[s.length-1].gn,function(t){for(var n=0,i=0;i<t.length-1;i++){var r=t[i].Ni.x-t[i+1].Ni.x,e=t[i].Ni.y-t[i+1].Ni.y;n+=Math.sqrt(r*r+e*e)}return n}(s),s])}})},Su:function(){this.Tn=[];for(var t=function(t,n){for(var i=0;i<this.length;i++)if(this[i][0]==t&&this[i][1]==n)return this[i]},n=0;n<this.Nu.route.length-1;n++)for(var i=this.Nu.route[n],r=this.Nu.route[n+1],e=t.apply(this.keyGraph,[i,r]),s=0;s<e[3].xi;s++)this.Tn.push(e[3][s])},Iu:function(){return this.Tn},Mo:function(t){var n=this.rs.Jr(t);if(-1==n)return null;var i=this.Lu(t),r=this.Ps.get(i).findModel(t,-0);if(null==r)return{or:n,ks:null};if(r.pass==Si.NaviModelPassType_PASS_THROUGH||r.pass==Si.NaviModelPassType_PASS_NOT_THROUGH){if(0<r.kr.length)return{or:n,ks:r};for(var e={},s=[],o=[],u=this.Ps.get(i).Pr,h=!0,f=0;f<r.pr;f++)for(var a=r.br[f],c=r.br[f+1],l=0;l<u.length;l++){var v=u[l];1==pt.dt(a,c,v.ir,v.er,e)&&(h=!1,Si.NaviRoadEntry_FORBID!=v.ar&&((v=new Object).x=e.x,v.y=e.y,s.push(v),o.push(u[l])))}if(h)return{or:n,ks:r};if(0==s.length)return null;r.kr=[],r.Rr=[],r.Mr=[];for(var d=0;d<s.length;d++){var y=s[d],b=o[d],y=this.Ro(i,y,b);y.Zi=Si.NaviNodeType_COMMON,b.ar==Si.NaviRoadEntry_BOTH?y.entranceType=Si.NaviEntranceType_ACCESS:pt.st(b.ir,r.br,r.pr)?(b.ar==Si.NaviRoadEntry_FORWARD&&(y.entranceType=Si.NaviEntranceType_EXIT),b.ar==Si.NaviRoadEntry_BACK&&(y.entranceType=Si.NaviEntranceType_ENTRANCE)):(b.ar==Si.NaviRoadEntry_FORWARD&&(y.entranceType=Si.NaviEntranceType_ENTRANCE),b.ar==Si.NaviRoadEntry_BACK&&(y.entranceType=Si.NaviEntranceType_EXIT)),r.kr.push(y),r.Rr.push(y.entranceType),r.Mr.push(y.Zi)}}return r.pass!=Si.NaviModelPassType_NOT_PASS?{or:n,ks:r}:null},ao:function(t,n){var i=this;this.es=this.yo(this.Us,t);var r=null,e=!0,r=null!=this.Ns&&this.Ns.pass==Si.NaviModelPassType_PASS_THROUGH&&0==this.Ns.kr.length?this.Ao(this.Us,t,n,30,this.Ns):this.Ao(this.Us,t,n);if(null==this.Ns&&(e=!1),0<r.size){var s,e=!1,o=xr(r);try{for(o.s();!(s=o.n()).done;)for(var u=s.value[1],h=0;h<u.length;h++)0!=u[h].road.ar&&(e=!0)}catch(t){o.e(t)}finally{o.f()}var f,a=0,c=!1,l=[],v=xr(r);try{for(v.s();!(f=v.n()).done;){var d,y=f.value[1],b=y[0].road,p=this.So(this.Us,t,b,y,this.Ns);0==p.length?a++:Math.abs(p[0].rotateAngle)>pt.H()?l.push.apply(l,gr(p)):(c=!0,d=this.Io(this.Us,p[0].cross,p[0].road),this.Lo(this.Us,this.es,d))}}catch(t){v.e(t)}finally{v.f()}if(c||l.forEach(function(t){t=i.Io(i.Us,t.cross,t.road);i.Lo(i.Us,i.es,t)}),a==r.size)return k.ROUTE_FAILED_NO_DATA_START}if(e){for(var w=!1,m=0;m<this.Ns.kr.length;m++){var _=this.Ns.kr[m],g=this.Ns.Rr[m];g!=Si.NaviEntranceType_EXIT&&g!=Si.NaviEntranceType_ACCESS||(this.Lo(this.Us,this.es,_),w=!0)}if(!w)return k.ROUTE_FAILED_NO_DATA_START}},co:function(t,n){var i=this;this.ss=this.yo(this.Bs,t);var r=null,e=!0,r=null!=this.Is&&this.Is.pass==Si.NaviModelPassType_PASS_THROUGH&&0==this.Is.kr.length?this.Ao(this.Bs,t,n,30,this.Is):this.Ao(this.Bs,t,n);if(null==this.Is&&(e=!1),0<r.size){var s,e=!1,o=xr(r);try{for(o.s();!(s=o.n()).done;)for(var u=s.value[1],h=0;h<u.length;h++)0!=u[h].road.ar&&(e=!0)}catch(t){o.e(t)}finally{o.f()}var f,a=0,c=!1,l=[],v=xr(r);try{for(v.s();!(f=v.n()).done;){var d,y=f.value[1],b=y[0].road,p=this.So(this.Bs,t,b,y,this.Is);0==p.length?a++:Math.abs(p[0].rotateAngle)>pt.H()?l.push.apply(l,gr(p)):(c=!0,d=this.Io(this.Bs,p[0].cross,p[0].road),this.Lo(this.Bs,this.ss,d))}}catch(t){v.e(t)}finally{v.f()}if(c||l.forEach(function(t){t=i.Io(i.Bs,t.cross,t.road);i.Lo(i.Bs,i.ss,t)}),a==r.size)return k.ROUTE_FAILED_NO_DATA_DEST}if(e){for(var w=!1,m=0;m<this.Is.kr.length;m++){var _=this.Is.kr[m],g=this.Is.Rr[m];g!=Si.NaviEntranceType_EXIT&&g!=Si.NaviEntranceType_ACCESS||(this.Lo(this.Bs,this.ss,_),w=!0)}if(!w)return k.ROUTE_FAILED_NO_DATA_DEST}},mu:function(t,n){var i=this;t instanceof Array&&2==t.length&&(t={x:t[0],y:t[1]});var r=null,e=!0,s={x:0,y:0},o=this.rs.getModelByPoint(t),u=this.rs.getZoneIdByPoint(t),h=this.yo(u,t);if(Object.assign(n,h),null==o&&(e=!1),0<(r=null!=o&&o.pass==Si.NaviModelPassType_PASS_THROUGH&&0==o.kr.length?this.Ao(u,t,s,30,o):this.Ao(u,t,s)).size){var f,e=!1,a=xr(r);try{for(a.s();!(f=a.n()).done;)for(var c=f.value[1],l=0;l<c.length;l++)0!=c[l].road.ar&&(e=!0)}catch(t){a.e(t)}finally{a.f()}var v,d=0,y=!1,b=[],p=xr(r);try{for(p.s();!(v=p.n()).done;){var w,m=v.value[1],_=m[0].road,g=this.So(u,t,_,m,o);0==g.length?d++:Math.abs(g[0].rotateAngle)>pt.H()?b.push.apply(b,gr(g)):(y=!0,w=this.Io(u,g[0].cross,g[0].road),this.Lo(u,n,w))}}catch(t){p.e(t)}finally{p.f()}if(y||b.forEach(function(t){t=i.Io(u,t.cross,t.road);i.Lo(u,n,t)}),d==r.size)return!1}if(e){for(var x=!1,O=0;O<o.kr.length;O++){var E=o.kr[O],j=o.Rr[O];j!=Si.NaviEntranceType_EXIT&&j!=Si.NaviEntranceType_ACCESS||(this.Lo(u,n,E),x=!0)}if(!x)return!1}return!0},ms:function(){var t=this.Po(this.es.Ni);t&&(this.wo(this.Us,t,Si.NaviRoadHinderType_HINDER_GENERAL),this.Ys.push({mo:this.Us,ks:t}));t=this.Po(this.ss.Ni);if(t&&(this.wo(this.Bs,t,Si.NaviRoadHinderType_HINDER_GENERAL),this.Ys.push({mo:this.Bs,ks:t})),this.Cs=[],this.Us==this.Bs){var n=this.uu.get(this.Us),i=n.ms(this.es,this.ss,this.as);if(i!=k.ROUTE_SUCCESS)return i;var r=n._s();this.Cs=[],r.reverse(),(i=this.Cs).push.apply(i,gr(r))}else{if(-1!=this.Us&&-1==this.Bs){var n=this.Do(this.es.Ni,this.Us,Si.NaviEntranceType_EXIT),i=this.uu.get(this.Us),r=i.ms(this.es,n,this.as);if(r!=k.ROUTE_SUCCESS)return r;var e=i._s(e),i=this.uu.get(-1);if((r=i.ms(n,this.ss,this.as))!=k.ROUTE_SUCCESS)return r;r=i._s();e.reverse(),r.reverse(),(i=this.Cs).push.apply(i,gr(e)),(e=this.Cs).push.apply(e,gr(r))}if(-1==this.Us&&-1!=this.Bs){var s=this.Do(this.ss.Ni,this.Bs,Si.NaviEntranceType_ENTRANCE),o=this.uu.get(this.Bs),u=o.ms(s,this.ss,this.as);if(u!=k.ROUTE_SUCCESS)return u;var h=o._s(),o=this.uu.get(-1);if((u=o.ms(this.es,s,this.as))!=k.ROUTE_SUCCESS)return u;s=o._s();s.reverse(),h.reverse(),(u=this.Cs).push.apply(u,gr(s)),(o=this.Cs).push.apply(o,gr(h))}if(-1!=this.Us&&-1!=this.Bs){var u=this.Do(this.es.Ni,this.Us,Si.NaviEntranceType_EXIT),s=this.uu.get(this.Us),o=s.ms(this.es,u,this.as);if(o!=k.ROUTE_SUCCESS)return o;var f=s._s(f),h=this.Do(this.ss.Ni,this.Bs,Si.NaviEntranceType_ENTRANCE),s=this.uu.get(this.Bs);if((o=s.ms(h,this.ss,this.as))!=k.ROUTE_SUCCESS)return o;var a=s._s(a),s=this.uu.get(-1);if((o=s.ms(u,h,this.as))!=k.ROUTE_SUCCESS)return o;o=s._s();f.reverse(),o.reverse(),a.reverse(),(s=this.Cs).push.apply(s,gr(f)),(f=this.Cs).push.apply(f,gr(o)),(o=this.Cs).push.apply(o,gr(a))}}return k.ROUTE_SUCCESS},Fo:function(t,n,i){for(var r=0;r<n;r++)if(null!=t[r]&&t[r].gn==i)return r;return-1},Lu:function(t){for(var n=this.rs.Ur,i=0;i<n.length;i++){var r=n[i];if(r.Er(t))return r.gn}return-1},eo:function(){for(var t=this.rs.Ur,n=0;n<t.length;n++){var i=t[n],r=this.Co(this.rs,i);this.Ps.set(i.gn,r)}this.Ps.set(-1,this.rs);var e,s=xr(this.Ps);try{for(s.s();!(e=s.n()).done;){var o=e.value;o[1].Qr(),this.uu.set(o[0],new ir(o[1]))}}catch(t){s.e(t)}finally{s.f()}},Co:function(t,n){if(t&&n){for(var i,r=0,e=0,s=t.Pr.length,o=t.Lr.length,u=t.Pr,h=t.Lr,f=0,a=new Int8Array(s),c=0;c<s;c++)u[c]&&u[c].ar!=Si.NaviRoadEntry_FORBID&&(i=u[c],r=n.contain(i.ir),e=n.contain(i.er),0==r&&0==e||(f=!0),1==r&&1==e&&(a[c]=1),1==r&&0==e&&(a[c]=2),0==r&&1==e&&(a[c]=3),0==r&&0==e&&(a[c]=4),2==r&&0==e&&(a[c]=6),2==r&&1==e&&(a[c]=7),0==r&&2==e&&(a[c]=8),1==r&&2==e&&(a[c]=9));if(0==f)return null;for(var l,v,d,y,b,p,w=new Array(o),m=new Array(s),_=0,g=new Int8Array(o),x=a.length,O=0,E=x;O<E;O++)0!=a[O]&&6!=a[O]&&8!=a[O]&&1!=a[O]&&u[O]&&(v=(l=u[O]).ar,b=[l.gn],2==a[O]||9==a[O]?(d=null,d=2==a[O]?n.dt(l.ir,l.er):Object.assign({},l.er),(p=new Ni).gn=this.rs.me(),p.Zi=Si.NaviNodeType_COMMON,p.Wi=Si.NaviLiftType_NULL,p.entranceType=Si.NaviEntranceType_ACCESS,p.Ni=Object.assign({},d),(y=new Ci).setRoad(l),y.gn=this.rs._e(),b.push(y.gn),p.segLinks=b,(d=new Ni).setNode(p),v==Si.NaviRoadEntry_FORWARD?d.entranceType=Si.NaviEntranceType_EXIT:v==Si.NaviRoadEntry_BACK&&(d.entranceType=Si.NaviEntranceType_ENTRANCE),n.xr.push(d),_=this.Fo(h,o,y.rr),y.er=Object.assign({},d.Ni),y.sr[1]=Object.assign({},d.Ni),y.rr=d.gn,y.vr(),m[O]=y,w[_]=d,w[_=this.Fo(h,o,y.nr)]=h[_],w[_].segLinks.splice(w[_].segLinks.indexOf(l.gn),1,y.gn),(y=new Ni).setNode(p),l.nr=y.gn,l.ir=Object.assign({},y.Ni),l.sr[0]=Object.assign({},y.Ni),l.vr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.gn),1),h.push(y),g[_]=2):3!=a[O]&&7!=a[O]||(p=null,p=3==a[O]?n.dt(l.ir,l.er):Object.assign({},l.ir),(y=new Ni).gn=this.rs.me(),y.Zi=Si.NaviNodeType_COMMON,y.Wi=Si.NaviLiftType_NULL,y.entranceType=Si.NaviEntranceType_ACCESS,y.Ni=Object.assign({},p),(p=new Ci).setRoad(l),p.gn=this.rs._e(),b.push(p.gn),y.segLinks=b,(b=new Ni).setNode(y),v==Si.NaviRoadEntry_FORWARD?b.entranceType=Si.NaviEntranceType_ENTRANCE:v==Si.NaviRoadEntry_BACK&&(b.entranceType=Si.NaviEntranceType_EXIT),n.xr.push(b),_=this.Fo(h,o,p.nr),p.ir=Object.assign({},b.Ni),p.sr[0]=Object.assign({},b.Ni),p.nr=b.gn,p.vr(),m[O]=p,w[_]=b,w[_=this.Fo(h,o,p.rr)]=h[_],w[_].segLinks.splice(w[_].segLinks.indexOf(l.gn),1,p.gn),(p=new Ni).setNode(y),l.rr=p.gn,l.er=Object.assign({},p.Ni),l.sr[1]=Object.assign({},p.Ni),l.vr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.gn),1),h.push(p),g[_]=2));for(var j,T=0,k=x;T<k;T++)1==a[T]&&((j=u[T])&&(m[T]=j,2!=g[_=this.Fo(h,o,j.nr)]&&(w[_]=h[_],g[_]=1),2!=g[_=this.Fo(h,o,j.rr)]&&(w[_]=h[_],g[_]=1),u[T]=null));for(var M=0;M<o;M++)1==g[M]&&(h[M]=null);for(var x=new qi(w,m,!0,1),R=[],A=t.Dr,S=0;S<A.length;S++){var N=A[S];N&&this.Uo(N,n)&&R.push(N)}return(t=x.Dr).push.apply(t,R),x}},so:function(){var t,n=xr(this.Ps);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1].Dr,s=0;s<e.length;s++){var o,u=e[s];Si.NaviModelPassType_PASS_NOT_THROUGH==u.pass&&((o=this.Zs.get(r))||(o=[],this.Zs.set(r,o)),o.push(u))}}catch(t){n.e(t)}finally{n.f()}},oo:function(){var t,n=xr(this.Ps);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1].Dr,s=0;s<e.length;s++){var o,u=e[s];Si.NaviModelPassType_NOT_PASS==u.pass&&((o=this.Ws.get(r))||(o=[],this.Ws.set(r,o)),o.push(u))}}catch(t){n.e(t)}finally{n.f()}},uo:function(){var t,n=xr(this.Zs);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1],s=this.Ps.get(r).Pr,o=0;o<e.length;o++){for(var u=e[o],h=0;h<s.length;h++){var f,a=s[h].yr();pt.st(a,u.br,u.pr)&&(s[h].xi=s[h].xi*this.Hs,(f=this.Vs.get(u.gn))||(f=[],this.Vs.set(u.gn,f)),f.push(s[h]))}this.wo(r,u,Si.NaviRoadHinderType_HINDER_HIGH)}}catch(t){n.e(t)}finally{n.f()}},pu:function(){for(var t=0;t<this.bu.length;t++){var n=new Ni;this.mu(this.bu[t],n)?(this.au.push(n),this.cu.append({num:this.cu.size(),id:n.gn,idx:this.rs.getIdxByNodeId(n.gn),node:n})):this.fu.push(this.bu[t])}},ho:function(){var t,n=xr(this.Ws);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=i[0],e=i[1],s=this.Ps.get(r).Pr,o=0;o<e.length;o++)for(var u=e[o],h=0;h<s.length;h++){var f=s[h],a=f.ar,c=f.yr();if(pt.st(c,u.br,u.pr-1)){if(f.xi=Number.MAX_VALUE,a==Si.NaviRoadEntry_BOTH||a==Si.NaviRoadEntry_FORWARD){var l=this.Ps.get(r).Zr.get(f.nr);if(l)for(var v=0;v<l.length;v++)l[v].ke==f.rr&&(l[v].xi=f.xi)}if(f.ar==Si.NaviRoadEntry_BOTH||f.ar==Si.NaviRoadEntry_BACK){var d=this.Ps.get(r).Zr.get(f.rr);if(d)for(var y=0;y<d.length;y++)d[y].ke==f.nr&&(d[y].xi=f.xi)}}}}catch(t){n.e(t)}finally{n.f()}},wo:function(t,n,i){var r=this.Vs.get(n.gn);if(r){if(Si.NaviRoadHinderType_HINDER_HIGH==i)for(var e=0;e<r.length;e++){var s=r[e];if(s.vr(),s.xi=r.length*this.Hs,s.ar==Si.NaviRoadEntry_BOTH||s.ar==Si.NaviRoadEntry_FORWARD){var o=this.Ps.get(t).Zr.get(s.nr);if(o)for(var u=0;u<o.length;u++)o[u].ke==s.rr&&(o[u].xi=s.xi)}if(s.ar==Si.NaviRoadEntry_BOTH||s.ar==Si.NaviRoadEntry_BACK){var h=this.Ps.get(t).Zr.get(s.rr);if(h)for(var f=0;f<h.length;f++)h[f].ke==s.nr&&(h[f].xi=s.xi)}}if(Si.NaviRoadHinderType_HINDER_GENERAL==i)for(var a=0;a<r.length;a++){var c=r[a];if(c.vr(),c.ar==Si.NaviRoadEntry_BOTH||c.ar==Si.NaviRoadEntry_FORWARD){var l=this.Ps.get(t).Zr.get(c.nr);if(l)for(var v=0;v<l.length;v++)l[v].ke==c.rr&&(l[v].xi=c.xi)}if(c.ar==Si.NaviRoadEntry_BOTH||c.ar==Si.NaviRoadEntry_BACK){var d=this.Ps.get(t).Zr.get(c.rr);if(d)for(var y=0;y<d.length;y++)d[y].ke==c.nr&&(d[y].xi=c.xi)}}}},Do:function(t,n,i){var r=this.rs.getZone(n);if(null==r)return null;for(var e=this.Ps.get(n).we(t,void 0),s=(e.area,Number.MAX_VALUE),o=null,u=0;u<r.xr.length;u++){var h,f=r.xr[u],a=pt.ut(f.Ni,t);f.entranceType!=Si.NaviEntranceType_ACCESS&&f.entranceType!=i||a<s&&((h=this.Bo(n,f.Ni))!=e&&h.pass==Si.NaviModelPassType_PASS_NOT_THROUGH||(s=a,o=f))}return o},Bo:function(t,n){for(var i=null,t=this.Ps.get(t),r=Number.MAX_VALUE,e=Number.MAX_VALUE,s=null,o=t.Dr,u=0;u<o.length;u++){var h,f=o[u];(h=pt.st(n,f.br,f.br.length-1))<e&&(e=h,s=f),this.$s>h&&((h=f.area)<r&&(r=h,i=f))}return null==i?s:i},Uo:function(t,n){if(t.bb.isSeparate(n.bb))return!1;t=t.Mt;return!!pt.st(t,n.br,n.pr)},Io:function(t,n,i){var r=this.hu.find(function(t){return t==i.nr}),e=this.hu.find(function(t){return t==i.rr});null==r&&this.hu.push(i.nr),null==e&&this.hu.push(i.rr);for(var s=this.zs,o=null,u=0;u<s.length;u++)if(s[u].Zo==i){o=s[u];break}if(null==o)(o={}).Zo=i,s.push(o);else for(;null!=o.Wo;)var h=o.Wo.Zo,o=pt.Vo(n,h.ir,h.er)?o.Wo:o.Yo;i=o.Zo;var f=new Ni;f.gn=this.Xo(),f.Ni=n;var a=new Ci;a.gn=this.Xo(),a.nr=i.nr,a.ir=i.ir,a.rr=f.gn,a.er=f.Ni,a.sr=[i.ir,f.Ni];var c=new Ci;c.gn=this.Xo(),c.nr=f.gn,c.ir=f.Ni,c.rr=i.rr,c.er=i.er,c.sr=[f.Ni,i.er],this.Xs.push(a),this.Xs.push(c);r={};r.Zo=a;e={};e.Zo=c,o.Wo=r,o.Yo=e,f.tempType=1,a.tempType=1,c.tempType=1,a.vr(),c.vr(),a.ar=i.ar,c.ar=i.ar;e=this.Ps.get(t);e.Lr.push(f),e.Pr.push(a),e.Pr.push(c);var l,t=this.uu.get(t).rs;return t.Xr.set(f.gn,e.Lr.length-1),i.ar==Si.NaviRoadEntry_BOTH&&((e=[]).push({ke:i.nr,xi:a.xi}),e.push({ke:i.rr,xi:c.xi}),t.Zr.set(f.gn,e),(e=t.Zr.get(i.nr))||t.Zr.set(i.nr,e=[]),e.push({ke:f.gn,xi:a.xi}),(e=t.Zr.get(i.rr))||t.Zr.set(i.rr,e=[]),e.push({ke:f.gn,xi:c.xi})),i.ar==Si.NaviRoadEntry_FORWARD&&((l=[]).push({ke:i.rr,xi:c.xi}),t.Zr.set(f.gn,l),(l=t.Zr.get(i.nr))||t.Zr.set(i.nr,l=[]),l.push({ke:f.gn,xi:a.xi})),i.ar==Si.NaviRoadEntry_BACK&&((l=[]).push({ke:i.nr,xi:a.xi}),t.Zr.set(f.gn,l),(l=t.Zr.get(i.rr))||t.Zr.set(i.rr,l=[]),l.push({ke:f.gn,xi:c.xi})),f},qo:function(t,n){for(var i=n.length-1;0<=i;i--)if(n[i].gn&&0<n[i].gn)return n.splice(i+1,0,t),i+1;return-1},Ro:function(t,n,i,r){if(r)return this.Io(t,n,i);var e=this.Ps.get(t),s=new Ni;s.gn=e.me(),s.Ni=n;var o=new Ci;o.gn=e._e(),o.nr=i.nr,o.ir=i.ir,o.rr=s.gn,o.er=s.Ni,o.sr=[i.ir,s.Ni];r=new Ci;r.gn=e._e(),r.nr=s.gn,r.ir=s.Ni,r.rr=i.rr,r.er=i.er,r.sr=[s.Ni,i.er];t=[];t.push(o.gn),t.push(r.gn),s.segLinks=t,o.vr(),r.vr(),o.ar=i.ar,r.ar=i.ar;var u,n=e.Lr,t=e.Pr,n=this.qo(s,n);return this.qo(o,t),this.qo(r,t),e.Xr.set(s.gn,n),i.ar==Si.NaviRoadEntry_BOTH&&((n=[]).push({ke:i.nr,xi:o.xi}),n.push({ke:i.rr,xi:r.xi}),e.Zr.set(s.gn,n),(n=e.Zr.get(i.nr))||e.Zr.set(i.nr,n=[]),n.push({ke:s.gn,xi:o.xi}),(n=e.Zr.get(i.rr))||e.Zr.set(i.rr,n=[]),n.push({ke:s.gn,xi:r.xi})),i.ar==Si.NaviRoadEntry_FORWARD&&((u=[]).push({ke:i.rr,xi:r.xi}),e.Zr.set(s.gn,u),(u=e.Zr.get(i.nr))||e.Zr.set(i.nr,u=[]),u.push({ke:s.gn,xi:o.xi})),i.ar==Si.NaviRoadEntry_BACK&&((u=[]).push({ke:i.nr,xi:o.xi}),e.Zr.set(s.gn,u),(u=e.Zr.get(i.rr))||e.Zr.set(i.rr,u=[]),u.push({ke:s.gn,xi:r.xi})),s},zo:function(t){if(null!=t){for(var n=this.Ps.get(t),i=n.Lr.length-1;0<=i;i--){var r=n.Lr[i];if(null==r||0<=r.gn)break;n.Lr.splice(i,1)}for(var e=n.Pr.length-1;0<=e;e--){var s=n.Pr[e];if(null==s||0<=s.gn)break;n.Pr.splice(e,1)}}},Ho:function(t,n){var i=t.get(n);if(i)for(var r=0;r<i.length;r++)i[r].ke<0&&(i.splice(r,1),r--)},Qo:function(t,n){for(var i=t.get(n),r=0;r<i.length;r++)this.Ho(t,i[r].ke);t.remove(n)},Pu:function(t,n,i,r,e,s){e.toDistance=Number.MAX_VALUE,e.Rs=!1,e.rotateAngle=0;for(var o=Number.MAX_VALUE,u={},h=this.Ps.get(t),f=0;f<h.Pr.length;f++){var a,c=h.Pr[f];null!=c&&(!pt.rayCrossSegment(n,i,c.ir,c.er,u)||(a=pt.ut(n,u))<o&&(o=a,e.cross=Object.assign({},u),e.ut=o,e.road=c,e.Rs=!0))}for(var h=this.Ps.get(-1),l={},v=0;v<h.Dr.length;v++){var d=h.Dr[v];if(null!=d&&d!=s&&(Si.NaviModelPassType_DECORATE!=d.pass&&(null==s||!pt.st(s.Mt,d.br,d.br.length-1))))for(var y=d.br.length,b=0;b<y-1;b++)if(pt.rayCrossSegment(n,i,d.br[b],d.br[b+1],l)){var p=pt.ut(n,l);if(p<o)return o=p,e.ks=d,e.ut=Number.MAX_VALUE,e.Rs=!1,e.As=Si.NaviObstructType_MODEL,!1}}for(var w={},m=h.Fr,_=0;_<m.length;_++){for(var g=m[_],x=m[_].Tr,O=0;O<x.length;O++)for(var E=x[O],j=0;j<E.length-1;j++)if(pt.rayCrossSegment(n,i,E[j],E[j+1],w)){var T=pt.ut(n,w);if(T<o)return o=T,e.ks=g,e.ut=Number.MAX_VALUE,e.Rs=!1,e.As=Si.NaviObstructType_EXTENT,!1}for(var k=m[_].br,M=0;M<k.length-1;M++)if(pt.rayCrossSegment(n,i,k[M],k[M+1],w)){var R=pt.ut(n,w);if(R<o)return o=R,e.ks=g,e.ut=Number.MAX_VALUE,e.Rs=!1,e.As=Si.NaviObstructType_EXTENT,!1}}return e.toDistance=pt.ut(e.cross,r),!0},$o:function(t,n){return t.toDistance-n.toDistance},Ko:function(t,n){return n.rotateAngle-t.rotateAngle},ku:function(t){t=this.Ps.get(t);if(t){for(var n=t.Lr,i=n.length-1;0<=i;i--){var r=n[i];if(null==r||0<=r.gn)break;n.splice(i,1)}for(var e=t.Pr,s=e.length-1;0<=s;s--){var o=e[s];if(null==o||0<=o.gn)break;e.splice(s,1)}}},po:function(){var t,n=xr(this.uu);try{for(n.s();!(t=n.n()).done;){for(var i=t.value[1],r=[],e=i.rs.Zr,s=0;s<e.keys.length;s++)e.keys[s]<0&&r.push(e.keys[s]);for(var o=0;o<r.length;o++)this.Qo(i.rs.Zr,r[o]);for(var u=0;u<this.hu.length;u++)this.Ho(e,this.hu[u])}}catch(t){n.e(t)}finally{n.f()}},So:function(t,n,i,r,e){for(var s=[],o=0;o<r.length;o++)if(r[o].ut<pt.H())return s.push(r[o]),s;var u={x:0,y:0};if(pt.bt(n,i.ir,i.er,u)&&this.tu(n,u,{},e)){e={};return e.cross=u,e.Rs=!0,e.road=i,e.rotateAngle=0,e.dist=pt.ut(n,u),s.push(e),s}for(var h={x:u.x-n.x,y:u.y-n.y},f=0;f<r.length;f++){var a=r[f],c={x:a.cross.x-n.x,y:a.cross.y-n.y},c=270<(c=pt.xt(c,h))?c-360:c;a.rotateAngle=c}r.sort(this.Ko);var l,v=null;if(r[r.length-1].rotateAngle<0)return v=r[r.length-1],s.push(v),s;for(var d=0;d<r.length;d++)if(0<r[d].rotateAngle)return v=r[d],0==d?s.push(v):(l=r[d-1],pt.ut(v.cross,i.ir)>pt.ut(l.cross,i.ir)?(s.push(l),s.push(v)):(s.push(v),s.push(l))),s;return s},nu:function(t,n,i,r,e,s){for(var o=e||30,u=0;u<360;u+=o){var h=new hr;this.Pu(t,n,u,i,h,s),1==h.Rs&&r.push(h)}r.sort(this.$o)},Ao:function(t,n,i,r,e){var s=new Map,o=[];for(this.nu(t,n,i,o,r,e);0!=o.length;){var u=o[0],h=s.get(u.road.gn);h?h.push(u):((h=[]).push(u),s.set(u.road.gn,h)),o.splice(0,1)}return s},yo:function(t,n){var i=new Ni;i.gn=this.Xo(),i.Ni=Object.assign({},n);n=this.Ps.get(t);return n.Lr.push(i),this.uu.get(t).rs.Xr.set(i.gn,n.Lr.length-1),i},iu:function(t,n,i){if(i)return this.yo(t,n);i=new Ni;i.gn=this.rs.me(),i.Ni=Object.assign({},n);n=this.Ps.get(t),t=n.Lr,t=this.qo(i,t);return n.Xr.set(i.gn,t),i},tu:function(t,n,i,r){for(var e,s=this.Ps.get(-1),o=0;o<s.Dr.length;o++)if(null!=(e=s.Dr[o])&&e!=r&&Si.NaviModelPassType_DECORATE!=e.pass)for(var u=e.br,h=0;h<u.length-1;h++)if(pt.dt(t,n,u[h],u[h+1],i)){var f=pt.ut(t,i),a=pt.ut(n,i);if(!(f<=pt.H()||a<=pt.H()))return!1}for(var c=s.Fr,l=0;l<c.length;l++){for(var v=c[l],d=v.Tr,y=0;y<d.length;y++)for(var b=d[y],p=0;p<b.length-1;p++)if(pt.dt(t,n,b[p],b[p+1],i))return!1;for(var w=v.br,m=0;m<w.length-1;m++)if(pt.dt(t,n,w[m],w[m+1],i))return!1}return!0},Lo:function(t,n,i,r,e,s){for(var o=0;o<this.qs.length;o++){var u=this.qs[o],h={};if(1==pt.dt(u.ir,u.er,n.Ni,i.Ni,h)&&pt.ut(n.Ni,h)>pt.H()&&pt.ut(i.Ni,h)>pt.H())return null}void 0===r&&(r=Si.NaviRoadEntry_BOTH),void 0===e&&(e=!0),void 0===s&&(s=!0);var f=new Ci;f.nr=n.gn,f.ir=n.Ni,f.rr=i.gn,f.er=i.Ni,f.sr=[n.Ni,i.Ni],this.hu.push(n.gn),this.hu.push(i.gn),f.gn=e?this.Xo():this.rs._e(),f.ar=r,f.vr(),s&&this.qs.push(f),this.Ps.get(t).Pr.push(f);var a,c,s=this.uu.get(t);return Si.NaviRoadEntry_BOTH==r&&(t={ke:i.gn,xi:f.xi},(a=s.rs.Zr.get(n.gn))?a.push(t):((a=[]).push(t),s.rs.Zr.set(n.gn,a)),t={ke:n.gn,xi:f.xi},(a=s.rs.Zr.get(i.gn))?a.push(t):((a=[]).push(t),s.rs.Zr.set(i.gn,a))),Si.NaviRoadEntry_FORWARD==r&&(a={ke:i.gn,xi:f.xi},(c=s.rs.Zr.get(n.gn))?c.push(a):((c=[]).push(a),s.rs.Zr(n.gn,c))),Si.NaviRoadEntry_BACK==r&&(c={ke:n.gn,xi:f.xi},(r=s.rs.Zr.get(i.gn))?r.push(c):((r=[]).push(c),s.rs.Zr.set(i.gn,r))),f},Po:function(t){var n=this.Lu(t),i=this.Zs.get(n);if(i)for(var r=0;r<i.length;r++){var e=i[r];if(pt.st(t,e.br,e.pr))return e}return null},Xo:function(){return this.Gs--}});var Tr=y;function kr(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return Mr(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Mr(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw e}}}}function Mr(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.Du=[]};Object.assign(y.prototype,{Fu:function(t){var n,i=0,r=kr(t);try{for(r.s();!(n=r.n()).done;)for(var e=n.value,s=e[1],o=s.Fr,u=0;u<o.length;u++){var h=o[u].gn,f=s.Fe(h),a=new Tr(i++,f);a.gi=e[0],this.Du.push(a)}}catch(t){r.e(t)}finally{r.f()}},Cu:function(t){for(var n=0;n<this.Du.length;n++)t&&t(this.Du[n])},xi:function(){return this.Du.length},Uu:function(t){return this.Du[t]},Bu:function(t,n){var i,r=this.Du;for(i in r){var e=r[i];if(t==e.gid&&e.Tu(n))return e}return null},Gu:function(t){var n,i=this.Du;for(n in i){var r=i[n];if(r.gn==t)return r}return null}});var Rr=y;function Ar(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Sr(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nr(t,n,i){return n&&Sr(t.prototype,n),i&&Sr(t,i),t}var Ir=function(){function n(t){Ar(this,n),this.adj=t||[]}return Nr(n,[{key:"has",value:function(t){for(var n in this.adj)if(t==n[0])return!0;return!1}},{key:"weight",value:function(t){if(null==t)return null;for(var n in this.adj)if(t==this.adj[n][0])return this.adj[n][1];return null}},{key:"append",value:function(t){this.adj.push(t)}}]),n}(),Lr=function(){function s(t){for(var n in Ar(this,s),this.Zu=new Map,t){var i=t[n][0];t[n][1],t[n][2];this.Zu.has(i)||this.Zu.set(i,new Ir);for(var r=[],e=1;e<t[n].length;e++)r.push(t[n][e]);this.Zu.get(i).append(r)}}return Nr(s,[{key:"get",value:function(t){return this.Zu.has(t)?this.Zu.get(t):null}},{key:"lookup",value:function(t,n){return this.Zu.has(t)?this.Zu.get(t).weight(n):null}},{key:"keys",value:function(){return this.Zu.keys}},{key:"enhance",value:function(t,n,i){i=i||[];for(var r,e,s=this.keys(),o=1/0,u={dist:1/0,transit:null},h=0;h<s.length;h++)-1==i.indexOf(s[h])&&(r=this.lookup(t,s[h]),e=this.lookup(s[h],n),null!=r&&null!=e&&r+e<o&&(u={dist:r+e,transit:s[h]},o=r+e));return u}}]),s}();function Pr(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Dr(t){Pr(this,Dr),this.Wu=t||[]}Object.assign(Dr.prototype,{Vu:function(t){for(var n=-1,i=0;i<this.Wu.length;i++)if(this[i]==t){n=i;break}n<0||this.Wu.splice(n,1)},Yu:function(t){for(var n=[],i=0;i<this.Wu.length;i++)n.push(this.Wu[i]);for(var r=-1,e=0;e<n.length;e++)if(n[e]==t){r=e;break}if(!(r<0))return n.splice(r,1),n},Xu:function(){for(var t=[],n=0;n<this.Wu.length;n++)t.push(this.Wu[n]);return t},qu:function(){return this.Wu.length}});y=function t(n){Pr(this,t),0!=n.length&&(this.Zu=new Lr(n))};Object.assign(y.prototype,{zu:function(t){return this.Hu=t,this},Qu:function(t){return this.Ju=t,this},$u:function(t){return this.Wu=t,this},Nu:function(){this.Tn=this.Ku(this.Hu,this.Ju,this.Wu)},Iu:function(){return this.Tn},Ku:function(t,n,i){if(0==i.length){if(t==n)return{route:[t],dist:0};var r=this.Zu.lookup(t,n);if(null!=r)return{route:[t,n],dist:r};r=this.Zu.enhance(t,n,this.Wu);return{route:[t,r.transit,n],dist:r.dist}}for(var e=new Dr(i),s=e.Xu(),o=1/0,u=[],h=0;h<e.qu();h++){var f,a=s[h],c=this.Nu(t,a,e.Yu(a));null!=c.dist&&(null==(f=this.Zu.lookup(a,n))?(f=(a=this.Zu.enhance(a,n,this.Wu)).dist)+c.dist<o&&(o=f+c.dist,c.route.push(a.transit),c.route.push(n),u=c.route):f+c.dist<o&&(o=f+c.dist,c.route.push(n),u=c.route))}return{route:u,dist:o}}});var Fr=y;y=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.th=null,this.nh=[]};Object.assign(y.prototype,{Hn:function(t){if(0!=t.length){this.th=t[0];for(var n=this.th,i=1;i<t.length;i++)n.Mu(t[i]),n=t[i];n.Mu(null)}},ih:function(t,n){var i=this.th;for(i.setStart(t);i.Ou();){if(!i.computeKeyRoutes())return!1;this.nh.push({gi:i.gid,Tn:i.Iu()}),i=i.Ru()}i.setEnd(n),i.computeKeyRoutes(),this.nh.push({gi:i.gid,Tn:i.Iu()})}});var Cr=y;function Ur(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function e(t,n,i,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.rh=t,this.eh=n,this.sh=i,this.Du=r,this.oh={}}var t,n,i;return t=e,(n=[{key:"routes",get:function(){return this.nh},set:function(t){this.nh=t}},{key:"failInsertedPts",get:function(){return this.oh}}])&&Ur(t.prototype,n),i&&Ur(t,i),e}();Object.assign(y.prototype,{uh:function(){var t,n={};for(t in this.sh)for(var i=this.sh[t],r=0;r<i.length;r++){var e=i[r],s=this.Du.getDijkByPoint(t,{x:e[0],y:e[1]});s?(n[s.gn]||(n[s.gn]=[]),n[s.gn].push(e)):(null==this.oh[t]&&(this.oh[t]=[]),this.oh[t].push(e))}this.sh=n},hh:function(){this.fh=[];for(var t=0;t<this.Du.qu();t++)for(var n,i,r=this.Du.get(t),e=0;e<this.Du.qu();e++)t!=e&&(n=this.Du.get(e),(i=r.ju(n)).related&&this.fh.push([r.gn,n.gn,i.dist]))},ah:function(){this.$n(),this.hh(),this.uh();var t,n=[];for(t in this.sh)n.push(parseInt(t));var i=this.Du.getDijkByPoint(this.rh.level,this.rh).gn,r=this.Du.getDijkByPoint(this.eh.level,this.eh).gn,e=new Fr(this.fh);e.zu(i),e.Qu(r);i=n.indexOf(i);-1!=i&&n.splice(i,1),-1!=(i=n.indexOf(r))&&n.splice(i,1),e.$u(n),e.Nu();var s=e.Iu();if(2==s.route.length&&s.route[0]==s.route[1]&&(s.route=[s.route[0]]),s.dist!=1/0){for(var o=[],u=0;u<s.route.length;u++){var h=this.Du.getDijkById(s.route[u]);if(h.setWayPoints(this.sh[s.route[u]]),o.push(h),0<h.fu.length){null==this.oh[h.fid]&&(this.oh[h.fid]=[]);for(var f=0;f<h.fu.length;f++)this.oh[h.fid].push(h.fu[f])}}this.ch=new Cr,this.ch.load(o),this.ch.compute(this.rh,this.eh),this.nh=this.ch.routes}},$n:function(){this.Du.each(function(t){t.vu=new(void 0),t.es=null,t.ss=null,t.Bi=!1,t.au=[],t.fu=[]})}});var Br=y;function Gr(t){return function(t){if(Array.isArray(t))return Vr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Wr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Wr(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw e}}}}function Wr(t,n){if(t){if("string"==typeof t)return Vr(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Vr(t,n):void 0}}function Vr(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function Yr(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.Bt=t,this.ir=null,this.lh=null,this.er=null,this.vh=null,this.dh=null,this.as=s.MODULE_SHORTEST,this.yh=p.PRIORITY_DEFAULT,this.bh=new Map,this.ph=null,this.wh=new Map,this.mh=new Map,this._h=[],this.gh=[],this.xh=[],this.Oh=[],this.Tn=[],this.Eh=1,this.jh=.1,this.Th=1,this.kh=10,this.Mh=.1,this.Rh=1,this.Ah=10,this.Sh=.1,this.Nh=1,this.Ih=10,this.He=null,this.Lh=null,this.Ph=null,this.Dh=!1,this.Ns=null,this.Is=null,this.Fh=null,this.Ch=[]}var t,i,r;return t=n,(i=[{key:"assginedInfos",get:function(){return this.Ch},set:function(t){this.Ch=t}},{key:"passPts",set:function(t){this.sh=t}},{key:"failedInsertedPts",get:function(){return this.oh}},{key:"toDoors",get:function(){return this.Dh},set:function(t){this.Dh=t}}])&&Yr(t.prototype,i),r&&Yr(t,r),n}();Object.assign(y.prototype,{di:function(t){t&&t.scene&&t.floors&&(this.He=t.scene,this.Lh=new nr,0!=(t=t.floors).size&&(this.Uh(t),this.Bh(),this.Ph=new Rr,this.Ph.Fu(this.bh)))},un:function(){this.Bt=null,this.He=null,this.Lh&&(this.Lh.un(),this.Lh=null);var t,n=Zr(this.bh);try{for(n.s();!(t=n.n()).done;)t.value[1].un()}catch(t){n.e(t)}finally{n.f()}this.bh.clear(),this.bh=null,this.ph.un(),this.ph=null;var i,r=Zr(this.wh);try{for(r.s();!(i=r.n()).done;)i.value[1].un()}catch(t){r.e(t)}finally{r.f()}this.wh.clear(),this.wh=null,this.mh.clear(),this.mh=null,this._h=null,this.gh=null,this.xh=null,this.Oh=null,this.Tn=null},Gh:function(t,n){return this.naviAdapter=new Br(t,n,this.sh,this.Ph),this.naviAdapter.ah(),this.Tn=this.naviAdapter.routes,this.oh=this.naviAdapter.failInsertedPts,k.ROUTE_SUCCESS},Zh:function(t){for(var n=0,i=0;i<t.length-1;i++)n+=Math.abs(t[i].gi-t[i+1].gi);return{dist:n,seq:t}},Wh:function(t){for(var n=[],i=0;i<t.length;i++)n.push(this.Zh(t[i]));return n.sort(function(t,n){return t.dist-n.dist}),n},Vh:function(t){t.sort(function(t,n){return t.seq.length-n.seq.length})},do:function(){for(var t in this.Ch){var n=parseInt(t),t=this.wh.get(n);t.assignedPts=this.Ch[n],t.do(),this.Tn.push({gi:n,Tn:t._s()})}},Nu:function(t,l,n,v,d,i){var y=this;this.$n();var r=this.wh.get(t);if(!r)return k.ROUTE_FAILED_NO_DATA_START;var e=r.Mo(l);if(!e)return k.ROUTE_FAILED_NO_DATA_START;this.Ns=e.ks;r=this.wh.get(n);if(!r)return k.ROUTE_FAILED_NO_DATA_DEST;r=r.Mo(v);if(!r)return k.ROUTE_FAILED_NO_DATA_DEST;this.Is=r.ks,this.Tn=[],this.lh=t,this.ir=l,this.vh=n,this.er=v;var s=e.or,o=r.or,b=e.ks,p=r.ks;if(0==s||0==o)return k.ROUTE_FAILED_CANNOT_ARRIVE;var w=null;this.as=d,this.Yh(i);function u(){y.Tn=[];for(var t=[],n=[y.ir],i=0;i<y.xh.length-1;i++){var r=[],e=[];if(!y.Xh(y.xh[i],y.xh[i+1],n[n.length-1],r,e))return k.ROUTE_FAILED_CANNOT_ARRIVE;for(var s=!1,o=0;o<r.length;o++){var u,h=r[o].tr,f=e[o].tr,a=r[o].gi,c=e[o].gi;if(w=0==i?((u=y.wh.get(a)).Ns=b,u.ms(l,h,d)):y.wh.get(a).ms(t[t.length-1],h,d),k.ROUTE_SUCCESS==w){h=y.wh.get(a)._s();if(y.Tn.push({gi:a,Tn:h}),t.push(f),n.push(f.Ni),s=!0,y.xh.length-2==i){h=y.wh.get(c);if(h.Is=p,w=h.ms(f,v,d),k.ROUTE_SUCCESS!=w){y.Tn.splice(y.Tn.length-1,1),s=!1,n.splice(n.length-1,1),t.splice(t.length-1,1);continue}h=h._s();y.Tn.push({gi:c,Tn:h})}if(k.ROUTE_SUCCESS==w)break}}if(!s)return k.ROUTE_FAILED_CANNOT_ARRIVE}return k.ROUTE_SUCCESS}if(t==n&&s==o){var h=this.wh.get(t);if(h.Ns=b,h.Is=p,(w=h.ms(l,v,d))!=k.ROUTE_SUCCESS){for(var f=[],a=0;a<this._h.length;a++)this._h[a].gi==t&&this._h[a].or==s&&f.push(this._h[a]);i=this.qh(f,f[0],1);if(0==i.length)return k.ROUTE_FAILED_OUTLINE;for(var c=this.Wh(i),m=0;m<c.length;m++){this.xh=c[m].seq;var _=u();if(_==k.ROUTE_SUCCESS)return _}return k.ROUTE_FAILED_CANNOT_ARRIVE}h=h._s();this.Tn.push({gi:t,Tn:h})}else{if(this.Hh(t,s,n,o)!=k.ROUTE_SUCCESS)return k.ROUTE_FAILED_OUTLINE;this.xh.reverse();h=u();if(k.ROUTE_SUCCESS!=h){for(var g=null,x=null,O=0;O<this._h.length;O++)this._h[O].gi==t&&this._h[O].or==s&&(g=this._h[O]),this._h[O].gi==n&&this._h[O].or==o&&(x=this._h[O]);h=[];if(h.push([g]),this.Qh(g,x,h),0==h.length)return k.ROUTE_FAILED_OUTLINE;var E=this.Wh(h);this.Vh(E);for(var j=0;j<E.length;j++){this.xh=E[j].seq;var T=u();if(T==k.ROUTE_SUCCESS)return T}return k.ROUTE_FAILED_CANNOT_ARRIVE}}return k.ROUTE_SUCCESS},Jh:function(){if(this.Dh&&(this.Fh=null,this.Is&&0<this.Tn.length)){for(var t,n=this.Tn[this.Tn.length-1].Tn,i={x:-1,y:-1},r=n.length-1;0<r;r--){var e=n[r],s=n[r-1];if(pt.segCrossPolygon(e.Ni,s.Ni,this.Is.br,i)){t=r;break}}n.splice(t);var o=new Ni;o.gn=-1,o.Ni=i,n.push(o),this.Fh=i}for(var u=[],h=0;h<this.Tn.length;h++)1<this.Tn[h].Tn.length&&u.push(this.Tn[h]);for(var f=[],a=0;a<u.length;a++){this.$h(u[a]);for(var c=u[a],l=c.gi,v=c.Tn,d=[],y=0,b=0;b<v.length;b++)d.push(v[b].Ni),b!=v.length-1&&(y+=pt.ut(v[b].Ni,v[b+1].Ni));c=new gi;c.gi=l,c.Ei=v,c.Oi=d,c.xi=y,f.push(c),a!=u.length-1&&(l=this.Kh(u[a]),c=this.tf(u[a+1]),f.push(l),f.push(c))}return f},xo:function(t){for(var n in t){var i=parseInt(n);this.wh.get(i).xo(t[n])}},nf:function(){var t,n=Zr(this.wh);try{for(n.s();!(t=n.n()).done;)t.value[1].Eo()}catch(t){n.e(t)}finally{n.f()}},if:function(){var t,n=Zr(this.wh);try{for(n.s();!(t=n.n()).done;)t.value[1].Fs.get(-1).rf()}catch(t){n.e(t)}finally{n.f()}},$h:function(t){if(t&&t.Tn){var n=t.Tn;if((u=n.length)&&!(u<2)){var i=[];i.push(n[0]);var r=n[0],e=n[u-1];pt.ut(r.Ni,e.Ni),pt.H();for(var s=1;s<u-1;s++){var o=n[s];null!=r&&pt.ut(r.Ni,o.Ni)<pt.H()||null!=e&&pt.ut(e.Ni,o.Ni)<pt.H()||i.push(o)}i.push(e);for(var u=i.length,h=new Array(u),f=0;f<u;f++)h[f]=0;for(var a=1;a<u-1;a++){for(var c=i[a],l=a-1;0!=h[l];)l--;var v=i[l],d=i[a+1];pt.ot(c.Ni,v.Ni,d.Ni)&&(h[a]=1)}for(var y=[],b=0;b<u;b++)0==h[b]&&y.push(i[b]);t.Tn=y}}},_o:function(){var t,n=Zr(this.wh);try{for(n.s();!(t=n.n()).done;)t.value[1]._o()}catch(t){n.e(t)}finally{n.f()}},$n:function(){this.xh=[],this.Oh=[];var t,n=Zr(this.wh);try{for(n.s();!(t=n.n()).done;)t.value[1].$n()}catch(t){n.e(t)}finally{n.f()}},ef:function(i,r){var e=this;if(this.wh.size<=0)return null;var t=this.wh.get(i.level);if(!t)return null;var n=t.rs;if(!n)return null;var s=[];s.push.apply(s,Gr(n.Pr));var o,u=Zr(t.Ps);try{for(u.s();!(o=u.n()).done;){var h=o.value;s.push.apply(s,Gr(h[1].Pr))}}catch(t){u.e(t)}finally{u.f()}var f={},a=n.Jr(i),c={distance:Number.MAX_VALUE,road:null,coords:{level:i.level}},n=null;return s.length&&(s.forEach(function(t){var n;t.ar!=Si.NaviRoadEntry_FORBID&&(r?0<=r.indexOf(t.fr)&&(a!=t.or||(n=pt.at(i,t.ir,t.er,f))<c.distance&&(c.distance=n,c.road=t,c.angle=e.sf(t.ir,t.er),Object.assign(c.coords,f))):a!=t.or||(n=pt.at(i,t.ir,t.er,f))<c.distance&&(c.distance=n,c.road=t,c.angle=e.sf(t.ir,t.er),Object.assign(c.coords,f)))}),n=c),n},sf:function(t,n){var i=new Mi(0,0,1),t=new Mi(t.x,0,t.y),n=new Mi(n.x,0,n.y).clone().sub(t).normalize(),t=n.angleTo(i)*pt.J();return 0<n.clone().cross(i).y?360-t:t},Uh:function(t){this.bh=new Map,this.Lh.Qe(this.He);var n,i=Zr(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,e=r[1].gid;if(null!=e){var s=r[1].geo[0],o=r[1].biz[0],u=r[1].navi[0],h=this.Lh.ns(e,s,o,u);if(0!=h.naviNodes.length&&0!=h.naviSegments.length){var f=new Map,a=this.uf(h,f),c=this.hf(h),l=this.ff(h),v=this.af(h),d=this.cf(h);this.lf(d,a,u,f);var y=new qi(a,c,!0,1);y.gi=e,0!=v.length&&(y.Fr=v),0!=l.length&&(y.Ur=l),0!=d.length&&(y.Dr=d);for(var b=0;b<c.length;b++)c[b].or=y.Jr(c[b].ir);this.bh.set(h.level,y)}}}}catch(t){i.e(t)}finally{i.f()}},uf:function(r,e){var t,s=[];for(t in r.naviNodes)(function(t){var n=r.naviNodes[t];if(null==n.nodeId)return;var i=new Ni;i.gn=n.nodeId,i.Ni={x:parseFloat(n.geoArr.x.toFixed(3)),y:parseFloat(n.geoArr.y.toFixed(3))},i.Zi=n.nodeType,i.Wi=n.liftType,i.Pi=n.liftFlag,i.Vi=n.liftEntry,n.linkSegArr.forEach(function(t){i.Li.push(parseInt(t))}),n.liftFloorArr.forEach(function(t){i.Ii.push(parseInt(t))}),s.push(i),e.set(n.nodeId,t)})(t);return s},hf:function(t){var n,i=[];for(n in t.naviSegments){var r,e=t.naviSegments[n],s=e.geoArr;s&&((r=new Ci).gn=e.segmentId,r.nr=e.snode,r.ir={x:parseFloat(s[0].x.toFixed(3)),y:parseFloat(s[0].y.toFixed(3))},r.rr=e.enode,r.er={x:parseFloat(s[1].x.toFixed(3)),y:parseFloat(s[1].y.toFixed(3))},r.xi=e.length,r.ar=e.entry,r.fr=e.rank,i.push(r))}return i},af:function(t){for(var n=[],i=0,r=t.extentLayer.length;i<r;i++){var e=t.extentLayer[i],s=(s=e.geoArr)||[],s=new Zi(e.eid,t.gid,0,s,e.Mt,e.holes);s.fid=e.fid,n.push(s)}return n},cf:function(t){for(var n=[],i=0,r=t.modelLayer.length;i<r;i++){var e=t.modelLayer[i],s=(s=e.geoArr)||[],s=new Zi(e.eid,t.gid,0,s,e.Mt,e.holes);s.fid=e.fid,s.pass=e.pass,n.push(s)}return n},ff:function(t){for(var n=[],i=0,r=t.naviZones.length;i<r;i++){var e=t.naviZones[i],e=new Bi(e.gn,t.gid,e.type,e.geoArr);n.push(e)}return n},lf:function(t,n,i,r){for(var e=new Map,s=0;s<t.length;s++){var o=t[s];e.set(o.gn,s)}for(var u=0;u<i.naviModels.length;u++)for(var h=i.naviModels[u],f=h.modelid,a=t[e.get(f)],c=0;c<h.doorids.length;c++){var l=h.doorids[c],v=n[r.get(l)];a.kr.push(v);l=h.nodetypes[c],v=h.entrytypes[c];a.Mr.push(l),a.Rr.push(v)}},vf:function(){if(!(this.bh.size()<=0)){var t,n={},i=Zr(this.bh);try{for(i.s();!(t=i.n()).done;){var r,e=t.value[1],s=[];for(r in e.ce(Si.NaviLiftType_Escalator,s),s){var o,u=s[r];u.Pi&&(n[o=u.Pi]?n[o]=n[o].concat(u.Ii):n[o]=u.Ii)}}}catch(t){i.e(t)}finally{i.f()}var h,f=Zr(this.bh);try{for(f.s();!(h=f.n()).done;){var a,c=h.value[1],l=[];for(a in c.ce(Si.NaviLiftType_Escalator,l),l){var v,d=l[a];d.Pi&&(n[v=d.Pi]&&(d.Ii=n[v]))}}}catch(t){f.e(t)}finally{f.f()}}},Bh:function(){this.df(),this.yf();var t=new qi(this._h,this.gh);this.bf=new ir(t);var n,i=Zr(this.bh);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.wh.set(r[0],new dr(r[1]))}}catch(t){i.e(t)}finally{i.f()}},df:function(){this._h=[];var t,n=0,i=Zr(this.bh);try{for(i.s();!(t=i.n()).done;)for(var r=t.value,e=r[1],s=e.Fr,o=0;o<s.length;o++){var u=s[o],h=new tr;h.gn=n++,h.gi=r[0],h.or=u.gn,h.pf=u;for(var f=0;f<e.Lr.length;f++){var a,c,l=e.Lr[f];l.Wi!=Si.NaviLiftType_NULL&&pt.st(l.Ni,u.br,u.pr)&&(a=new Fi,c=e.ie(l.Ni),a.Ki=c,a.zi(l),a.gi=r[0],a.tr=l,a.Wi=l.Wi,h.Ce.push(a))}this._h.push(h)}}catch(t){i.e(t)}finally{i.f()}},yf:function(){this.gh=[];for(var t=0;t<this._h.length;t++)for(var n=this._h[t],i=0;i<this._h.length;i++){var r,e,s=this._h[i];t!=i&&(null!=(r=this.wf(n,s))&&(r*=0==(e=Math.abs(n.gi-s.gi))?1:e,(e=new Ci).nr=n.gn,e.rr=s.gn,e.xi=r,e.ar=Si.NaviRoadEntry_FORWARD,this.gh.push(e)))}},wf:function(t,n){for(var i=Number.MAX_VALUE,r=!1,e=t.gi,s=n.gi,o=e<s?Si.NaviLiftEntry_DOWN:Si.NaviLiftEntry_UP,u=0;u<t.Ce.length;u++){var h=t.Ce[u],f=h.Vi;if(f!=Si.NaviLiftEntry_FORBID&&f!=o){var a=h.Wi;if(p.PRIORITY_LIFTONLY==this.yh){if(Si.NaviLiftType_Lift!=a)continue}else if(p.PRIORITY_ESCALATORONLY==this.yh){if(Si.NaviLiftType_Escalator!=a)continue}else if(p.PRIORITY_STAIRONLY==this.yh){if(Si.NaviLiftType_Stair!=a)continue}else if(p.PRIORITY_ACCESSIBLEONLY==this.yh&&Si.NaviLiftType_Accessible!=a)continue;if(a==Si.NaviLiftType_Stair||-1!=h.Ii.indexOf(s))for(var c=0;c<n.Ce.length;c++){var l=n.Ce[c];if(null!=l&&h.Pi==l.Pi)if(p.PRIORITY_LIFTFIRST==this.yh||p.PRIORITY_DEFAULT==this.yh){if(Si.NaviLiftType_Lift==a||Si.NaviLiftType_Accessible==a)return this.jh;if(Si.NaviLiftType_Escalator==a){var v=this.Rh;v<i&&(i=v),r=!0;break}if(Si.NaviLiftType_Stair==a){v=this.Ih;v<i&&(i=v),r=!0;break}}else if(p.PRIORITY_ESCALATORFIRST==this.yh){if(Si.NaviLiftType_Lift==a||Si.NaviLiftType_Accessible==a){var d=this.Th;d<i&&(i=d),r=!0;break}if(Si.NaviLiftType_Escalator==a)return this.Mh;if(Si.NaviLiftType_Stair==a){d=this.Ih;d<i&&(i=d),r=!0;break}}else if(p.PRIORITY_STAIRFIRST==this.yh){if(Si.NaviLiftType_Lift==a){var y=this.Th;y<i&&(i=y),r=!0;break}if(Si.NaviLiftType_Escalator==a||Si.NaviLiftType_Accessible==a){y=this.mf;y<i&&(i=y),r=!0;break}if(Si.NaviLiftType_Stair==a)return this.Sh}else{if(p.PRIORITY_LIFTFIRST1==this.yh||p.PRIORITY_STAIRFIRST1==this.yh||p.PRIORITY_ESCALATORFIRST1==this.yh)return this.Eh;if(p.PRIORITY_LIFTONLY==this.yh||p.PRIORITY_ESCALATORONLY==this.yh||p.PRIORITY_STAIRONLY==this.yh||p.PRIORITY_ACCESSIBLEONLY==this.yh)return this.Eh}}}}return r?i:null},_f:function(t,n){for(var i=0;i<n.length;i++)if(n[i].Pi==t)return n[i];return null},Yh:function(t){this.yh==t&&this.ph||(this.yh=t,this.yf(),t=new qi(this._h,this.gh),this.ph=new ir(t))},tf:function(t){var n=t.Tn,i=new gi;return i.gi=t.gi,i.Ei.push(n[0]),i.Oi.push(n[0].Ni),i.xi=0,i},Kh:function(t){var n=t.Tn,i=new gi;return i.gi=t.gi,i.Ei.push(n[n.length-1]),i.Oi.push(n[n.length-1].Ni),i.xi=0,i},gf:function(t,n){for(var i=0;i<this._h.length;i++)if(this._h[i].gi==t&&this._h[i].or==n)return this._h[i];return null},Hh:function(t,n,i,r){n=this.gf(t,n),r=this.gf(i,r),r=this.ph.ms(n,r);if(r!=k.ROUTE_SUCCESS)return r;var e=this.ph._s();this.xh=[];for(var s=0;s<e.length;s++)this.xh.push(e[s]);return r},xf:function(t,n){return t.Wi==Si.NaviLiftType_Lift&&n.Wi==Si.NaviLiftType_Lift?t.Ui-n.Ui:t.Wi==Si.NaviLiftType_Lift?-1:n.Wi==Si.NaviLiftType_Lift?1:t.Ui-n.Ui},Of:function(t,n){return t.Wi==Si.NaviLiftType_Escalator&&n.Wi==Si.NaviLiftType_Escalator?t.Ui-n.Ui:t.Wi==Si.NaviLiftType_Escalator?-1:n.Wi==Si.NaviLiftType_Escalator?1:t.Ui-n.Ui},Ef:function(t,n){return t.Wi==Si.NaviLiftType_Stair&&n.Wi==Si.NaviLiftType_Stair?t.Ui-n.Ui:t.Wi==Si.NaviLiftType_Stair?-1:n.Wi==Si.NaviLiftType_Stair?1:t.Ui-n.Ui},jf:function(t,n){if(null==t)return!1;for(var i=0;i<t.length;i++)if(t[i].gn==n.gn)return!0;return!1},Tf:function(t,n){if(null==t)return!1;for(var i=0;i<t.length;i++)if(t[i].ke==n.gn)return!0;return!1},qh:function(t,n,i){var r=this.ph.rs.Zr;if(0==r.size)return[];var e=t.length-1,s=r.get(t[e].gn);if(null==s)return[];if(0==i)return this.Tf(s,n)?(t.push(n),t):[];for(var o=[],u=0;u<s.length;u++){var h,f=s[u];this.jf(t,f)||f.ke==n.gn||(h=t.concat(),f=this.ph.rs.ye(f.ke),h.push(this.ph.rs.Lr[f]),0!=(h=this.qh(h,n,i-1)).length&&o.push(h))}return o},Qh:function(t,n,i){var r=this.ph.rs.Zr;if(0!=r.size){for(var e=-1,s=0;s<i.length;s++)i[s].indexOf(t)==i[s].length-1&&(e=s);if(-1!=e){var o=i[e];i.splice(e,1);var u=r.get(t.gn);if(null!=u)for(var h=0;h<u.length;h++){var f,a=this._h[u[h].ke];this.jf(o,a)||((f=[]).push.apply(f,Gr(o)),f.push(a),i.push(f),a.gn!=n.gn&&this.Qh(a,n,i))}}}},kf:function(t,n,i){for(var r=t.Ce,e=i.Ce,s=0;s<r.length;s++){var o=r[s];o.Ui=pt.distanceOfTwoPoints(o.Ni,n)}p.PRIORITY_DEFAULT==this.yh||p.PRIORITY_LIFTONLY==this.yh||p.PRIORITY_LIFTONLY==this.yh?r.sort(this.xf):p.PRIORITY_ESCALATORFIRST==this.yh||p.PRIORITY_ESCALATORONLY==this.yh?r.sort(this.Of):p.PRIORITY_STAIRFIRST!=this.yh&&p.PRIORITY_STAIRONLY!=this.yh||r.sort(this.xf);for(var u=null,h=null,f=!1,a=0;a<r.length;a++){for(var c=r[a],l=c.Pi,v=0;v<e.length;v++)if(e[v].Pi==l){u=c,h=e[v],f=!0;break}if(f)break}return null==u||null==h?null:{startLiftNodes:u,endLiftNodes:h}},Mf:function(t,n,i,r,e){this.dh=this.wh.get(t.gi).rs.ie(i);for(var s=t.queryLiftNodes(this.dh,i,this.er,this.yh),o=0;o<s.length;o++){var u=s[o];if(Si.NaviLiftType_Stair!=u.Wi)if(-1==u.Ii.indexOf(n.gi))continue;for(var h=0;h<n.Ce.length;h++){var f=n.Ce[h];if(u.Pi==f.Pi){r.push(u),e.push(f);break}}}return 0==r.length},Xh:function(i,t,n,r,e){this.dh=this.wh.get(i.gi).rs.ie(n);var s=[];function o(t,n){n=i.Ge(t,n);s.push.apply(s,Gr(n))}for(var u=i.Ce,h=0;h<u.length;h++){var f=u[h];f.Ui=pt.ut(f.Ni,this.er)+pt.ut(f.Ni,n)}var a=i.pf.St.size,c=a.x+a.y;p.PRIORITY_LIFTONLY!=this.yh&&p.PRIORITY_ESCALATORONLY!=this.yh&&p.PRIORITY_STAIRONLY!=this.yh&&p.PRIORITY_ACCESSIBLEONLY!=this.yh||(a=null,p.PRIORITY_LIFTONLY==this.yh&&(a=Si.NaviLiftType_Lift),p.PRIORITY_ESCALATORONLY==this.yh&&(a=Si.NaviLiftType_Escalator),p.PRIORITY_STAIRONLY==this.yh&&(a=Si.NaviLiftType_Stair),p.PRIORITY_ACCESSIBLEONLY==this.yh&&(a=Si.NaviLiftType_Accessible),s=i.Ge(a)),p.PRIORITY_LIFTFIRST!=this.yh&&p.PRIORITY_ESCALATORFIRST!=this.yh&&p.PRIORITY_STAIRFIRST!=this.yh&&p.PRIORITY_DEFAULT!=this.yh||(p.PRIORITY_LIFTFIRST!=this.yh&&p.PRIORITY_DEFAULT!=this.yh||(o(Si.NaviLiftType_Lift,-15),o(Si.NaviLiftType_Escalator,-8),o(Si.NaviLiftType_Stair,0)),p.PRIORITY_ESCALATORFIRST==this.yh&&(o(Si.NaviLiftType_Lift,-8),o(Si.NaviLiftType_Escalator,-15),o(Si.NaviLiftType_Stair,0)),p.PRIORITY_STAIRFIRST==this.yh&&(o(Si.NaviLiftType_Lift,-8),o(Si.NaviLiftType_Escalator,0),o(Si.NaviLiftType_Stair,-15))),p.PRIORITY_LIFTFIRST1!=this.yh&&p.PRIORITY_ESCALATORFIRST1!=this.yh&&p.PRIORITY_STAIRFIRST1!=this.yh||(p.PRIORITY_LIFTFIRST1==this.yh&&(o(Si.NaviLiftType_Lift,-c),o(Si.NaviLiftType_Escalator,0),o(Si.NaviLiftType_Stair,0)),p.PRIORITY_ESCALATORFIRST1==this.yh&&(o(Si.NaviLiftType_Lift,0),o(Si.NaviLiftType_Escalator,-c),o(Si.NaviLiftType_Stair,0)),p.PRIORITY_STAIRFIRST1==this.yh&&(o(Si.NaviLiftType_Lift,0),o(Si.NaviLiftType_Escalator,0),o(Si.NaviLiftType_Stair,-c)));var l=this;s.sort(function(t,n){if(t.zone!=n.zone){if(t.zone==l.dh)return-1;if(n.zone==l.dh)return 1}return t.Ui-n.Ui});for(var v=0;v<s.length;v++){var d=s[v];if(!(1==d.Vi&&t.gi<i.gi)&&!(2==d.Vi&&t.gi>i.gi))for(var y=0;y<t.Ce.length;y++){var b=t.Ce[y];if(d.Pi==b.Pi){r.push(d),e.push(b);break}}}return 0!=r.length}});var Xr=y,qr={zh:{straight:"直行",still_go_straight:"继续直行",back_to:"后退",turn_right:"右转",turn_left:"左转",right_front:"右前方 继续直行",left_front:"左前方 继续直行",turn_right_rear:"右后方转",turn_left_rear:"左后方转",up:"上",down:"下",up_to:"上行到达",down_to:"下行到达",meter:"米",arrived:"到达目的地",front:"前方",stair:"楼梯",stair_pure:"楼梯",escalator_pure:"扶梯",lift_pure:"直梯",take:"乘",take_stair:"乘梯",front_pure:"前",right_front_pure:"右前",right_pure:"右",right_back_pure:"右后",back_pure:"后",left_back_pure:"左后",left_pure:"左",left_front_pure:"左前",east:"东",west:"西",south:"南",north:"北",southeast:"东南",northeast:"东北",southwest:"西南",northwest:"西北",face_to:"向",start:"起",dest:"终"},en:{straight:"go straight",still_go_straight:"go straight",back_to:"back to",turn_right:"turn right",turn_left:"turn left",right_front:"go straight right front ",left_front:"go straight left front ",turn_right_rear:"turn right rear",turn_left_rear:"turn left rear",up:"up",down:"up",up_to:"up to",down_to:"down to",meter:"meter",arrived:"arrived",front:"front",stair:"stair",stair_pure:"stair",escalator_pure:"escalator",lift_pure:"lift",take:"take",take_stair:"take stair",front_pure:"front",right_front_pure:"right front",right_pure:"right",right_back_pure:"right back",back_pure:"back",left_back_pure:"left back",left_pure:"left",left_front_pure:"left front",east:"east",west:"west",south:"south",north:"north",southeast:"southeast",northeast:"northeast",southwest:"southwest",northwest:"northwest",face_to:"face to",start:"start",dest:"dest"}};y=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.Rf=n.data||null,this.Af=n.directionAssert||10,this.Sf=n.combineAsset||5,this.Nf=n.language||o.ZH,this.If=0,this.Lf=[],this.Pf=["north","northeast","east","southeast","south","southwest","west","northwest","north"],this.Df=["front_pure","right_front_pure","right_pure","right_back_pure","back_pure","left_back_pure","left_pure","left_front_pure","front_pure"],this.Ff=["still_go_straight","right_front","turn_right","turn_right_rear","back_to","turn_left_rear","turn_left","left_front","still_go_straight"],this.Cf=!1,this.Uf=0,Object.assign(this,n)};Object.assign(y.prototype,{un:function(){},V:function(t){return this.Bf(t)},Gf:function(t){for(var n=[],i=0;i<t.length;i++)n=n.concat(t[i].Ei);return n},Zf:function(t,n){var i=Math.PI/4,r=t/i,t=parseInt(r),r=r%1*i;return t%2==0?n<r&&(t+=1):i-n<=r&&(t+=1),t},Wf:function(t,n){var i=n.angleTo(t);return i=new Mi(n.x,n.z,n.y).cross(new Mi(t.x,t.z,t.y)).z<0?2*Math.PI-i:i},Vf:function(t,n){if(n==t.length-1)return{index:t[t.length-1].index};var i=new Mi(0,0,1),r=i;0!=n&&((r=t[n].clone().sub(t[n-1]).normalize()).y=0,r.z*=-1);var e=t[n+1].clone().sub(t[n]);e.y=0;var s=e.length(),e=e.normalize();e.z*=-1;i=this.Zf(this.Wf(i,e),22.5*pt.Q()),r=this.Wf(r,e),e=this.Zf(r,this.Af*pt.Q());return{relField:e,relDesc:this.Yf(this.Df[e]),relAngle:r*pt.J(),absField:i,absDesc:this.Yf(this.Pf[i]),distance:s,index:t[n].index}},Kn:function(){var t={center:{x:0,y:0,z:0}};return this.Rf&&(t.center.x=this.Rf.scene.defCenX,t.center.y=this.Rf.scene.defCenY,t.center.z=this.Rf.scene.defCenZ),t},ei:function(t){var n={level:t,height:0,gname:"",desc:""};if(this.Rf)for(var i=this.Rf.scene,r=0;r<i.layerGroups.length;r++){var e=i.layerGroups[r];if(e.gid==t){n.height=e.height,n.gname=e.gname,n.desc=e.desc;break}}return n},Xf:function(t,n){var i=0;return n.level&&(i=this.ei(n.level).height),new Mi(n.x-t.x,t.y+i,-n.y+t.y)},qf:function(t,n){for(var i=this,r=this.Kn().center,e=t.map(function(t,n){t=i.Xf(r,t);return t.index=n,t}),s=[],o=0;o<e.length;o++){var u=this.Vf(e,o);u.point=t[o],u.level=n,s.push(u)}for(var h=[s[0]],f=1;f<s.length;f++)s[f].relAngle<=this.Sf||360-s[f].relAngle<=this.Sf?h[h.length-1].distance+=s[f].distance:h.push(s[f]);return h},zf:function(t){var n="",t=this.ei(t);return null!=t&&(""+(n=this.Nf==o.ZH?t.desc:t.gname.toUpperCase())!="null"&&""+n!=""&&""+n!="undefined"||(n=t.gname.toUpperCase())),n},Hf:function(t,n,i,r,e){var s,o=t[n],u=t[n+1],h=this.Yf(this.Ff[u.relField]);return this.Cf=n==t.length-3&&u.distance<this.If,h&&!this.Cf||(r?(this.Cf=!1,h||(s=this.Qf(t[n+1].point,i,e),e=i<r?this.Yf("up_to"):this.Yf("down_to"),i=this.zf(r),h=this.Yf("take")+s+" "+e+" "+i)):(this.Cf&&(this.Uf=u.distance),h=this.Yf("arrived"))),0==n?2==t.length?this.Yf("face_to")+" "+o.absDesc+" "+this.Yf("straight")+" "+Math.ceil(o.distance)+" "+this.Yf("meter")+" "+h:this.Yf("face_to")+" "+o.absDesc+" "+this.Yf("straight")+" "+Math.ceil(o.distance)+" "+this.Yf("meter")+" "+this.Yf(this.Ff[t[n+1].relField]):this.Yf("straight")+" "+Math.ceil(o.distance+(this.Cf&&!r?u.distance:0))+" "+this.Yf("meter")+" "+h},Jf:function(t,n,i,r){var e=t[n],s=t[n+1];return this.Yf(this.Ff[t[n+1].relField])&&!this.Cf||(r?(i=i<r?this.Yf("up"):this.Yf("down"),s.relDesc=i):s.relDesc=this.Yf("dest")),{startPoint:e.point,startLevel:e.level,startIndex:e.index,endPoint:s.point,endLevel:s.level,endIndex:s.index,startDirection:e.absDesc,endDirection:s.relDesc,distance:e.distance+(this.Cf&&!r?s.distance:0)}},Qf:function(t,n,i){t.z=this.ei(n).height;for(var r,e=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<i.length;o++)i[o]&&((r=Math.pow(i[o].Ni.x-t.x,2)+Math.pow(i[o].Ni.y-t.y,2))<e&&(e=r,s=i[o].Wi));if(-1!=s)switch(s){case 2:return" "+this.Yf("stair_pure");case 3:return" "+this.Yf("escalator_pure");case 1:return" "+this.Yf("lift_pure");default:return""}return this.Yf("stair")},Yf:function(t){t=qr[this.Nf][t];return t||""},Bf:function(t){for(var n,i,r=[],e=[],s=null,o=0,u=[],h=!(this.Lf=[]),f=null,a=null,c=this.Gf(t),l=0;l<t.length;l++){if(n=(i=t[l]).level,s=null,l<t.length-1)for(var v=l;v<t.length;v++)if(t[v].level!=n){s=t[v].level;break}var d,y,b=i.pointList,p=this.qf(b,n);if(1<p.length&&(this.Lf=this.Lf.concat(p)),1==p.length)(s||h)&&(h?e.length&&(l==t.length-1&&(r[r.length-1]+=" "+this.Yf("arrived"),e[e.length-1].endDirection=this.Yf("dest")),e[e.length-1].endPoint=b[0],e[e.length-1].endLevel=n):f!=n&&null!=f||(d=n<s?this.Yf("up_to"):this.Yf("down_to"),y=this.zf(s),a=this.Yf("take_stair")+" "+d+" "+y,r.push(a),e.push({startPoint:b[0],startDirection:n<s?this.Yf("up"):this.Yf("down"),startLevel:n})),h=!h);else for(var f=n,w=0;w<p.length-1&&!this.Cf;w++)r.push(this.Hf(p,w,n,s,c)),e.push(this.Jf(p,w,n,s));1<p.length&&(y=p.reduce(function(t,n){return t+(n.distance||0)},0),u.push({level:n,distance:y}),o+=y)}return[r,e,o,u,this.Uf]}});var zr=y;function Hr(t){return function(t){if(Array.isArray(t))return Qr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return Qr(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qr(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function Jr(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}y=function(){function r(t,n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.Bt=Object.assign({tile:!0,isPreview:!1},t),this.$f=null,this.Kf=[],this.ta=[],this.na=null,this.ai=!!t.map,this.ci=t.map?t.map.getDataManager():new bi,this.li=n,this.vi=i,this.di()}var t,n,i;return t=r,(n=[{key:"setViaPoints",value:function(t){this.$f.passPts=t}},{key:"routePassingPoints",value:function(t,n){this.$f.Gh(t,n)==k.ROUTE_SUCCESS?(this.Kf=this.$f.Jh(),this.failedInsertedPts=this.$f.failedInsertedPts):this.Kf=[]}},{key:"losedPoints",get:function(){return this.$f.failedInsertedPts}},{key:"route",value:function(t,n,i){this.$f.toDoors=void 0!==t.toDoors&&t.toDoors;t=this.$f.Nu(t.start.level,t.start,t.dest.level,t.dest,t.mode||s.MODULE_SHORTEST,t.priority||p.PRIORITY_DEFAULT);t==k.ROUTE_SUCCESS?(this.Kf=this.$f.Jh(),this.ta=[this.ia(this.Kf,{language:o.ZH}),this.ia(this.Kf,{language:o.EN})],this.na=this.$f.Fh,n&&n(this.wi())):i&&i(t)}},{key:"dispose",value:function(){this.ra=null,this.Kf=[],this.ta=[],this.$f&&(this.$f.un(),this.$f=null)}},{key:"pathConstraint",value:function(t,n){return this.$f?this.$f.ef(t,n):null}},{key:"getNaviGraph",value:function(t){return this.$f.bh.get(t)}}])&&Jr(t.prototype,n),i&&Jr(t,i),r}();Object.assign(y.prototype,{di:function(){var t,i=this;this.ai&&(t=this.Bt.map.getMapOptions(),this.Bt.mapID=t.mapID,this.Bt.appName=t.appName,this.Bt.key=t.key,this.Bt.license=t.license,this.Bt.mapURL=t.mapURL,this.Bt.mapURLAbsolute=t.mapURLAbsolute,this.Bt.isPreview="undefined"!=typeof KjWzhWlSj);var n={buildingID:this.Bt.mapID,appName:this.Bt.appName,key:this.Bt.key,license:this.Bt.license,mapURL:this.Bt.mapURL,mapURLAbsolute:this.Bt.mapURLAbsolute,merge:this.Bt.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj};setTimeout(function(){i.Bt.tile?i.ci.load(n,function(t,n){i._i(t,n)}):i.ci.loadWhole(n,function(t,n){i._i(t,n)})},0)},_i:function(t,n){"error"==t&&this.vi&&this.vi(n),"decode"==t&&(this.$f=new Xr(this.Bt),this.$f.di(n),this.li&&this.li())},wi:function(){if(0==this.Kf.length||0==this.ta.length)return null;for(var t={subs:[],levels:[],distance:0},n=this.ta[0].descriptions,i=this.ta[0].descriptionsData,r=this.ta[1].descriptions,e=this.ta[1].descriptionsData,s=[],o=!1,u=0;u<i.length;u++){var h={instruction:{zh:null,en:null},waypoint:{points:null,direction:{zh:null,en:null}},levels:null,distance:Number.NaN},f=n[u],a=i[u],c=r[u],l=e[u];h.instruction.zh=f,h.instruction.en=c,h.levels=[a.startLevel,a.endLevel],h.distance=void 0!==a.distance?a.distance:0,h.waypoint.direction.zh=[a.startDirection,a.endDirection||a.startDirection],h.waypoint.direction.en=[l.startDirection,l.endDirection||l.startDirection],h.levels[0]!=h.levels[1]?(o=!0,s.push.apply(s,Hr(h.levels))):0!=s.length&&s.slice(-1)[0]==h.levels[0]&&!o||(s.push(h.levels[0]),o=!1),h.waypoint.points=this.ea([a.startIndex,a.endIndex],s),t.distance+=h.distance,t.subs.push(h)}for(var v=0;v<s.length;v++)0!=t.levels.length&&t.levels.slice(-1)[0]==s[v]||t.levels.push(s[v]);return t},ea:function(t,n){for(var i=[],r=[],e=0;e<this.Kf.length;e++){var s=this.Kf[e];if(r.push(s.gi),n.toString()==r.toString()){var o=n[n.length-1],u=s.Oi;if(void 0===t[0]||void 0===t[1])i.push(Object.assign({level:s.gi},s.Oi[0])),s=this.Kf[e-1],i.unshift(Object.assign({level:s.gi},s.Oi[0]));else for(var h=t[0];h<=t[1];h++)i.push({x:u[h].x,y:u[h].y,level:o});break}}return i},ia:function(t,n){if(!this.sa(t))return{};t=new zr(Object.assign({data:this.ci.getDecode(this.Bt),directionAssert:10,combineAsset:10,language:o.ZH},n)).V(t);return{descriptions:t[0],descriptionsData:t[1],distance:t[2],distances:t[3]}},oa:function(t){this.$f.Ch=t,this.$f.do(),this.Kf=this.$f.Jh()},ua:function(){return this.Kf},ha:function(t){var n=t||this.Kf;if(!this.sa(n))return[];var i,r=[];for(i in n)n[i].getPointList&&r.push.apply(r,Hr(n[i].pointList));return r},fa:function(t){var n=t||this.Kf;if(!this.sa(n))return[];for(var i=[],r=0;r<n.length;r++){for(var e=n[r],s=e.level,o=e.pointList,u={level:s,points:[]},h=0;h<o.length;h++)u.points.push(Object.assign({},o[h]));i.push(u)}return i},aa:function(t){t=t||this.Kf;if(!this.sa(t))return 0;var n=this.ha(t);if(0==n.length)return 0;for(var i=0,r=0;r<n.length-1;r++)i+=pt.ut(n[r],n[r+1]);return i},ca:function(t){var n=t||this.Kf;if(!this.sa(n))return[];var i,r=[];for(i in n)!n[i].level||0!=i&&r[r.length-1]==n[i].level||r.push(n[i].level);return r},la:function(t,n){var i=n||this.Kf;if(!this.sa(i))return[];var r,e=[];for(r in i)i[r].level&&i[r].level==t&&(e=e.concat(i[r].pointList));return e},sa:function(t){if(!Array.isArray(t))return!1;if(0==t.length)return!1;for(var n=0;n<t.length;n++)if(!(t[n]instanceof gi))return!1;return!0}});var $r,y=y,i=i(28),Kr={VERSION:u,BUILD:h,XMLHttpRequest:i.a,FMType:e,FMNaviMode:s,FMNaviPriority:p,FMRouteResult:k,FMLanguageType:o,FMSearchRequest:Yt,FMSearchAnalyser:vn,FMNaviAnalyser:y},y=jn.a.global(),te=void 0!==y?y.fengmap:{};for($r in void 0===te&&(te={}),Kr)te[$r]=Kr[$r];void 0!==y&&(y.fengmap=te);n.default=te}],f={},g.m=d,g.c=f,g.d=function(t,n,i){g.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},g.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"va",{value:!0})},g.t=function(n,t){if(1&t&&(n=g(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.va)return n;var i=Object.create(null);if(g.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)g.d(i,r,function(t){return n[t]}.bind(null,r));return i},g.n=function(t){var n=t&&t.va?function(){return t.default}:function(){return t};return g.d(n,"a",n),n},g.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},g.p="",g(g.s=50).default;function g(t){if(f[t])return f[t].exports;var n=f[t]={i:t,l:!1,exports:{}};return d[t].call(n.exports,n,n.exports,g),n.l=!0,n.exports}var d,f});